(globalThis.webpackChunk_flippingbook_publication=globalThis.webpackChunk_flippingbook_publication||[]).push([[11],{7005:(t,e,s)=>{s(4147).register({clipboard:{width:16,height:16,viewBox:"0 0 100 100",data:'<path pid="0" d="M83.312 32.26h-4.687v-4.155c-.015-8.518-6.894-15.481-15.488-15.484H56.86a9.545 9.545 0 00-9.349-7.622H36.26a9.546 9.546 0 00-9.35 7.622h-6.422C11.942 12.636 5.014 19.561 5 28.105v51.412c.003 8.59 6.968 15.468 15.489 15.483H63.137l.111-.022h20.065c6.456-.003 11.685-5.23 11.688-11.684V43.945c-.004-6.455-5.232-11.682-11.689-11.685zM34.896 14.541a1.368 1.368 0 011.364-1.363h11.251a1.367 1.367 0 011.363 1.363v2.037l-.027.132.027.132v2.103a1.367 1.367 0 01-1.363 1.363H36.26a1.368 1.368 0 01-1.364-1.363v-4.404zM13.18 79.517V28.105c.001-2.009.813-3.815 2.15-5.157 1.343-1.336 3.15-2.147 5.159-2.149h6.415c.865 4.381 4.719 7.684 9.356 7.687h11.251c4.637-.002 8.492-3.306 9.356-7.687h6.27a7.306 7.306 0 017.308 7.306v4.155H54.862c-6.457.003-11.686 5.229-11.688 11.684v39.349c.001 1.239.246 2.409.602 3.529H20.489a7.306 7.306 0 01-7.309-7.305zm73.64 3.776a3.515 3.515 0 01-3.508 3.507h-28.45a3.515 3.515 0 01-3.508-3.507V43.945a3.515 3.515 0 013.508-3.507h28.45a3.515 3.515 0 013.508 3.507v39.348z"/><path pid="1" d="M77.268 45.9H60.907a4.089 4.089 0 100 8.178h16.361a4.09 4.09 0 100-8.178zM77.268 59.53H60.907a4.089 4.089 0 100 8.178h16.361a4.09 4.09 0 100-8.178zM77.268 73.16H60.907a4.089 4.089 0 100 8.178h16.361a4.09 4.09 0 100-8.178z"/>'}})},6174:(t,e,s)=>{s(4147).register({close:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M14.251 12.003l3.747-3.746-2.248-2.248-3.747 3.746-3.746-3.746-2.248 2.248 3.746 3.746-3.746 3.747 2.248 2.248 3.746-3.747 3.747 3.747 2.248-2.248z"/>'}})},7388:(t,e,s)=>{s(4147).register({download:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M17.511 10.276h-2.516V4.201c.087-.456-.1-.921-.48-1.191H9.482c-.38.27-.567.735-.48 1.19v6.076H6.247L12 16.352l5.512-6.076zM18.597 17v2H5.402v-2H3.003v2.8c-.049.603.479 1.132 1.2 1.2h15.593c.724-.063 1.256-.595 1.2-1.2V17h-2.4z"/>'}})},7558:(t,e,s)=>{s(4147).register({"edit-note":{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M14.998 3.72L12.71 5.916l5.998 5.758 2.287-2.195-5.998-5.76zM3.749 14.518L3 20.998l6.75-.72 7.899-7.586-6-5.758-7.9 7.584zm1.33 1.375l3.242 3.11-3.73.467.489-3.577z"/>'}})},7046:(t,e,s)=>{s(4147).register({"file-any-print":{width:21,height:26,viewBox:"0 0 21 26",data:'<g _fill="#000" fill-rule="evenodd"><path pid="0" d="M3.992 0C2.898 0 2.01.88 2.01 1.968V13c0 .394 1.689-2.898 6.513-2.732.424.014 2.981.418 4.95 2.473 2.03 2.119 2.146 4.636 2.146 5.785 0 3.265-3.102 5.462-2.82 5.462h6.219c1.094 0 1.981-.88 1.981-1.968V6.128a.37.37 0 00-.148-.297L15.13.147a.378.378 0 00-.3-.147H3.993zm0 .75h10.452v4.404c0 .75.613 1.349 1.358 1.349h4.443V22.02a1.22 1.22 0 01-1.226 1.218h-5.113c-.183 0 3.052-3.673 1.377-7.935-1.742-4.43-4.49-4.52-6.914-5.068-2.532-.573-5.676 2.205-5.676 1.953l.073-10.22A1.22 1.22 0 013.992.75zm11.216.534l4.51 4.47h-3.906a.606.606 0 01-.604-.6v-3.87z" fill-rule="nonzero"/><path pid="1" d="M12.164 14.715v-1.672a.405.405 0 00-.395-.414H4.018a.405.405 0 00-.395.414v1.672c-.522.065-.93.527-.93 1.092v4.1c0 .61.473 1.106 1.053 1.106h1.141v1.935c0 .229.177.415.395.415h5.354a.405.405 0 00.395-.415v-1.935h1.01c.58 0 1.052-.496 1.052-1.106v-4.1c0-.565-.407-1.027-.93-1.092zm-7.751-1.257h6.96v1.244h-6.96v-1.244zm5.828 9.076H5.677v-2.949h4.564v2.949zm2.062-2.627a.27.27 0 01-.263.277h-1.01v-.599h.176a.405.405 0 00.395-.415.405.405 0 00-.395-.414H4.58a.405.405 0 00-.395.414c0 .23.177.415.395.415h.307v.599h-1.14a.27.27 0 01-.264-.277v-4.1a.27.27 0 01.263-.276h8.294a.27.27 0 01.263.276v4.1zm-1.54-3.72c-.461 0-.837.395-.837.88s.376.88.838.88c.461 0 .837-.395.837-.88s-.376-.88-.837-.88zm-2.064 0c-.461 0-.837.395-.837.88s.376.88.837.88c.462 0 .838-.395.838-.88s-.376-.88-.838-.88z" fill-rule="nonzero"/><path pid="2" d="M8 10c1.033 0 2.038.193 2.985.575A7.967 7.967 0 0116 18.001C16 22.41 12.411 26 8 26s-8-3.589-8-8c0-.333.02-.668.061-.994C.556 13.012 3.97 10 8 10zm-.005.75c-3.65 0-6.742 2.728-7.19 6.344a7.309 7.309 0 00-.055.901C.75 21.99 4 25.24 7.995 25.24s7.245-3.25 7.245-7.244a7.215 7.215 0 00-4.542-6.725 7.192 7.192 0 00-2.703-.521z"/></g>'}})},6092:(t,e,s)=>{s(4147).register({"file-any":{width:16,height:16,viewBox:"0 0 32 32",data:'<path pid="0" d="M9.97 4C8.882 4 8 4.88 8 5.968V26.02c0 1.087.882 1.968 1.97 1.968h14.946c1.089 0 1.97-.88 1.97-1.968V10.128a.371.371 0 00-.147-.297l-5.69-5.684A.375.375 0 0020.75 4H9.97zm0 .75h10.396v4.404c0 .75.61 1.349 1.35 1.349h4.42V26.02c0 .675-.544 1.218-1.22 1.218H9.97c-.675 0-1.22-.543-1.22-1.218V5.968c0-.675.545-1.218 1.22-1.218zm11.156.534l4.485 4.47h-3.885a.604.604 0 01-.6-.6v-3.87z"/>'}})},7195:(t,e,s)=>{s(4147).register({"file-doc":{width:16,height:16,viewBox:"0 0 32 32",data:'<path pid="0" d="M9.859 4c-1.084 0-1.962.88-1.962 1.967v6.8H5.233c-.682 0-1.233.552-1.233 1.235v6.2c0 .684.551 1.237 1.233 1.237h2.664v4.57c0 1.087.878 1.967 1.962 1.967h14.886c1.084 0 1.962-.88 1.962-1.967V10.125a.372.372 0 00-.147-.297l-5.668-5.68A.373.373 0 0020.596 4H9.859zm0 .75h10.354V9.15c0 .75.607 1.349 1.345 1.349h4.401v15.51c0 .674-.542 1.217-1.214 1.217H9.859a1.214 1.214 0 01-1.215-1.218v-4.57h12.204c.682 0 1.233-.553 1.233-1.236v-6.201c0-.683-.55-1.236-1.233-1.236H8.644v-6.8c0-.674.542-1.217 1.215-1.217zm11.11.533l4.467 4.467h-3.868a.603.603 0 01-.599-.599V5.283zM5.233 13.515h15.615a.49.49 0 01.486.487v6.191a.49.49 0 01-.486.487H8.27a.37.37 0 00-.082.01H5.233a.483.483 0 01-.485-.487v-6.191a.49.49 0 01.485-.487v-.01zm13.045 1.462c-1.093 0-1.588.655-1.588 1.639v1.236c0 .993.495 1.639 1.588 1.639.664 0 1.29-.3 1.29-.665 0-.197-.178-.375-.411-.375-.15 0-.187.047-.271.094l-.066.037a.874.874 0 01-.514.15c-.56 0-.747-.337-.747-.87v-1.256c0-.534.187-.87.747-.87.197 0 .355.046.514.149l.066.037c.084.047.13.094.27.094.234 0 .412-.178.412-.375 0-.355-.626-.664-1.29-.664zm-4.074.009c-1.159 0-1.616.75-1.616 1.639v1.236c0 .909.542 1.64 1.616 1.64 1.075 0 1.617-.731 1.617-1.64v-1.236c0-.89-.449-1.64-1.617-1.64zm-5.027.047c-.262 0-.486.206-.486.45v3.511c0 .244.224.45.486.45h.7c1.412 0 1.898-.806 1.898-1.695v-1.077c0-.862-.486-1.64-1.897-1.64h-.701zm5.027.749c.551 0 .748.337.748.843v1.236c0 .506-.234.852-.748.852s-.747-.355-.747-.852v-1.236c0-.506.205-.843.747-.843zm-4.644.047h.42c.673 0 .916.374.916.852v1.068c0 .496-.233.899-.916.899h-.42v-2.82zm-2.42 2.706c-.29 0-.524.216-.524.478s.234.487.524.487c.28 0 .514-.225.514-.487s-.234-.478-.514-.478z"/>'}})},6009:(t,e,s)=>{s(4147).register({"file-exe":{width:16,height:16,viewBox:"0 0 32 32",data:'<path pid="0" d="M9.86 4c-1.084 0-1.962.88-1.962 1.965v6.804H5.234C4.55 12.769 4 13.32 4 14.004v6.195c0 .683.551 1.236 1.234 1.236h2.664v4.576c0 1.085.878 1.965 1.963 1.965h14.89c1.084 0 1.962-.88 1.962-1.984V10.12a.375.375 0 00-.2-.33L20.932 4.2a.375.375 0 00-.33-.2H9.86zm0 .767h10.357v4.399c0 .748.608 1.347 1.346 1.347h4.402v15.498c0 .674-.542 1.216-1.215 1.216H9.86a1.213 1.213 0 01-1.215-1.216v-4.558h12.208c.682 0 1.233-.552 1.233-1.235v-6.214c0-.683-.551-1.235-1.233-1.235H8.645V5.984c0-.674.543-1.217 1.216-1.217zm11.114.524l4.45 4.455h-3.852a.603.603 0 01-.598-.599V5.291zm-15.74 8.236h15.619c.27 0 .486.224.486.486V20.2a.489.489 0 01-.486.487H8.272a.37.37 0 00-.083.01H5.234a.483.483 0 01-.486-.487v-6.196c0-.271.224-.486.486-.486zm7.356 1.469c-.224 0-.42.197-.42.393 0 .075.018.15.046.215l.99 1.563-1.074 1.722a.445.445 0 00-.066.215c0 .206.197.403.421.403.224 0 .337-.15.402-.253l.832-1.376.832 1.376c.075.122.187.253.402.253.215 0 .42-.197.42-.403a.487.487 0 00-.065-.215l-1.075-1.722.981-1.563a.566.566 0 00.056-.206.407.407 0 00-.41-.402c-.225 0-.356.168-.44.29l-.701 1.16-.701-1.16c-.084-.15-.234-.29-.43-.29zm-3.43.066c-.272 0-.477.224-.477.44v3.509c0 .337.27.44.58.44h1.654c.243 0 .44-.178.44-.403 0-.206-.207-.384-.44-.384H9.56v-1.02h1.178c.243 0 .43-.177.43-.402 0-.225-.215-.393-.43-.393H9.561v-1.001h1.29c.243 0 .44-.16.44-.384 0-.215-.206-.402-.44-.402H9.16zm7.468 0c-.271 0-.477.224-.477.44v3.509c0 .337.271.44.58.44h1.654c.234 0 .43-.178.43-.403 0-.206-.206-.384-.44-.384H17.02v-1.02h1.178c.243 0 .43-.177.43-.402 0-.225-.215-.393-.43-.393H17.02v-1.001h1.3c.243 0 .439-.16.439-.384 0-.215-.206-.402-.44-.402h-1.691zm-9.487 3.48c-.29 0-.524.216-.524.478s.234.487.524.487c.28 0 .514-.225.514-.487s-.234-.477-.514-.477z"/>'}})},8713:(t,e,s)=>{s(4147).register({"file-gif":{width:16,height:16,viewBox:"0 0 32 32",data:'<path pid="0" d="M9.86 4c-1.084 0-1.962.88-1.962 1.965v6.813H5.234C4.55 12.778 4 13.33 4 14.013v6.196c0 .683.551 1.235 1.234 1.235h2.664v4.567c0 1.085.878 1.965 1.963 1.965h14.89c1.084 0 1.962-.88 1.962-1.984V10.12a.375.375 0 00-.2-.33L20.932 4.2a.375.375 0 00-.33-.2H9.86zm0 .767h10.357v4.399c0 .748.608 1.347 1.346 1.347h4.402V26.02c0 .674-.542 1.217-1.215 1.217H9.86a1.213 1.213 0 01-1.215-1.217v-4.567h12.208c.682 0 1.233-.552 1.233-1.235v-6.205c0-.683-.551-1.235-1.233-1.235H8.645V5.984c0-.674.543-1.217 1.216-1.217zm11.114.534l4.44 4.445h-3.842a.603.603 0 01-.598-.599V5.301zm-15.74 8.235h15.619c.27 0 .486.225.486.487v6.176a.489.489 0 01-.486.487H8.272a.37.37 0 00-.117.019H5.234a.483.483 0 01-.486-.487v-6.195c0-.272.224-.487.486-.487zm5.804 1.45c-1.093 0-1.589.656-1.589 1.638v1.236c0 .992.496 1.637 1.59 1.637.635 0 1.41-.243 1.41-.833V17.29c0-.3-.224-.44-.513-.44h-.683a.401.401 0 00-.392.393c0 .215.187.393.392.393h.327v.973c-.14.075-.299.131-.514.131-.56 0-.747-.337-.747-.87v-1.254c0-.533.186-.87.747-.87.197 0 .356.056.514.15l.066.037c.084.047.13.093.27.093.235 0 .412-.177.412-.374 0-.356-.626-.664-1.29-.664zm2.814.01c-.243 0-.44.187-.44.402v3.716c0 .215.197.402.44.402s.439-.187.439-.402v-3.716c0-.215-.206-.402-.44-.402zm2.01.056c-.272 0-.477.225-.477.44v3.622c0 .215.196.402.439.402s.44-.187.44-.402h-.01v-1.47h1.178c.243 0 .43-.177.43-.402 0-.225-.215-.393-.43-.393h-1.178v-1.01h1.3c.242 0 .438-.16.438-.384 0-.216-.205-.403-.439-.403h-1.692zm-7.787 3.5c-.29 0-.523.215-.523.477 0 .263.234.487.523.487.28 0 .514-.224.514-.487 0-.262-.233-.477-.514-.477z"/>'}})},3178:(t,e,s)=>{s(4147).register({"file-html":{width:16,height:16,viewBox:"0 0 32 32",data:'<path pid="0" d="M9.859 4c-1.084 0-1.962.88-1.962 1.967v6.8H5.233c-.682 0-1.233.552-1.233 1.235v6.2c0 .684.551 1.237 1.233 1.237h2.664v4.57c0 1.087.878 1.967 1.962 1.967h14.886c1.084 0 1.962-.88 1.962-1.967V10.125a.372.372 0 00-.147-.297l-5.668-5.68A.373.373 0 0020.596 4H9.859zm0 .759h10.354V9.15c0 .377.153.715.4.96.244.246.583.398.955.398h4.391v15.51c0 .674-.542 1.217-1.214 1.217H9.859a1.214 1.214 0 01-1.215-1.217v-4.561h12.204c.682 0 1.233-.553 1.233-1.237v-6.218c0-.684-.55-1.237-1.233-1.237H8.644v-6.79c0-.674.542-1.217 1.215-1.217zm11.11.524l4.458 4.467h-3.86a.603.603 0 01-.598-.599V5.283zM5.233 13.525h15.615a.49.49 0 01.486.487v6.181a.49.49 0 01-.486.487H8.27a.37.37 0 00-.116.019h-2.92a.483.483 0 01-.486-.487v-6.2a.49.49 0 01.485-.487zm2.897 2.07c-.187 0-.336.14-.336.309v2.894c0 .168.15.318.336.318.178 0 .337-.15.337-.318v-1.134h1.037v1.134c0 .168.159.318.336.318.187 0 .346-.15.337-.318v-2.894c0-.16-.16-.31-.337-.31-.177 0-.336.141-.336.31v1.133H8.467v-1.133c0-.16-.15-.31-.337-.31zm6.102 0c-.196 0-.346.13-.346.318v2.894c0 .169.14.31.327.31s.346-.141.346-.31v-1.676l.552 1.086a.337.337 0 00.317.187c.131 0 .253-.056.318-.187l.551-1.086v1.676c0 .169.16.31.346.31.178 0 .336-.141.336-.31h.01v-2.894c0-.168-.15-.318-.346-.318-.14 0-.271.046-.336.187l-.87 1.723-.868-1.723c-.057-.122-.178-.187-.337-.187zm3.925 0c-.187 0-.337.14-.337.309v2.828c0 .187.169.337.365.337h1.373c.178 0 .328-.13.318-.318 0-.169-.15-.3-.327-.3h-1.056v-2.547c0-.16-.15-.31-.336-.31zm-6.98.046c-.187 0-.337.17-.337.31 0 .168.14.309.337.309h.523v2.547c0 .16.15.31.336.31.178 0 .337-.141.337-.31V16.26h.514c.186 0 .345-.14.345-.31 0-.168-.168-.309-.345-.309h-1.71zm-4.598 2.717c-.234 0-.411.168-.411.374s.187.384.411.384a.396.396 0 00.402-.384c0-.206-.187-.374-.402-.374z"/>'}})},3848:(t,e,s)=>{s(4147).register({"file-jpg":{width:16,height:16,viewBox:"0 0 32 32",data:'<path pid="0" d="M9.86 4c-1.084 0-1.962.88-1.962 1.965v6.813H5.234C4.55 12.778 4 13.33 4 14.013v6.196c0 .683.551 1.235 1.234 1.235h2.664v4.567c0 1.085.878 1.965 1.963 1.965h14.89c1.084 0 1.962-.88 1.962-1.984V10.12a.375.375 0 00-.2-.33L20.932 4.2a.375.375 0 00-.33-.2H9.86zm0 .767h10.357v4.399c0 .748.608 1.347 1.346 1.347h4.402V26.02c0 .674-.542 1.217-1.215 1.217H9.86a1.213 1.213 0 01-1.215-1.217v-4.567h12.208c.682 0 1.233-.552 1.233-1.235v-6.205c0-.683-.551-1.235-1.233-1.235H8.645V5.984c0-.674.543-1.217 1.216-1.217zm11.114.534l4.44 4.445h-3.842a.603.603 0 01-.598-.599V5.301zm-15.74 8.235h15.619c.27 0 .486.225.486.487v6.176a.489.489 0 01-.486.487H8.272a.37.37 0 00-.117.019H5.234a.483.483 0 01-.486-.487v-6.195c0-.272.224-.487.486-.487zm11.786 1.45c-1.093 0-1.589.656-1.589 1.638v1.236c0 .992.496 1.637 1.59 1.637.635 0 1.41-.243 1.41-.833V17.29c0-.3-.224-.44-.513-.44h-.683a.401.401 0 00-.392.393c0 .215.187.393.392.393h.327v.973c-.14.075-.299.131-.514.131-.56 0-.747-.337-.747-.87v-1.254c0-.533.187-.87.747-.87.197 0 .356.056.514.15l.066.037c.084.047.13.093.271.093.234 0 .411-.177.411-.374 0-.356-.626-.664-1.29-.664zm-6.907.01c-.252 0-.44.187-.44.402v2.593c0 .458-.083.739-.504.739-.159 0-.243-.037-.383-.037-.169 0-.402.14-.402.393 0 .402.486.43.72.43 1.112 0 1.448-.58 1.448-1.525v-2.593c0-.215-.205-.402-.44-.402zm2.019.066c-.262 0-.486.205-.486.449v3.593c0 .225.205.412.44.412.242 0 .438-.196.438-.412v-1.141h.524c.963 0 1.589-.515 1.589-1.442 0-.758-.42-1.46-1.59-1.46h-.915zm.392.786h.533c.59 0 .72.337.72.664 0 .45-.252.655-.72.655h-.533v-1.32zm-5.383 2.704c-.29 0-.524.215-.524.477 0 .263.234.487.524.487.28 0 .514-.224.514-.487 0-.262-.234-.477-.514-.477z"/>'}})},3490:(t,e,s)=>{s(4147).register({"file-mp3":{width:16,height:16,viewBox:"0 0 32 32",data:'<path pid="0" d="M9.86 4c-1.084 0-1.962.88-1.962 1.965v6.804H5.234C4.55 12.769 4 13.32 4 14.004v6.195c0 .683.551 1.236 1.234 1.236h2.664v4.576c0 1.085.878 1.965 1.963 1.965h14.89c1.084 0 1.962-.88 1.962-1.984V10.12a.375.375 0 00-.2-.33L20.932 4.2a.375.375 0 00-.33-.2H9.86zm0 .767h10.357v4.399c0 .748.608 1.347 1.346 1.347h4.402v15.498c0 .674-.542 1.216-1.215 1.216H9.86a1.213 1.213 0 01-1.215-1.216v-4.558h12.208c.682 0 1.233-.552 1.233-1.235v-6.214c0-.683-.551-1.235-1.233-1.235H8.645V5.984c0-.674.543-1.217 1.216-1.217zm11.114.524l4.45 4.455h-3.852a.603.603 0 01-.598-.599V5.291zm-15.74 8.236h15.619c.27 0 .486.224.486.486V20.2a.489.489 0 01-.486.487H8.272a.371.371 0 00-.083.01H5.234a.483.483 0 01-.486-.487v-6.196c0-.271.224-.486.486-.486zm3.327 1.469c-.252 0-.448.178-.448.412v3.706c0 .215.187.393.42.393.243 0 .449-.178.449-.393V16.97l.71 1.394c.075.16.234.234.402.234a.44.44 0 00.412-.234l.71-1.394v2.143c0 .215.206.393.44.393.233 0 .43-.178.43-.393h.018v-3.706c0-.225-.196-.412-.449-.412-.177 0-.346.056-.43.234l-1.112 2.209L9 15.239c-.084-.159-.243-.243-.44-.243zm8.852.047a.42.42 0 00-.43.412c0 .215.187.393.43.393h1.019l-.926 1.132c-.037.037-.046.084-.046.15 0 .234.177.411.402.411.158 0 .158-.065.317-.065.44 0 .71.16.71.57 0 .328-.177.703-.719.703-.43 0-.589-.234-.85-.234-.234 0-.412.178-.412.383 0 .515 1 .6 1.29.6 1.084 0 1.552-.815 1.552-1.489 0-.673-.44-1.123-1.085-1.244l.842-1.02a.432.432 0 00.102-.281c0-.243-.186-.421-.458-.421h-1.738zm-3.758.01c-.261 0-.486.205-.486.448v3.594c0 .225.206.412.44.412.243 0 .439-.197.439-.412v-1.142h.523c.963 0 1.59-.514 1.59-1.44 0-.759-.421-1.46-1.59-1.46h-.916zm.393.785h.533c.589 0 .72.337.72.665 0 .449-.253.655-.72.655h-.533v-1.32zM6.58 18.543c-.29 0-.524.215-.524.477s.234.487.524.487c.28 0 .514-.225.514-.487s-.234-.477-.514-.477z"/>'}})},9573:(t,e,s)=>{s(4147).register({"file-mp4":{width:16,height:16,viewBox:"0 0 32 32",data:'<path pid="0" d="M9.86 4c-1.084 0-1.962.88-1.962 1.965v6.804H5.234C4.55 12.769 4 13.32 4 14.004v6.195c0 .683.551 1.236 1.234 1.236h2.664v4.576c0 1.085.878 1.965 1.963 1.965h14.89c1.084 0 1.962-.88 1.962-1.984V10.12a.375.375 0 00-.2-.33L20.932 4.2a.375.375 0 00-.33-.2H9.86zm0 .767h10.357v4.399c0 .748.608 1.347 1.346 1.347h4.402v15.498c0 .674-.542 1.216-1.215 1.216H9.86a1.213 1.213 0 01-1.215-1.216v-4.558h12.208c.682 0 1.233-.552 1.233-1.235v-6.214c0-.683-.551-1.235-1.233-1.235H8.645V5.984c0-.674.543-1.217 1.216-1.217zm11.114.524l4.45 4.455h-3.852a.603.603 0 01-.598-.599V5.291zm-15.74 8.236h15.619c.27 0 .486.224.486.486V20.2a.489.489 0 01-.486.487H8.272a.37.37 0 00-.083.01H5.234a.483.483 0 01-.486-.487v-6.196c0-.271.224-.486.486-.486zm13.207 1.422a.422.422 0 00-.383.244l-1.197 2.76a.74.74 0 00-.065.215c0 .225.178.422.44.422h1.373v.514c0 .225.187.393.43.393s.43-.168.43-.393h-.01V18.6h.085c.243 0 .42-.178.42-.393 0-.206-.186-.384-.42-.384h-.084v-.954c0-.225-.196-.393-.43-.393-.243 0-.43.168-.43.393v.954h-.776c.365-.842.654-1.497 1.019-2.33.028-.056.028-.103.028-.14 0-.216-.215-.403-.43-.403zm-9.88.047c-.252 0-.448.178-.448.412v3.706c0 .215.187.393.42.393.243 0 .449-.178.449-.393V16.97l.71 1.394c.075.16.234.234.402.234a.44.44 0 00.411-.234l.71-1.394v2.143c0 .215.206.393.44.393s.43-.178.43-.393h.019v-3.706c0-.225-.196-.412-.449-.412-.177 0-.346.056-.43.234l-1.112 2.209L9 15.239c-.084-.159-.243-.243-.44-.243zm5.094.056c-.261 0-.486.206-.486.45v3.593c0 .225.206.412.44.412.243 0 .439-.197.439-.412v-1.142h.523c.963 0 1.59-.514 1.59-1.44 0-.759-.421-1.46-1.59-1.46h-.916zm.393.786h.533c.589 0 .72.337.72.665 0 .449-.253.655-.72.655h-.533v-1.32zM6.58 18.543c-.29 0-.524.215-.524.477s.234.487.524.487c.28 0 .514-.225.514-.487s-.234-.477-.514-.477z"/>'}})},254:(t,e,s)=>{s(4147).register({"file-pdf":{width:16,height:16,viewBox:"0 0 32 32",data:'<path pid="0" d="M9.859 4c-1.084 0-1.962.88-1.962 1.967v6.8H5.233c-.682 0-1.233.552-1.233 1.235v6.2c0 .684.551 1.237 1.233 1.237h2.664v4.57c0 1.087.878 1.967 1.962 1.967h14.886c1.084 0 1.962-.88 1.962-1.967V10.125a.372.372 0 00-.147-.297l-5.668-5.68A.373.373 0 0020.596 4H9.859zm0 .75h10.354V9.15c0 .75.607 1.349 1.345 1.349h4.401v15.51c0 .674-.542 1.217-1.214 1.217H9.859a1.214 1.214 0 01-1.215-1.218v-4.57h12.204a1.229 1.229 0 00.933-.427c.187-.217.3-.5.3-.81v-6.2c0-.683-.55-1.236-1.233-1.236H8.644v-6.8c0-.674.542-1.217 1.215-1.217zm11.11.533l4.467 4.467h-3.868a.603.603 0 01-.599-.599V5.283zM5.233 13.515h15.615a.49.49 0 01.486.487v6.191a.49.49 0 01-.486.487H8.27a.37.37 0 00-.082.01H5.233a.483.483 0 01-.485-.487v-6.191a.49.49 0 01.485-.487v-.01zm7.803 1.518c-.262 0-.486.206-.486.45v3.511c0 .244.224.45.486.45h.7c1.421 0 1.898-.806 1.898-1.695v-1.077c0-.862-.486-1.64-1.897-1.64h-.7zm-3.869.01c-.261 0-.485.205-.485.449v3.596c0 .225.205.412.439.412.243 0 .439-.197.439-.412v-1.143h.523c.963 0 1.589-.515 1.589-1.442 0-.758-.42-1.46-1.589-1.46h-.916zm7.868 0c-.27 0-.476.224-.476.44v3.624c0 .215.196.402.44.402.242 0 .438-.187.438-.402h-.009v-1.47h1.177c.243 0 .43-.179.43-.403 0-.225-.215-.394-.43-.394h-1.177V15.83h1.299c.243 0 .439-.16.439-.384 0-.216-.206-.403-.44-.403h-1.69zm-3.606.786h.42c.673 0 .916.374.916.852v1.068c0 .496-.234.899-.916.899h-.42v-2.82zm-3.87.01h.534c.588 0 .72.336.72.664 0 .45-.253.656-.72.656H9.56v-1.32zm-2.42 2.696c-.289 0-.523.216-.523.478s.234.487.524.487c.28 0 .514-.225.514-.487s-.234-.478-.514-.478z"/>'}})},5782:(t,e,s)=>{s(4147).register({"file-png":{width:16,height:16,viewBox:"0 0 32 32",data:'<path pid="0" d="M9.86 4c-1.084 0-1.962.88-1.962 1.965v6.813H5.234C4.55 12.778 4 13.33 4 14.013v6.196c0 .683.551 1.235 1.234 1.235h2.664v4.567c0 1.085.878 1.965 1.963 1.965h14.89c1.084 0 1.962-.88 1.962-1.984V10.12a.375.375 0 00-.2-.33L20.932 4.2a.375.375 0 00-.33-.2H9.86zm0 .767h10.357v4.399c0 .748.608 1.347 1.346 1.347h4.402V26.02c0 .674-.542 1.217-1.215 1.217H9.86a1.213 1.213 0 01-1.215-1.217v-4.567h12.208c.682 0 1.233-.552 1.233-1.235v-6.205c0-.683-.551-1.235-1.233-1.235H8.645V5.984c0-.674.543-1.217 1.216-1.217zm11.114.534l4.44 4.445h-3.842a.603.603 0 01-.598-.599V5.301zm-15.74 8.235h15.619c.27 0 .486.225.486.487v6.176a.489.489 0 01-.486.487H8.272a.37.37 0 00-.117.019H5.234a.483.483 0 01-.486-.487v-6.195c0-.272.224-.487.486-.487zm13.039 1.45c-1.094 0-1.59.656-1.59 1.638v1.236c0 .992.496 1.637 1.59 1.637.635 0 1.411-.243 1.411-.833V17.29c0-.3-.224-.44-.514-.44h-.682a.401.401 0 00-.393.393c0 .215.187.393.393.393h.327v.973c-.14.075-.3.131-.514.131-.56 0-.748-.337-.748-.87v-1.254c0-.533.187-.87.748-.87.196 0 .355.056.514.15l.065.037c.085.047.131.093.271.093.234 0 .412-.177.412-.374 0-.356-.627-.664-1.29-.664zm-5.263.01c-.261 0-.458.178-.458.421v3.687c0 .216.187.403.43.403.234 0 .44-.187.44-.403v-2.33l1.449 2.518a.53.53 0 00.42.224c.271 0 .458-.187.458-.421v-3.687c0-.215-.187-.403-.43-.403-.233 0-.44.188-.44.403v2.358c-.579-1.01-.896-1.572-1.448-2.536a.503.503 0 00-.42-.234zm-3.841.066c-.262 0-.486.205-.486.449v3.593c0 .225.205.412.44.412.242 0 .438-.196.438-.412v-1.141h.524c.963 0 1.589-.515 1.589-1.442 0-.758-.42-1.46-1.59-1.46H9.17zm.392.786h.533c.59 0 .72.337.72.664 0 .45-.252.655-.72.655h-.533v-1.32zm-2.42 2.704c-.29 0-.524.215-.524.477 0 .263.234.487.524.487.28 0 .514-.224.514-.487 0-.262-.234-.477-.514-.477z"/>'}})},3310:(t,e,s)=>{s(4147).register({"file-ppt":{width:16,height:16,viewBox:"0 0 32 32",data:'<path pid="0" d="M9.859 4c-1.084 0-1.962.88-1.962 1.967v6.8H5.233c-.682 0-1.233.552-1.233 1.235v6.2c0 .684.551 1.237 1.233 1.237h2.664v4.57c0 1.087.878 1.967 1.962 1.967h14.886c1.084 0 1.962-.88 1.962-1.967V10.125a.372.372 0 00-.147-.297l-5.668-5.68A.373.373 0 0020.596 4H9.859zm0 .75h10.354V9.15c0 .75.607 1.349 1.345 1.349h4.401v15.51c0 .674-.542 1.217-1.214 1.217H9.859a1.214 1.214 0 01-1.215-1.218v-4.57h12.204c.682 0 1.233-.553 1.233-1.236v-6.201c0-.683-.55-1.236-1.233-1.236H8.644v-6.8c0-.674.542-1.217 1.215-1.217zm11.11.533l4.467 4.467h-3.868a.603.603 0 01-.599-.599V5.283zM5.233 13.515h15.615a.49.49 0 01.486.487v6.191a.49.49 0 01-.486.487H8.27a.37.37 0 00-.082.01H5.233a.483.483 0 01-.485-.487v-6.191a.49.49 0 01.485-.487v-.01zm3.934 1.527c-.261 0-.485.206-.485.45v3.596c0 .225.205.412.439.412.243 0 .439-.197.439-.412v-1.143h.523c.963 0 1.589-.515 1.589-1.442 0-.758-.42-1.46-1.589-1.46h-.916zm3.86 0c-.262 0-.486.206-.486.45v3.596c0 .225.205.412.439.412.243 0 .44-.197.44-.412v-1.143h.522c.963 0 1.589-.515 1.589-1.442 0-.758-.42-1.46-1.589-1.46h-.915zm3.541 0c-.243 0-.439.225-.439.403 0 .215.187.393.44.393h.653v3.269c0 .215.197.402.44.402s.439-.187.439-.402v-3.269h.663c.234 0 .44-.178.44-.393 0-.225-.216-.403-.44-.403h-2.196zm-7.008.796h.533c.588 0 .72.337.72.665 0 .45-.253.656-.72.656H9.56v-1.32zm3.86 0h.532c.589 0 .72.337.72.665 0 .45-.253.656-.72.656h-.533v-1.32zm-6.28 2.697c-.29 0-.524.216-.524.478s.234.487.524.487c.28 0 .514-.225.514-.487s-.234-.478-.514-.478z"/>'}})},1314:(t,e,s)=>{s(4147).register({"file-psd":{width:16,height:16,viewBox:"0 0 32 32",data:'<path pid="0" d="M9.859 4c-1.084 0-1.962.88-1.962 1.967v6.8H5.233c-.682 0-1.233.552-1.233 1.235v6.2c0 .684.551 1.237 1.233 1.237h2.664v4.57c0 1.087.878 1.967 1.962 1.967h14.886c1.084 0 1.962-.88 1.962-1.967V10.125a.372.372 0 00-.147-.297l-5.668-5.68A.373.373 0 0020.596 4H9.859zm0 .75h10.354V9.15c0 .75.607 1.349 1.345 1.349h4.401v15.51c0 .674-.542 1.217-1.214 1.217H9.859a1.214 1.214 0 01-1.215-1.218v-4.57h12.204a1.229 1.229 0 00.933-.427c.187-.217.3-.5.3-.81v-6.2c0-.683-.55-1.236-1.233-1.236H8.644v-6.8c0-.674.542-1.217 1.215-1.217zm11.11.533l4.467 4.467h-3.868a.603.603 0 01-.599-.599V5.283zM5.233 13.515h15.615a.49.49 0 01.486.487v6.191a.49.49 0 01-.486.487H8.27a.37.37 0 00-.082.01H5.233a.483.483 0 01-.485-.487v-6.191a.49.49 0 01.485-.487v-.01zm8.672 1.47c-.888 0-1.448.488-1.448 1.293 0 .909.663 1.115 1.27 1.302.169.056.328.113.458.169.113.047.253.14.243.43 0 .338-.215.534-.644.534-.271 0-.468-.075-.617-.121a.82.82 0 00-.308-.075.412.412 0 00-.412.393c0 .44.879.6 1.337.6.887 0 1.55-.497 1.55-1.368 0-.89-.672-1.096-1.28-1.292a2.055 2.055 0 01-.448-.169c-.103-.056-.262-.15-.262-.421 0-.375.28-.478.59-.478.223 0 .354.047.476.094.112.028.196.065.308.065.28 0 .44-.187.44-.393 0-.468-.888-.562-1.253-.562zm2.822.048c-.262 0-.486.206-.486.45v3.511c0 .244.224.45.486.45h.701c1.42 0 1.897-.806 1.897-1.695v-1.077c0-.862-.486-1.64-1.897-1.64h-.7zm-7.56.01c-.261 0-.485.205-.485.449v3.596c0 .225.205.412.439.412.243 0 .439-.197.439-.412v-1.143h.523c.963 0 1.589-.515 1.589-1.442 0-.758-.42-1.46-1.589-1.46h-.916zm7.953.786h.42c.673 0 .916.374.916.852v1.068c0 .496-.234.899-.916.899h-.42v-2.82zm-7.56.01h.533c.588 0 .72.336.72.664 0 .45-.253.656-.72.656H9.56v-1.32zm-2.42 2.696c-.29 0-.524.216-.524.478s.234.487.524.487c.28 0 .514-.225.514-.487s-.234-.478-.514-.478z"/>'}})},2307:(t,e,s)=>{s(4147).register({"file-rar":{width:16,height:16,viewBox:"0 0 32 32",data:'<path pid="0" d="M9.86 4c-1.084 0-1.962.88-1.962 1.965v6.804H5.234C4.55 12.769 4 13.32 4 14.004v6.195c0 .683.551 1.236 1.234 1.236h2.664v4.576c0 1.085.878 1.965 1.963 1.965h14.89c1.084 0 1.962-.88 1.962-1.984V10.12a.375.375 0 00-.2-.33L20.932 4.2a.375.375 0 00-.33-.2H9.86zm0 .767h10.357v4.399c0 .748.608 1.347 1.346 1.347h4.402v15.498c0 .674-.542 1.216-1.215 1.216H9.86a1.213 1.213 0 01-1.215-1.216v-4.558h12.208c.682 0 1.233-.552 1.233-1.235v-6.214c0-.683-.551-1.235-1.233-1.235H8.645V5.984c0-.674.543-1.217 1.216-1.217zm11.114.524l4.45 4.455h-3.852a.603.603 0 01-.598-.599V5.291zm-15.74 8.236h15.619c.27 0 .486.224.486.486V20.2a.489.489 0 01-.486.487H8.272a.37.37 0 00-.083.01H5.234a.483.483 0 01-.486-.487v-6.196c0-.271.224-.486.486-.486zm8.674 1.46c-.3 0-.42.177-.505.42l-1.215 3.557a.831.831 0 00-.019.14c0 .244.206.403.449.403.15 0 .346-.113.411-.29l.215-.627h1.327l.215.627c.056.168.262.29.421.29.252 0 .449-.169.449-.403a.637.637 0 00-.019-.14l-1.215-3.556c-.094-.244-.215-.421-.514-.421zm-5.206.065c-.262 0-.477.206-.477.45v3.593c0 .225.196.412.43.412.233 0 .44-.197.44-.412v-1.432h.42l1.047 1.638c.074.13.205.196.364.196.28 0 .589-.337.383-.645l-.85-1.282c.533-.169.869-.58.869-1.198 0-.655-.374-1.32-1.542-1.32H8.702zm8.262 0c-.261 0-.476.206-.476.45v3.593c0 .225.196.412.43.412.233 0 .439-.197.439-.412v-1.432h.42l1.047 1.638c.075.13.206.196.365.196.28 0 .589-.337.383-.645l-.85-1.282c.532-.169.86-.58.869-1.198 0-.655-.374-1.32-1.543-1.32h-1.084zm-7.87.796h.664c.56 0 .691.262.7.533 0 .328-.233.505-.663.505h-.7v-1.038zm8.253 0h.664c.57 0 .701.262.701.533 0 .328-.234.505-.664.505h-.7v-1.038zm-3.44.346c.029.187.057.43.113.608l.318 1.067h-.87l.328-1.067c.056-.178.084-.412.112-.608zm-7.234 2.349c-.29 0-.523.215-.523.477s.233.487.523.487c.28 0 .514-.225.514-.487s-.233-.477-.514-.477z"/>'}})},4309:(t,e,s)=>{s(4147).register({"file-xls":{width:16,height:16,viewBox:"0 0 32 32",data:'<path pid="0" d="M9.859 4c-1.084 0-1.962.88-1.962 1.967v6.8H5.233c-.682 0-1.233.552-1.233 1.235v6.2c0 .684.551 1.237 1.233 1.237h2.664v4.57c0 1.087.878 1.967 1.962 1.967h14.886c1.084 0 1.962-.88 1.962-1.967V10.125a.372.372 0 00-.147-.297l-5.668-5.68A.373.373 0 0020.596 4H9.859zm0 .75h10.354V9.15c0 .75.607 1.349 1.345 1.349h4.401v15.51c0 .674-.542 1.217-1.214 1.217H9.859a1.214 1.214 0 01-1.215-1.218v-4.57h12.204c.682 0 1.233-.553 1.233-1.236v-6.201c0-.683-.55-1.236-1.233-1.236H8.644v-6.8c0-.674.542-1.217 1.215-1.217zm11.11.533l4.467 4.467h-3.868a.603.603 0 01-.599-.599V5.283zM5.233 13.515h15.615a.49.49 0 01.486.487v6.191a.49.49 0 01-.486.487H8.27a.37.37 0 00-.082.01H5.233a.483.483 0 01-.485-.487v-6.191a.49.49 0 01.485-.487v-.01zm7.654 1.462c-.243 0-.44.187-.44.402v3.634c0 .244.215.43.468.43h1.756c.243 0 .43-.168.43-.411 0-.216-.196-.384-.42-.384h-1.355v-3.269c0-.215-.206-.402-.44-.402zm4.41.009c-.888 0-1.448.487-1.448 1.292 0 .909.663 1.115 1.27 1.302.169.056.328.113.458.169.113.047.253.14.243.43 0 .338-.215.534-.644.534-.271 0-.468-.075-.617-.121a.82.82 0 00-.308-.075.412.412 0 00-.412.393c0 .44.879.6 1.337.6.887 0 1.55-.497 1.55-1.368 0-.89-.672-1.096-1.28-1.292a2.055 2.055 0 01-.448-.169c-.103-.056-.262-.15-.262-.421 0-.375.28-.478.59-.478.223 0 .354.047.476.094.112.028.196.065.308.065.28 0 .44-.187.44-.393 0-.468-.888-.562-1.253-.562zm-8.4.01c-.225 0-.421.196-.421.393 0 .075.019.15.047.215l.99 1.564-1.074 1.723a.446.446 0 00-.066.216c0 .206.196.402.42.402.225 0 .337-.15.403-.252l.831-1.377.832 1.377c.075.121.187.252.402.252.215 0 .42-.196.42-.402a.488.488 0 00-.065-.216l-1.075-1.723.981-1.564a.567.567 0 00.056-.206.413.413 0 00-.41-.403c-.225 0-.356.169-.44.29l-.7 1.162-.702-1.161c-.084-.15-.233-.29-.43-.29zm-1.757 3.54c-.29 0-.524.215-.524.477s.234.487.524.487c.28 0 .514-.225.514-.487s-.234-.478-.514-.478z"/>'}})},3889:(t,e,s)=>{s(4147).register({"file-zip":{width:16,height:16,viewBox:"0 0 32 32",data:'<path pid="0" d="M9.86 4c-1.084 0-1.962.88-1.962 1.965v6.804H5.234C4.55 12.769 4 13.32 4 14.004v6.195c0 .683.551 1.236 1.234 1.236h2.664v4.576c0 1.085.878 1.965 1.963 1.965h14.89c1.084 0 1.962-.88 1.962-1.984V10.12a.375.375 0 00-.2-.33L20.932 4.2a.375.375 0 00-.33-.2H9.86zm0 .767h10.357v4.399c0 .748.608 1.347 1.346 1.347h4.402v15.498c0 .674-.542 1.216-1.215 1.216H9.86a1.213 1.213 0 01-1.215-1.216v-4.558h12.208c.682 0 1.233-.552 1.233-1.235v-6.214c0-.683-.551-1.235-1.233-1.235H8.645V5.984c0-.674.543-1.217 1.216-1.217zm11.114.524l4.45 4.455h-3.852a.603.603 0 01-.598-.599V5.291zm-15.74 8.236h15.619c.27 0 .486.224.486.486V20.2a.489.489 0 01-.486.487H8.272a.37.37 0 00-.083.01H5.234a.483.483 0 01-.486-.487v-6.196c0-.271.224-.486.486-.486zm8.608 1.469c-.243 0-.439.187-.439.402v3.716c0 .215.196.402.44.402.242 0 .439-.187.439-.402v-3.716c0-.215-.206-.402-.44-.402zm2.02.056c-.262 0-.487.206-.487.45v3.593c0 .225.206.412.44.412.243 0 .439-.197.439-.412v-1.142h.523c.963 0 1.59-.514 1.59-1.44 0-.759-.421-1.46-1.59-1.46h-.916zm-5.89.01c-.242 0-.43.187-.43.402 0 .225.188.402.43.402h1.412c-.617 1.02-1.159 1.881-1.766 2.892a.772.772 0 00-.085.271c0 .225.197.422.45.422h2.14c.233 0 .439-.178.439-.384 0-.225-.206-.403-.44-.403h-1.439l1.776-2.91c.037-.075.084-.159.084-.271 0-.234-.196-.421-.458-.421H9.973zm6.282.776h.533c.589 0 .72.337.72.665 0 .449-.253.655-.72.655h-.533v-1.32zm-7.992 2.705c-.29 0-.523.215-.523.477s.233.487.523.487c.28 0 .514-.225.514-.487s-.233-.477-.514-.477z"/>'}})},7533:(t,e,s)=>{s(4147).register({font:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M20.987 3.01H3.01v5.154h1.078l1.438-2.756h4.674v11.865c0 1.678-2.397 2.517-2.397 2.517H6.606v1.198h10.787V19.79h-1.199s-2.396-.6-2.396-2.517V5.408h4.673l1.319 2.756h1.198l-.001-5.153z"/>'}})},8892:(t,e,s)=>{s(4147).register({"fullscreen-out":{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M20.664 19.114l-2.806-2.854L19.845 14H14v5.947l2.104-2.141 2.806 2.854a1.155 1.155 0 001.637 0 .96.96 0 00.117-1.546zM6.197 7.864l-2.141 2.14h5.947V4.059L7.862 6.2 5.007 3.345a1.19 1.19 0 00-1.665 0 1.19 1.19 0 000 1.665l2.855 2.854zm-.06 8.308L3.242 19.07a1.207 1.207 0 001.69 1.69l2.897-2.897L10 20.034V14H3.965l2.173 2.172zM17.743 7.86l2.924-2.854a1.204 1.204 0 000-1.665 1.156 1.156 0 00-1.637 0l-2.807 2.973L14 4.053V10h5.847l-2.105-2.14z"/>'}})},8379:(t,e,s)=>{s(4147).register({help:{width:24,height:24,viewBox:"0 0 24 24",data:'<path pid="0" d="M11.898 3.01a9.154 9.154 0 00-8.889 9.206 8.858 8.858 0 008.89 8.783 9.089 9.089 0 007.513-4.233 9.087 9.087 0 001.587-4.656 9.313 9.313 0 00-9.1-9.1zM12.055 19c-3.872-.152-6.96-3.215-7.055-7 .043-3.765 3.093-6.84 6.945-7 3.872.152 6.96 3.215 7.055 7-.044 3.765-3.094 6.84-6.945 7z"/><path pid="1" d="M11.06 15.024h2.037V17H11.06v-1.976zm-2.495-4.921c.055-1.3.508-2.22 1.36-2.762.538-.347 1.199-.52 1.983-.52 1.03 0 1.885.246 2.567.739.68.492 1.022 1.22 1.022 2.187 0 .593-.149 1.092-.445 1.497-.173.246-.506.56-.998.944l-.485.375a1.47 1.47 0 00-.527.718c-.054.173-.084.442-.088.807h-1.846c.027-.77.1-1.302.219-1.596.118-.294.423-.633.916-1.015l.499-.39c.164-.123.296-.258.396-.403.182-.251.274-.527.274-.828 0-.346-.102-.661-.305-.946-.202-.285-.573-.428-1.11-.428-.53 0-.904.176-1.125.527-.221.35-.331.715-.331 1.094H8.565z"/>'}})},1710:(t,e,s)=>{s(4147).register({info:{width:16,height:16,viewBox:"0 0 16 16",data:'<g _fill="#000" fill-rule="nonzero"><path pid="0" d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 14c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6z"/><circle pid="1" cx="8" cy="4" r="1"/><path pid="2" d="M8 6c-.6 0-1 .4-1 1v5c0 .6.4 1 1 1s1-.4 1-1V7c0-.6-.4-1-1-1z"/></g>'}})},1702:(t,e,s)=>{s(4147).register({"left-arrow":{width:16,height:16,viewBox:"0 0 16 16",data:'<path pid="0" d="M10.997 2.003L5 8.016l5.997 5.977V2.003"/>'}})},7328:(t,e,s)=>{s(4147).register({link:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M19.357 4.663c2.132 2.133 2.132 5.576 0 7.728l-1.566 1.566a.992.992 0 01-1.408 0 .992.992 0 010-1.41l1.565-1.564a3.474 3.474 0 00-.333-4.911 3.5 3.5 0 00-4.558-.02L11.49 7.617a.992.992 0 01-1.408 0 .992.992 0 010-1.408l1.565-1.566c2.113-2.132 5.576-2.132 7.709.02zM14.21 17.517l-1.937 1.937c-2.191 2.094-5.654 1.976-7.728-.215a5.462 5.462 0 010-7.513L6.483 9.79a.992.992 0 011.408 0 .992.992 0 010 1.409l-1.937 1.937a3.474 3.474 0 00.333 4.91 3.5 3.5 0 004.559.02l1.937-1.937a.994.994 0 011.408-.078c.411.372.45.998.079 1.409l-.06.058z"/><path pid="1" d="M8.028 14.993c0-.254.118-.508.294-.704l5.83-5.85a.992.992 0 011.409 0 .992.992 0 010 1.409l-5.83 5.83c-.392.392-1.018.372-1.41-.02a1.092 1.092 0 01-.293-.684v.02z"/>'}})},7492:(t,e,s)=>{s(4147).register({mute:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M8.614 8.252H4.718C3.77 8.252 3 9.254 3 10.233v3.545c0 .98.769 1.98 1.718 1.98h3.997L14 21.006v-18L8.614 8.252zM19.2 12l1.8-1.8L19.8 9 18 10.8 16.2 9l-1.199 1.2L16.8 12 15 13.8l1.2 1.2 1.8-1.8 1.8 1.8 1.2-1.2z"/>'}})},7056:(t,e,s)=>{s(4147).register({note:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M7.2 8C6.48 8 6 7.6 6 7s.48-1 1.2-1h9.6c.72 0 1.2.4 1.2 1s-.48 1-1.2 1H7.2zm5.657 5H7.143C6.457 13 6 12.6 6 12s.457-1 1.143-1h5.714c.686 0 1.143.4 1.143 1s-.457 1-1.143 1zM3 3v12.998h5.625L12 20.982l3.375-4.984H21V3H3z"/>'}})},1953:(t,e,s)=>{s(4147).register({print:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M18.429 8.5V11H5.57V8.5C4.151 8.5 3 9.619 3 11v5c0 1.381 1.15 2.5 2.571 2.5V16H18.43v2.5C19.849 18.5 21 17.381 21 16v-5c0-1.381-1.15-2.5-2.571-2.5zM17 3H7v7h10V3zM7 21h10v-4H7v4z"/>'}})},6326:(t,e,s)=>{s(4147).register({"right-arrow":{width:16,height:16,viewBox:"0 0 16 16",data:'<path pid="0" d="M5 2.003v11.99l5.997-5.977L5 2.003"/>'}})},7773:(t,e,s)=>{s(4147).register({"slideshow-pause":{width:16,height:16,viewBox:"-2 -2 24 24",data:'<g clip-path="url(#clip0_261_974)" _fill="#81848C"><rect pid="0" x="6.001" y="6" width="3" height="8" rx=".5"/><path pid="1" fill-rule="evenodd" clip-rule="evenodd" d="M2.501 3.5v13h15v-13h-15zM1.876 1C.84 1 .001 1.84.001 2.875v14.25C.001 18.16.841 19 1.876 19h16.25c1.035 0 1.875-.84 1.875-1.875V2.875c0-1.036-.84-1.875-1.875-1.875H1.876z"/><rect pid="2" x="11.001" y="6" width="3" height="8" rx=".5"/></g><defs><clipPath id="clip0_261_974"><path pid="3" _fill="#fff" d="M0 0h20v20H0z"/></clipPath></defs>'}})},5288:(t,e,s)=>{s(4147).register({slideshow:{width:16,height:16,viewBox:"-2 -2 24 24",data:'<g clip-path="url(#clip0_261_982)" _fill="#81848C"><path pid="0" d="M14.107 9.553a.5.5 0 010 .894l-6.382 3.191A.5.5 0 017 13.191V6.809a.5.5 0 01.724-.447l6.382 3.19z"/><path pid="1" fill-rule="evenodd" clip-rule="evenodd" d="M2.501 3.5v13h15v-13h-15zM1.876 1C.84 1 .001 1.84.001 2.875v14.25C.001 18.16.841 19 1.876 19h16.25c1.035 0 1.875-.84 1.875-1.875V2.875c0-1.036-.84-1.875-1.875-1.875H1.876z"/></g><defs><clipPath id="clip0_261_982"><path pid="2" _fill="#fff" d="M0 0h20v20H0z"/></clipPath></defs>'}})},9790:(t,e,s)=>{s(4147).register({social:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M17.524 14.233a3.82 3.82 0 00-2.42.953l-5.475-2.752v-.847l5.58-2.753a3.778 3.778 0 002.315.953 3.335 3.335 0 003.369-3.303V6.4a3.378 3.378 0 00-3.367-3.39c-1.86 0-3.368 1.516-3.37 3.386v.427L8.684 9.575a3.54 3.54 0 00-2.316-.953A3.377 3.377 0 003 12.012a3.377 3.377 0 003.367 3.386c.868.004 1.7-.339 2.316-.953l5.58 2.859v.317c0 1.871 1.508 3.389 3.368 3.389 1.86 0 3.368-1.518 3.368-3.389a3.569 3.569 0 00-3.475-3.388z"/>'}})},6405:(t,e,s)=>{s(4147).register({sound:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M16.312 8.258l-1.079 1.124a3.177 3.177 0 011.199 2.623 3.811 3.811 0 01-1.199 2.623l1.079 1.124c1.087-.91 1.706-2.294 1.678-3.747.082-1.464-.548-2.873-1.678-3.747zm2.037-2.624l-1.198 1.25c2.713 2.6 2.89 7.002.395 9.83a6.99 6.99 0 01-.395.412l1.198 1.25c1.7-1.643 2.657-3.955 2.637-6.371.07-2.426-.897-4.76-2.637-6.37zM4.702 8.261c-.967.138-1.689.99-1.692 2v3.5c-.037 1.025.704 1.901 1.692 2H8.69l5.318 5.25v-18L8.57 8.261H4.702z"/>'}})},7367:(t,e,s)=>{s(4147).register({"text-link":{width:16,height:16,viewBox:"0 0 100 100",data:'<g _fill="#000" fill-rule="nonzero"><path pid="0" d="M78.932 15.382H21.069c-3.137 0-5.679 2.564-5.679 5.728 0 3.162 2.542 5.727 5.68 5.727h57.862c3.136 0 5.68-2.565 5.68-5.727 0-3.164-2.544-5.728-5.68-5.728zm-.165 19.09H21.234c-3.228 0-5.844 2.564-5.844 5.728 0 3.163 2.616 5.727 5.844 5.727h57.533c3.227 0 5.844-2.564 5.844-5.727 0-3.163-2.617-5.727-5.844-5.727zM53.91 53.565H21.234c-3.228 0-5.844 2.564-5.844 5.728 0 3.162 2.616 5.727 5.844 5.727H53.91c3.227 0 5.844-2.565 5.844-5.727 0-3.164-2.617-5.728-5.844-5.728zm-12.676 19.09h-20.39c-3.228 0-5.844 2.564-5.844 5.728 0 3.163 2.616 5.728 5.844 5.728h20.39c3.227 0 5.845-2.565 5.845-5.728 0-3.164-2.618-5.727-5.845-5.727zM89.348 56.696c4.739 4.739 4.739 12.391 0 17.174l-3.478 3.478c-.87.87-2.261.87-3.13 0-.87-.87-.87-2.261 0-3.13l3.477-3.479c2.826-3.217 2.479-8.087-.739-10.913a7.78 7.78 0 00-10.13-.043L71.87 63.26c-.87.87-2.261.87-3.13 0-.87-.87-.87-2.261 0-3.13l3.477-3.479c4.696-4.739 12.392-4.739 17.13.044zM77.913 85.26l-4.304 4.304c-4.87 4.652-12.566 4.392-17.174-.478a12.139 12.139 0 010-16.696l4.304-4.304c.87-.87 2.261-.87 3.13 0 .87.87.87 2.26 0 3.13l-4.304 4.305c-2.826 3.217-2.478 8.087.74 10.913a7.78 7.78 0 0010.13.043l4.304-4.304c.826-.913 2.218-1 3.13-.174.914.826 1 2.217.174 3.13l-.13.13z"/><path pid="1" d="M64.174 79.652c0-.565.26-1.13.652-1.565l12.957-13c.87-.87 2.26-.87 3.13 0 .87.87.87 2.26 0 3.13L67.957 81.174c-.87.87-2.261.826-3.13-.044-.392-.39-.61-.956-.653-1.521v.043z"/></g>'}})},8346:(t,e,s)=>{s(4147).register({toc:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M5.7 3H4.4C3.5 3 3 3.5 3 4.3v1.3C3 6.5 3.5 7 4.3 7h1.3C6.5 7 7 6.3 7 5.7V4.4C7 3.5 6.5 3 5.7 3m14.2 0h-9.8C9.4 3 9 3.5 9 4.3v1.3c0 .9.4 1.4 1.1 1.4h9.8c.7 0 1.1-.7 1.1-1.3V4.4c0-.9-.4-1.4-1.1-1.4M4.3 10c-.8 0-1.3.5-1.3 1.3v1.3c0 .9.5 1.4 1.3 1.4h1.3c.9 0 1.4-.7 1.4-1.3v-1.4c0-.8-.5-1.3-1.3-1.3H4.3zm15.6 0h-9.8c-.7 0-1.1.5-1.1 1.3v1.3c0 .9.4 1.4 1.1 1.4h9.8c.7 0 1.1-.7 1.1-1.3v-1.4c0-.8-.4-1.3-1.1-1.3M5.7 17H4.4c-.9 0-1.4.5-1.4 1.3v1.3c0 .8.5 1.3 1.3 1.3h1.3c.9.1 1.4-.6 1.4-1.2v-1.3c0-.9-.5-1.4-1.3-1.4m14.2 0h-9.8c-.7 0-1.1.5-1.1 1.3v1.3c0 .9.4 1.4 1.1 1.4h9.8c.7 0 1.1-.7 1.1-1.3v-1.3c0-.9-.4-1.4-1.1-1.4"/>'}})},6834:(t,e,s)=>{s(4147).register({zoomin:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M15.49 17.61A8.144 8.144 0 0111.14 19c-4.452-.102-8.038-3.625-8.14-8 .036-4.35 3.575-7.89 8-8 4.425.112 7.965 3.65 8 8a7.813 7.813 0 01-1.38 4.499l4.451 4.45-2.121 2.122-4.46-4.46zM11.104 17c3.3-.09 5.919-2.757 5.895-6-.026-3.263-2.681-5.916-6-6-3.319.083-5.973 2.737-6 6 .077 3.281 2.766 5.923 6.105 6zM12 7v3h3v2h-3v3h-2v-3H7v-2h3V7h2z"/>'}})},7244:(t,e,s)=>{s(4147).register({zoomout:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M15.49 17.611a8.144 8.144 0 01-4.35 1.39c-4.452-.102-8.038-3.625-8.14-8 .036-4.35 3.575-7.89 8-8 4.425.112 7.965 3.65 8 8a7.813 7.813 0 01-1.38 4.498l4.451 4.45-2.121 2.122-4.46-4.46zm-4.385-.61c3.3-.09 5.919-2.757 5.895-6-.026-3.263-2.681-5.916-6-6-3.319.083-5.973 2.737-6 6 .077 3.281 2.766 5.923 6.105 6zM7 12v-2h8v2H7z"/>'}})},7823:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>Ps});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._g({class:t.publicationClasses,attrs:{dir:t.dir},on:{mouseleave:t.onMouseLeave}},t.embedScript&&!t.embedLightbox?{click:t.onClick}:{click:t.onClick,wheel:t.preventWheel}),[t.noticeShown?s("banner-notice",{ref:"noticeBanner",on:{close:t.noticeClose}}):t._e(),t._v(" "),s("div",{staticClass:"inner-container",style:t.innerContainerStyles,on:{click:t.onInnerContainerClick,contextmenu:t.onContextMenu}},[s("span",{ref:"first-trap",attrs:{tabindex:"0","aria-hidden":"true"}}),t._v(" "),t.showPreloader?s("preloader"):t._e(),t._v(" "),s("div",{class:["main-frame",t.mainClasses],attrs:{"aria-hidden":t.isPopupOpened?"true":"false"},on:{wheel:t.onWheel}},[t.topBarEnabled?s("top-toolbar"):t._e(),t._v(" "),t.bottomBarEnabled?s("bottom-toolbar",{attrs:{"ws-toggle-fullscreen":t.toggleFullscreen}}):t._e(),t._v(" "),s("book-container",{ref:"bookContainer",attrs:{size:t.containerSize,"ws-toggle-fullscreen":t.toggleFullscreen}}),t._v(" "),t.flashMessageVisibility?s("flash-message"):t._e()],1),t._v(" "),s("context-menu",{ref:"contextMenu",attrs:{"toggle-fullscreen":t.toggleFullscreen}}),t._v(" "),"toc"===t.activeSidebarComponent?s("toc-window",{ref:"opened-sidebar-component",attrs:{id:"toc-sidebar"}}):t._e(),t._v(" "),"thumbnails"===t.activeSidebarComponent?s("th-window",{ref:"opened-sidebar-component",attrs:{id:"thumbnails-sidebar"}}):t._e(),t._v(" "),"notes"===t.activeSidebarComponent?s("note-window",{ref:"opened-sidebar-component",attrs:{id:"notes-sidebar"}}):t._e(),t._v(" "),"search"===t.activeSidebarComponent?s("search-window",{ref:"opened-sidebar-component",attrs:{id:"search-sidebar"}}):t._e(),t._v(" "),s("sound"),t._v(" "),s("transition",{attrs:{name:"slide-fade"}},[t.isPopupOpened?s("popup"):t._e()],1),t._v(" "),s("span",{ref:"last-trap",attrs:{tabindex:"0","aria-hidden":"true"}})],1),t._v(" "),s("lightbox")],1)},o=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bottom-toolbar-frame",attrs:{role:"menubar"}},[s("div",{staticClass:"bottom-toolbar",class:t.toolbarClass,style:t.toolbarStyle},[s("transition",{attrs:{name:t.areTransitionsAllowed?"highlight":null},on:{"before-enter":t.beforeIconAdd,"after-enter":t.afterIconAdd,"before-leave":t.beforeIconRemove,"after-leave":t.afterIconRemove}},[t.toc.show?s("button",{class:"svg-button icon group1"+t.tocActive,style:t.iconStyle,attrs:{role:"menuitem","aria-controls":"toc-sidebar","aria-haspopup":"tree","aria-expanded":t.tocActive?"true":"false",title:t.$t("BottomMenu.TOC_TIP"),"aria-label":t.$t("BottomMenu.TOC_TIP"),tabindex:"0"},on:{click:function(e){return t.openSidebar("toc")},mousedown:function(t){t.preventDefault()}}},[s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"toc"}})],1):t._e()]),t._v(" "),s("transition",{attrs:{name:t.areTransitionsAllowed?"highlight":null},on:{"before-enter":t.beforeIconAdd,"after-enter":t.afterIconAdd,"before-leave":t.beforeIconRemove,"after-leave":t.afterIconRemove}},[t.thumbnails.show?s("button",{class:"svg-button icon group1"+t.thActive,style:t.iconStyle,attrs:{role:"menuitem","aria-controls":"thumbnails-sidebar","aria-haspopup":"grid","aria-expanded":t.thActive?"true":"false",title:t.$t("BottomMenu.THUMBNAILS_TIP"),"aria-label":t.$t("BottomMenu.THUMBNAILS_TIP"),tabindex:"0"},on:{click:function(e){return t.openSidebar("thumbnails")},mousedown:function(t){t.preventDefault()}}},[s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"thumbnails"}})],1):t._e()]),t._v(" "),s("transition",{attrs:{name:t.areTransitionsAllowed?"highlight":null},on:{"before-enter":t.beforeIconAdd,"after-enter":t.afterIconAdd,"before-leave":t.beforeIconRemove,"after-leave":t.afterIconRemove}},[t.notes.show?s("button",{class:"svg-button icon group1"+t.notesActive,style:t.iconStyle,attrs:{role:"menuitem","aria-controls":"notes-sidebar","aria-haspopup":"grid","aria-expanded":t.notesActive?"true":"false",title:t.$t("BottomMenu.NOTES_BUTTON_TIP"),"aria-label":t.$t("BottomMenu.NOTES_BUTTON_TIP"),tabindex:"0"},on:{click:function(e){return t.openSidebar("notes")},mousedown:function(t){t.preventDefault()}}},[s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"note"}})],1):t._e()]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.divider1Visible?s("div",{staticClass:"divider",style:t.dividerStyle,attrs:{role:"separator","aria-hidden":"true"}}):t._e()]),t._v(" "),s("transition",{attrs:{name:t.areTransitionsAllowed?"highlight":null},on:{"before-enter":t.beforeIconAdd,"after-enter":t.afterIconAdd,"before-leave":t.beforeIconRemove,"after-leave":t.afterIconRemove}},[t.share.show?s("button",{class:"svg-button icon group2"+t.socialActive,style:t.iconStyle,attrs:{role:"menuitem","aria-haspopup":"dialog","aria-expanded":"false",title:t.$t("BottomMenu.PERMALINK_TIP"),"aria-label":t.$t("BottomMenu.PERMALINK_TIP"),tabindex:"0"},on:{click:function(e){return t.openPopup("social")},mousedown:function(t){t.preventDefault()}}},[s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"social"}})],1):t._e()]),t._v(" "),s("transition",{attrs:{name:t.areTransitionsAllowed?"highlight":null},on:{"before-enter":t.beforeIconAdd,"after-enter":t.afterIconAdd,"before-leave":t.beforeIconRemove,"after-leave":t.afterIconRemove}},[t.print.show?s("button",{class:"svg-button icon group2"+t.printActive,style:t.iconStyle,attrs:{role:"menuitem","aria-haspopup":"dialog","aria-expanded":"false",title:t.$t("BottomMenu.PRINT_TIP"),"aria-label":t.$t("BottomMenu.PRINT_TIP"),tabindex:"0"},on:{click:function(e){return t.openPopup("print")},mousedown:function(t){t.preventDefault()}}},[s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"print"}})],1):t._e()]),t._v(" "),s("transition",{attrs:{name:t.areTransitionsAllowed?"highlight":null},on:{"before-enter":t.beforeIconAdd,"after-enter":t.afterIconAdd,"before-leave":t.beforeIconRemove,"after-leave":t.afterIconRemove}},[t.downloads.show?s("button",{class:"svg-button icon group2"+t.downloadActive,style:t.iconStyle,attrs:{role:"menuitem","aria-haspopup":"dialog","aria-expanded":"false",title:t.$t("BottomMenu.SAVE_TIP"),"aria-label":t.$t("BottomMenu.SAVE_TIP"),tabindex:"0"},on:{click:function(e){return t.openPopup("download")},mousedown:function(t){t.preventDefault()}}},[s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"download"}})],1):t._e()]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.divider2Visible?s("div",{staticClass:"divider",style:t.dividerStyle,attrs:{role:"separator","aria-hidden":"true"}}):t._e()]),t._v(" "),s("transition",{attrs:{name:t.areTransitionsAllowed?"highlight":null},on:{"before-enter":t.beforeIconAdd,"after-enter":t.afterIconAdd,"before-leave":t.beforeIconRemove,"after-leave":t.afterIconRemove}},[t.sound.show?s("button",{class:"svg-button icon group3"+t.soundActive,style:t.iconStyle,attrs:{role:"menuitem",title:t.$t("BottomMenu.SOUND_BUTTON_TIP"),"aria-label":t.$t("BottomMenu.SOUND_BUTTON_TIP"),tabindex:"0"},on:{click:t.toggleMuteSound,mousedown:function(t){t.preventDefault()}}},[" toggled"===t.soundActive?s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"mute"}}):s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"sound"}})],1):t._e()]),t._v(" "),s("transition",{attrs:{name:t.areTransitionsAllowed?"highlight":null},on:{"before-enter":t.beforeIconAdd,"after-enter":t.afterIconAdd,"before-leave":t.beforeIconRemove,"after-leave":t.afterIconRemove}},[t.zoom.show?s("button",{class:"svg-button icon group3"+t.zoomActive,style:t.iconStyle,attrs:{role:"menuitem",title:t.$t(t.zoomActive?"BottomMenu.UNZOOM_BUTTON_TIP":"BottomMenu.ZOOM_BUTTON_TIP"),"aria-label":t.$t(t.zoomActive?"BottomMenu.UNZOOM_BUTTON_TIP":"BottomMenu.ZOOM_BUTTON_TIP"),tabindex:"0"},on:{click:t.toggleZoomMode,mousedown:function(t){t.preventDefault()}}},[" toggled"===t.zoomActive?s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"zoomout"}}):s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"zoomin"}})],1):t._e()]),t._v(" "),s("transition",{attrs:{name:t.areTransitionsAllowed?"highlight":null},on:{"before-enter":t.beforeIconAdd,"after-enter":t.afterIconAdd,"before-leave":t.beforeIconRemove,"after-leave":t.afterIconRemove}},[t.fullscreen.show?s("button",{class:"svg-button icon group3"+t.fullscreenActive,style:t.iconStyle,attrs:{role:"menuitem",title:t.$t(t.fullscreenActive?"BottomMenu.NORMAL_BUTTON_TIP":"BottomMenu.FULLSCREEN_BUTTON_TIP"),"aria-label":t.$t(t.fullscreenActive?"BottomMenu.NORMAL_BUTTON_TIP":"BottomMenu.FULLSCREEN_BUTTON_TIP"),tabindex:"0"},on:{click:t.toggleFullScreen,mousedown:function(t){t.preventDefault()}}},[" toggled"===t.fullscreenActive?s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"fullscreen-out"}}):s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"fullscreen"}})],1):t._e()]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.divider3Visible?s("div",{staticClass:"divider",style:t.dividerStyle,attrs:{role:"separator","aria-hidden":"true"}}):t._e()]),t._v(" "),s("transition",{attrs:{name:t.areTransitionsAllowed?"highlight":null},on:{"before-enter":t.beforeIconAdd,"after-enter":t.afterIconAdd,"before-leave":t.beforeIconRemove,"after-leave":t.afterIconRemove}},[t.slideshow.show?s("button",{class:"svg-button icon group4"+t.slideshowActive,style:t.iconStyle,attrs:{role:"menuitem",title:t.$t(t.slideshowActive?"NavigationPanel.PAUSE_PAGE_TIP":"NavigationPanel.PLAY_PAGE_TIP"),"aria-label":t.$t(t.slideshowActive?"NavigationPanel.PAUSE_PAGE_TIP":"NavigationPanel.PLAY_PAGE_TIP"),tabindex:"0"},on:{click:t.toggleSlideShow,mousedown:function(t){t.preventDefault()}}},[" toggled"===t.slideshowActive?s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"slideshow-pause"}}):s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"slideshow"}})],1):t._e()])],1)])},n=[],r=(s(7056),s(5606),s(8346),s(9790),s(7533),s(1953),s(7388),s(6405),s(7492),s(5903),s(8892),s(6834),s(7244),s(7773),s(5288),s(464),s(925),s(2567)),l=s(90);const c=600,h=100,d=1e3,u=10*28+3*29+22,p={props:{wsToggleFullscreen:{type:Function,default:()=>{}}},data:()=>({toc:{show:null,timeoutId:null},thumbnails:{show:null,timeoutId:null},notes:{show:null,timeoutId:null},share:{show:null,timeoutId:null},print:{show:null,timeoutId:null},downloads:{show:null,timeoutId:null},sound:{show:null,timeoutId:null},zoom:{show:null,timeoutId:null},fullscreen:{show:null,timeoutId:null},slideshow:{show:null,timeoutId:null},areTransitionsAllowed:!1,showPop:null,showBackground:null,timeoutId:null,scale:2,translateY:null}),computed:{attractOnControlsSet(){return this.$store.state.workspace.attractOnControlsSet},tocVisible:function(){return this.$store.state.toc&&this.$store.state.toc.enabled},thumbnailsVisible:function(){return this.$store.state.workspace.components.thumbnails},notesVisible:function(){return this.$store.state.workspace.components.notes},shareVisible:function(){return this.$store.state.workspace.components.share},printVisible:function(){return this.$store.state.workspace.components.print},downloadsVisible:function(){return this.$store.state.downloads&&this.$store.state.downloads.enabled},soundVisible:function(){return this.$store.getters["workspace/soundVisible"]},zoomVisible:function(){return this.$store.state.workspace.components.zoom},fullscreenVisible:function(){return this.$store.state.workspace.components.fullscreen},toolbarStyle(){return{"background-color":this.showBackground?this.backgroundColor:null,transform:this.showPop?`scale(${this.scale}) translateY(${this.translateY}px)`:null}},toolbarClass(){return{"blink-light":this.blinkLight,"toolbar-animation-pop":this.showPop}},dividerStyle(){return{"border-color":this.showBackground?this.iconOverrideColor:null}},iconStyle(){return{fill:this.showBackground?this.iconOverrideColor:null}},opaqueBottom(){return-1!==this.$store.state.skin.styles.classes.indexOf("opaqueBottom")},backgroundColor(){const t=this.opaqueBottom?"main-color":"second-color";return this.$store.state.skin.styles[t]},iconOverrideColor(){const t=this.opaqueBottom?"main-icon-color":"second-icon-color";return this.$store.state.skin.styles[t]},blinkLight(){return this.showPop||this.opaqueBottom?(0,l.R)((0,l.l)(this.backgroundColor))<.5:(0,l.R)((0,l.l)(this.$store.state.skin.styles["bottom-center-background-color"]))<.5},muteSound:function(){return this.$store.state.sound.muteSound},soundActive:function(){return this.muteSound?" toggled":""},fullscreenActive:function(){return this.$store.state.workspace.fullScreenMode?" toggled":""},slideshowActive:function(){return this.$store.state.workspace.components.slideshow&&this.$store.state.workspace.components.slideshow.active?" toggled":""},isZoomed:function(){return this.$store.state.pages.size.zoomFactor>1},isRTLBook:function(){return this.$store.state.book.rightToLeft},isRTLLocale:function(){return this.$store.getters["i18n/isLocaleRtl"]},isZoomPanelVisible:function(){return this.$store.state.workspace.zoomPanel},zoomActive:function(){return this.isZoomPanelVisible||this.isZoomed?" toggled":""},thActive:function(){return"thumbnails"===this.$store.state.sidebar.opened?" toggled":""},notesActive:function(){return"notes"===this.$store.state.sidebar.opened?" toggled":""},tocActive:function(){return"toc"===this.$store.state.sidebar.opened?" toggled":""},socialActive:function(){return"social"===this.$store.state.popup.opened?" toggled":""},printActive:function(){return"print"===this.$store.state.popup.opened?" toggled":""},downloadActive:function(){return"download"===this.$store.state.popup.opened?" toggled":""},firstGroupVisible:function(){return this.toc.show||this.thumbnails.show||this.notes.show},secondGroupVisible:function(){return this.share.show||this.print.show||this.downloads.show},thirdGroupVisible:function(){return this.fullscreen.show||this.zoom.show||this.sound.show},fourthGroupVisible:function(){return this.slideshow.show},divider1Visible:function(){return!this.narrowMode&&this.firstGroupVisible&&this.secondGroupVisible},divider2Visible:function(){return!this.narrowMode&&(this.firstGroupVisible||this.secondGroupVisible)&&this.thirdGroupVisible},divider3Visible:function(){return!this.narrowMode&&(this.firstGroupVisible||this.secondGroupVisible||this.thirdGroupVisible)&&this.fourthGroupVisible},slideshowVisible:function(){return this.$store.state.workspace.components.slideshow&&this.$store.state.workspace.components.slideshow.enabled},workspaceSize:function(){return this.$store.getters["workspace/size"]},sidebarOpened:function(){return this.$store.state.sidebar.opened},narrowMode:function(){const t=this.sidebarOpened?this.$store.state.sidebar.width:0;return this.workspaceSize.width<400+t}},watch:{muteSound(t){this.$store.dispatch("workspace/setFlashMessage",{text:t?this.$t("AlertMessage.SOUND_DISABLED"):this.$t("AlertMessage.SOUND_ENABLED")})},tocVisible:{immediate:!1,handler:function(t,e){return void 0===e?null:this.toggle("toc",t)}},thumbnailsVisible:{immediate:!1,handler:function(t,e){return void 0===e?null:this.toggle("thumbnails",t)}},notesVisible:{immediate:!1,handler:function(t,e){return void 0===e?null:this.toggle("notes",t)}},shareVisible:{immediate:!1,handler:function(t,e){return void 0===e?null:this.toggle("share",t)}},printVisible:{immediate:!1,handler:function(t,e){return void 0===e?null:this.toggle("print",t)}},downloadsVisible:{immediate:!1,handler:function(t,e){return void 0===e?null:this.toggle("downloads",t)}},soundVisible:{immediate:!1,handler:function(t,e){if(this.$store.state.workspace.bookComponent&&"string"!=typeof e)return void 0===e?null:this.toggle("sound",t)}},zoomVisible:{immediate:!1,handler:function(t,e){return void 0===e?null:this.toggle("zoom",t)}},fullscreenVisible:{immediate:!1,handler:function(t,e){return void 0===e?null:this.toggle("fullscreen",t)}},slideshowVisible:{immediate:!1,handler:function(t,e){return void 0===e?null:this.toggle("slideshow",t)}}},mounted(){this.toc.show=this.tocVisible,this.thumbnails.show=this.thumbnailsVisible,this.notes.show=this.notesVisible,this.share.show=this.shareVisible,this.print.show=this.printVisible,this.downloads.show=this.downloadsVisible,this.sound.show=this.soundVisible,this.zoom.show=this.zoomVisible,this.fullscreen.show=this.fullscreenVisible,this.slideshow.show=this.slideshowVisible,this.$nextTick((()=>{this.areTransitionsAllowed=!0})),setTimeout(this.onResize,300),window.addEventListener("resize",this.onResize)},methods:{beforeIconAdd(t){r.Z.addClass(t.firstChild,"svg-before-enter")},afterIconAdd(t){r.Z.removeClass(t.firstChild,"svg-before-enter")},beforeIconRemove(t){r.Z.addClass(t.firstChild,"svg-before-leave")},afterIconRemove(t){r.Z.removeClass(t.firstChild,"svg-before-leave")},toggle(t,e){this.attractOnControlsSet?e?this.addWithPop(t):this.removeWithPop(t):e?this.add(t):this.remove(t)},addWithPop(t){clearTimeout(this[t].timeoutId),clearTimeout(this.timeoutId),this.showPop=!0,this.showBackground=!0,this[t].timeoutId=setTimeout((()=>{this[t].show=!0}),c),this.timeoutId=setTimeout((()=>{this.showPop=!1,this.timeoutId=setTimeout((()=>{this.showBackground=!1}),c-h)}),c+d+900)},add(t){clearTimeout(this[t].timeoutId),this[t].show=!0},removeWithPop(t){clearTimeout(this[t].timeoutId),clearTimeout(this.timeoutId),this.showPop=!0,this.showBackground=!0;const e=c+300;this[t].timeoutId=setTimeout((()=>{this[t].show=!1}),e),this.timeoutId=setTimeout((()=>{this.showPop=!1,this.timeoutId=setTimeout((()=>{this.showBackground=!1}),c-h)}),e+d+300)},remove(t){clearTimeout(this[t].timeoutId),this[t].show=!1},toggleZoomMode:function(){this.isZoomed?this.$root.$emit("bottomMenu:zoomOut",!1,"bottom-toolbar-zoom"):this.isZoomed||this.isZoomPanelVisible?this.$store.dispatch("workspace/setZoomPanel",!1):this.$root.$emit("bottomMenu:zoomIn","bottom-toolbar-zoom")},toggleFullScreen:function(){this.wsToggleFullscreen()},toggleMuteSound:function(){this.$store.dispatch("sound/toggleMuteSound")},openSidebar:function(t,e){null!==this.$store.state.popup.opened&&this.$store.dispatch("popup/closePopup"),this.$store.state.sidebar.opened!==t?this.$store.dispatch("sidebar/openSidebar",{component:t,params:e}):this.$store.dispatch("sidebar/closeSidebar")},openPopup:function(t,e){this.$store.dispatch("popup/openPopup",{component:t,params:e})},toggleSlideShow:function(){const t=this.slideshowActive?this.$t("AlertMessage.SLIDESHOW_STOPPED"):this.$t("AlertMessage.SLIDESHOW_STARTED");this.$store.dispatch("workspace/setSlideshowActive",{value:!this.slideshowActive,target:"bottom-toolbar",messageText:t})},onResize(){this.scale=this.$store.state.workspace.size.width/u*.95,this.scale=this.scale>2?2:this.scale,this.translateY=(this.$el.clientHeight-this.$store.state.workspace.size.height)/2/this.scale}},beforeDestroy(){window.removeEventListener("resize",this.onResize)}},g=p;var m=s(1900);const f=(0,m.Z)(g,a,n,!1,null,"201fc451",null).exports;var v=s(5343),b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"top-toolbar",class:t.topBarClasses,attrs:{id:"top"}},[s("h1",{staticClass:"publication-title",attrs:{id:"publication-title",dir:t.titleDirection,role:"heading","aria-level":"1","aria-label":t.title,tabindex:"-1"}},[t._v("\n        "+t._s(t.title)+"\n    ")]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.showAccessibilityPDF?s("span",{staticClass:"divider divider1",attrs:{role:"separator","aria-hidden":"true"}}):t._e()]),t._v(" "),s("transition",{attrs:{name:"highlight"},on:{"before-enter":t.beforeIconAdd,"after-enter":t.afterIconAdd,"before-leave":t.beforeIconRemove,"after-leave":t.afterIconRemove}},[t.showAccessibilityPDF?s("button",{ref:"accessibilityBtn",staticClass:"accessibility-button icon icon-button",attrs:{"aria-haspopup":"dialog","aria-expanded":"false",title:t.$t("Accessibility.WINDOW_TITLE"),"aria-label":t.$t("Accessibility.WINDOW_TITLE"),tabindex:"0"},on:{click:function(e){return t.openPopup("accessibility")},mousedown:function(t){t.preventDefault()}}},[s("svgicon",{attrs:{focusable:"false",name:"accessibility"}})],1):t._e()]),t._v(" "),t.displayPages?s("span",{staticClass:"divider divider2",attrs:{role:"separator","aria-hidden":"true"}}):t._e(),t._v(" "),t.displayPages?s("pager",{ref:"pager"}):t._e(),t._v(" "),s("div",{staticClass:"space"}),t._v(" "),s("transition",{attrs:{name:t.veryCompactMode?null:"scale"}},[t.copyrightShown?s("copyright-button",{directives:[{name:"show",rawName:"v-show",value:!t.veryCompactMode,expression:"!veryCompactMode"}]}):t._e()],1),t._v(" "),t.showConfig?s("debug-controls",{attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "),t.showHelpIcon?s("button",{staticClass:"help-button icon icon-button",attrs:{"aria-haspopup":"dialog","aria-expanded":"false",title:t.$t("HelpWindow.TITLE"),"aria-label":t.$t("HelpWindow.TITLE"),tabindex:"0"},on:{click:function(e){return t.openPopup("help")},mousedown:function(t){t.preventDefault()}}},[s("svgicon",{attrs:{focusable:"false",name:"help"}})],1):t._e(),t._v(" "),s("transition",{attrs:{name:"highlight"},on:{"before-enter":t.beforeIconAdd,"after-enter":t.afterIconAdd,"before-leave":t.beforeIconRemove,"after-leave":t.afterIconRemove}},[t.hideSearchIcon?t._e():s("button",{class:["search-button icon icon-button",{hidden:t.searchSidebarOpened}],attrs:{"aria-controls":"search-sidebar","aria-haspopup":"grid","aria-expanded":"false",title:t.$t("SearchToolWindow.TITLE"),"aria-label":t.$t("SearchToolWindow.TITLE"),tabindex:"0"},on:{click:function(e){return t.openSidebar("search")},mousedown:function(t){t.preventDefault()}}},[s("svgicon",{attrs:{focusable:"false",name:"search"}})],1)])],1)},w=[],k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"pager"},[s("span",{staticClass:"pager-label",attrs:{id:"pager-label","aria-hidden":"true"}},[t._v(t._s(t.$t("TopMenu.PAGES_LABEL")))]),t._v(" "),s("input",{ref:"input",attrs:{type:"text",size:t.size,dir:"ltr",tabindex:"0","aria-label":t.pagerLabel},domProps:{value:t.stateForDisplay},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goTo(e)},blur:t.update,click:t.selectAll}}),t._v(" "),s("span",{staticClass:"status",attrs:{role:"status",tabindex:"-1"}},[t._v(t._s(t.status))]),t._v(" "),t.totalPagesVisible?s("span",{attrs:{role:"separator","aria-hidden":"true"}},[t._v("/")]):t._e(),t._v(" "),t.totalPagesVisible?s("span",{staticClass:"pager-total",attrs:{"aria-hidden":"true"}},[t._v(t._s(t.totalForDisplay))]):t._e()])},_=[];const y={computed:{totalPagesVisible:function(){return this.$store.state.workspace.components.paginator&&!1!==this.$store.state.workspace.components.paginator.totalPagesVisible},totalForDisplay:function(){return this.$store.getters["pager/totalForDisplay"]},stateForDisplay:function(){return this.$store.getters["pager/stateForDisplay"]},size:function(){return Math.max(5,this.stateForDisplay.length)},status(){return this.$store.state.workspace.preloader?null:this.$store.getters["lightbox/isShown"]?this.$t("Lightbox.LIGHTBOX_STATUS",{0:this.$store.getters["lightbox/currentItemNumber"],1:this.$store.getters["lightbox/itemsCount"]}):this.$t("Other.STATUS",{0:this.stateForDisplay,1:this.totalForDisplay})},pagerLabel(){return this.$t("TopMenu.PAGER_LABEL")}},methods:{selectAll:function(t){t.target.select()},goTo:function(t){this.$store.dispatch("pager/goToPageByUserInput",{userInput:t.target.value,type:"caption",target:"paginator"}),t.target.blur()},update:function(t){t.target.value=this.stateForDisplay},setFocus:function(){this.$store.dispatch("workspace/setActiveInteractiveElement",null),this.$refs.input.focus()}}};const $=(0,m.Z)(y,k,_,!1,null,"82ffb7c6",null).exports;var C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"copyright-button",attrs:{id:"copyright-button"}},[s("a",{attrs:{target:t.target,dir:t.labelDirection,id:"copyright-link",href:t.url,role:"menuitem","aria-label":t.label,tabindex:"0"},on:{click:t.onClick}},[t._v(t._s(t.label))])])},x=[],T=s(8531),S=s(6382),I=s.n(S);const P={computed:{label(){return(0,T.m9)(this.$store.state.workspace.components.copyright.label)},labelDirection:function(){return"ltr"===I().getDirection(this.label)?"ltr":"rtl"},url(){return this.$store.state.workspace.components.copyright.url||null},target(){return this.$store.state.workspace.components.copyright.target||"_blank"}},methods:{onClick(){const t=this.$store.state.pager.currentPage;this.$root.$emit("link",{type:"external",source:"copyright",url:this.url,target:this.target,pageId:t})}}};const E=(0,m.Z)(P,C,x,!1,null,"0dcd435e",null).exports;var A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"debug-controls",attrs:{"aria-hidden":"true"}},[s("button",{staticClass:"debug icon icon-button",class:{toggled:t.showMenu},attrs:{tabindex:"-1"},on:{click:t.toggleDebugMenu}},[t._v("Debug")]),t._v(" "),s("transition",{attrs:{name:"debug-fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showMenu,expression:"showMenu"}],staticClass:"wrapper",attrs:{dir:"ltr"}},[s("div",{staticClass:"menu-header"},[s("div",{staticClass:"publication-info",on:{click:t.openPublicationInfo}},[t._v("Publication Info")]),t._v(" "),s("button",{staticClass:"svg-button close-button",attrs:{title:"Disable debug mode"},on:{click:t.disableDebug}},[s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"close"}})],1)]),t._v(" "),s("ul",[s("li",{staticClass:"toggle",class:{toggled:t.sections.book}},[s("div",{staticClass:"caption",on:{click:function(e){return t.toggleSection("book")}}},[s("span",{staticClass:"section-icon"}),t._v("Book")]),t._v(" "),s("ul",[s("li",[s("label",{attrs:{for:"input-flip"}},[t._v("Flip:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.flip,expression:"flip"}],attrs:{id:"input-flip",type:"checkbox"},domProps:{checked:Array.isArray(t.flip)?t._i(t.flip,null)>-1:t.flip},on:{change:function(e){var s=t.flip,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.flip=s.concat([a])):n>-1&&(t.flip=s.slice(0,n).concat(s.slice(n+1)))}else t.flip=o}}})]),t._v(" "),s("li",[s("label",{attrs:{for:"input-pager"}},[t._v("Pager mode:")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.pagerMode,expression:"pagerMode"}],attrs:{id:"input-pager"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.pagerMode=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"spread"}},[t._v("Spread "+t._s(t.flip?"":"*"))]),t._v(" "),s("option",{attrs:{value:"single"}},[t._v("Single "+t._s(t.flip?"":"*"))]),t._v(" "),t.flip?s("option",{attrs:{value:"auto"}},[t._v("Auto")]):t._e(),t._v(" "),t.flip?t._e():s("option",{attrs:{value:"slide"}},[t._v("Slide")])])]),t._v(" "),!t.flip||"single"!==t.pagerMode&&"auto"!==t.pagerMode?t._e():s("li",[s("label",{attrs:{for:"input-translucent-reverse-side"}},[t._v("Translucent reverse side:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.isTranslucentReverseSide,expression:"isTranslucentReverseSide"}],attrs:{id:"input-translucent-reverse-side",type:"checkbox"},domProps:{checked:Array.isArray(t.isTranslucentReverseSide)?t._i(t.isTranslucentReverseSide,null)>-1:t.isTranslucentReverseSide},on:{change:function(e){var s=t.isTranslucentReverseSide,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.isTranslucentReverseSide=s.concat([a])):n>-1&&(t.isTranslucentReverseSide=s.slice(0,n).concat(s.slice(n+1)))}else t.isTranslucentReverseSide=o}}})]),t._v(" "),t.flip||"slide"!==t.pagerMode?t._e():s("li",[s("label",{attrs:{for:"input-crop"}},[t._v("Content crop:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.cropMode,expression:"cropMode"}],attrs:{id:"input-crop",type:"checkbox",disabled:t.flip},domProps:{checked:Array.isArray(t.cropMode)?t._i(t.cropMode,null)>-1:t.cropMode},on:{change:function(e){var s=t.cropMode,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.cropMode=s.concat([a])):n>-1&&(t.cropMode=s.slice(0,n).concat(s.slice(n+1)))}else t.cropMode=o}}})]),t._v(" "),t.flip?s("li",[s("label",{attrs:{for:"input-thickness"}},[t._v("Thickness:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.thickness,expression:"thickness"}],attrs:{id:"input-thickness",type:"checkbox"},domProps:{checked:Array.isArray(t.thickness)?t._i(t.thickness,null)>-1:t.thickness},on:{change:function(e){var s=t.thickness,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.thickness=s.concat([a])):n>-1&&(t.thickness=s.slice(0,n).concat(s.slice(n+1)))}else t.thickness=o}}})]):t._e(),t._v(" "),t.flip?s("li",[s("label",{attrs:{for:"input-hardcover"}},[t._v("Hardcover:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.hardcover,expression:"hardcover"}],attrs:{id:"input-hardcover",type:"checkbox",disabled:!t.flip},domProps:{checked:Array.isArray(t.hardcover)?t._i(t.hardcover,null)>-1:t.hardcover},on:{change:function(e){var s=t.hardcover,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.hardcover=s.concat([a])):n>-1&&(t.hardcover=s.slice(0,n).concat(s.slice(n+1)))}else t.hardcover=o}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.hardcoverColor,expression:"hardcoverColor"}],staticClass:"hc-color",attrs:{id:"input-hardcover-color",type:"color",disabled:!t.flip},domProps:{value:t.hardcoverColor},on:{input:function(e){e.target.composing||(t.hardcoverColor=e.target.value)}}})]):t._e(),t._v(" "),s("li",[s("label",{attrs:{for:"input-rtl"}},[t._v("RTL Book:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.rtl,expression:"rtl"}],attrs:{id:"input-rtl",type:"checkbox"},domProps:{checked:Array.isArray(t.rtl)?t._i(t.rtl,null)>-1:t.rtl},on:{change:function(e){var s=t.rtl,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.rtl=s.concat([a])):n>-1&&(t.rtl=s.slice(0,n).concat(s.slice(n+1)))}else t.rtl=o}}})]),t._v(" "),s("li",[s("label",{attrs:{for:"input-num-offset"}},[t._v("Num offset:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.numerationOffset,expression:"numerationOffset"}],staticClass:"num-offset",attrs:{id:"input-num-offset",type:"number",placeholder:"0",size:"3",step:"1"},domProps:{value:t.numerationOffset},on:{input:function(e){e.target.composing||(t.numerationOffset=e.target.value)}}})])])]),t._v(" "),s("li",{staticClass:"toggle",class:{toggled:t.sections.workspace}},[s("div",{staticClass:"caption",on:{click:function(e){return t.toggleSection("workspace")}}},[s("span",{staticClass:"section-icon"}),t._v("Workspace")]),t._v(" "),s("ul",[s("li",[s("label",{attrs:{for:"input-lang"}},[t._v("Language:")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.currentLocale,expression:"currentLocale"}],attrs:{id:"input-lang"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.currentLocale=e.target.multiple?s:s[0]}}},t._l(t.availableLocales,(function(e){return s("option",{domProps:{value:e}},[t._v("\n                                    "+t._s(e)+"\n                                ")])})),0),t._v(" "),s("button",{staticClass:"next-locale",attrs:{title:"Alt + Ctrl + ,"},on:{click:t.nextLocale}},[t._v("➡️")])]),t._v(" "),s("li",[s("label",{attrs:{for:"input-book-size"}},[t._v("Book Size:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.bookSize,expression:"bookSize"}],staticClass:"book-size",attrs:{id:"input-book-size",type:"number",placeholder:"95",size:"3",step:"1"},domProps:{value:t.bookSize},on:{input:function(e){e.target.composing||(t.bookSize=e.target.value)}}})]),t._v(" "),s("li",[s("label",{attrs:{for:"input-select-text"}},[t._v("Text Selection:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectText,expression:"selectText"}],attrs:{id:"input-select-text",type:"checkbox"},domProps:{checked:Array.isArray(t.selectText)?t._i(t.selectText,null)>-1:t.selectText},on:{change:function(e){var s=t.selectText,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.selectText=s.concat([a])):n>-1&&(t.selectText=s.slice(0,n).concat(s.slice(n+1)))}else t.selectText=o}}})]),t._v(" "),s("li",[s("label",{attrs:{for:"input-search"}},[t._v("Search:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{id:"input-search",type:"checkbox"},domProps:{checked:Array.isArray(t.search)?t._i(t.search,null)>-1:t.search},on:{change:function(e){var s=t.search,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.search=s.concat([a])):n>-1&&(t.search=s.slice(0,n).concat(s.slice(n+1)))}else t.search=o}}})]),t._v(" "),s("li",[s("label",{attrs:{for:"input-accessibility"}},[t._v("Accessibility:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.accessibility,expression:"accessibility"}],attrs:{id:"input-accessibility",type:"checkbox"},domProps:{checked:Array.isArray(t.accessibility)?t._i(t.accessibility,null)>-1:t.accessibility},on:{change:function(e){var s=t.accessibility,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.accessibility=s.concat([a])):n>-1&&(t.accessibility=s.slice(0,n).concat(s.slice(n+1)))}else t.accessibility=o}}})])])]),t._v(" "),s("li",{staticClass:"toggle",class:{toggled:t.sections.components}},[s("div",{staticClass:"caption",on:{click:function(e){return t.toggleSection("components")}}},[s("span",{staticClass:"section-icon"}),t._v("Bottom Menu")]),t._v(" "),s("ul",[s("li",[s("label",{attrs:{for:"input-attract"}},[t._v("Raise bar:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.attract,expression:"attract"}],attrs:{id:"input-attract",type:"checkbox"},domProps:{checked:Array.isArray(t.attract)?t._i(t.attract,null)>-1:t.attract},on:{change:function(e){var s=t.attract,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.attract=s.concat([a])):n>-1&&(t.attract=s.slice(0,n).concat(s.slice(n+1)))}else t.attract=o}}})]),t._v(" "),s("li",{staticClass:"divider"}),t._v(" "),s("li",[s("label",{attrs:{for:"input-toc"}},[t._v("TOC:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.toc,expression:"toc"}],attrs:{id:"input-toc",type:"checkbox"},domProps:{checked:Array.isArray(t.toc)?t._i(t.toc,null)>-1:t.toc},on:{change:function(e){var s=t.toc,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.toc=s.concat([a])):n>-1&&(t.toc=s.slice(0,n).concat(s.slice(n+1)))}else t.toc=o}}})]),t._v(" "),s("li",[s("label",{attrs:{for:"input-thumbnails"}},[t._v("Thumbnails:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.thumbnails,expression:"thumbnails"}],attrs:{id:"input-thumbnails",type:"checkbox"},domProps:{checked:Array.isArray(t.thumbnails)?t._i(t.thumbnails,null)>-1:t.thumbnails},on:{change:function(e){var s=t.thumbnails,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.thumbnails=s.concat([a])):n>-1&&(t.thumbnails=s.slice(0,n).concat(s.slice(n+1)))}else t.thumbnails=o}}})]),t._v(" "),s("li",[s("label",{attrs:{for:"input-notes"}},[t._v("Notes:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.notes,expression:"notes"}],attrs:{id:"input-notes",type:"checkbox"},domProps:{checked:Array.isArray(t.notes)?t._i(t.notes,null)>-1:t.notes},on:{change:function(e){var s=t.notes,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.notes=s.concat([a])):n>-1&&(t.notes=s.slice(0,n).concat(s.slice(n+1)))}else t.notes=o}}})]),t._v(" "),s("li",{staticClass:"divider"}),t._v(" "),s("li",[s("label",{attrs:{for:"input-share"}},[t._v("Share:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.share,expression:"share"}],attrs:{id:"input-share",type:"checkbox"},domProps:{checked:Array.isArray(t.share)?t._i(t.share,null)>-1:t.share},on:{change:function(e){var s=t.share,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.share=s.concat([a])):n>-1&&(t.share=s.slice(0,n).concat(s.slice(n+1)))}else t.share=o}}})]),t._v(" "),s("li",[s("label",{attrs:{for:"input-print"}},[t._v("Print:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.print,expression:"print"}],attrs:{id:"input-print",type:"checkbox"},domProps:{checked:Array.isArray(t.print)?t._i(t.print,null)>-1:t.print},on:{change:function(e){var s=t.print,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.print=s.concat([a])):n>-1&&(t.print=s.slice(0,n).concat(s.slice(n+1)))}else t.print=o}}})]),t._v(" "),s("li",[s("label",{attrs:{for:"input-download"}},[t._v("Download:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.download,expression:"download"}],attrs:{id:"input-download",type:"checkbox"},domProps:{checked:Array.isArray(t.download)?t._i(t.download,null)>-1:t.download},on:{change:function(e){var s=t.download,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.download=s.concat([a])):n>-1&&(t.download=s.slice(0,n).concat(s.slice(n+1)))}else t.download=o}}})]),t._v(" "),s("li",{staticClass:"divider"}),t._v(" "),s("li",[s("label",{attrs:{for:"input-sound"}},[t._v("Sound:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.sound,expression:"sound"}],attrs:{id:"input-sound",type:"checkbox"},domProps:{checked:Array.isArray(t.sound)?t._i(t.sound,null)>-1:t.sound},on:{change:function(e){var s=t.sound,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.sound=s.concat([a])):n>-1&&(t.sound=s.slice(0,n).concat(s.slice(n+1)))}else t.sound=o}}})]),t._v(" "),s("li",[s("label",{attrs:{for:"input-zoom"}},[t._v("Zoom:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.zoom,expression:"zoom"}],attrs:{id:"input-zoom",type:"checkbox"},domProps:{checked:Array.isArray(t.zoom)?t._i(t.zoom,null)>-1:t.zoom},on:{change:function(e){var s=t.zoom,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.zoom=s.concat([a])):n>-1&&(t.zoom=s.slice(0,n).concat(s.slice(n+1)))}else t.zoom=o}}})]),t._v(" "),s("li",[s("label",{attrs:{for:"input-fullscreen"}},[t._v("Fullscreen:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.fullscreen,expression:"fullscreen"}],attrs:{id:"input-fullscreen",type:"checkbox"},domProps:{checked:Array.isArray(t.fullscreen)?t._i(t.fullscreen,null)>-1:t.fullscreen},on:{change:function(e){var s=t.fullscreen,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.fullscreen=s.concat([a])):n>-1&&(t.fullscreen=s.slice(0,n).concat(s.slice(n+1)))}else t.fullscreen=o}}})]),t._v(" "),s("li",{staticClass:"divider"}),t._v(" "),s("li",[s("label",{attrs:{for:"input-slideshow"}},[t._v("Slideshow:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.slideshow,expression:"slideshow"}],attrs:{id:"input-slideshow",type:"checkbox"},domProps:{checked:Array.isArray(t.slideshow)?t._i(t.slideshow,null)>-1:t.slideshow},on:{change:function(e){var s=t.slideshow,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.slideshow=s.concat([a])):n>-1&&(t.slideshow=s.slice(0,n).concat(s.slice(n+1)))}else t.slideshow=o}}})])])]),t._v(" "),s("li",{staticClass:"toggle",class:{toggled:t.sections.skin}},[s("div",{staticClass:"caption",on:{click:function(e){return t.toggleSection("skin")}}},[s("span",{staticClass:"section-icon"}),t._v("Skin")]),t._v(" "),s("ul",[s("li",[s("label",{attrs:{for:"input-skin"}},[t._v("Skin:\n                                "),s("button",{staticClass:"prev-skin",attrs:{title:"Alt + Ctrl + ."},on:{click:t.prevSkin}},[t._v("⬅️")]),s("button",{staticClass:"next-skin",attrs:{title:"Alt + Ctrl + /"},on:{click:t.nextSkin}},[t._v("➡️")])]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.currentSkin,expression:"currentSkin"}],staticClass:"skin-selector",attrs:{id:"input-skin"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.currentSkin=e.target.multiple?s:s[0]}}},t._l(t.skinList,(function(e){return s("option",{domProps:{value:e}},[t._v("\n                                    "+t._s(e)+"\n                                ")])})),0)]),t._v(" "),s("li",[s("label",{attrs:{for:"input-main-color"}},[t._v("Main color:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.mainSkinColor,expression:"mainSkinColor"}],staticClass:"skin-color",attrs:{id:"input-main-color",type:"color"},domProps:{value:t.mainSkinColor},on:{input:function(e){e.target.composing||(t.mainSkinColor=e.target.value)}}}),s("span",{staticClass:"color-hex"},[t._v(t._s(t.mainSkinColor))])]),t._v(" "),s("li",[s("label",{attrs:{for:"input-second-color"}},[t._v("Second color:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.secondSkinColor,expression:"secondSkinColor"}],staticClass:"skin-color",attrs:{id:"input-second-color",type:"color"},domProps:{value:t.secondSkinColor},on:{input:function(e){e.target.composing||(t.secondSkinColor=e.target.value)}}}),s("span",{staticClass:"color-hex"},[t._v(t._s(t.secondSkinColor))])]),t._v(" "),s("li",[s("label",{attrs:{for:"input-bg-image"}},[t._v("Bg Image:")]),t._v(" "),s("input",{staticClass:"bg-image-input",attrs:{id:"input-bg-image",type:"text"},domProps:{value:t.bgImageUrl},on:{change:function(e){return t.setBgImage(e.target.value)}}})]),t._v(" "),s("li",[s("label",{attrs:{for:"input-bg-size"}},[t._v("Bg Size:")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.backgroundSize,expression:"backgroundSize"}],staticClass:"bg-size-input",attrs:{id:"input-bg-size"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.backgroundSize=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"auto"}},[t._v("auto/repeat")]),t._v(" "),s("option",{attrs:{value:"cover"}},[t._v("cover/no-repeat")]),t._v(" "),s("option",{attrs:{value:"contain"}},[t._v("contain/no-repeat")])])]),t._v(" "),s("li",[s("label",{attrs:{for:"input-bg-position"}},[t._v("Bg Position:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.backgroundPosition,expression:"backgroundPosition"}],staticClass:"bg-position-input",attrs:{id:"input-bg-position",type:"text"},domProps:{value:t.backgroundPosition},on:{input:function(e){e.target.composing||(t.backgroundPosition=e.target.value)}}})]),t._v(" "),s("li",[s("label",{attrs:{for:"input-opaque-bar"}},[t._v("Opaque Bar Logo:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.allowOpaqueBar,expression:"allowOpaqueBar"}],attrs:{id:"input-opaque-bar",type:"checkbox"},domProps:{checked:Array.isArray(t.allowOpaqueBar)?t._i(t.allowOpaqueBar,null)>-1:t.allowOpaqueBar},on:{change:function(e){var s=t.allowOpaqueBar,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.allowOpaqueBar=s.concat([a])):n>-1&&(t.allowOpaqueBar=s.slice(0,n).concat(s.slice(n+1)))}else t.allowOpaqueBar=o}}})])])]),t._v(" "),t.showConfig?[s("li",{staticClass:"toggle",class:{toggled:t.sections.apiEventsLog}},[s("div",{staticClass:"caption",on:{click:function(e){return t.toggleSection("apiEventsLog")}}},[s("span",{staticClass:"section-icon"}),t._v("api events")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.sections.apiEventsLog,expression:"sections.apiEventsLog"}],staticClass:"api-log"},t._l(t.apiEventsLog.slice().reverse(),(function(e,i){return s("div",{key:i,staticClass:"api-log-element"},[t._v("\n                                "+t._s(e)+"\n                                "),0===i?s("div",{staticClass:"api-log-element-latest-tag"},[t._v("LATEST")]):t._e()])})),0)]),t._v(" "),t.apiUsageLog.length?s("li",{staticClass:"toggle",class:{toggled:t.sections.apiUsageLog}},[s("div",{staticClass:"caption",on:{click:function(e){return t.toggleSection("apiUsageLog")}}},[s("span",{staticClass:"section-icon"}),t._v("api usage\n                        ")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.sections.apiUsageLog,expression:"sections.apiUsageLog"}],staticClass:"api-log"},t._l(t.apiUsageLog.slice().reverse(),(function(e,i){return s("div",{key:i,staticClass:"api-log-element",attrs:{title:"getProperty('"+e.target+"').set({param: "+e.param+", value: "+e.value+"})"}},[t._v("\n                                "+t._s(e.target.slice(0,1).toUpperCase())+" "+t._s(e.param)+"\n                                "),0===i?s("div",{staticClass:"api-log-element-latest-tag"},[t._v("LATEST")]):t._e()])})),0)]):s("li",{staticClass:"section-empty"},[t._v("No api usage yet")])]:t._e()],2)])])],1)},L=[],z=s(5622),M=s(776),D=s(1042);s(6174);const B={data(){const t=JSON.parse((0,M.Z)().getLocalStorage().getItem("showConfigSections"))||{};return{showMenu:!1,sections:{book:t.book||!1,workspace:t.workspace||!1,components:t.components||!1,skin:t.skin||!1,apiEventsLog:t.apiEventsLog||!1,apiUsageLog:t.apiUsageLog||!1},skinList:["current"],currentSkin:"current",loadedBgImage:null,bgImage:null,loadingUtil:!1,api:this.$root.$options.api}},beforeMount(){this.setSkinColorThrottled=(0,z.P2)(this.setSkinColor,200),this.loadSkinList(),this.loadBgImage(this.bgImageUrl),s.g.addEventListener("keydown",this.keyDownHandler)},beforeDestroy(){s.g.removeEventListener("keydown",this.keyDownHandler)},computed:{layout(){return this.$store.state.workspace.layout},availableLocales:function(){const t=this;return Object.keys(this.$store.state.workspace.locales).length>0?this.$store.state.i18n.config.locales.filter((function(e){return-1!==t.$store.state.workspace.locales.indexOf(e)})):this.$store.state.i18n.config.locales},currentLocale:{get:function(){return this.$store.state.i18n.currentLocale},set:function(t){this.setLocale(t)}},thickness:{get:function(){return this.$store.state.book.thickness},set:function(t){this.apiSetPagesValue("thickness",t)}},isTranslucentReverseSide:{get:function(){return this.$store.state.workspace.components.book.isTranslucentReverseSide},set:function(t){this.setWorkspaceBookComponent({isTranslucentReverseSide:t}),this.$store.state.pager.singleMode&&this.$store.dispatch("pager/setForceRerender",{forceRerender:!0})}},hardcover:{get:function(){return this.$store.getters["book/hasHardcover"]},set:function(t){this.apiSetPagesValue("hardcover",t)}},hardcoverColor:{get:function(){return this.$store.state.book.hardcoverColor},set:function(t){this.apiSetPagesValue("hardcoverColor",t)}},numerationOffset:{get:function(){return this.$store.state.book.numerationOffset},set:function(t){const e=parseInt(t,10);isNaN(e)||this.apiSetPagesValue("numerationOffset",e)}},bookSize:{get:function(){return this.$store.state.workspace.bookSize},set:function(t){this.apiSetWorkspaceValue("bookSize",t)}},rtl:{get:function(){return this.$store.state.book.rightToLeft},set:function(t){this.apiSetPagesValue("rightToLeft",t)}},flip:{get:function(){return this.$store.state.workspace.components.book.flip},set:function(t){this.setWorkspaceBookComponent({flip:t})}},cropMode:{get:function(){return this.$store.state.book.contentCrop},set:function(t){this.apiSetPagesValue("contentCrop",t)}},pagerMode:{get:function(){return"auto"===this.$store.state.workspace.components.book.flipbookType?"auto":this.$store.state.pager.mode},set:function(t){this.flip||"slide"===t?this.setWorkspaceBookComponent({flipbookType:t}):this.$store.dispatch("pager/changeMode",{mode:t,target:"debug"})}},attract:{get:function(){return this.$store.state.workspace.attractOnControlsSet},set:function(t){this.apiSetWorkspaceValue("attractOnControlsSet",t)}},toc:{get:function(){return this.$store.state.toc.enabled},set:function(t){this.apiSetWorkspaceValue("toc.enabled",t)}},download:{get:function(){return this.$store.state.downloads.enabled},set:function(t){this.apiSetWorkspaceValue("downloads.enabled",t)}},sound:{get:function(){return this.$store.state.sound.enabled},set:function(t){this.apiSetWorkspaceValue("sound.enabled",t)}},search:{get:function(){return this.$store.state.search.enabled},set:function(t){this.apiSetWorkspaceValue("search.enabled",t)}},accessibility:{get:function(){return this.$store.getters["workspace/accessibilityButtonVisible"]},set:function(t){this.apiSetWorkspaceValue("accessibilityPDF.enabled",t),t&&!this.$store.getters["workspace/accessibilityButtonVisible"]&&this.apiSetWorkspaceValue("accessibilityPDF.useOriginalPdf",!0)}},thumbnails:{get:function(){return this.$store.state.workspace.components.thumbnails},set:function(t){this.apiSetWorkspaceValue("components.thumbnails",t)}},notes:{get:function(){return this.$store.state.workspace.components.notes},set:function(t){this.apiSetWorkspaceValue("components.notes",t)}},share:{get:function(){return this.$store.state.workspace.components.share},set:function(t){this.apiSetWorkspaceValue("components.share",t)}},print:{get:function(){return this.$store.state.workspace.components.print},set:function(t){this.apiSetWorkspaceValue("components.print",t)}},fullscreen:{get:function(){return this.$store.state.workspace.components.fullscreen},set:function(t){this.apiSetWorkspaceValue("components.fullscreen",t)}},zoom:{get:function(){return this.$store.state.workspace.components.zoom},set:function(t){this.apiSetWorkspaceValue("components.zoom",t)}},slideshow:{get:function(){return this.$store.state.workspace.components.slideshow?.enabled},set:function(t){this.apiSetWorkspaceValue("components.slideshow.enabled",t)}},selectText:{get:function(){return this.$store.state.workspace.components.textSelection},set:function(t){this.apiSetWorkspaceValue("components.textSelection",t)}},mainSkinColor:{get:function(){return this.$store.state.skin.styles["main-color"]},set:function(t){this.setSkinColorThrottled({mainColor:t})}},secondSkinColor:{get:function(){return this.$store.state.skin.styles["second-color"]},set:function(t){this.setSkinColorThrottled({secondColor:t})}},bgImageUrl(){return this.$store.state.skin.styles["background-image"].replace("url(","").replace(")","").replaceAll('"',"")},backgroundSize:{get:function(){return this.$store.state.skin.styles["background-size"]},set:function(t){this.setSkinColorThrottled({backgroundSize:t})}},backgroundPosition:{get:function(){return this.$store.state.skin.styles["background-position"]},set:function(t){this.api.getProperty("skin").set("background-position",t)}},allowOpaqueBar:{get:function(){return this.$store.state.logo.allowOpaqueBar},set:function(t){this.apiSetWorkspaceValue("logoLink.allowOpaqueBar",t)}},apiEventsLog(){return this.$store.state.workspace.apiEventsLog},apiUsageLog(){return this.$store.state.workspace.apiUsageLog},showConfig(){return this.$store.state.workspace.showConfig}},watch:{currentSkin:"loadSkin",showMenu(t){t&&this.loadColorUtil()}},methods:{openPublicationInfo(){this.$store.dispatch("popup/openPopup",{component:"info"})},apiSetWorkspaceValue(t,e){this.api.getProperty("workspace").set(t,e)},apiSetPagesValue(t,e){this.api.getProperty("pages").set(t,e)},setSkinColor(t){let{mainColor:e=null,secondColor:s=null,image:i=null,backgroundSize:o=null}=t;if(!window.ColorsFromImage)return void this.loadColorUtil();const a=new window.ColorsFromImage;e=e||this.$store.state.skin.styles["main-color"],s=s||this.$store.state.skin.styles["second-color"],o=o||this.$store.state.skin.styles["background-size"],i=i||this.bgImage,a.setMainColor(e),a.setSecondColor(s),o&&a.setBackgroundSize(o),i&&a.setImage(i);const n=a.getVars();for(const r in n)n.hasOwnProperty(r)&&this.api.getProperty("skin").set(r,n[r])},setWorkspaceBookComponent(t){let{flip:e=this.flip,flipbookType:s=this.pagerMode,isTranslucentReverseSide:i=this.isTranslucentReverseSide}=t;this.apiSetWorkspaceValue("components.book",{flip:e,flipbookType:s,isTranslucentReverseSide:i})},setLocale(t){this.$store.dispatch("i18n/setCurrentLocale",{locale:t})},toggleSection(t){this.sections[t]=!this.sections[t],(0,M.Z)().getLocalStorage().setItem("showConfigSections",JSON.stringify(this.sections))},toggleDebugMenu(){this.showMenu=!this.showMenu},loadSkinList(){const t=[];s.g.fetch((0,M.Z)().translatePath("static/skins/skins.json")).then((t=>t.json())).then((e=>{e.map((e=>{t.push(e.folder)})),t.sort(),t.unshift("current")})),this.skinList=t},loadSkin(t){const e="current"===t?"skins/current/config.json":`static/skins/${t}/config.json`;s.g.fetch((0,M.Z)().translatePath(e)).then((t=>t.json())).then((e=>{this.api.getProperty("skin").set("background-image","");for(const s in e)e.hasOwnProperty(s)&&("background-image"===s&&"current"!==t&&(e[s]=e[s].replace("skins/current",`static/skins/${t}`)),this.api.getProperty("skin").set(s,e[s]));this.loadBgImage(this.bgImageUrl)}))},loadColorUtil(){if(this.loadingUtil)return;this.loadingUtil=!0;const t=(0,M.Z)().translatePath("static/skins/editor-utils.js"),e=(0,M.Z)().getCrossOrigin();(0,D.Z)(t,(()=>{this.loadingUtil=!1}),(()=>{}),e)},async setBgImage(t){t||(this.setSkinColor({image:null}),this.api.getProperty("skin").set("background-image",""));const e=await this.loadBgImage(t);this.setSkinColor({image:e}),this.api.getProperty("skin").set("background-image",`url("${t}")`)},loadBgImage(t){return this.loadedBgImage===t?this.bgImage:new Promise((e=>{const s=new Image;s.onload=()=>{this.bgImage=s,this.loadedBgImage=t,e(s)},s.crossOrigin=(0,M.Z)().getCrossOrigin(),s.src=(0,M.Z)().translatePath(t)}))},prevSkin(){const t=this.skinList.filter((t=>"current"!==t)),e=t.indexOf(this.currentSkin);this.currentSkin=t[e-1]||t[t.length-1]},nextSkin(){const t=this.skinList.filter((t=>"current"!==t)),e=t.indexOf(this.currentSkin);this.currentSkin=t[e+1]||t[0]},nextLocale(){const t=this.availableLocales.indexOf(this.currentLocale);this.setLocale(this.availableLocales[t+1]||this.availableLocales[0])},keyDownHandler(t){(t.ctrlKey||t.metaKey)&&t.altKey&&"Slash"===t.code&&this.nextSkin(),(t.ctrlKey||t.metaKey)&&t.altKey&&"Period"===t.code&&this.prevSkin(),(t.ctrlKey||t.metaKey)&&t.altKey&&"Comma"===t.code&&this.nextLocale()},disableDebug(){this.$store.dispatch("workspace/setShowConfig",!1),(0,M.Z)().getLocalStorage().removeItem("showConfig"),this.$store.dispatch("workspace/setFlashMessage",{text:"Debug mode disabled",delay:1500})}}};const N=(0,m.Z)(B,A,L,!1,null,"1d38fd5e",null).exports;s(6010),s(1083),s(8379);const O={computed:{blinkLight(){return this.opaqueTop?(0,l.R)((0,l.l)(this.backgroundColor))<.5:(0,l.R)((0,l.l)(this.$store.state.skin.styles["top-right-menu-icon-color"]))>.5},opaqueTop(){return-1!==this.$store.state.skin.styles.classes.indexOf("opaqueTop")},backgroundColor(){const t=this.opaqueTop?"main-color":"second-color";return this.$store.state.skin.styles[t]},title(){return(0,T.m9)(this.$store.state.workspace.title)},titleDirection:function(){return"ltr"===I().getDirection(this.title)?"ltr":"rtl"},hideSearchIcon(){return!this.$store.state.search.enabled},showHelpIcon(){return this.$store.state.workspace.components.help.enabled&&this.$t("HelpWindow.ABOUT_TEXT")&&this.$store.state.workspace.components.help.toolbarIcon},copyrightShown(){return this.$store.state.workspace.components.copyright.enabled&&this.$store.state.workspace.components.copyright.label},displayPages:function(){return!(!1===this.$store.state.workspace.components.paginator||!1===this.$store.state.workspace.components.paginator.enabled)},showConfig(){return this.$store.state.workspace.showConfig},showAccessibilityPDF(){return this.$store.getters["workspace/accessibilityButtonVisible"]},searchSidebarOpened(){return"search"===this.$store.state.sidebar.opened},accessibilityMode(){return this.$store.state.workspace.accessibilityMode},topBarClasses(){return{"blink-light":this.blinkLight,compact:this.compactMode}},workspaceSize:function(){return this.$store.getters["workspace/size"]},sidebarOpened:function(){return this.$store.state.sidebar.opened},compactMode:function(){const t=this.sidebarOpened?this.$store.state.sidebar.width:0;return this.workspaceSize.width<500+t},veryCompactMode:function(){const t=this.sidebarOpened?this.$store.state.sidebar.width:0;return this.workspaceSize.width<350+t}},components:{pager:$,"copyright-button":E,"debug-controls":N},methods:{openSidebar:function(t){null!==this.$store.state.popup.opened&&this.$store.dispatch("popup/closePopup"),this.$store.dispatch("sidebar/openSidebar",{component:t})},openPopup:function(t){null!==this.$store.state.popup.opened&&this.$store.dispatch("popup/closePopup"),this.$store.dispatch("popup/openPopup",{component:t})},beforeIconAdd(t){r.Z.addClass(t.firstChild,"svg-before-enter")},afterIconAdd(t){r.Z.removeClass(t.firstChild,"svg-before-enter")},beforeIconRemove(t){r.Z.addClass(t.firstChild,"svg-before-leave")},afterIconRemove(t){r.Z.removeClass(t.firstChild,"svg-before-leave")}},watch:{accessibilityMode(t){t&&(document.activeElement&&null!==document.activeElement.getAttribute("tabindex")||(this.showAccessibilityPDF?this.$refs.accessibilityBtn.focus():this.$refs.pager.setFocus()))}}},H=O;const R=(0,m.Z)(H,b,w,!1,null,"503365c6",null).exports;var F=s(8384),V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"overlay",style:{"background-color":t.config.backgroundColor}},[s("div",{staticClass:"book-wrap",style:t.bookWrapStyles},[s("div",{staticClass:"book",style:{perspective:t.width*(t.isChrome?3:1.5)+"px"}},[s("div",{staticClass:"page start-page",style:t.pageStyles}),t._v(" "),s("div",{ref:"page1",staticClass:"page",style:t.pageStyles}),t._v(" "),s("div",{ref:"page2",staticClass:"page",style:t.pageStyles}),t._v(" "),s("div",{ref:"page3",staticClass:"page",style:t.pageStyles}),t._v(" "),s("div",{ref:"page4",staticClass:"page",style:t.pageStyles}),t._v(" "),s("div",{ref:"page5",staticClass:"page",style:t.pageStyles}),t._v(" "),s("div",{ref:"page6",staticClass:"page",style:t.pageStyles}),t._v(" "),s("div",{ref:"page7",staticClass:"page",style:t.pageStyles}),t._v(" "),s("div",{ref:"page8",staticClass:"page",style:t.pageStyles}),t._v(" "),s("div",{ref:"page9",staticClass:"page",style:t.pageStyles}),t._v(" "),s("div",{ref:"page10",staticClass:"page",style:t.pageStyles}),t._v(" "),s("div",{staticClass:"page end-page",style:t.pageStyles})])])])},W=[],U=s(2155);const Z={backgroundColor:"#ECF0F1",titleColor:"#3E3E43",titleText:null,coverSrc:null,logoLink:{image:null,url:"http://flippingbook.com"}},G=2,K={data:()=>({width:60,config:null}),created(){this.animatePageTimeoutIds={},this.config=(0,U.Z)(Z,this.$store.state.workspace.preloaderConfig),this.pageInShadowColors=(0,l.l)(this.config.backgroundColor),this.pageInShadowColors="#000000"===this.config.backgroundColor?[35,35,35]:this.pageInShadowColors,this.pageInShadowColors=this.pageInShadowColors.map((t=>(.85*t).toFixed(0)))},mounted(){this.animate(),this.intervalId=setInterval(this.animate,3200)},computed:{pageStyles(){return{"background-color":this.config.backgroundColor,"border-color":this.config.titleColor,"border-width":`${G}px`,"border-radius":`0 ${this.width/10}px ${this.width/10}px 0`,width:this.width/2+"px",height:`${this.height}px`,left:this.width/2-G+"px"}},bookWrapStyles(){return{width:`${this.width}px`,height:`${this.height}px`,"margin-top":`-${this.height}px`,"margin-left":-this.width/2+"px","background-color":this.config.backgroundColor}},height(){return.75*this.width},isChrome(){return this.$store.state.workspace.userAgentInfo.browser.chrome}},methods:{animate(){this.animatePage("page1"),this.animateTimeoutId=setTimeout((()=>{const t=[4,3,2];this.animatePagePile(t),this.animateTimeoutId=setTimeout((()=>{const t=[10,9,8,7,6,5];this.animatePagePile(t)}),1100)}),600)},animatePagePile(t){this.animatePagePileIntervalId=setInterval((()=>{if(!t.length)return void clearInterval(this.animatePagePileIntervalId);const e=`page${t.pop()}`;this.animatePage(e)}),100)},animatePage(t){this.$refs[t].style.transform="rotateY(-20deg)",this.$refs[t].style.transition="transform 1.1s, background-color .385s",this.$refs[t].style.transform="rotateY(-160deg)",this.$refs[t].style.backgroundColor=`rgb(${this.pageInShadowColors.join(",")})`;const e=setTimeout((()=>{delete this.animatePageTimeoutIds[e],this.$refs[t].style.transition="transform 1.1s, background-color .55s",this.$refs[t].style.backgroundColor=this.config.backgroundColor}),385),s=setTimeout((()=>{delete this.animatePageTimeoutIds[s],this.$refs[t].style.transition=null,this.$refs[t].style.transform="rotateY(-20deg)"}),1100);this.animatePageTimeoutIds[e]=!0,this.animatePageTimeoutIds[s]=!0}},beforeDestroy(){clearInterval(this.intervalId),clearTimeout(this.animateTimeoutId),clearInterval(this.animatePagePileIntervalId),Object.keys(this.animatePageTimeoutIds).forEach((t=>{clearTimeout(t)}))}};const q=(0,m.Z)(K,V,W,!1,null,"746b7c3e",null).exports;var j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"popup-container"},[s("div",{staticClass:"black-out",on:{click:t.close}}),t._v(" "),s("div",{staticClass:"popup-window",attrs:{role:"dialog","aria-labelledby":"popup-title"}},[s("span",{ref:"first-trap",attrs:{tabindex:"0","aria-hidden":"true"}}),t._v(" "),s("div",{staticClass:"popup-title-frame"},[s("span",{staticClass:"svg-button popup-title-icon"},[s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:t.icon}})],1),t._v(" "),s("h3",{staticClass:"popup-title",attrs:{id:"popup-title"}},[t._v(t._s(t.title))]),t._v(" "),s("button",{staticClass:"svg-button icon-button close-button",attrs:{tabindex:"0","data-modal-tabIndex":"first","aria-label":t.$t("Accessibility.CLOSE_DIALOG")},on:{click:t.close}},[s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"close"}})],1)]),t._v(" "),s("div",{staticClass:"popup-content"},["download"===t.activeComponent?s("downloads-window"):t._e(),t._v(" "),"social"===t.activeComponent?s("social-window"):t._e(),t._v(" "),"print"===t.activeComponent?s("print-window"):t._e(),t._v(" "),"info"===t.activeComponent?s("info-window"):t._e(),t._v(" "),"help"===t.activeComponent?s("help-window"):t._e(),t._v(" "),"accessibility"===t.activeComponent?s("accessibility-window"):t._e()],1),t._v(" "),s("span",{ref:"last-trap",attrs:{tabindex:"0","aria-hidden":"true"}})])])},Y=[],X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"downloads"},[t.saveWithNotesStatus?s("div",{staticClass:"save-with-notes-panel"},["progress"===t.saveWithNotesStatus?[s("div",{staticClass:"progress-background"},[s("div",{staticClass:"progress-bar",style:t.progressBarStyle})]),t._v(" "),s("div",{staticClass:"text-block"},[s("bdi",[t._v(t._s(t.downloaded))])]),t._v(" "),s("div",{staticClass:"cancel-button-block"},[s("button",{staticClass:"popup-button cancel-button",attrs:{tabindex:"0","aria-label":t.pagesTitle.cancel,title:t.pagesTitle.cancel},on:{click:t.onCancel}},[t._v("\n                    "+t._s(t.pagesTitle.cancel)+"\n                ")])])]:"waiting"===t.saveWithNotesStatus?s("div",{staticClass:"message-panel"},[s("div",{staticClass:"spinner-container"},[s("spinner",{attrs:{size:24,"line-size":3,"line-fg-color":t.spinnerFgColor,"line-bg-color":t.spinnerBgColor}})],1),t._v(" "),s("label",{staticClass:"text-block"},[t._v(t._s(t.infoMessages.waiting))])]):s("div",{staticClass:"message-panel"},[s("svgicon",{attrs:{name:"error"}}),t._v(" "),s("label",{staticClass:"text-block"},[t._v(t._s(t.infoMessages.error))])],1)],2):s("div",{staticClass:"options-panel"},[t.hasNotes?s("div",{staticClass:"embed-notes-block"},[s("checkbox",{attrs:{"data-modal-tabIndex":"first-init",value:t.embedNotes,label:t.pagesTitle.withNotes},model:{value:t.embedNotes,callback:function(e){t.embedNotes=e},expression:"embedNotes"}}),t._v(" "),s("div",{ref:"infoButton",staticClass:"embed-notes-info",attrs:{tabindex:"0"}},[s("svgicon",{attrs:{tabindex:"-1",focusable:"false",name:"info"}}),t._v(" "),s("div",{staticClass:"embed-notes-info-panel",style:t.notesInfoPanelStyle,attrs:{tabindex:"-1",dir:t.dir,role:"dialog"}},[t._v("\n                    "+t._s(t.infoMessages.info)+"\n                ")])],1)],1):t._e(),t._v(" "),t.fullPdf?s("a",{staticClass:"download-full-button",attrs:{"data-modal-tabIndex":"first-init",target:"_blank",href:"linkFull",download:t.fullPdf.fileName,role:"button",title:t.fullTooltip,"aria-label":t.fullTooltip,tabindex:"0",disabled:t.editorMode},on:{click:function(e){return t.processDownloadEvent(e,"full",null)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.onSpaceDown(e)}}},[s("span",{staticClass:"title"},[t._v(t._s(t.pagesTitle.full)+" - "),s("span",{attrs:{dir:"ltr"}},[t._v(t._s(t.fullPdf.size))])]),t._v(" "),s("span",{staticClass:"description"},[t._v(t._s(t.fullDescription))])]):t._e(),t._v(" "),t.filesCount?s("div",{ref:"download-list",staticClass:"download-list",attrs:{id:"download-list"}},[s("ul",[t._l(t.filesArray,(function(e,i){return s("li",{class:"download-item-"+e.type},[s("svgicon",{staticClass:"svg-icon file-icon",attrs:{focusable:"false",name:e.icon}}),t._v(" "),s("a",{attrs:{"data-modal-tabIndex":i===t.filesCount-1?"last":"",target:"_blank",href:"linkPage",download:e.fileName,role:"button",title:e.tooltip,"aria-label":e.tooltip,tabindex:"0",disabled:t.editorMode},on:{click:function(s){return t.processDownloadEvent(s,e.type,i)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.onSpaceDown(e)}}},[s("bdi",[s("span",{staticClass:"file-name"},[t._v(t._s(e.title))])]),t._v(" "),s("span",{attrs:{dir:"ltr"}},[s("bdi",[t._v("("+t._s(e.size)+")")])])])],1)})),t._v(" "),t.showAccessiblePdf?s("li",[s("svgicon",{staticClass:"svg-icon file-icon",attrs:{focusable:"false",name:"file-pdf"}}),t._v(" "),s("a",{attrs:{disabled:t.editorMode,role:"button",href:"linkFull",target:"_blank",download:t.accessiblePdfFilename,"data-modal-tabIndex":"last",title:t.accessiblePdfTitle,"aria-label":t.accessiblePdfTitle,tabindex:"0"},on:{click:function(e){return t.processAccessiblePdfDownloadEvent(e,"download-from-downloads")},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.onAccessiblePdfButtonSpaceDown(e)}}},[s("bdi",[s("span",{staticClass:"file-name"},[t._v(t._s(t.accessiblePdfTitle))])]),t._v(" "),s("span",{attrs:{dir:"ltr"}},[s("bdi",[t._v("("+t._s(t.accesssiblePdfSize)+")")])])])],1):t._e()],2)]):t._e()])])},J=[],Q=s(462);const tt={computed:{accessiblePdf(){return this.$store.getters["downloads/getAccessiblePdf"]},accessiblePdfTitle(){return this.$t("Accessibility.DOWNLOAD_TITLE")},accesssiblePdfSize(){return this.accessiblePdf.size},accessiblePdfFilename(){return this.accessiblePdf.fileName},accessiblePdfUrl(){return(0,M.Z)().translatePath(this.accessiblePdf.url)}},methods:{processAccessiblePdfDownloadEvent(t,e){t.currentTarget.href=this.accessiblePdfUrl,this.$root.$emit("accessibility",{action:e,fileName:this.accessiblePdfFilename})},onAccessiblePdfButtonSpaceDown(t){t.currentTarget.click()}}};var et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"checkbox-container",attrs:{id:"checkbox-label"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],attrs:{type:"checkbox",role:"checkbox","aria-labelledby":"checkbox-label",tabindex:"0"},domProps:{checked:Array.isArray(t.inputValue)?t._i(t.inputValue,null)>-1:t.inputValue},on:{change:function(e){var s=t.inputValue,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.inputValue=s.concat([a])):n>-1&&(t.inputValue=s.slice(0,n).concat(s.slice(n+1)))}else t.inputValue=o}}}),t._v(" "),s("div",{staticClass:"checkbox-body"}),t._v(" "),s("span",{attrs:{"aria-hidden":"true"}},[t._v(t._s(t.label))])])},st=[];const it={props:{label:{type:String,default:null},value:{type:Boolean,required:!0}},model:{prop:"value",event:"valueChanged"},computed:{inputValue:{get:function(){return this.value},set:function(t){this.$emit("valueChanged",t)}}}};const ot=(0,m.Z)(it,et,st,!1,null,"13605c51",null).exports;var at=s(9426),nt=(s(6092),s(7195),s(6009),s(8713),s(3178),s(3848),s(3490),s(9573),s(254),s(5782),s(3310),s(1314),s(2307),s(4309),s(3889),s(1710),s(6177),s(5109)),rt=s(1976),lt=s(3084);const ct=24,ht={"Access-Control-Allow-Origin":"Anonymous"};async function dt(t){let{page:e,text:i="",color:o,x:a,y:n,date:r}=t;const{PDFString:l,PDFNumber:c,PDFHexString:h}=await s.e(12).then(s.bind(s,1689));return e.doc.context.register(e.doc.context.obj({Type:"Annot",Subtype:"Text",Rect:[a-ct/2,n,a+ct/2,n+ct],Name:"Comment",Subj:l.of("Sticky Note"),F:c.of(24),C:o,M:l.of(r),Contents:h.fromText(i),Open:!1}))}function ut(t){let{x:e,y:s,pageSize:i,rotation:o}=t,a=e,n=s;return 90===o?[a,n]=[i.width-s,e]:180===o?[a,n]=[i.width-e,i.height-s]:270===o&&([a,n]=[s,i.height-e]),{x:a,y:n}}function pt(t){let{note:e,page:s,isRtl:i}=t;const o=s.getCropBox(),a=s.getSize(),n=s.getRotation().angle;let{x:r,y:l}=ut({x:e.x,y:e.y,rotation:n,pageSize:a});return r+=o.x,l+=o.y,l>o.y+o.height&&(l=o.y+o.height-ct),l<o.y&&(l=o.y),(r>o.x+o.width||e.isMovedFromStub&&!i)&&(r=o.x+o.width-ct/2),(r<o.x||e.isMovedFromStub&&i)&&(r=o.x+ct/2),{normalizedX:r,normalizedY:l}}function gt(t){return`D:${t.toISOString().slice(-24).replace(/\D/g,"").slice(0,14)}Z`}function mt(t){const e=(0,lt.bh)(),s=e.getters["downloads/getFullPdf"],i=e.getters["downloads/getPageFiles"];let o,a;if(t){const e=i.find((e=>e.pageId===t));o=e.url,a=e.fileName}else o=s.url,a=s.fileName;return{pdfUrl:o,pdfFilename:a}}async function ft(t){let{pageId:e=null,onProgress:i=(()=>{}),onError:o=(()=>{}),signal:a=null}=t;const n=(0,lt.bh)(),r=e?n.getters["notes/notesForPdfByPageId"](e):n.getters["notes/notesSortedByPdfPage"],{pdfUrl:l,pdfFilename:c}=mt(e);try{const{PDFDocument:t,PDFName:e}=await s.e(12).then(s.bind(s,1689)),n=await fetch((0,M.Z)().translatePath(l),{signal:a,FETCH_HEADERS:ht}).then((0,rt.Z)({onProgress:i,onError:o})),h=await n.arrayBuffer(),d=await t.load(h);r&&await vt(d,e,r);const u=await d.save(),p=new Blob([u],{type:"application/pdf"}),g=document.createElement("a");g.href=URL.createObjectURL(p),g.download="publication.pdf"===c?"flipbook-with-notes.pdf":"notes-"+c,g.click()}catch(h){o(h)}}async function vt(t,e,s){for await(const i of Object.keys(s)){const o=t.getPage(parseInt(i,10)),a=(0,lt.bh)().state.book.rightToLeft,n=s[i],r=[];for await(const t of n){const{normalizedX:e,normalizedY:s}=pt({note:t,page:o,isRtl:a});r.push(await dt({page:o,text:t.text,color:t.color,date:gt(t.date),x:e,y:s}))}const l=o.node.Annots()?.array||[];o.node.set(e.of("Annots"),t.context.obj([...l,...r]))}return t}let bt;const wt={mixins:[Q.Z,tt],components:{Checkbox:ot,Spinner:at.Z},name:"DownloadWindow",data:()=>({embedNotes:"false"!==(0,M.Z)().getLocalStorage().getItem("embedNotes"),saveWithNotesStatus:null,loaded:0,total:0,notesInfoPanelStyle:{width:null,left:null},shouldClose:!1}),mounted(){this.filesArray.length>4&&this.initScroll(),this.refreshNotesInfoPanelStyle(),this.params.embedNotes&&(this.saveWithNotesStatus="progress",this.shouldClose=!0,this.getContentedPdf(this.params.pageId||null),this.sendDownloadEvent({target:"noteList"}))},beforeDestroy(){bt&&!bt.signal.aborted&&bt.abort()},computed:{editorMode(){return!!this.$store.state.workspace.userAgentInfo.browser.publisher},fullDescription(){return this.$t("SaveWindow.FULL_PUBLICATION_DESCRIPTION")},hasNotes(){return this.$store.getters["notes/hasNotes"]},filesArray(){const t=[];return this.pageFiles&&this.pageFiles.filter((t=>t.ready)).forEach((e=>{t.push({title:1===this.pageFiles.length?this.pagesTitle.one:this.pagesTitle[e.side],tooltip:1===this.pageFiles.length?this.pagesTooltip.one:this.pagesTooltip[e.side],url:()=>(0,M.Z)().translatePath(e.url),type:"page",size:e.size,icon:"file-pdf",fileName:e.fileName,pageId:e.pageId})})),this.customFiles&&this.customFiles.forEach((e=>{t.push({title:e.title,tooltip:this.windowTitle+" "+e.title,url:()=>(0,M.Z)().translatePath(e.url),type:"custom",size:e.size,icon:"file-"+this.getIcon(e.url),fileName:e.fileName})})),t},filesCount(){const t=this.filesArray.length;return this.showAccessiblePdf?t+1:t},showAccessiblePdf(){return this.$store.getters["workspace/accessibilityButtonVisible"]&&!this.$store.state.downloads.accessibilityPDF.useOriginalPdf},dir(){return this.$store.getters["i18n/isLocaleRtl"]?"rtl":"ltr"},progressBarStyle(){return{width:0===this.total?"0%":parseInt(this.loaded/this.total*100,10)+"%"}},downloaded(){return this.$t("PrintWindow.DOWNLOADING",{0:(0,T.BU)(this.loaded),1:(0,T.BU)(this.total)})},spinnerBgColor(){const t=this.$store.state.skin.styles["second-button-color"];if(t){return"rgba("+(0,l.l)(t).join(",")+", 0.3)"}return"#FFFFFF"},spinnerFgColor(){const t=this.$store.state.skin.styles["second-button-color"];if(t){return"rgba("+(0,l.l)(t).join(",")+", 0.9)"}return"#5692AE"},params(){return this.$store.state.popup.params}},methods:{async getContentedPdf(t){const e=t=>{this.total=t.total,this.loaded=t.transferred,this.total===this.loaded&&(this.saveWithNotesStatus="waiting")},s=t=>{"AbortError"!==t.name&&(this.saveWithNotesStatus="error",this.$root.$emit("download",{action:"noteDownloadError"}))};bt=new AbortController;const i=bt.signal;await ft({pageId:t,signal:i,onProgress:e,onError:s}),this.shouldClose&&this.closeDialog()},async processDownloadEvent(t,e,s){if(this.editorMode)return void t.preventDefault();const i={};let o,a=null;"full"===e?o=(0,M.Z)().translatePath(this.fullPdf.url):(i.option=e,i.fileName=this.filesArray[s].fileName,o=this.filesArray[s].url(),"page"===e&&(i.downloadPage=this.$store.getters["pages/urlHeaderById"]({id:this.filesArray[s].pageId}),i.option=this.embedNotes&&this.hasNotes?"pageWithNotes":"page",a=this.filesArray[s].pageId)),this.embedNotes&&this.hasNotes&&"custom"!==e?(this.saveWithNotesStatus="progress",t.preventDefault(),await this.getContentedPdf(a),this.saveWithNotesStatus=null,this.loaded=0,this.total=0,i.embedNotes=!0):t.currentTarget.href=o,this.sendDownloadEvent(i)},sendDownloadEvent(t){const e={action:"downloaded",leftPageUrl:this.$store.getters["pages/urlHeaderById"]({id:this.pagerState.leftPage}),rightPageUrl:this.$store.getters["pages/urlHeaderById"]({id:this.pagerState.rightPage}),option:this.embedNotes&&this.hasNotes?"fullWithNotes":"full",fileName:this.fullPdf.fileName,target:"downloadWindow"};this.$root.$emit("download",{...e,...t})},getIcon(t){let e;const s=["doc","exe","gif","html","jpg","mp3","mp4","pdf","png","ppt","psd","rar","xls","zip"],i={docx:"doc",pptx:"ppt",xlsx:"xls",htm:"html"},o=t.split(".").pop(),a=s.indexOf(o);return e=-1!==a?s[a]:i[o]||"any",e},initScroll(){this.$refs["download-list"]&&(this.scrollComponent=new nt.ZP(this.$refs["download-list"],{mouseWheel:!0,scrollbar:{fade:!1,interactive:!0,scrollbarTrackClickable:!0},probeType:0,disablePointer:!0,disableTouch:!1,disableMouse:!1,resizePolling:200,bounce:!1}))},closeDialog(){this.$store.dispatch("popup/closePopup")},onSpaceDown(t){t.currentTarget.click()},onCancel(){bt.abort(),this.params.embedNotes?this.closeDialog():(this.saveWithNotesStatus=null,this.loaded=0,this.total=0)},refreshNotesInfoPanelStyle(){if(!this.$refs.infoButton)return;const t=20,e=210,s=this.$refs.infoButton.offsetWidth/2,i="rtl"===this.dir?-(e-s+t):s;this.notesInfoPanelStyle={width:e+"px",left:this.$refs.infoButton.offsetLeft+i+"px"}}},watch:{filesArray(t){!this.scrollComponent&&t.length>4?this.initScroll():t.length<=4&&this.scrollComponent&&(this.scrollComponent.destroy(),this.scrollComponent=null),this.scrollComponent&&this.$nextTick((()=>{this.scrollComponent.refresh()}))},embedNotes(t,e){!t&&e&&this.$root.$emit("download",{action:"downloadUncheckEmbed"}),(0,M.Z)().getLocalStorage().setItem("embedNotes",t?"true":"false")}}},kt=wt;const _t=(0,m.Z)(kt,X,J,!1,null,"3a649b5e",null).exports;var yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"print-window"},[t.pdfIsAvailable||t.editorMode?s("div",{staticClass:"print-window-container",class:this.status},[s("div",{staticClass:"print-title-frame"},[t.selectedPagesVisible&&t.fullOption?s("button",{staticClass:"print-full-button",attrs:{"data-modal-tabIndex":"first-init",tabindex:"0",title:t.localization.customTip,"aria-label":t.localization.customTip,disabled:t.editorMode},on:{click:function(e){return t.print(t.fullOption)}}},[s("span",{staticClass:"title"},[t._v(t._s(t.fullOption.title))]),t._v(" "),s("span",{staticClass:"description"},[t._v(t._s(t.localization.customRangeDescription))])]):t._e(),t._v(" "),t.partsOptionsArray.length>0?s("div",{staticClass:"print-list"},[s("div",{attrs:{role:t.partsOptionsArray.length>1&&"list"}},t._l(t.partsOptionsArray,(function(e,i){return s("div",{attrs:{role:t.partsOptionsArray.length>1&&"listitem"}},[s("svgicon",{staticClass:"svg-icon file-icon",attrs:{focusable:"false",name:"file-any-print"}}),t._v(" "),s("button",{attrs:{tabindex:"0",title:e.tooltip,"aria-label":e.tooltip,disabled:t.editorMode},on:{click:function(s){return t.print(e)}}},[s("bdi",[s("span",{staticClass:"file-name"},[t._v(t._s(e.title))])])])],1)})),0)]):t._e(),t._v(" "),t.printSupported?t._e():s("span",{staticClass:"text-block print-comment",attrs:{id:"print-comment"}},[t._v(t._s(t.localization.commentCurrent))])]),t._v(" "),s("div",{staticClass:"print-button-bar"},[s("div",{staticClass:"progress"},[s("div",{staticClass:"progress-background"},[s("div",{staticClass:"progress-bar",style:t.progressBarStyle,attrs:{id:"progress-bar"}})]),t._v(" "),s("div",{staticClass:"text-block progress-info",attrs:{id:"progress-info"}},[s("bdi",[t._v(t._s(t.downloaded))])])]),t._v(" "),s("div",{staticClass:"waiting-bar"},[s("div",{staticClass:"spinner-container"},[s("spinner",{attrs:{size:24,"line-size":3,"line-fg-color":t.spinnerFgColor,"line-bg-color":t.spinnerBgColor}})],1),t._v(" "),s("label",{staticClass:"print-window-label"},[t._v(t._s(t.localization.waiting))])]),t._v(" "),s("button",{staticClass:"idle popup-button cancel-button",attrs:{tabindex:"0",id:"cancel-btn","aria-label":t.localization.cancel,title:t.localization.cancel},on:{click:t.cancel}},[t._v("\n                "+t._s(t.localization.cancel)+"\n            ")])])]):s("div",{staticClass:"print-window"},[t._v(t._s(t.localization.errorMsg))])])},$t=[];function Ct(t){let e=document.getElementById("pdf-print-iframe");e&&e.parentNode.removeChild(e),e=document.createElement("iframe"),e.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),e.setAttribute("id","pdf-print-iframe"),St(t,e)}function xt(t,e){let s="mouseover";(t.browser.chrome||t.browser.chromiumEdge)&&(s="focus");const i=()=>{t.onPrintDialogClose(),window.removeEventListener(s,i),e.remove()};window.addEventListener(s,i)}function Tt(t,e){try{t.focus(),t.contentWindow.print()}catch(s){e.onError(s)}finally{xt(e,t)}}function St(t,e){t.printable=/^(blob|http|\/\/)/i.test(t.printable)?t.printable:window.location.origin+("/"!==t.printable.charAt(0)?"/"+t.printable:t.printable);const s=new window.XMLHttpRequest;s.responseType="arraybuffer",s.addEventListener("error",(()=>{xt(t,e),t.onError(s.statusText,s)})),s.addEventListener("load",(()=>{if(-1===[200,201].indexOf(s.status))return xt(t),void t.onError(s.statusText,s);It(t,e,s.response)})),s.open("GET",t.printable,!0),s.send()}function It(t,e,s){let i=new window.Blob([s],{type:"application/pdf"});i=window.URL.createObjectURL(i),e.onload=()=>{t.browser.firefox||t.browser.safari?setTimeout((()=>{Tt(e,t)}),1e3):Tt(e,t)},e.setAttribute("src",i),document.body.appendChild(e)}s(7046);const Pt={components:{Spinner:at.Z},data:function(){return{selected:0,printSupported:!0,pdfIsAvailable:!0,status:"idle",loaded:0,total:0,xmlHTTP:null}},mounted(){if(this.checkPrintingSupport(),this.params.pageId){const t=this.partsOptionsArray.filter((t=>t.pageId===this.params.pageId))?.[0];t&&this.printSupported&&this.pdfIsAvailable&&this.print(t)}},computed:{isPrintedInSafari15(){return this.$store.state.workspace.isPrintedInSafari15},localization(){return{cancel:this.$t("PrintWindow.CANCEL_BUTTON"),waiting:this.$t("PrintWindow.WAITING"),commentCurrent:this.$t("PrintWindow.COMMENT_OPEN_CURRENT"),customTip:this.$t("PrintWindow.CUSTOM_RANGE_TIP"),errorMsg:this.$t("PrintWindow.ERROR_MESSAGE"),leftPage:this.$t("PrintWindow.LEFT_PAGE"),rightPage:this.$t("PrintWindow.RIGHT_PAGE"),currentPage:this.$t("PrintWindow.CURRENT_PAGE"),leftPageTip:this.$t("PrintWindow.LEFT_PAGE_TIP"),rightPageTip:this.$t("PrintWindow.RIGHT_PAGE_TIP"),currentPageTip:this.$t("PrintWindow.CURRENT_PAGE_TIP"),customRange:this.$t("PrintWindow.CUSTOM_RANGE"),customRangeDescription:this.$t("PrintWindow.CUSTOM_RANGE_DESCRIPTION")}},params(){return this.$store.state.popup.params},downloaded(){return this.$t("PrintWindow.DOWNLOADING",{0:(0,T.BU)(this.loaded),1:(0,T.BU)(this.total)})},fullPdf(){return this.$store.getters["downloads/getFullPdf"]},pageFiles(){return this.$store.getters["downloads/getPageFiles"]},currentPagesVisible(){return this.$store.state.print.currentPagesVisible},selectedPagesVisible(){return this.$store.state.print.selectedPagesVisible},fullOption(){return{title:this.localization.customRange,url:()=>(0,M.Z)().translatePath(this.fullPdf.url),type:"full",fileName:this.fullPdf.fileName}},partsOptionsArray(){const t=[];return this.pageFiles&&this.currentPagesVisible&&this.pageFiles.filter((t=>t.ready)).forEach((e=>{t.push({title:1===this.pageFiles.length?this.localization.currentPage:this.localization[e.side+"Page"],tooltip:1===this.pageFiles.length?this.localization.currentPageTip:this.localization[e.side+"PageTip"],url:()=>(0,M.Z)().translatePath(e.url),type:"page",icon:"file-pdf",pageId:e.pageId,fileName:e.fileName})})),t},progressBarStyle(){return{width:0===this.total?"0%":parseInt(this.loaded/this.total*100,10)+"%"}},userAgentInfo(){return this.$store.state.workspace.userAgentInfo},editorMode(){return!!this.userAgentInfo.browser.publisher},spinnerBgColor(){const t=this.$store.state.skin.styles["second-button-color"];if(t){return"rgba("+(0,l.l)(t).join(",")+", 0.3)"}return"#FFFFFF"},spinnerFgColor(){const t=this.$store.state.skin.styles["second-button-color"];if(t){return"rgba("+(0,l.l)(t).join(",")+", 0.9)"}return"#5692AE"}},methods:{checkPrintingSupport(){const t=this;if(!this.editorMode&&(this.fullPdf&&this.fullPdf.url||this.pageFiles&&this.pageFiles.length>0)){this.url=(0,M.Z)().translatePath(this.fullPdf.url||this.pageFiles[0].url);const e=new XMLHttpRequest;e.open("HEAD",this.url),e.onreadystatechange=function(){if(this.readyState===this.DONE)if(200===this.status){let e;this.getAllResponseHeaders().indexOf("content-disposition")>=0&&(e=this.getResponseHeader("content-disposition"));const s=e&&e.search("attachment")>=0;t.pdfIsAvailable="application/pdf"===this.getResponseHeader("Content-Type")&&!s}else t.pdfIsAvailable=!1,console.error("PDF printing is not available.")},e.send()}else this.pdfIsAvailable=!1;this.printSupported=!this.userAgentInfo.browser.msedge},print(t){if(this.editorMode)return;const e=t.url();if(!this.printSupported||this.isPrintedInSafari15)return window.open(e,"_blank"),void this.onPrintDialogClose();if(this.userAgentInfo.browser.safari){15===+this.userAgentInfo.browser.version.split(".")[0]&&this.$store.dispatch("workspace/setPrintedInSafari15")}const s={onPrintDialogClose:this.onPrintDialogClose,browser:this.userAgentInfo.browser,onError:t=>{throw t}};this.xmlHTTP&&this.xmlHTTP.abort(),this.xmlHTTP=new XMLHttpRequest,this.xmlHTTP.open("GET",e),this.xmlHTTP.responseType="arraybuffer","onprogress"in this.xmlHTTP&&(this.xmlHTTP.onprogress=t=>{t.lengthComputable&&(this.loaded=t.loaded,this.total=t.total)}),this.xmlHTTP.onload=()=>{let t=new Blob([this.xmlHTTP.response],{type:"application/pdf"});s.printable=window.URL.createObjectURL(t),t=null,this.xmlHTTP=null,this.status="printing",Ct(s)},this.loaded=0,this.total=0,this.status="downloading",this.xmlHTTP.send(),this.sendApiEvent(t)},sendApiEvent(t){const e=this.$store.getters["pager/legacyState"];let s,i;e.leftPage&&(s=this.$store.getters["pages/urlHeaderById"]({id:e.leftPage,forceFullWide:!0})),i=e.rightPage?this.$store.getters["pages/urlHeaderById"]({id:e.rightPage,forceFullWide:!0}):s;const o={option:t.type,fileName:t.fileName,leftPageUrl:s,rightPageUrl:i};t.pageId&&(o.printPage=this.$store.getters["pages/urlHeaderById"]({id:t.pageId})),this.$root.$emit("print",o)},cancel(){this.xmlHTTP&&this.xmlHTTP.abort(),this.xmlHTTP=null,this.loaded=0,this.total=0,this.status="idle"},onPrintDialogClose(){this.$store.dispatch("popup/closePopup")}}},Et=Pt;const At=(0,m.Z)(Et,yt,$t,!1,null,"f9ab575e",null).exports;var Lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"socialBody"},[s("div",{staticClass:"window-tabs-head",class:{disabled:!t.tabsEnabled}},[s("span",{class:{active:"share"===t.activeTab},attrs:{id:"share-button-tab"},on:{click:function(e){return t.tabClick("share")}}},[t._v(t._s(t.localization.shareTab))]),t._v(" "),s("span",{class:{active:"embed"===t.activeTab},attrs:{id:"embed-button-tab"},on:{click:function(e){return t.tabClick("embed")}}},[t._v(t._s(t.localization.embedTab))])]),t._v(" "),s("section",{staticClass:"window-tab",class:{active:"share"===t.activeTab},attrs:{id:"share-tab"}},[s("div",{ref:"qr",staticClass:"qr",attrs:{id:"qr","aria-hidden":"true"}}),t._v(" "),s("div",{staticClass:"url-section"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentUrl,expression:"currentUrl"}],ref:"shareUrlContainer",staticClass:"url-container tip",attrs:{tabindex:"0",role:"textbox","data-modal-tabIndex":"first-init",id:"share-url-container",dir:"ltr",readonly:""},domProps:{value:t.currentUrl},on:{input:function(e){e.target.composing||(t.currentUrl=e.target.value)}}}),t._v(" "),s("checkbox",{staticClass:"current-page-checkbox",attrs:{value:t.currentPage,label:t.localization.shareCurrent},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),t._v(" "),s("button",{ref:"copyUrlButton",staticClass:"popup-button social-button tip",attrs:{id:"copy-button",tabindex:"0","data-clipboard-target":"#share-url-container","aria-label":t.localization.copyButton}},[t._v("\n                "+t._s(t.localization.copyButton)+"\n            ")])],1),t._v(" "),s("span",{staticClass:"text-block",attrs:{tabindex:"0"}},[t._v(t._s(t.localization.shareText))]),t._v(" "),s("a",{ref:"facebookBtn",staticClass:"social-link facebook-link",attrs:{tabindex:"0",role:"link",id:"facebook-link",target:"_blank",title:t.localization.facebookTitle,"aria-label":t.localization.facebookTitle},on:{click:function(e){return t.sendApiEvent("facebook")}}}),t._v(" "),s("a",{ref:"twitterBtn",staticClass:"social-link twitter-link",attrs:{tabindex:"0",role:"link",id:"twitter-link",target:"_blank",title:t.localization.twitterTitle,"aria-label":t.localization.twitterTitle},on:{click:function(e){return t.sendApiEvent("twitter")}}}),t._v(" "),s("a",{ref:"linkedinBtn",staticClass:"social-link linkedin-link",attrs:{tabindex:"0",role:"link",id:"linkedin-link",target:"_blank",title:t.localization.linkedinTitle,"aria-label":t.localization.linkedinTitle},on:{click:function(e){return t.sendApiEvent("linkedIn")}}}),t._v(" "),s("a",{ref:"mailBtn",staticClass:"social-link mail-link",attrs:{tabindex:"0",role:"link",id:"mail-link",target:"_blank",title:t.localization.mailTitle,"aria-label":t.localization.mailTitle,"data-modal-tabIndex":"last"},on:{click:function(e){return t.sendApiEvent("email")}}})]),t._v(" "),s("section",{staticClass:"window-tab",class:{active:"embed"===t.activeTab},attrs:{id:"embed-tab"}},[s("label",{staticClass:"embed-label"},[t._v(t._s(t.localization.embedType)+"\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.embedType,expression:"embedType"}],attrs:{id:"embed-type-select"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.embedType=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"full"}},[t._v(t._s(t.localization.fullPublication))]),t._v(" "),s("option",{attrs:{value:"cover"}},[t._v(t._s(t.localization.linkablePage))])])]),t._v(" "),s("label",{staticClass:"embed-label",attrs:{for:"current-page-embed"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentPage,expression:"currentPage"}],attrs:{type:"checkbox",id:"current-page-embed"},domProps:{checked:Array.isArray(t.currentPage)?t._i(t.currentPage,null)>-1:t.currentPage},on:{change:function(e){var s=t.currentPage,i=e.target,o=!!i.checked;if(Array.isArray(s)){var a=null,n=t._i(s,a);i.checked?n<0&&(t.currentPage=s.concat([a])):n>-1&&(t.currentPage=s.slice(0,n).concat(s.slice(n+1)))}else t.currentPage=o}}}),t._v(" "+t._s(t.localization.embedCurrent))]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.embedCode,expression:"embedCode"}],staticClass:"embed-text-area",attrs:{id:"embed-text",dir:"ltr",readonly:""},domProps:{value:t.embedCode},on:{input:function(e){e.target.composing||(t.embedCode=e.target.value)}}}),t._v(" "),"full"===t.embedType?s("div",{staticClass:"embed-size-frame",attrs:{id:"embed-size-frame"}},[s("label",{attrs:{for:"embed-width"}},[t._v(t._s(t.localization.width)+": "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.embedWidth,expression:"embedWidth"}],staticClass:"size-inp",attrs:{type:"text",id:"embed-width"},domProps:{value:t.embedWidth},on:{input:function(e){e.target.composing||(t.embedWidth=e.target.value)}}})]),t._v(" "),s("label",{attrs:{for:"embed-height"}},[t._v(t._s(t.localization.height)+": "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.embedHeight,expression:"embedHeight"}],staticClass:"size-inp",attrs:{type:"text",id:"embed-height"},domProps:{value:t.embedHeight},on:{input:function(e){e.target.composing||(t.embedHeight=e.target.value)}}})])]):t._e(),t._v(" "),s("span",{ref:"copyEmbedButton",staticClass:"popup-button social-button embed-copy tip",attrs:{id:"embed-copy-button","data-clipboard-target":"#embed-text"}},[t._v(t._s(t.localization.copyButton))])])])},zt=[];let Mt;!function(){function t(t){this.mode=s.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(let e=0,s=this.data.length;e<s;e++){const t=[],s=this.data.charCodeAt(e);s>65536?(t[0]=240|(1835008&s)>>>18,t[1]=128|(258048&s)>>>12,t[2]=128|(4032&s)>>>6,t[3]=128|63&s):s>2048?(t[0]=224|(61440&s)>>>12,t[1]=128|(4032&s)>>>6,t[2]=128|63&s):s>128?(t[0]=192|(1984&s)>>>6,t[1]=128|63&s):t[0]=s,this.parsedData.push(t)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(let e=0,s=this.parsedData.length;e<s;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){const s=new t(e);this.dataList.push(s),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,s){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(let e=0;e<this.moduleCount;e++){this.modules[e]=new Array(this.moduleCount);for(let t=0;t<this.moduleCount;t++)this.modules[e][t]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,s),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,s)},setupPositionProbePattern:function(t,e){for(let s=-1;s<=7;s++)if(!(t+s<=-1||this.moduleCount<=t+s))for(let i=-1;i<=7;i++)e+i<=-1||this.moduleCount<=e+i||(this.modules[t+s][e+i]=s>=0&&s<=6&&(0==i||6==i)||i>=0&&i<=6&&(0==s||6==s)||s>=2&&s<=4&&i>=2&&i<=4)},getBestMaskPattern:function(){let t=0,e=0;for(let s=0;s<8;s++){this.makeImpl(!0,s);const i=a.getLostPoint(this);(0==s||t>i)&&(t=i,e=s)}return e},createMovieClip:function(t,e,s){const i=t.createEmptyMovieClip(e,s),o=1;this.make();for(let a=0;a<this.modules.length;a++){const t=a*o;for(let e=0;e<this.modules[a].length;e++){const s=e*o;this.modules[a][e]&&(i.beginFill(0,100),i.moveTo(s,t),i.lineTo(s+o,t),i.lineTo(s+o,t+o),i.lineTo(s,t+o),i.endFill())}}return i},setupTimingPattern:function(){for(let t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(let t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){const t=a.getPatternPosition(this.typeNumber);for(let e=0;e<t.length;e++)for(let s=0;s<t.length;s++){const i=t[e],o=t[s];if(null==this.modules[i][o])for(let t=-2;t<=2;t++)for(let e=-2;e<=2;e++)this.modules[i+t][o+e]=-2==t||2==t||-2==e||2==e||0==t&&0==e}},setupTypeNumber:function(t){const e=a.getBCHTypeNumber(this.typeNumber);for(var s=0;s<18;s++){var i=!t&&1==(e>>s&1);this.modules[Math.floor(s/3)][s%3+this.moduleCount-8-3]=i}for(s=0;s<18;s++){i=!t&&1==(e>>s&1);this.modules[s%3+this.moduleCount-8-3][Math.floor(s/3)]=i}},setupTypeInfo:function(t,e){const s=this.errorCorrectLevel<<3|e,i=a.getBCHTypeInfo(s);for(var o=0;o<15;o++){var n=!t&&1==(i>>o&1);o<6?this.modules[o][8]=n:o<8?this.modules[o+1][8]=n:this.modules[this.moduleCount-15+o][8]=n}for(o=0;o<15;o++){n=!t&&1==(i>>o&1);o<8?this.modules[8][this.moduleCount-o-1]=n:o<9?this.modules[8][15-o-1+1]=n:this.modules[8][15-o-1]=n}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){let s=-1,i=this.moduleCount-1,o=7,n=0;for(let r=this.moduleCount-1;r>0;r-=2)for(6==r&&r--;;){for(let s=0;s<2;s++)if(null==this.modules[i][r-s]){let l=!1;n<t.length&&(l=1==(t[n]>>>o&1));a.getMask(e,i,r-s)&&(l=!l),this.modules[i][r-s]=l,o--,-1==o&&(n++,o=7)}if(i+=s,i<0||this.moduleCount<=i){i-=s,s=-s;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,s,i){const o=c.getRSBlocks(t,s),n=new h;for(var r=0;r<i.length;r++){const e=i[r];n.put(e.mode,4),n.put(e.getLength(),a.getLengthInBits(e.mode,t)),e.write(n)}let l=0;for(r=0;r<o.length;r++)l+=o[r].dataCount;if(n.getLengthInBits()>8*l)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+8*l+")");for(n.getLengthInBits()+4<=8*l&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=8*l||(n.put(e.PAD0,8),n.getLengthInBits()>=8*l));)n.put(e.PAD1,8);return e.createBytes(n,o)},e.createBytes=function(t,e){let s=0,i=0,o=0;const n=new Array(e.length),r=new Array(e.length);for(var c=0;c<e.length;c++){const d=e[c].dataCount,u=e[c].totalCount-d;i=Math.max(i,d),o=Math.max(o,u),n[c]=new Array(d);for(var h=0;h<n[c].length;h++)n[c][h]=255&t.buffer[h+s];s+=d;const p=a.getErrorCorrectPolynomial(u),g=new l(n[c],p.getLength()-1).mod(p);r[c]=new Array(p.getLength()-1);for(h=0;h<r[c].length;h++){const t=h+g.getLength()-r[c].length;r[c][h]=t>=0?g.get(t):0}}let d=0;for(h=0;h<e.length;h++)d+=e[h].totalCount;const u=new Array(d);let p=0;for(h=0;h<i;h++)for(c=0;c<e.length;c++)h<n[c].length&&(u[p++]=n[c][h]);for(h=0;h<o;h++)for(c=0;c<e.length;c++)h<r[c].length&&(u[p++]=r[c][h]);return u};var s={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8};const i={L:1,M:0,Q:3,H:2},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};for(var a={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){let e=t<<10;for(;a.getBCHDigit(e)-a.getBCHDigit(a.G15)>=0;)e^=a.G15<<a.getBCHDigit(e)-a.getBCHDigit(a.G15);return(t<<10|e)^a.G15_MASK},getBCHTypeNumber:function(t){let e=t<<12;for(;a.getBCHDigit(e)-a.getBCHDigit(a.G18)>=0;)e^=a.G18<<a.getBCHDigit(e)-a.getBCHDigit(a.G18);return t<<12|e},getBCHDigit:function(t){let e=0;for(;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return a.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,s){switch(t){case o.PATTERN000:return(e+s)%2==0;case o.PATTERN001:return e%2==0;case o.PATTERN010:return s%3==0;case o.PATTERN011:return(e+s)%3==0;case o.PATTERN100:return(Math.floor(e/2)+Math.floor(s/3))%2==0;case o.PATTERN101:return e*s%2+e*s%3==0;case o.PATTERN110:return(e*s%2+e*s%3)%2==0;case o.PATTERN111:return(e*s%3+(e+s)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){let e=new l([1],0);for(let s=0;s<t;s++)e=e.multiply(new l([1,n.gexp(s)],0));return e},getLengthInBits:function(t,e){if(e>=1&&e<10)switch(t){case s.MODE_NUMBER:return 10;case s.MODE_ALPHA_NUM:return 9;case s.MODE_8BIT_BYTE:case s.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case s.MODE_NUMBER:return 12;case s.MODE_ALPHA_NUM:return 11;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case s.MODE_NUMBER:return 14;case s.MODE_ALPHA_NUM:return 13;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){const e=t.getModuleCount();let s=0;for(var i=0;i<e;i++)for(var o=0;o<e;o++){let a=0;const n=t.isDark(i,o);for(let s=-1;s<=1;s++)if(!(i+s<0||e<=i+s))for(let r=-1;r<=1;r++)o+r<0||e<=o+r||0==s&&0==r||n==t.isDark(i+s,o+r)&&a++;a>5&&(s+=3+a-5)}for(i=0;i<e-1;i++)for(o=0;o<e-1;o++){let e=0;t.isDark(i,o)&&e++,t.isDark(i+1,o)&&e++,t.isDark(i,o+1)&&e++,t.isDark(i+1,o+1)&&e++,0!=e&&4!=e||(s+=3)}for(i=0;i<e;i++)for(o=0;o<e-6;o++)t.isDark(i,o)&&!t.isDark(i,o+1)&&t.isDark(i,o+2)&&t.isDark(i,o+3)&&t.isDark(i,o+4)&&!t.isDark(i,o+5)&&t.isDark(i,o+6)&&(s+=40);for(o=0;o<e;o++)for(i=0;i<e-6;i++)t.isDark(i,o)&&!t.isDark(i+1,o)&&t.isDark(i+2,o)&&t.isDark(i+3,o)&&t.isDark(i+4,o)&&!t.isDark(i+5,o)&&t.isDark(i+6,o)&&(s+=40);let a=0;for(o=0;o<e;o++)for(i=0;i<e;i++)t.isDark(i,o)&&a++;return s+=10*(Math.abs(100*a/e/e-50)/5),s}},n={glog:function(t){if(t<1)throw new Error("glog("+t+")");return n.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return n.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},r=0;r<8;r++)n.EXP_TABLE[r]=1<<r;for(r=8;r<256;r++)n.EXP_TABLE[r]=n.EXP_TABLE[r-4]^n.EXP_TABLE[r-5]^n.EXP_TABLE[r-6]^n.EXP_TABLE[r-8];for(r=0;r<255;r++)n.LOG_TABLE[n.EXP_TABLE[r]]=r;function l(t,e){if(null==t.length)throw new Error(t.length+"/"+e);let s=0;for(;s<t.length&&0==t[s];)s++;this.num=new Array(t.length-s+e);for(let i=0;i<t.length-s;i++)this.num[i]=t[i+s]}function c(t,e){this.totalCount=t,this.dataCount=e}function h(){this.buffer=[],this.length=0}l.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){const e=new Array(this.getLength()+t.getLength()-1);for(let s=0;s<this.getLength();s++)for(let i=0;i<t.getLength();i++)e[s+i]^=n.gexp(n.glog(this.get(s))+n.glog(t.get(i)));return new l(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;const e=n.glog(this.get(0))-n.glog(t.get(0)),s=new Array(this.getLength());for(var i=0;i<this.getLength();i++)s[i]=this.get(i);for(i=0;i<t.getLength();i++)s[i]^=n.gexp(n.glog(t.get(i))+e);return new l(s,0).mod(t)}},c.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],c.getRSBlocks=function(t,e){const s=c.getRsBlockTable(t,e);if(null==s)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);const i=s.length/3,o=[];for(let a=0;a<i;a++){const t=s[3*a+0],e=s[3*a+1],i=s[3*a+2];for(let s=0;s<t;s++)o.push(new c(e,i))}return o},c.getRsBlockTable=function(t,e){switch(e){case i.L:return c.RS_BLOCK_TABLE[4*(t-1)+0];case i.M:return c.RS_BLOCK_TABLE[4*(t-1)+1];case i.Q:return c.RS_BLOCK_TABLE[4*(t-1)+2];case i.H:return c.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},h.prototype={get:function(t){const e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(let s=0;s<e;s++)this.putBit(1==(t>>>e-s-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};const d=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function u(){return"undefined"!=typeof CanvasRenderingContext2D}function p(){let t=!1;const e=navigator.userAgent;if(/android/i.test(e)){t=!0;const s=e.toString().match(/android ([0-9]\.[0-9])/i);s&&s[1]&&(t=parseFloat(s[1]))}return t}const g=function(){const t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){const e=this._htOption,s=this._el,i=t.getModuleCount();Math.floor(e.width/i),Math.floor(e.height/i);function o(t,e){const s=document.createElementNS("http://www.w3.org/2000/svg",t);for(const i in e)e.hasOwnProperty(i)&&s.setAttribute(i,e[i]);return s}this.clear();const a=o("svg",{viewBox:"0 0 "+String(i)+" "+String(i),width:"100%",height:"100%",fill:e.colorLight});a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),s.appendChild(a),a.appendChild(o("rect",{fill:e.colorLight,width:"100%",height:"100%"})),a.appendChild(o("rect",{fill:e.colorDark,width:"1",height:"1",id:"template"}));for(let n=0;n<i;n++)for(let e=0;e<i;e++)if(t.isDark(n,e)){const t=o("use",{x:String(e),y:String(n)});t.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),a.appendChild(t)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}();let m="svg"===document.documentElement.tagName.toLowerCase()?g:u()?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function e(t,e){const s=this;if(s._fFail=e,s._fSuccess=t,null===s._bSupportDataURI){const t=document.createElement("img"),e=function(){s._bSupportDataURI=!1,s._fFail&&s._fFail.call(s)},i=function(){s._bSupportDataURI=!0,s._fSuccess&&s._fSuccess.call(s)};t.onabort=e,t.onerror=e,t.onload=i,t.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="}else!0===s._bSupportDataURI&&s._fSuccess?s._fSuccess.call(s):!1===s._bSupportDataURI&&s._fFail&&s._fFail.call(s)}const s=function(t,e){this._bIsPainted=!1,this._android=p(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return s.prototype.draw=function(t){const e=this._elImage,s=this._oContext,i=this._htOption,o=t.getModuleCount(),a=i.width/o,n=i.height/o,r=Math.round(a),l=Math.round(n);e.style.display="none",this.clear();for(let c=0;c<o;c++)for(let e=0;e<o;e++){const o=t.isDark(c,e),h=e*a,d=c*n;s.strokeStyle=o?i.colorDark:i.colorLight,s.lineWidth=1,s.fillStyle=o?i.colorDark:i.colorLight,s.fillRect(h,d,a,n),s.strokeRect(Math.floor(h)+.5,Math.floor(d)+.5,r,l),s.strokeRect(Math.ceil(h)-.5,Math.ceil(d)-.5,r,l)}this._bIsPainted=!0},s.prototype.makeImage=function(){this._bIsPainted&&e.call(this,t)},s.prototype.isPainted=function(){return this._bIsPainted},s.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},s.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},s}():function(){const t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){const e=this._htOption,s=this._el,i=t.getModuleCount(),o=Math.floor(e.width/i),a=Math.floor(e.height/i),n=['<table style="border:0;border-collapse:collapse;">'];for(let h=0;h<i;h++){n.push("<tr>");for(let s=0;s<i;s++)n.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+o+"px;height:"+a+"px;background-color:"+(t.isDark(h,s)?e.colorDark:e.colorLight)+';"></td>');n.push("</tr>")}n.push("</table>"),s.innerHTML=n.join("");const r=s.childNodes[0],l=(e.width-r.offsetWidth)/2,c=(e.height-r.offsetHeight)/2;l>0&&c>0&&(r.style.margin=c+"px "+l+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();function f(t,e){let s=1;const o=v(t);for(let a=0,n=d.length;a<=n;a++){let t=0;switch(e){case i.L:t=d[a][0];break;case i.M:t=d[a][1];break;case i.Q:t=d[a][2];break;case i.H:t=d[a][3]}if(o<=t)break;s++}if(s>d.length)throw new Error("Too long data");return s}function v(t){const e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}Mt=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:i.H},"string"==typeof e&&(e={text:e}),e)for(const s in e)this._htOption[s]=e[s];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(m=g),this._android=p(),this._el=t,this._oQRCode=null,this._oDrawing=new m(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},Mt.prototype.makeCode=function(t){this._oQRCode=new e(f(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},Mt.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},Mt.prototype.clear=function(){this._oDrawing.clear()},Mt.CorrectLevel=i}();const Dt=Mt;var Bt=s(2152),Nt=s.n(Bt),Ot=s(466),Ht=s.n(Ot);const Rt=JSON.parse('{"X":"{{#legacy}}\\n<iframe frameborder=\\"0\\" src=\\"{{{url}}}\\" title=\\"{{title}}\\" width=\\"{{width}}\\" height=\\"{{height}}\\" scrolling=\\"no\\" marginwidth=\\"0\\" marginheight=\\"0\\" allowfullscreen></iframe>\\n{{/legacy}}\\n{{^legacy}}\\n<a href=\\"{{{url}}}\\" class=\\"{{prefix}}-embed\\"{{#id}} data-{{prefix}}-id=\\"{{id}}\\"{{/id}}{{#page}} data-{{prefix}}-page=\\"{{page}}\\"{{/page}}{{#thumbnail}} data-{{prefix}}-thumbnail=\\"{{{thumbnail}}}\\"{{/thumbnail}}{{#index}} data-{{prefix}}-index=\\"{{index}}\\"{{/index}}{{#hashMode}} data-{{prefix}}-hashmode=\\"true\\"{{/hashMode}}{{#ratio}} data-{{prefix}}-ratio=\\"{{ratio}}\\"{{/ratio}}{{#mode}} data-{{prefix}}-mode=\\"{{mode}}\\"{{/mode}} data-{{prefix}}-lightbox=\\"{{#lightbox}}yes{{/lightbox}}{{^lightbox}}no{{/lightbox}}\\" data-{{prefix}}-width=\\"{{width}}\\" data-{{prefix}}-height=\\"{{height}}\\"{{#method}} data-{{prefix}}-method=\\"{{method}}\\"{{/method}}{{#version}} data-{{prefix}}-version=\\"{{version}}\\"{{/version}}{{#wheel}} data-{{prefix}}-wheel=\\"true\\"{{/wheel}}{{#analytics}} data-{{prefix}}-analytics=\\"{{analytics}}\\"{{/analytics}} style=\\"max-width: 100%\\">{{title}}</a><script async defer src=\\"{{{script}}}\\"><\/script>\\n{{/legacy}}"}'),Ft={data:function(){return{embedTemplate:Rt.X,activeTab:"share",currentPage:!1,embedWidth:"960",embedHeight:"540",embedType:"full",embedLegacy:!1,embedLightbox:!0,clipboardShare:null,clipboardEmbed:null}},components:{Checkbox:ot},mounted(){this.updateUrl(),this.enableClipboard(),this.params.currentPage&&(this.currentPage=!0)},beforeDestroy(){this.clipboardShare.destroy(),this.clipboardEmbed.destroy()},computed:{currentTitle(){return this.$store.state.workspace.title},params(){return this.$store.state.popup.params},currentUrl(){return(0,M.Z)().getShareUrl(this.currentPage)},localization(){return{shareTab:this.$t("PermanentLinkBar.SHARE_TAB"),embedTab:this.$t("PermanentLinkBar.INSERT_TO_SITE_TAB"),shareCurrent:this.$t("PermanentLinkBar.SHARE_CURRENT_PAGE"),embedCurrent:this.$t("PermanentLinkBar.INSERT_CURRENT_PAGE"),width:this.$t("PermanentLinkBar.WIDTH"),height:this.$t("PermanentLinkBar.HEIGHT"),fullPublication:this.$t("PermanentLinkBar.FULL_PUBLICATION"),linkablePage:this.$t("PermanentLinkBar.LINKABLE_PAGE"),embedType:this.$t("PermanentLinkBar.EMBEDDING_TYPE"),copyButton:this.$t("PermanentLinkBar.COPY_BUTTON"),shareText:this.$t("PermanentLinkBar.SHARE_TEXT"),facebookTitle:this.$t("PermanentLinkBar.SHARE_TO_FACEBOOK"),twitterTitle:this.$t("PermanentLinkBar.SHARE_TO_TWITTER"),linkedinTitle:this.$t("PermanentLinkBar.SHARE_TO_LINKEDIN"),mailTitle:this.$t("PermanentLinkBar.SEND_BY_EMAIL"),copyTooltip:this.$t("PermanentLinkBar.COPY_TOOLTIP")}},embedCode(){const t=(0,M.Z)().getEmbedPrefix(),e=this.embedWidth,s=this.embedHeight,i=(0,M.Z)().getShareUrl(!1),o=this.currentPage?this.getCurrentPage():null,a=-1===["fbo","fbc"].indexOf(t)?(0,M.Z)().translatePath("assets/cover300.jpg"):null,n={url:i,title:this.currentTitle,script:(0,M.Z)().translatePath("static/embed.js",!0),prefix:t,lightbox:this.embedLightbox?"yes":"no",hashMode:(0,M.Z)().getHashMode(),index:(0,M.Z)().getIndexFileName(),page:o,thumbnail:a,width:-1!==e.indexOf("%")||-1!==e.indexOf("px")||-1!==e.indexOf("vh")||-1!==e.indexOf("vw")?e:e+"px",height:-1!==s.indexOf("%")||-1!==s.indexOf("px")||-1!==s.indexOf("vh")||-1!==s.indexOf("vw")?s:s+"px",method:"site",legacy:this.embedLegacy};return this.$store.state.info&&this.$store.state.info.publicationVer&&(n.version=this.$store.state.info.publicationVer),Ht().render(this.embedTemplate,n)},tabsEnabled(){return this.$store.state.workspace.components.embed},isMac(){return!0===this.$store.state.workspace.userAgentInfo.os.mac}},methods:{updateUrl(){const t=function(t,e){const s=[];for(const i in e)if(e.hasOwnProperty(i)){const t=encodeURIComponent(i),o=encodeURIComponent(e[i]);s.push(t+"="+o)}return t+"?"+s.join("&")};this.$refs.facebookBtn.href=t("http://www.facebook.com/sharer.php",{u:this.currentUrl}),this.$refs.twitterBtn.href=t("http://twitter.com/share",{text:this.currentTitle,url:this.currentUrl}),this.$refs.linkedinBtn.href=t("http://www.linkedin.com/shareArticle",{mini:!0,url:this.currentUrl,title:this.currentTitle,summary:this.currentTitle}),this.$refs.mailBtn.href=t("mailto:",{subject:this.currentTitle,body:this.currentUrl}),this.renderQR()},renderQR(){this.$refs.qr.innerHTML="",this.qr=new Dt(this.$refs.qr,{text:(0,M.Z)().getShareUrl(this.currentPage)+"?utm_source=qr",width:128,height:128,correctLevel:Dt.CorrectLevel.M})},tabClick(t){this.activeTab=t},sendApiEvent(t){this.$root.$emit("share",{service:t,url:this.currentUrl})},enableClipboard(){this.clipboardShare=new(Nt())(this.$refs.copyUrlButton),this.clipboardEmbed=new(Nt())(this.$refs.copyEmbedButton);const t=this.$refs.shareUrlContainer;document.addEventListener("copy",(e=>{e.target===t&&this.sendApiEvent("clipboard")})),this.clipboardShare.on("success",(t=>{this.$store.dispatch("workspace/setFlashMessage",{text:this.$t("AlertMessage.LINK_COPIED"),style:this.$parent.getMessageStyle()}),t.clearSelection()})),this.clipboardEmbed.on("success",(t=>{this.$store.dispatch("workspace/setFlashMessage",{text:this.$t("AlertMessage.EMBED_CODE_COPIED"),style:this.$parent.getMessageStyle()}),t.clearSelection()})),this.clipboardShare.on("error",(()=>{this.$store.dispatch("workspace/setFlashMessage",{text:this.$tc("AlertMessage.COPY_ERROR",0,{key:this.isMac?"⌘C":"Ctrl + C"}),style:this.$parent.getMessageStyle()})})),this.clipboardEmbed.on("error",(()=>{this.$store.dispatch("workspace/setFlashMessage",{text:this.$tc("AlertMessage.COPY_ERROR",0,{key:this.isMac?"⌘C":"Ctrl + C"}),style:this.$parent.getMessageStyle()})}))},getCurrentPage(){let t;const e=this.$store.getters["pager/state"];return t=e.targetPage?e.targetPage:e.singleMode?e.rightPage:null!==e.leftPage?e.leftPage:e.rightPage,this.$store.getters["pages/urlHeaderById"]({id:t})}},watch:{currentUrl:"updateUrl",embedType(t){"cover"===t?(this.embedWidth="240",this.embedHeight="210"):(this.embedWidth="960",this.embedHeight="540")}}};const Vt=(0,m.Z)(Ft,Lt,zt,!1,null,"4b433add",null).exports;var Wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"publication-info"},[t.showConfig?s("div",{staticClass:"window-tabs-head"},[s("span",{class:{active:"info"===t.activeTab},attrs:{id:"custom-button-tab"},on:{click:function(e){return t.tabClick("info")}}},[t._v("Info")]),t._v(" "),t.showConfig?s("span",{class:{active:"summary"===t.activeTab},attrs:{id:"info-button-tab"},on:{click:function(e){return t.tabClick("summary")}}},[t._v("Summary")]):t._e(),t._v(" "),t.showConfig?s("span",{class:{active:"config"===t.activeTab},attrs:{id:"info-button-tab"},on:{click:function(e){return t.tabClick("config")}}},[t._v("JSON Config")]):t._e(),t._v(" "),t.showConfig?s("span",{class:{active:"notes"===t.activeTab},attrs:{id:"note-button-tab"},on:{click:function(e){return t.tabClick("notes")}}},[t._v("Notes")]):t._e(),t._v(" "),t.showConfig?s("span",{class:{active:"store"===t.activeTab},attrs:{id:"hotkeys-button-tab"},on:{click:function(e){return t.tabClick("store")}}},[t._v("Store State")]):t._e()]):t._e(),t._v(" "),s("section",{staticClass:"window-tab debug-info info-tab",class:{active:"info"===t.activeTab},attrs:{id:"info-tab"}},[t.hasPublicationData?s("div",[s("table",{staticClass:"info-table"},[t.publicationInfoData.id?s("tr",[s("td",{staticClass:"info-table-key"},[t._v("User ID")]),t._v(" "),s("td",{staticClass:"info-table-value"},[t._v(t._s(t.publicationInfoData.id))])]):t._e(),t._v(" "),t.publicationInfoData.publicationId?s("tr",[s("td",{staticClass:"info-table-key"},[t._v("Publication ID")]),t._v(" "),s("td",{staticClass:"info-table-value"},[t._v(t._s(t.publicationInfoData.publicationId))])]):t._e(),t._v(" "),t.publicationInfoData.publicationVer?s("tr",[s("td",{staticClass:"info-table-key"},[t._v("Publication version")]),t._v(" "),s("td",{staticClass:"info-table-value"},[t._v(t._s(t.publicationInfoData.publicationVer))])]):t._e(),t._v(" "),t.publicationInfoData.publishDate?s("tr",[s("td",{staticClass:"info-table-key"},[t._v("Update date")]),t._v(" "),s("td",{staticClass:"info-table-value"},[t._v(t._s(t.publicationInfoData.publishDate))])]):t._e(),t._v(" "),t.publicationInfoData.publishVer||t.publicationInfoData.publishEdition?s("tr",[s("td",{staticClass:"info-table-key"},[t._v("Updated in")]),t._v(" "),s("td",{staticClass:"info-table-value"},[t.publicationInfoData.publishVer?s("span",[t._v(t._s(t.publicationInfoData.publishVer))]):t._e(),t.publicationInfoData.publishEdition?s("span",[t._v(" "+t._s(t.publicationInfoData.publishEdition))]):t._e()])]):t._e(),t._v(" "),t.publicationInfoData.createVer||t.publicationInfoData.createEdition?s("tr",[s("td",{staticClass:"info-table-key"},[t._v("Project created in")]),t._v(" "),s("td",{staticClass:"info-table-value"},[t.publicationInfoData.createVer?s("span",[t._v(t._s(t.publicationInfoData.createVer))]):t._e(),t.publicationInfoData.createEdition?s("span",[t._v(" "+t._s(t.publicationInfoData.createEdition))]):t._e()])]):t._e()]),t._v(" "),t.hasAdditionalData?s("h3",[t._v("Additional data:")]):t._e(),t._v(" "),t.hasAdditionalData?s("table",{staticClass:"info-table"},t._l(t.publicationInfoData.additional,(function(e,i){return s("tr",[s("td",{staticClass:"info-table-key"},[t._v(t._s(i))]),t._v(" "),s("td",{staticClass:"info-table-value"},[t._v(t._s(e))])])})),0):t._e()]):s("div",[t._v("Unfortunately, no info is available for this publication.")])]),t._v(" "),t.showConfig?s("section",{staticClass:"window-tab summary",class:{active:"summary"===t.activeTab},attrs:{id:"summary-tab"}},[t._l(t.contentTypes,(function(e){return s("div",{staticClass:"summary-section",attrs:{title:t.summaryTips[e]},on:{click:function(s){t.showSummary[e]=!t.showSummary[e]}}},[s("div",[t._v("\n                "+t._s(Object.keys(t.contentSummary[e]).length?(t.showSummary[e]?"-":"+")+" "+e:"no "+e)+"\n            ")]),t._v(" "),s("table",{directives:[{name:"show",rawName:"v-show",value:t.showSummary[e],expression:"showSummary[contentType]"}]},t._l(Object.keys(t.contentSummary[e]),(function(i){return s("tr",[s("td",{staticClass:"link",on:{click:function(e){return e.stopPropagation(),t.$store.dispatch("pager/goToPageById",{id:i})}}},[t._v("\n                        "+t._s("page "+t.$store.getters["pages/pageCaptionById"]({id:i}))+"\n                    ")]),t._v(" "),s("td",[t._v(t._s(t.contentSummary[e][i].join(", ")))])])})),0)])})),t._v(" "),s("div",{staticClass:"summary-section",on:{click:function(e){t.showSummary.pages=!t.showSummary.pages}}},[s("div",[t._v("\n                "+t._s(t.pagesSummary.wide.length||t.pagesSummary.stubs.length?(t.showSummary.pages?"-":"+")+" pages":"no weird pages")+"\n            ")]),t._v(" "),s("table",{directives:[{name:"show",rawName:"v-show",value:t.showSummary.pages,expression:"showSummary['pages']"}],staticClass:"summary-responsive"},t._l(t.pageTypes,(function(e){return s("tr",[s("td",[t._v("\n                        "+t._s(e)+" pages:\n                        "),t.pagesSummary[e].length?[t._l(t.pagesSummary[e],(function(e,i){return[i?s("span",[t._v(", ")]):t._e(),t._v(" "),s("span",{staticClass:"link",on:{click:function(s){return s.stopPropagation(),t.$store.dispatch("pager/goToPageById",{id:e})}}},[t._v("\n                                    "+t._s(t.$store.getters["pages/pageCaptionById"]({id:e})))])]}))]:[t._v("-")]],2)])})),0)]),t._v(" "),s("div",{staticClass:"summary-section",on:{click:function(e){t.showSummary.caniuse=!t.showSummary.caniuse}}},[s("div",[t._v("\n                "+t._s(t.showSummary.caniuse?"-":"+")+"\n                autoplay information\n            ")]),t._v(" "),s("table",{directives:[{name:"show",rawName:"v-show",value:t.showSummary.caniuse,expression:"showSummary['caniuse']"}],staticClass:"summary-responsive"},[s("tr",[s("td",[t._v("video autoplay allowed")]),t._v(" "),s("td",[t._v(t._s(t.$store.state.caniuse.video.inlineAutoplay))])]),t._v(" "),s("tr",[s("td",[t._v("video muted autoplay allowed")]),t._v(" "),s("td",[t._v(t._s(t.$store.state.caniuse.video.inlineMutedAutoplay))])]),t._v(" "),s("tr",[s("td",[t._v("audio autoplay allowed")]),t._v(" "),s("td",[t._v(t._s(t.$store.state.caniuse.audio.autoplay))])]),t._v(" "),s("tr",[s("td",[t._v("audio muted autoplay allowed")]),t._v(" "),s("td",[t._v(t._s(t.$store.state.caniuse.audio.mutedAutoplay))])]),t._v(" "),s("tr",[s("td",[t._v("user made first click")]),t._v(" "),s("td",[t._v(t._s(t.$store.state.caniuse.userInteractions.firstClick))])]),t._v(" "),s("tr",[s("td",[t._v('user made first "flip"')]),t._v(" "),s("td",[t._v(t._s(t.$store.state.caniuse.userInteractions.firstFlip))])])])])],2):t._e(),t._v(" "),t.showConfig?s("section",{staticClass:"window-tab debug-info",class:{active:"notes"===t.activeTab},attrs:{id:"notes-tab"}},[s("p",{staticClass:"description"},[t._v("Here you can export and import notes in JSON format.")]),t._v(" "),s("p",{staticClass:"description"},[t._v("Warning: import replaces all existing notes!")]),t._v(" "),s("div",{staticClass:"divider wide"}),t._v(" "),s("div",{staticClass:"button-row"},[s("button",{staticClass:"popup-button",on:{click:t.exportNotesJson}},[t._v("Export to .json")]),t._v(" "),s("button",{staticClass:"popup-button",on:{click:t.importNotesJson}},[t._v("Import from .json")]),t._v(" "),s("button",{staticClass:"popup-button danger",on:{click:t.clearNotes}},[t._v("Clear notes")])]),t._v(" "),s("div",{staticClass:"divider wide"}),t._v(" "),s("span",{staticClass:"small"},[t._v("Total notes in publication: "+t._s(t.notesCount))])]):t._e(),t._v(" "),t.showConfig?s("section",{staticClass:"window-tab debug-info",class:{active:"config"===t.activeTab},attrs:{id:"config-tab"}},[s("p",{staticClass:"description"},[t._v("This window provides the current publication configs in JSON format as provided by the Publication API. Please note that these configs may contain merged default values.")]),t._v(" "),s("div",{staticClass:"divider"}),t._v(" "),s("label",{attrs:{for:"pagerInfo"}},[t._v("Pages config: "),t.pagerInfo?t._e():s("button",{staticClass:"popup-button",on:{click:t.loadPager}},[t._v(t._s(t.loadLabel))])]),t._v(" "),s("textarea",{attrs:{id:"pagerInfo"}},[t._v(t._s(t.pagerInfo))]),t._v(" "),s("label",{attrs:{for:"wsInfo"}},[t._v("Workspace config:")]),t._v(" "),s("textarea",{attrs:{id:"wsInfo"}},[t._v(t._s(t.workspaceInfo))]),t._v(" "),s("label",{attrs:{for:"skinInfo"}},[t._v("Skin config:")]),t._v(" "),s("textarea",{attrs:{id:"skinInfo"}},[t._v(t._s(t.skinInfo))])]):t._e(),t._v(" "),t.showConfig?s("section",{staticClass:"window-tab debug-info",class:{active:"store"===t.activeTab},attrs:{id:"store-tab"}},[s("p",{staticClass:"description"},[t._v("This window provides the current store state for each component in JSON format.")]),t._v(" "),s("div",{staticClass:"divider"}),t._v(" "),s("label",{attrs:{for:"input-component"}},[t._v("Store component:\n            "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.currentComponent,expression:"currentComponent"}],attrs:{id:"input-component"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.currentComponent=e.target.multiple?s:s[0]}}},t._l(t.availableComponents,(function(e){return s("option",{domProps:{value:e}},[t._v("\n                    "+t._s(e)+"\n                ")])})),0)]),t._v(" "),s("textarea",{attrs:{id:"componentInfo"}},[t._v(t._s(t.componentInfo))])]):t._e(),t._v(" "),s("div",{staticClass:"divider wide"}),t._v(" "),s("p",{staticClass:"version",on:{click:t.onClick,mousedown:t.showDevInfoAfterDelay}},[t._v(t._s(t.versionInfo||"Unknown version"))])])},Ut=[],Zt=s(320),Gt=s(1909);const Kt={name:"InfoWindow",data:function(){return{showPagerInfo:!1,clickCount:0,currentComponent:"---",loadLabel:null,activeTab:(0,M.Z)().getLocalStorage().getItem("showConfigTab")||"info",contentTypes:["images","galleries","videos","gifs","forms","links"],pageTypes:["wide","stubs"],summaryTips:{images:"Image explanation:\n[p/i - popup/inline]\n[d - have description]",galleries:"Gallery explanation:\n[n - number of items]\n[d - there is a description in at least one of the items]",videos:"Video explanation:\n[y/v/w - youtube/vimeo/wistia provider]\n[p/i - popup/inline]\n[a - autoplay]\n[l - loop]",gifs:"Gif explanation:\n[a - autoplay]\n[l - loop]",forms:"Form explanation:\n[g/t/m - google/typeform/microsoft provider]\n[p/t - popup or new tab]",links:"No link explanation"},showSummary:{images:!1,galleries:!1,videos:!1,gifs:!1,forms:!1,links:!1,pages:!1,caniuse:!1}}},mounted(){this.loadLabel="Load info",document.addEventListener("mouseup",this.cancelDevInfo)},beforeDestroy(){document.removeEventListener("mouseup",this.cancelDevInfo),this.cancelDevInfo()},computed:{publicationInfoData(){return this.$store.state.info},contentSummary(){const t=this.$store.state.content.items,e={images:{},galleries:{},videos:{},gifs:{},forms:{},links:{}};return Object.keys(t).forEach((s=>{const i=t[s],{pageId:o,popup:a,descriptionByType:n,items:r,provider:l,autoplay:c,loop:h,mode:d,originalUrl:u}=i;switch(i.type){case"image":e.images[o]=e.images[o]||[],e.images[o].push(`${a?"p":"i"}${n?.[0]?"d":""}`);break;case"gallery":e.galleries[o]=e.galleries[o]||[],e.galleries[o].push(`${r.length}${r.some((t=>!!t.descriptionByType?.[0]))?"d":""}`);break;case"video":let t;if(l)t=l.charAt(0);else{const e=/(?:(?:https?:)?\/\/)?(?:[^.]+\.)?(\w+)(\.|\-)/.exec(u);t=(e?.[1]||"").charAt(0)}e.videos[o]=e.videos[o]||[],e.videos[o].push(`${t}${"dialog"===d?"p":"i"}${c?"a":""}${h?"l":""}`);break;case"gif":e.gifs[o]=e.gifs[o]||[],e.gifs[o].push(`${c?"a":""}${h?"l":""}`);break;case"form":let s=(0,Gt.V)(i.url).charAt(0);s="o"===s?"m":s,e.forms[o]=e.forms[o]||[],e.forms[o].push(`${s}${a?"p":"t"}`);break;case"link":e.links[o]=e.links[o]||[],e.links[o].push("•")}})),e},pagesSummary(){const t=this.$store.state.pages.structure.filter((t=>t));return{wide:t.filter((t=>this.$store.getters["pages/pageProp"](t,"wide"))),stubs:t.filter((t=>this.$store.getters["pages/pageProp"](t,"stub")))}},hasPublicationData(){return!(0,Zt.xb)(this.publicationInfoData)&&this.publicationInfoData.id},hasAdditionalData(){return this.hasPublicationData&&!(0,Zt.xb)(this.publicationInfoData.additional)},showConfig(){return this.$store.state.workspace.showConfig},pagerInfo(){return this.showConfig&&this.showPagerInfo?this.$root.$options.api.getProperty("pages").getJSON({space:2}):null},workspaceInfo(){return this.showConfig?this.$root.$options.api.getProperty("workspace").getJSON({space:2}):null},skinInfo(){return this.showConfig?this.$root.$options.api.getProperty("skin").getJSON({space:2}):null},notesCount(){return this.$store.state.notes.items.length},availableComponents(){const t=Object.keys(this.$store.state).sort();return t.unshift("---"),t},componentInfo(){return this.$store.state.hasOwnProperty(this.currentComponent)?JSON.stringify(this.$store.state[this.currentComponent],null,2):"Please select a component"},versionInfo(){const t=this.$store.state.info;return t&&t.publicationVer?this.$t("HelpWindow.INFO_VERSION_LABEL")+" "+(t.publishVer?t.publishVer+"-":"")+t.publicationVer+(t.environment?" ("+t.environment+")":""):null}},methods:{onClick(){this.clickCount++,10===this.clickCount&&this.showDevInfo()},showDevInfoAfterDelay(){this.showDevInfoTimeoutId=setTimeout(this.showDevInfo,3e3)},cancelDevInfo(){clearTimeout(this.showDevInfoTimeoutId)},showDevInfo(){this.$store.dispatch("workspace/setShowConfig",!0),(0,M.Z)().getLocalStorage().setItem("showConfig",!0),this.$store.dispatch("workspace/setFlashMessage",{text:"Are you a developer or just curious? ;)",delay:1500,style:this.$parent.getMessageStyle()}),this.$root.$emit("develop",{action:"Info Opened",data:"level 1"})},tabClick(t){this.activeTab=t,(0,M.Z)().getLocalStorage().setItem("showConfigTab",this.activeTab)},loadPager(){this.loadLabel="Loading... This may take a while...",setTimeout((()=>{this.showPagerInfo=!0}),100)},exportNotesJson(){const t=JSON.stringify(this.$store.state.notes.items,null,2),e=new Blob([t],{type:"application/json"}),s=document.createElement("a");s.href=URL.createObjectURL(e),s.download="notes.json",s.click()},importNotesJson(){const t=document.createElement("input");t.type="file",t.accept="application/json",t.addEventListener("change",(()=>{const[e]=t.files,s=new FileReader;s.addEventListener("load",(()=>{const t=JSON.parse(s.result);this.$store.dispatch("notes/importNotes",{items:t}),this.$store.dispatch("workspace/setFlashMessage",{text:`Imported ${t.length} notes.`,delay:1500,style:this.$parent.getMessageStyle()})}),!1),e&&s.readAsText(e)})),t.click()},clearNotes(){this.$store.dispatch("notes/clearNotes"),this.$store.dispatch("workspace/setFlashMessage",{text:"Notes cleared.",delay:1500,style:this.$parent.getMessageStyle()})}}},qt=Kt;var jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"publication-help",class:t.isMac?"":"win"},[s("div",{staticClass:"window-tabs-head",attrs:{role:"tablist"}},[t.localization.about.text?s("span",{class:{active:"about"===t.activeTab},attrs:{id:"custom-button-tab",tabindex:"0",role:"tab","aria-controls":"custom-tab","aria-selected":"about"===t.activeTab?"true":"false","data-modal-tabIndex":"about"===t.activeTab&&"first-init"},on:{click:function(e){return t.tabClick("about")},keydown:t.keyDown}},[t._v("\n            "+t._s(t.localization.aboutTab)+"\n        ")]):t._e(),t._v(" "),s("span",{class:{active:"info"===t.activeTab},attrs:{id:"info-button-tab",tabindex:"0",role:"tab","aria-controls":"general-tab","aria-selected":"info"===t.activeTab?"true":"false","data-modal-tabIndex":"info"===t.activeTab&&"first-init"},on:{click:function(e){return t.tabClick("info")},keydown:t.keyDown}},[t._v("\n            "+t._s(t.localization.infoTab)+"\n        ")]),t._v(" "),s("span",{class:{active:"hotkeys"===t.activeTab},attrs:{id:"hotkeys-button-tab",tabindex:"0",role:"tab","aria-controls":"hotkeys-tab","aria-selected":"hotkeys"===t.activeTab?"true":"false","data-modal-tabIndex":"last"},on:{click:function(e){return t.tabClick("hotkeys")},keydown:t.keyDown}},[t._v("\n            "+t._s(t.localization.hotkeysTab)+"\n        ")])]),t._v(" "),t.localization.about.text?s("section",{staticClass:"window-tab",class:{active:"about"===t.activeTab},attrs:{id:"custom-tab",tabindex:"-1",role:"tabpanel","aria-labelledby":"custom-button-tab"}},[s("p",[t._v(t._s(t.localization.about.text))])]):t._e(),t._v(" "),s("section",{staticClass:"window-tab",class:{active:"info"===t.activeTab},attrs:{id:"general-tab",tabindex:"0",role:"tabpanel","aria-labelledby":"info-button-tab"}},["flip-book"!==t.bookComponent||t.wheelFlipEnabled?t._e():s("p",[s("span",{domProps:{innerHTML:t._s(t.localization.info.flipInfo)}})]),t._v(" "),"flip-book"===t.bookComponent&&t.wheelFlipEnabled?s("p",[s("span",{domProps:{innerHTML:t._s(t.localization.info.flipInfoWheel)}})]):t._e(),t._v(" "),"slide-book"!==t.bookComponent||t.wheelFlipEnabled?t._e():s("p",[s("span",{domProps:{innerHTML:t._s(t.localization.info.slideInfo)}})]),t._v(" "),"slide-book"===t.bookComponent&&t.wheelFlipEnabled?s("p",[s("span",{domProps:{innerHTML:t._s(t.localization.info.slideInfoWheel)}})]):t._e(),t._v(" "),s("div",{staticClass:"divider"}),t._v(" "),s("p",[s("span",{domProps:{innerHTML:t._s(t.localization.info.contentHighlight)}})]),t._v(" "),s("p",[s("span",{domProps:{innerHTML:t._s(t.localization.info.doubleClick)}})]),t._v(" "),t.wheelFlipEnabled?s("p",[s("span",{domProps:{innerHTML:t._s(t.localization.info.changeZoomWheel)}})]):s("p",[s("span",{domProps:{innerHTML:t._s(t.localization.info.changeZoom)}})]),t._v(" "),s("p",[s("span",{domProps:{innerHTML:t._s(t.localization.info.zoomMove)}})]),t._v(" "),t.selectTextEnabled?s("p",[s("span",{domProps:{innerHTML:t._s(t.localization.info.zoomSelect)}})]):t._e()]),t._v(" "),s("section",{staticClass:"window-tab",class:{active:"hotkeys"===t.activeTab},attrs:{id:"hotkeys-tab",tabindex:"0",role:"tabpanel","aria-labelledby":"hotkeys-button-tab"}},[s("p",[s("span",{attrs:{dir:"ltr"}},[s("span",{staticClass:"modifier key"},[t._v(t._s(t.ctrlKey))]),s("span",{staticClass:"key"},[t._v("+")])]),t._v(" – "+t._s(t.localization.hotkeys.zoomIn))]),t._v(" "),s("p",[s("span",{attrs:{dir:"ltr"}},[s("span",{staticClass:"modifier key"},[t._v(t._s(t.ctrlKey))]),s("span",{staticClass:"key"},[t._v("-")])]),t._v(" – "+t._s(t.localization.hotkeys.zoomOut))]),t._v(" "),s("p",[s("span",{attrs:{dir:"ltr"}},[s("span",{staticClass:"modifier key"},[t._v(t._s(t.ctrlKey))]),s("span",{staticClass:"key"},[t._v("0")])]),t._v(" – "+t._s(t.localization.hotkeys.actualSize))]),t._v(" "),s("div",{staticClass:"divider"}),t._v(" "),t.selectTextEnabled?s("p",[s("span",{attrs:{dir:"ltr"}},[s("span",{staticClass:"modifier key"},[t._v(t._s(t.ctrlKey))]),s("span",{staticClass:"key"},[t._v("C")])]),t._v(" – "+t._s(t.localization.hotkeys.copyText))]):t._e(),t._v(" "),t.selectTextEnabled?s("p",[s("span",{attrs:{dir:"ltr"}},[s("span",{staticClass:"modifier key"},[t._v(t._s(t.ctrlKey))]),s("span",{staticClass:"key"},[t._v("A")])]),t._v(" – "+t._s(t.localization.hotkeys.copyTextLink))]):t._e(),t._v(" "),t.selectTextEnabled?s("div",{staticClass:"divider"}):t._e(),t._v(" "),t.searchEnabled?s("p",[s("span",{attrs:{dir:"ltr"}},[s("span",{staticClass:"modifier key"},[t._v(t._s(t.ctrlKey))]),s("span",{staticClass:"key"},[t._v("F")])]),t._v(" – "+t._s(t.localization.hotkeys.openSearch))]):t._e(),t._v(" "),t.printEnabled?s("p",[s("span",{attrs:{dir:"ltr"}},[s("span",{staticClass:"modifier key"},[t._v(t._s(t.ctrlKey))]),s("span",{staticClass:"key"},[t._v("P")])]),t._v(" – "+t._s(t.localization.hotkeys.openPrint))]):t._e(),t._v(" "),s("p",[s("span",{attrs:{dir:"ltr"}},[s("span",{staticClass:"modifier key"},[t._v(t._s(t.shiftKey))]),s("span",{staticClass:"key"},[t._v("W")])]),t._v(" – "+t._s(t.localization.hotkeys.toggleWheel))]),t._v(" "),t.soundEnabled?s("p",[t._m(0),t._v(" – "+t._s(t.localization.hotkeys.muteSound))]):t._e(),t._v(" "),s("p",[s("span",{staticClass:"wide key"},[t._v("Esc")]),t._v(" – "+t._s(t.localization.hotkeys.closeWindow))])]),t._v(" "),s("div",{staticClass:"divider"}),t._v(" "),t.versionInfo?s("p",{staticClass:"version"},[t._v(t._s(t.versionInfo))]):t._e()])},Yt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{attrs:{dir:"ltr"}},[s("span",{staticClass:"key"},[t._v("M")])])}];const Xt={name:"HelpWindow",data:()=>({activeTab:"info"}),beforeMount(){this.localization.about.text&&(this.activeTab="about")},computed:{bookComponent(){return this.$store.state.workspace.bookComponent},isMac(){return!0===this.$store.state.workspace.userAgentInfo.os.mac},ctrlKey(){return this.isMac?"⌘":"Ctrl"},shiftKey(){return this.isMac?"⇧":"Shift"},altKey(){return this.isMac?"⌥":"Alt"},searchEnabled(){return this.$store.state.search.enabled},soundEnabled(){return this.$store.state.sound.enabled},printEnabled(){return this.$store.state.workspace.components.print},wheelFlipEnabled(){return this.$store.state.workspace.wheelScroll},selectTextEnabled(){return this.$store.state.workspace.components.textSelection},localization(){return{aboutTab:this.$t("HelpWindow.ABOUT_TAB"),infoTab:this.$t("HelpWindow.INFO_TAB"),hotkeysTab:this.$t("HelpWindow.HOTKEYS_TAB"),about:{text:this.$t("HelpWindow.ABOUT_TEXT")||null},info:{flipInfo:this.processLocaleStr(this.$t("HelpWindow.INFO_FLIP")),flipInfoWheel:this.processLocaleStr(this.$t("HelpWindow.INFO_FLIP_WHEEL")),slideInfo:this.processLocaleStr(this.$t("HelpWindow.INFO_SLIDE")),slideInfoWheel:this.processLocaleStr(this.$t("HelpWindow.INFO_SLIDE_WHEEL")),doubleClick:this.processLocaleStr(this.$t("HelpWindow.INFO_DOUBLE_CLICK")),changeZoom:this.processLocaleStr(this.$t("HelpWindow.INFO_ZOOM_CHANGE")),changeZoomWheel:this.processLocaleStr(this.$t("HelpWindow.INFO_ZOOM_CHANGE_WHEEL")),zoomMove:this.processLocaleStr(this.$t("HelpWindow.INFO_ZOOM_MOVE")),zoomSelect:this.processLocaleStr(this.$t("HelpWindow.INFO_ZOOM_TEXT_SELECT")),versionLabel:this.processLocaleStr(this.$t("HelpWindow.INFO_VERSION_LABEL")),contentHighlight:this.processLocaleStr(this.$t("HelpWindow.INFO_CONTENT_HIGHLIGHT"))},hotkeys:{zoomIn:this.$t("HelpWindow.HOTKEY_ZOOM_IN"),zoomOut:this.$t("HelpWindow.HOTKEY_ZOOM_OUT"),actualSize:this.$t("HelpWindow.HOTKEY_ACTUAL_SIZE"),copyText:this.$t("HelpWindow.HOTKEY_COPY_TEXT"),copyTextLink:this.$t("HelpWindow.HOTKEY_COPY_TEXT_LINK"),openSearch:this.$t("HelpWindow.HOTKEY_OPEN_SEARCH"),openPrint:this.$t("HelpWindow.HOTKEY_OPEN_PRINT"),muteSound:this.$t("HelpWindow.HOTKEY_TOGGLE_MUTE"),closeWindow:this.$t("HelpWindow.HOTKEY_CLOSE_WINDOW"),toggleWheel:this.$t("HelpWindow.HOTKEY_TOGGLE_WHEEL")}}},versionInfo(){const t=this.$store.state.info;return t&&t.publicationVer?this.localization.info.versionLabel+" "+(t.publishVer?t.publishVer+"-":"")+t.publicationVer:null}},methods:{keyDown(t){"Space"!==t.code&&"Enter"!==t.code||(t.stopPropagation(),t.target.click())},tabClick(t){this.activeTab=t},processLocaleStr(t){return t=(t=(t=(t=(t=t.replace(/\[ctrl\]/gi,'<span class="modifier key">'+this.ctrlKey+"</span>")).replace(/\[alt\]/gi,'<span class="modifier key">'+this.altKey+"</span>")).replace(/\[shift\]/gi,'<span class="modifier key">'+this.shiftKey+"</span>")).replace(/(\[)/gi,'<span class="key">')).replace(/(\])/gi,"</span>")}}};var Jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"acessibility"},[s("a",{staticClass:"acessibility-full-button",attrs:{"data-modal-tabIndex":"first-init",target:"_blank",href:"linkFull",tabindex:"0",download:t.accessiblePdfFilename,role:"button",title:t.accessiblePdfTitle,"aria-label":t.accessiblePdfTitle},on:{click:function(e){return t.processAccessiblePdfDownloadEvent(e,"download")},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.onAccessiblePdfButtonSpaceDown(e)}}},[s("span",{staticClass:"title"},[t._v(t._s(t.accessiblePdfLabel)+" - "),s("span",{attrs:{dir:"ltr"}},[t._v(t._s(t.accesssiblePdfSize))])]),t._v(" "),s("span",{staticClass:"description"},[t._v(t._s(t.accessiblePdfTitle))])]),t._v(" "),s("span",{staticClass:"text-block",attrs:{tabindex:"0"}},[t._v(t._s(t.accessiblePdfDescription))])])},Qt=[];const te={name:"AccessibilityWindow",mixins:[tt],computed:{accessiblePdfLabel(){return this.$i18n.t("SaveWindow.FULL_PUBLICATION")},accessiblePdfDescription(){return this.$t("Accessibility.DOWNLOAD_DESCRIPTION")}}};let ee;const se={components:{"downloads-window":_t,"print-window":At,"social-window":Vt,"info-window":(0,m.Z)(qt,Wt,Ut,!1,null,"127c3a1d",null).exports,"help-window":(0,m.Z)(Xt,jt,Yt,!1,null,"71c43cdd",null).exports,"accessibility-window":(0,m.Z)(te,Jt,Qt,!1,null,"1c48a851",null).exports},computed:{title:function(){switch(this.$store.state.popup.opened){case"download":return this.$i18n.t("SaveWindow.TITLE");case"print":return this.$i18n.t("PrintWindow.TITLE");case"social":return this.$i18n.t("PermanentLinkBar.TITLE");case"info":return"Publication Info";case"help":return this.$i18n.t("HelpWindow.TITLE");case"accessibility":return this.$i18n.t("Accessibility.WINDOW_TITLE");default:return"error"}},icon:function(){return this.$store.state.popup.opened},activeComponent:function(){return this.$store.state.popup.opened}},methods:{close(){this.$store.dispatch("popup/closePopup")},getMessageStyle(){const t=this.$el.getBoundingClientRect(),e=this.$store.getters["workspace/containerSize"].left;return{left:t.left-e+t.width/2+"px",top:t.top+t.height/2+"px"}}},mounted(){const t=document.querySelector("[data-modal-tabIndex=first]");let e=document.querySelector("[data-modal-tabIndex=last]");const s=document.querySelector("[data-modal-tabIndex=first-init]"),i=this.$refs["first-trap"],o=this.$refs["last-trap"];s&&!e&&(e=s),s&&(s.addEventListener("focus",(t=>{this.relatedTargetFocus=t.relatedTarget||null})),s.focus()),i&&e&&i.addEventListener("focus",(t=>{e.focus()})),o&&t&&o.addEventListener("focus",(()=>{t.focus()}))},beforeCreate:function(){const t=this;ee=function(e){"Escape"===e.code&&t.$store.dispatch("popup/closePopup")},window.addEventListener("keydown",ee)},beforeDestroy:function(){window.removeEventListener("keydown",ee),ee=null,this.relatedTargetFocus instanceof Element&&this.relatedTargetFocus.focus()}};const ie=(0,m.Z)(se,j,Y,!1,null,"6eb61fdd",null).exports;var oe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("sidebar",{ref:"sidebar",attrs:{title:t.title,icon:t.icon},on:{"click-by-sidebar":t.sidebarClick}},[s("div",{ref:"wrapper",class:t.wrapperClasses,attrs:{title:t.title,role:"grid","aria-rowcount":t.spreadCount,"aria-label":t.title},on:{click:function(e){return e.stopPropagation(),t.onClick(e)},keydown:t.keyDown}},t._l(t.thSchemaArray,(function(e,i){return s("div",{style:{height:t.getBlockPosition(i+1).height+"px"},attrs:{role:"rowgroup"}},t._l(e,(function(o,a){return s("div",{staticClass:"th-row",attrs:{role:"row","aria-rowindex":a+t.spreadsInBlock*i+1}},[s("div",{staticClass:"th-spread-wrapper",attrs:{"data-th-focusable":t.focusableWrappers,tabindex:o.active?0:-1,"data-th-focusable-index":!!t.focusableWrappers&&a+t.spreadsInBlock*i,"data-page-length":e.length,role:!!t.focusableWrappers&&"gridcell"}},t._l(o,(function(t){return s("th-item",{key:t.index+1,attrs:{data:t,isCoverPage:1===o.length&&!t.wide}})})),1)])})),0)})),0)])},ae=[],ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"tool-window",style:t.sidebarStyle,attrs:{role:"search"===t.activeComponent?"search":"navigation",tabindex:-1},on:{click:function(e){return e.stopPropagation(),t.setFocusOnSidebar(e)},focus:t.setFocusOnSidebar}},[t._t("preloader"),t._v(" "),s("header",{staticClass:"tool-title-frame",attrs:{"aria-hidden":!0}},[s("span",{staticClass:"svg-button tool-title-icon"},[s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:t.icon}})],1),t._v(" "),s("h3",{staticClass:"tool-title"},[t._v(t._s(t.title))]),t._v(" "),s("button",{staticClass:"svg-button icon-button close-button",attrs:{tabindex:"0","aria-label":t.closeLabel},on:{click:t.close}},[s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"close"}})],1)]),t._v(" "),t._t("subheader"),t._v(" "),s("div",{ref:"scroller",staticClass:"scroller",attrs:{id:"scroller"},on:{scroll:t.resetScroll}},[s("div",{staticClass:"cont"},[t._t("default")],2)]),t._v(" "),s("footer",{attrs:{"aria-hidden":!0}},[t.footerTitle?s("h3",{staticClass:"tool-footer-title"},[t._v(t._s(t.footerTitle))]):t._e(),t._v(" "),t._t("footer")],2)],2)},re=[];s(607);let le;const ce={props:{title:{type:String,required:!0},icon:{type:String,required:!0},footerTitle:{type:String,required:!1,default:""}},data:function(){return{sidebarRect:{},previousFocusedElement:null}},methods:{close:function(){this.$store.dispatch("sidebar/closeSidebar")},refresh:function(){this.$nextTick((function(){this.scrollComponent&&(this.scrollComponent.refresh(),0===this.scrollComponent.maxScrollY?this.scrollComponent.wrapper.classList.add("hide-vertical"):this.scrollComponent.wrapper.classList.remove("hide-vertical"))}),this)},scrollToElement:function(t){this.scrollComponent&&void 0!==t.el&&this.scrollComponent.scrollToElement(t.el,t.speed,!0,!0)},onResize(){this.$refs.scroller&&(this.sidebarRect=this.$refs.scroller.getBoundingClientRect(),this.refresh())},isVisible(t){if(!t||void 0===!t.getBoundingClientRect)return null;const e=this.sidebarRect,s=t.getBoundingClientRect();return s.left<e.right&&s.right>e.left&&s.top<e.bottom&&s.bottom>e.top},setFocusOnSidebar(t){this.$emit("click-by-sidebar",t)},resetScroll(){this.$refs.scroller&&(this.$refs.scroller.scrollTop=0)},initScrollComponent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.scrollComponent=new nt.ZP(this.$refs.scroller,{mouseWheel:!0,scrollbar:{fade:!0,interactive:!0,scrollbarTrackClickable:!0},click:!0,probeType:3,disablePointer:!0,disableTouch:!1,disableMouse:!1,resizePolling:200,bounce:!1,startX:t,startY:e}),this.scrollComponent.on("scroll",this.scrollEmitter.bind(this,"scroll")),this.scrollComponent.on("scrollEnd",this.scrollEmitter.bind(this,"scrollEnd")),this.scrollComponent.on("scrollStart",this.scrollEmitter.bind(this,"scrollStart"))},destroyScrollComponent(){this.scrollComponent.off("scroll",this.scrollEmitter.bind(this,"scroll")),this.scrollComponent.off("scrollEnd",this.scrollEmitter.bind(this,"scrollEnd")),this.scrollComponent.off("scrollStart",this.scrollEmitter.bind(this,"scrollStart")),this.scrollComponent.destroy(),this.scrollComponent=null},stopScroll(){const t=this.scrollComponent.x,e=this.scrollComponent.y;this.destroyScrollComponent(),this.initScrollComponent(t,e)},scrollEmitter(t){this.$emit(t)}},computed:{activeComponent:function(){return this.$store.state.sidebar.opened},sidebarStyle(){return{"--sidebar-width":this.$store.state.sidebar.width+"px"}},closeLabel(){switch(this.activeComponent){case"toc":return this.$t("TOCToolWindow.CLOSE_LABEL");case"thumbnails":return this.$t("ThumbnailsToolWindow.CLOSE_LABEL");case"search":return this.$t("SearchToolWindow.CLOSE_LABEL");case"notes":return this.$t("NotesToolWindow.CLOSE_LABEL");default:return""}}},beforeDestroy:function(){this.$nextTick((()=>{this.$store.state?.sidebar?.opened||this.previousFocusedElement?.focus()})),this.destroyScrollComponent(),window.removeEventListener("resize",this.onResize),this.$root.$off("publication:mouseleave",this.stopScroll),le=null},beforeMount:function(){this.previousFocusedElement=document.activeElement},mounted:function(){this.initScrollComponent(),this.onResize(),window.addEventListener("resize",this.onResize),le=t=>{if("Escape"===t.code){if(null!==this.$store.state.popup.opened)return;this.$store.dispatch("sidebar/closeSidebar")}},this.$el.addEventListener("keydown",le),this.$root.$on("publication:mouseleave",this.stopScroll)}},he=ce;const de=(0,m.Z)(he,ne,re,!1,null,"114e7304",null).exports;var ue=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.itemClasses,style:t.itemStyles,attrs:{"data-index":t.data.index,"data-id":t.data.id,tabindex:"-1","data-th-focusable-index":!!t.focusableItems&&t.data.index,"data-th-focusable":t.focusableItems,role:!!t.focusableItems&&"gridcell","data-page-container":"true"}},[s("div",{staticClass:"th-img-element",style:t.itemStyles},[t.isCoverPage||t.slideMode||t.singleMode?t._e():s("div",{class:"gradient "+t.pageGradient,attrs:{"aria-hidden":"true"}}),t._v(" "),t.isVisible?s("thumb",{attrs:{id:t.data.id,side:t.data.side,size:t.data.size,contentCrop:t.contentCrop}}):t._e()],1),t._v(" "),!t.data.wide||t.slideMode||t.singleMode?s("span",{staticClass:"th-item-title",attrs:{dir:t.textDirection}},[t._v("\n        "+t._s(t.data.caption)),t.inspectorMode?s("span",{class:["page-id",{"page-id-wide":t.data.wide}]},[t._v("\n            ["+t._s(t.data.id)),t.data.wide?s("span",[t._v("w")]):t._e(),t._v("]")]):t._e()]):[s("div",{staticClass:"th-item-title wide-title",attrs:{dir:"ltr"}},[s("div",{staticClass:"title-half"},[t._v("\n                "+t._s(t.captions.left)),t.inspectorMode?s("span",{staticClass:"page-id page-id-wide"},[t._v("["+t._s(t.data.id)+"w]")]):t._e()]),t._v(" "),s("div",{staticClass:"title-half"},[t._v(t._s(t.captions.right))])])]],2)},pe=[];const ge={name:"ThItem",mixins:[s(663).Z],props:{isVisible:{type:Boolean,default:!0},isCoverPage:{type:Boolean,default:!1}},data:function(){return{pageGradient:""}},mounted(){this.pageGradient=this.getPageGradient()},watch:{apiChange(){this.pageGradient=this.getPageGradient()}},methods:{getPageGradient(){switch(this.$store.getters["pages/pageGradient"](this.data.id)){case"gradient-zero":return"zero";case"gradient-light":return"light";case"gradient-dark":case"gradient-max":return"hard";default:return""}}},computed:{inspectorMode(){return this.$store.state.workspace.inspectorMode},itemClasses(){const t={"th-item-wrapper":!0,wide:this.data.wide};return t["p"+this.data.index]=!0,t},apiChange(){return this.$store.state.pages.apiChange},focusableItems(){return this.slideMode||this.singleMode},captions(){const t=this.data.caption.split(" - ");return{left:t[0],right:t[1]||t[0]}}}};const me=(0,m.Z)(ge,ue,pe,!1,null,"2537d2dd",null).exports;var fe=s(3549),ve=s(2918);const be=new Map,we=new Map,ke={data:function(){return{visibleBlockMinNumber:null,visibleBlockMaxNumber:null,activeBlockNumber:null,activePageIndex:null,thumbsArray:[],thSize:{width:0,height:0},spreadCount:0,blocksCount:0,spreadsInBlock:null,wrapperHeight:0,thSchemaArray:[]}},mixins:[fe.Z],beforeMount(){this.setProperties()},mounted(){this.$refs.sidebar.refresh(),this.$refs.sidebar.$on("scroll",this.onScroll),this.$refs.sidebar.$on("scrollEnd",this.onScrollEnd),this.updateWrapperHeight(),this.setBlocksVisibility(),this.checkScroll(),setTimeout((()=>{this.checkActiveSpread(!1,!0)}),50),window.addEventListener("resize",this.checkScroll)},beforeDestroy(){window.removeEventListener("resize",this.checkScroll),this.$refs.sidebar?.$off("scroll",this.onScroll),this.$refs.sidebar?.$off("scrollEnd",this.onScrollEnd)},computed:{spreadHeight(){const t=40;return this.thSize.height+t},icon:()=>"thumbnails",wrapperClasses(){return{"th-wrapper":!0,rtl:this.isRtl,slide:this.slideMode}},pagerState(){return this.$store.getters["pager/state"]},flipState(){return this.$store.state.pager.flipState},params(){return this.$store.state.sidebar.params},focusableWrappers(){return!this.slideMode&&!this.singleMode}},methods:{setProperties(){this.spreadCount=this.singleMode?this.$store.getters["pages/pagesCount"]:Math.floor(this.$store.getters["pages/pagesCount"]/2)+1,this.spreadsInBlock=this.slideMode?3:5,this.blocksCount=Math.ceil(this.spreadCount/this.spreadsInBlock),this.thSize=this.getThumbSizes(this.slideMode)},changeThSchema(){const t=[];for(let e=1;e<=this.blocksCount;e++){const s=[],i=e>=this.visibleBlockMinNumber&&e<=this.visibleBlockMaxNumber,o=e===this.activeBlockNumber;if(i||o)for(let t=1,a=this.getSpreadsInBlock(e);t<=a;t++)s.push(this.getThsInSpread(e,t));t.push(s)}this.thSchemaArray=t},getSpreadsInBlock(t){if(!be.has(t)){const e=this.spreadCount-t*this.spreadsInBlock<0?this.spreadsInBlock+(this.spreadCount-t*this.spreadsInBlock):this.spreadsInBlock;be.set(t,e)}return be.get(t)},getBlockPosition(t){if(!we.has(t)){let e;if(this.slideMode){e=0;for(let s=1,i=this.getSpreadsInBlock(t);s<=i;s++){const i=this.getThsInSpread(t,s);for(let t=0,s=i.length;t<s;t++)e+=i[t].size.height+40}}else e=this.getSpreadsInBlock(t)*this.spreadHeight;const s=1===t?0:we.get(t-1).bottom,i=s+e;we.set(t,{height:e,top:s,bottom:i})}return we.get(t)},getWrapperRect:t=>({width:t?220:110,height:170}),setBlocksVisibility:function(){if(!this.$refs.sidebar)return;const t=Math.abs(this.$refs.sidebar.scrollComponent.y),e=t+this.wrapperHeight;this.visibleBlockMinNumber=null,this.visibleBlockMaxNumber=null;for(let s=1;s<=this.blocksCount;s++){const{top:i,bottom:o}=this.getBlockPosition(s);if(i>=t&&i<=e||o>=t&&o<=e||i<=t&&o>=e)this.visibleBlockMinNumber=null===this.visibleBlockMinNumber?s:this.visibleBlockMinNumber,this.visibleBlockMaxNumber=s;else if(null!==this.visibleBlockMinNumber)break}},getContentSize(t){const e=this.$store.getters["pages/pageProp"](t,"width"),s=this.$store.getters["pages/pageProp"](t,"height"),i=(0,ve.Tj)({width:e,height:s},this.thumbDoubleSizes);return{width:Math.round(i.width),height:Math.round(i.height)}},getThumbSizes(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e={width:this.$store.getters["pages/size"].width*(!this.singleMode&&t?2:1),height:1*this.$store.getters["pages/size"].height},s=this.getWrapperRect(this.singleMode||t),i=(0,ve.Tj)(e,s);return{width:Math.round(i.width),height:Math.round(i.height)}},getSlideThumbSizes(t){const e={width:this.$store.getters["pages/pageProp"](t,"width"),height:this.$store.getters["pages/pageProp"](t,"height")},s=this.getWrapperRect(!0),i=(0,ve.Tj)(e,s);return{width:Math.round(i.width),height:Math.round(i.height)}},getThsInSpread(t,e){const s=1===t?e:(t-1)*this.spreadsInBlock+e,i=this.singleMode||1===s?[s]:[2*s-2,2*s-1],o=[];for(const a in i){if(!i.hasOwnProperty(a))return;const t=i[a]-1,e=this.$store.getters["pages/pageIdByIndexWide"](t),s=this.$store.getters["pages/pageProp"](e,"wide"),n=s?this.thumbDoubleSizes:this.thumbSizes,r=s&&!this.singleMode?"both":this.isRtl?t%2==0?"left":"right":t%2==0?"right":"left",l={id:e,index:t,wide:s,caption:this.singleMode?this.$store.getters["pages/pageCaptionByIndex"](t):this.$store.getters["pages/pageCaptionById"]({id:e}),size:this.slideMode?this.getSlideThumbSizes(e):n,side:r,active:this.$store.getters["pager/currentPages"].includes(e)};if(null!==l.id&&o.push(l),o.active=o.active||l.active,s)break}return o},onScroll(){this.setBlocksVisibility()},changeRange(){const t=this.visibleBlockMaxNumber-1,e=this.thSchemaArray[t].length,s={minPage:this.thSchemaArray[this.visibleBlockMinNumber-1][0][0].index,maxPage:this.thSchemaArray[t][e-1][1]?this.thSchemaArray[t][e-1][1].index:this.thSchemaArray[t][e-1][0].index};this.$nextTick((()=>{this.$store.dispatch("thumbnails/changeRange",s)}))},onScrollEnd(){this.hasPages&&(this.setBlocksVisibility(),this.$nextTick((()=>{this.changeRange()})))},onClick(t){const e=(0,z.iZ)(t.target);for(let s=0,i=e.length;s<i;s++){const t=e[s].className;if((0,Zt.HD)(t)&&t.indexOf("th-item-wrapper")>-1){this.$store.dispatch("pager/goToPageByIndex",{pageIndex:e[s].getAttribute("data-index"),target:"thumbnails"});break}}this.$nextTick((()=>{this.setFocus(this.$el.querySelector(".active"),!0)}))},checkScroll(){this.updateWrapperHeight(),this.onScroll(),setTimeout((()=>{this.onScrollEnd()}),200)},getActivePageIndex(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)??this.$store.getters["pages/pageIndexById"](this.pagerState.currentPage);return this.pagerState.widePageSecondHalf?t+1:t},getBlockNumberByPageIndex(t){return this.singleMode?Math.ceil((t+1)/this.spreadsInBlock):Math.ceil((t/2+1)/this.spreadsInBlock)},checkActiveSpread(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o=this.getActivePageIndex(i);(this.activePageIndex!==o||s)&&(this.activePageIndex=o,this.activeBlockNumber=this.getBlockNumberByPageIndex(o),this.changeThSchema(),this.$nextTick((()=>{this.setActiveSpread(o,t,e)})))},setActiveSpread(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.$el.querySelector(".active");i&&i.classList.remove("active");const o=this.$el.querySelector(`[data-index="${t}"]`);if(!o)return;const a=this.singleMode||this.slideMode?o:o.parentElement;a&&a.classList.add("active"),!e&&a&&(this.$refs.sidebar.$on("scrollEnd",this.onScrollByScrollTo),this.$refs.sidebar.scrollToElement({el:a,speed:s?10:300})),this.params.initial||this.setFocus(a,s||"thumbnails"===this.$store.state.pager.lastTarget)},getActiveSpreadIndex(){return 1*(this.$el.querySelector(".active").getAttribute("data-th-focusable-index")||null)},moveActiveForItem(){const t=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?-1:1;let e=this.getActiveSpreadIndex()+t,s=this.$el.querySelector('[data-th-focusable-index="'+e+'"]');if(s||(e+=t,s=this.$el.querySelector('[data-th-focusable-index="'+e+'"]')),null!==s){const t=s.getAttribute("data-index")?s.getAttribute("data-index"):s.firstChild.getAttribute("data-index");this.setActiveSpread(t)}},onScrollByScrollTo(){this.onScroll(),setTimeout((()=>{this.onScrollEnd(),this.$refs.sidebar?.scrollComponent?.off("scrollEnd",this.onScrollByScrollTo)}),200)},setFocus:function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e||document.activeElement?.getAttribute("data-th-focusable"))&&setTimeout((()=>{t?.focus()}),e?50:0)},keyDown(t){let e=!1;switch(t.code){case"Space":case"Enter":const t=this.getActiveSpreadIndex(),s=this.$el.querySelector('[data-th-focusable-index="'+t+'"]'),i=s.querySelector('[data-page-container="true"]')||s;this.$store.dispatch("pager/goToPageByIndex",{pageIndex:i.getAttribute("data-index"),target:"thumbnails"}),e=!0;break;case"ArrowUp":case"ArrowLeft":this.moveActiveForItem(!0),e=!0;break;case"ArrowDown":case"ArrowRight":this.moveActiveForItem(),e=!0;break;case"Home":this.checkActiveSpread(!1,!0,!0,0),e=!0;break;case"End":this.checkActiveSpread(!1,!0,!0,this.$store.getters["pages/pagesCount"]-1),e=!0}e&&(t.stopPropagation(),t.preventDefault())},sidebarClick:function(){this.setFocus(this.$el.querySelector(".active"),!0)},updateWrapperHeight(){const t=this.$refs.sidebar.scrollComponent.wrapper.getBoundingClientRect();this.wrapperHeight=t.height}},watch:{visibleBlockMinNumber(){this.changeThSchema()},visibleBlockMaxNumber(){this.changeThSchema()},isRtl(){this.changeThSchema()},pagerState(){"pending"===this.flipState&&this.checkActiveSpread(),"thumbnails"===this.$store.state.pager.lastTarget&&this.checkActiveSpread(!1)},mode(){be.clear(),we.clear(),this.setProperties(),this.changeThSchema(),this.$nextTick((()=>{this.$refs.sidebar.refresh(),this.onScrollEnd(),this.checkActiveSpread(!1,!1,!0)}))},contentCrop(){this.changeThSchema()},numerationOffset(){this.changeThSchema()},lowercaseRomans(){this.changeThSchema()},flipState(t,e){"pending"===t&&"pending"!==e&&this.checkActiveSpread()}},components:{sidebar:de,"th-item":me,spinner:at.Z}},_e=ke;const ye=(0,m.Z)(_e,oe,ae,!1,null,"3a21f6c6",null).exports;var $e=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("sidebar",{attrs:{title:t.title,icon:t.icon},on:{"click-by-sidebar":t.sidebarClick}},[s("ul",{ref:"toc-root",staticClass:"toc-items",class:{"additional-padding":t.level2Items},attrs:{tabindex:"-1",role:"tree","aria-label":t.title,"data-toc-item":"true"},on:{keydown:t.onKeyDown,click:function(t){t.stopPropagation()}}},t._l(t.tocItems,(function(e,i){return s("toc-item",{key:i,attrs:{"item-data":e,depth:"0"},on:{updateHeight:t.updateHeight}})})),1)])},Ce=[],xe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"toc-item"},[s("p",{ref:"item-button",staticClass:"list-item toc-item-button",class:{haschildren:t.itemData.children,active:t.itemData.active},style:t.isLocaleRtl?"padding-right: "+t.paddingLeft+"px;":"padding-left: "+t.paddingLeft+"px;",attrs:{tabindex:t.itemData.active?0:-1,"data-toc-item":"true",role:"treeitem","aria-expanded":t.ariaExpanded,"aria-level":t.level,"aria-setsize":t.size,"aria-posinset":t.itemIndex},on:{click:function(e){return t.onItemClick(t.itemData.page)},keydown:t.keyDown}},[t.openChildIcon||!t.pageLabel?s("span",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.toggleOpen(e)}}},[s("svgicon",{staticClass:"icon",attrs:{focusable:"false",name:t.openChildIcon}})],1):t._e(),t._v(" "),s("span",{staticClass:"toc-item-title",attrs:{dir:t.textDirection},domProps:{innerHTML:t._s(t.itemTitle)}}),t._v(" "),t.pageLabel&&t.showPageLabels?s("v-touch",{staticClass:"page-label",attrs:{tag:"span",title:t.pageLabel},on:{tap:function(e){return t.goToPage(t.itemData.page)}}},[t._v(t._s(t.pageLabel))]):t._e()],1),t._v(" "),t.itemData.children&&t.itemData.toggle?s("ul",{staticClass:"toc-sub-item-ul",attrs:{role:"group"}},t._l(t.itemData.children,(function(e,i){return s("toc-item",{key:i,attrs:{"item-data":e,depth:1*t.depth+1}})})),1):t._e()])},Te=[],Se=s(3760);s(5274),s(6326),s(1702);const Ie={mixins:[Se.Z],name:"TocItem",computed:{paddingLeft:function(){return this.depth<=2?15*this.depth:45},level:function(){return this.itemData.route.length},size:function(){return this.itemData.children?this.itemData.children.length:null},itemIndex:function(){return this.itemData.route[this.level-1]+1},hasChild:function(){return this.itemData.children},isExpanded:function(){return this.itemData.toggle},ariaExpanded:function(){return this.hasChild?this.isExpanded?"true":"false":null},openChildIcon:function(){return this.hasChild?this.isExpanded?"down-arrow":this.isLocaleRtl?"left-arrow":"right-arrow":null},active:function(){return this.itemData.active}},watch:{active:function(t){t&&this.setFocus()}},mounted(){this.$nextTick((()=>{this.itemData.active&&this.setFocus()}))},methods:{keyDown:function(t){let e=!1;switch(t.code){case"Space":case"Enter":this.goToPage(this.itemData.page),e=!0;break;case"ArrowUp":this.focusToPreviousElement(),e=!0;break;case"ArrowDown":this.focusToNextElement(),e=!0;break;case"ArrowRight":!this.isExpanded&&this.hasChild?this.toggleOpen(t):this.itemData.children&&this.focusToNextElement(),e=!0;break;case"ArrowLeft":this.isExpanded?this.toggleOpen(t):this.itemData.route.length>1&&0===this.itemData.route[this.itemData.route.length-1]&&this.focusToPreviousElement(),e=!0;break;case"Home":this.focusToFirstElement(),e=!0;break;case"End":this.focusToLastElement(),e=!0}e&&(t.stopPropagation(),t.preventDefault())},focusToLastElement:function(){const t=this.$store.getters["toc/lastElement"];null!==t&&this.$store.dispatch("toc/setActive",t)},focusToFirstElement:function(){const t=this.$store.getters["toc/firstElement"];null!==t&&this.$store.dispatch("toc/setActive",t)},focusToNextElement:function(){const t=this.$store.getters["toc/nextElement"];null!==t&&this.$store.dispatch("toc/setActive",t)},focusToPreviousElement:function(){const t=this.$store.getters["toc/prevElement"];null!==t&&this.$store.dispatch("toc/setActive",t)},setFocus:function(){(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||document.activeElement?.getAttribute("data-toc-item"))&&this.$refs["item-button"].focus()},goToPage:function(t){this.$store.getters["pager/isFrozen"]?setTimeout((()=>{this.goToPage(t)}),250):(this.$store.dispatch("toc/setActive",this.itemData),this.setFocus(!0),this.$store.dispatch("pager/goToPageByIndex",{target:"toc",pageIndex:t-1}))},onItemClick:function(t){this.itemData.toggle&&!this.itemData.active||this.toggleOpen(),this.goToPage(t)}}};const Pe=(0,m.Z)(Ie,xe,Te,!1,null,"4bd7eb5e",null).exports;const Ee={mixins:[s(8002).Z],components:{tocItem:Pe,sidebar:de,"downloads-window":_t},computed:{title:function(){return this.$i18n.t("TOCToolWindow.TITLE")},icon:function(){return"toc"},activePageIndexes:function(){return this.$store.getters["toc/activePageIndexes"]},params(){return this.$store.state.sidebar.params},activeRoute:function(){return this.$store.state.toc.activeRoute}},methods:{sidebarClick:function(){this.setFocusToActiveElement()},onKeyDown(t){const e=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Home","End"];if([...["Space","Enter"],...e].includes(t.code)){if(e.includes(t.code)){const t=this.$store.getters["toc/firstElement"];null!==t&&this.$store.dispatch("toc/setActive",t)}t.stopPropagation(),t.preventDefault()}},scrollToActiveElement(){const t=this.$el.getElementsByClassName("active")[0];this.$children[0].scrollToElement({el:t,speed:300})},setFocusToActiveElement(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(0===this.$store.state.toc.activeRoute.length?this.$refs["toc-root"].focus():this.$nextTick((()=>{this.$el.querySelector(".active").focus(),this.scrollToActiveElement()})))}},watch:{activePageIndexes:function(){"toc"!==this.$store.state.pager.lastTarget&&(this.$store.dispatch("toc/setActiveByPage",this.activePageIndexes),setTimeout((()=>{const t=this.$el.getElementsByClassName("active")[0];this.$children[0].scrollToElement({el:t,speed:300})}),100))},activeRoute:function(){this.setFocusToActiveElement("toc"===this.$store.state.pager.lastTarget)}},mounted:function(){this.$store.dispatch("toc/setActiveByPage",this.activePageIndexes),this.$children[0].refresh(),this.params.initial?this.scrollToActiveElement():this.setFocusToActiveElement(),this.$root.$emit("develop",{action:"toc",data:0===this.tocItems.length?"empty":"full"})}},Ae=Ee;const Le=(0,m.Z)(Ae,$e,Ce,!1,null,"4732d851",null).exports;var ze=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("sidebar",{staticClass:"compact-scroller",attrs:{title:t.localization.title,icon:t.icon},on:{"click-by-sidebar":t.setFocus}},[s("div",{ref:"note-wrapper",staticClass:"note-wrapper",attrs:{"data-focus-trap":"item",role:t.notesCount>0&&"grid","aria-rowcount":t.notesCount,"aria-label":t.localization.title},on:{keydown:t.keyDown}},[t._l(t.notesArray,(function(e,i){return s("div",{staticClass:"note-row",attrs:{role:"row","aria-rowindex":i+1}},[s("note-item",{key:e.id,ref:"noteItem"+i,refInFor:!0,attrs:{data:e,itemIndex:i,maxIndex:t.notesArray.length,size:t.thumbSizes},on:{"item-clicked":t.onClick}})],1)})),t._v(" "),t.showOnboarding?s("div",[0===t.notesCount?s("div",{staticClass:"note-window-empty"},[s("span",{staticClass:"note-window-empty-text",attrs:{id:"no-notes-label"}},[t._v(t._s(t.localization.emptyMessage))])]):t._e(),t._v(" "),s("button",{ref:"add-button",staticClass:"tool-button note-button add-button",attrs:{tabindex:"0",title:t.localization.buttonAddNote,"aria-describedby":"no-notes-label"},on:{keydown:t.buttonKeyDown,click:function(e){return e.stopPropagation(),t.onClickAddNote(e)},focus:t.focusOnButton}},[t._v("\n                "+t._s(t.localization.buttonAddNote)+"\n            ")]),t._v(" "),s("div",{staticClass:"note-window-onboarding",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"note-window-onboarding-text",domProps:{innerHTML:t._s(t.localization.onboardingMessage)}})])]):t._e()],2),t._v(" "),s("div",{staticClass:"buttons-container",attrs:{slot:"footer"},slot:"footer"},[t.showOnboarding?t._e():s("button",{ref:"add-button",staticClass:"tool-button note-button add-button",attrs:{tabindex:"0",title:t.localization.buttonAddNote},on:{keydown:t.buttonKeyDown,click:function(e){return e.stopPropagation(),t.onClickAddNote(e)}}},[t._v("\n            "+t._s(t.localization.buttonAddNote)+"\n        ")]),t._v(" "),s("div",{staticClass:"dropdown-button-container"},[s("button",{ref:"download-button",staticClass:"tool-button note-button dropdown-button",class:{active:t.showDropdown},attrs:{disabled:0===t.notesCount,tabindex:"0",title:t.localization.buttonDownloadNote},on:{keydown:t.buttonKeyDown,click:function(e){return e.stopPropagation(),t.onClickDownload(e)}}},[t._v("\n                "+t._s(t.localization.buttonDownloadNote)+"\n                "),t.isDownloadDropdown?s("svgicon",{staticClass:"down-arrow",attrs:{focusable:"false",name:"down-arrow"}}):t._e()],1),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.showDropdown?s("div",{ref:"download-button-options",staticClass:"dropdown-button-options",class:{"dropdown-up":t.shouldOpenUp},attrs:{"aria-controls":"download-dropdown-menu",role:"menu"}},[t.showDownloadEmbeddedOption?s("button",{staticClass:"dropdown-option",attrs:{tabindex:"0",role:"menuitem",title:t.localization.optionEmbeddedNotes},on:{keydown:t.buttonKeyDown,click:function(e){return e.stopPropagation(),t.onClickEmbedNotes(e)}}},[s("bdi",[t._v(t._s(t.localization.optionEmbeddedNotes))])]):t._e(),t._v(" "),s("button",{staticClass:"dropdown-option",attrs:{tabindex:"0",role:"menuitem",title:t.localization.optionNotesListTxt},on:{keydown:t.buttonKeyDown,click:function(e){return e.stopPropagation(),t.onClickListTxt(e)}}},[s("bdi",[t._v(t._s(t.localization.optionNotesListTxt))])])]):t._e()])],1)])])},Me=[],De=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"noteItem",class:t.wrapperClasses,attrs:{dir:t.blockDirection,"data-id":t.data.id,"data-page":t.data.page,tabindex:t.itemIndex===t.activeIndex?0:-1,"data-focus-trap":"item",role:"gridcell","aria-describedby":"note-text"+t.itemIndex},on:{click:t.onClick}},[s("div",{staticClass:"note-img-element",style:t.noteImgStyles,attrs:{"aria-hidden":"true"}},[s("thumb",{attrs:{id:t.data.page,side:t.data.side,size:t.size,contentCrop:t.contentCrop}})],1),t._v(" "),s("div",{staticClass:"note-body-element"},[s("h5",{staticClass:"note-window-item-title",attrs:{title:t.pageText},domProps:{textContent:t._s(t.pageText)}}),t._v(" "),s("div",{staticClass:"note-color",class:t.data.color,attrs:{"aria-hidden":"true"}}),t._v(" "),s("span",{ref:"textbox",class:t.textClasses,attrs:{"aria-hidden":"true","aria-describedby":"note-title"+t.itemIndex,id:"note-text"+t.itemIndex,dir:t.blockDirection},domProps:{textContent:t._s(t.ellipseText)}})])])},Be=[];const Ne={components:{thumb:s(7503).Z},props:{data:{type:Object,default:function(){return{}}},itemIndex:{type:Number},maxIndex:{type:Number},size:{type:Object,default:function(){return{}}}},data:function(){return{ellipseText:null}},computed:{noteText:function(){return this.data.text},wrapperClasses:function(){const t={"note-window-item":!0,"list-item":!0};return t.active=this.itemIndex===this.activeIndex,t},noteImgStyles:function(){const t={};return this.size&&(t.width=this.size.width+"px",t.height=this.size.height+"px"),t},textClasses:function(){const t={"note-window-item-text":!0};return this.data.text||(t["not-available"]=!0),t},textString:function(){let t="";return t=this.data.text?this.data.text:this.$i18n.t("NotesToolWindow.NO_TEXT_AVAILABLE"),t},singleMode(){return this.$store.state.pager.singleMode},pageText:function(){return this.$i18n.t("NotesToolWindow.PAGE",{0:this.pageCaption})},pageCaption:function(){let t=this.$store.getters["pages/pageCaptionById"]({id:this.data.page,divider:" - ",widePageSecondHalf:this.data.side===(this.$store.state.book.rightToLeft?"left":"right")});if(this.$store.state.pager.spreadMode){const e=t.split(" - ");t=e[0],"right"===this.data.side&&e.length>1&&(t=e[1])}return`‎${t}`},blockDirection:function(){return this.$store.getters["i18n/isLocaleRtl"]?"rtl":null},activeIndex(){return this.$store.state.notes.activeItemIndex},contentCrop:function(){return"slide-book"===this.$store.state.workspace.bookComponent&&this.$store.state.book.contentCrop},isCurrentPage:function(){let t=!1;return this.$store.state.pager.singleMode&&(t=this.data.side===(this.isBookRtl?"left":"right")),this.$store.getters["pager/isCurrentPage"]({pageId:this.data.page,widePageSecondHalf:t})}},mounted:function(){this.ellipsizeTextBox()},methods:{ellipsizeTextBox:function(){if(!this.data.text)return this.$refs.textbox.innerText="",void(this.ellipseText=this.$i18n.t("NotesToolWindow.NO_TEXT_AVAILABLE"));if(this.$refs.textbox.innerText=this.data.text,this.$refs.textbox.scrollHeight<=this.$refs.textbox.offsetHeight)return void(this.ellipseText=this.data.text);const t=this.$refs.textbox.innerText.split("\n").join(" ").split(" ");for(;this.$refs.textbox.scrollHeight>this.$refs.textbox.offsetHeight;)t.pop(),this.$refs.textbox.innerText=t.join(" ")+"...";this.ellipseText=t.join(" ")+"..."},setFocus(){(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||document.activeElement?.getAttribute("data-focus-trap"))&&this.$refs.noteItem.focus({preventScroll:!0})},unsetFocus(){this.$refs.noteItem.blur()},onClick(){this.$store.dispatch("notes/setActiveItemByIndex",this.itemIndex),this.$emit("item-clicked",{page:this.data.page,id:this.data.id,pX:this.data.pX,side:this.data.side})},deleteNote(){let t=!1;this.$store.state.pager.singleMode&&(t=this.data.side===(this.isBookRtl?"left":"right")),this.isCurrentPage?this.$root.$emit("note:deleteDialog",this.data.id,"noteList"):(this.$store.dispatch("pager/goToPageById",{id:this.data.page,widePageSecondHalf:t,target:"notes"}),this.$root.$once("turnStop",(()=>{setTimeout((()=>{this.$store.dispatch("notes/setActiveItemByIndex",this.itemIndex),this.$root.$emit("note:deleteDialog",this.data.id,"noteList")}),100)})))}},watch:{noteText:function(){this.ellipsizeTextBox()},activeIndex(t,e){this.itemIndex===t&&this.setFocus(null===e)}}};const Oe=(0,m.Z)(Ne,De,Be,!1,null,"52e7ed46",null).exports;var He=s(3074);async function Re(){const t={red:He.Z.t("Notes.COLOR_RED"),gray:He.Z.t("Notes.COLOR_GRAY"),orange:He.Z.t("Notes.COLOR_ORANGE"),violet:He.Z.t("Notes.COLOR_VIOLET"),blue:He.Z.t("Notes.COLOR_BLUE"),green:He.Z.t("Notes.COLOR_GREEN")};let e="";const s=(0,lt.bh)(),i=s.getters["notes/notesListByPage"],o="slide"!==s.getters["pager/state"].mode,a=s.getters["pages/pageList"]({forceSingleMode:o,excludeStubs:!1}),n=(0,M.Z)().getShareUrl(!1),r=(0,T.m9)(s.state.workspace.title);e+=`${r}\n========================================\n\n${n}\n----------------------------------------\n\n${He.Z.t("Notes.NOTES_TEXT_LIST_DESCRIPTION",{0:r})}\n\n\n`;for await(const l of a){if(!i[l])continue;e+=`\n${He.Z.t("NotesToolWindow.PAGE",{0:l})}\n--------\n`;const s=i[l];for await(const i of s){e+=`\n${i.date.toLocaleString()}\n${He.Z.t("Notes.COLOR",{0:t[i.colorName]})}\n${i.text||He.Z.t("NotesToolWindow.NO_TEXT_AVAILABLE")}\n`}}return e}async function Fe(){const t=await Re(),e=new Blob([t],{type:"text/plain"}),s=document.createElement("a");s.href=URL.createObjectURL(e),s.download="notes.txt",s.click()}const Ve={components:{sidebar:de,"note-item":Oe},data:()=>({showDropdown:!1,shouldOpenUp:!1,hadTwoNotes:"true"===(0,M.Z)().getLocalStorage().getItem("notes-had-two")}),computed:{localization:function(){return{title:this.$i18n.t("NotesToolWindow.TITLE"),buttonAddNote:this.$i18n.t("NotesToolWindow.ADD_NOTE"),buttonDownloadNote:this.$i18n.t("NotesToolWindow.BUTTON_DOWNLOAD_NOTES"),optionEmbeddedNotes:this.$i18n.t("NotesToolWindow.OPTION_EMBEDDED_NOTES",{0:this.fullPdfSize}),optionNotesListTxt:this.$i18n.t("NotesToolWindow.OPTION_NOTES_LIST_TXT"),emptyMessage:this.$i18n.t("NotesToolWindow.INVITATION_MESSAGE"),onboardingMessage:this.$i18n.t("NotesToolWindow.ONBOARDING_MESSAGE")}},icon:function(){return"note"},notesArray:function(){return this.$store.state.notes.items},notesCount:function(){return this.$store.state.notes.items.length},slotName(){return this.notesCount>=2?"footer":null},fullPdfSize:function(){return this.$store.getters["downloads/getFullPdf"]?.size},thumbSizes(){return this.getThumbSizes(!1)},isLocaleRtl:function(){return this.$store.getters["i18n/isLocaleRtl"]},isBookRtl:function(){return this.$store.state.book.rightToLeft},dir:function(){return this.isLocaleRtl?"rtl":"ltr"},activeIndex(){return this.$store.state.notes.activeItemIndex},slideMode(){return this.$store.state.pager.slideMode},params(){return this.$store.state.sidebar.params},showOnboarding(){return 0===this.notesCount||1===this.notesCount&&!this.hadTwoNotes},showDownloadEmbeddedOption(){return this.$store.state.downloads.enabled&&this.$store.state.downloads.allPagesVisible},isDownloadDropdown(){return this.showDownloadEmbeddedOption},currentPage:function(){let t=null;return this.$store.state.pager.singleMode&&(t=this.$store.state.pager.single_currentSide),{currentPage:this.$store.state.pager.currentPage,currentSide:t}}},mounted:function(){const t=this.$store.state.notes.items,e=[],s=[];for(let o=0,a=t.length;o<a;o++)e[e.length-1]!==t[o].page&&e.push(t[o].page);for(let o=0,a=e.length;o<a;o++)this.$store.getters["pages/pageProp"](e[o],"thumbnailUrl")||s.push(e[o]);s.length>0&&this.$store.dispatch("thumbnails/addQueue",{queue:s});const i=this.getCurrentPageNotes();i.length?this.$store.dispatch("notes/setActiveItemById",i[0].id):this.$store.dispatch("notes/setActiveItemToFirst"),this.notesCount<2&&(0,M.Z)().getLocalStorage().setItem("notes-seen-onboarding","true"),this.params.initial||this.setFocus(!0)},watch:{currentPage:function(){if("notes"===this.$store.state.pager.lastTarget)return;const t=this.$refs["noteItem"+this.activeIndex];t?.[0]&&t[0].unsetFocus(),this.$store.dispatch("notes/setActiveItemByIndex",null);const e=this.getCurrentPageNotes();e.length&&this.setScrollToActiveElement(e[0].index)},notesArray:function(t){this.closeDropdown(),setTimeout((()=>{this.$children[0].scrollComponent.refresh(),t[this.activeIndex]&&!t[this.activeIndex].new&&this.setFocus()}),200),this.hadTwoNotes="true"===(0,M.Z)().getLocalStorage().getItem("notes-had-two")},activeIndex:function(t){null!==t&&this.setScrollToActiveElement(this.activeIndex)}},methods:{getCurrentPageNotes(){return this.$store.getters["notes/currentNotes"]()},getThumbSizes(){const t={width:40,height:55};if(this.slideMode)return t;const e={width:1*this.$store.getters["pages/size"].width,height:1*this.$store.getters["pages/size"].height},s=(0,ve.Tj)(e,t);return{width:Math.round(s.width),height:Math.round(s.height)}},buttonKeyDown(t){"Escape"!==t.code&&t.stopPropagation(),"ArrowDown"===t.code&&document.activeElement===this.$refs["download-button"]&&this.openDropdown(!0)},onClick:function(t){const e=t.page,s=t.id;let i=!1;this.$store.state.pager.singleMode&&(i=t.side===(this.isBookRtl?"left":"right"));this.$store.getters["pager/isCurrentPage"]({pageId:e,widePageSecondHalf:i})?this.$store.dispatch("notes/setOpenedId",{id:s,target:"noteList"}):(this.$store.dispatch("pager/goToPageById",{id:e,widePageSecondHalf:i,target:"notes"}),this.$root.$once("turnStop",(()=>{setTimeout((()=>{this.$store.dispatch("notes/setOpenedId",{id:s,target:"noteList"})}),100)})))},onClickAddNote:function(t){if(0===this.$store.getters["pages/pagesCount"])return;const e=this.$store.getters["pager/state"];let s,i,o;s=e.spreadMode&&(this.isLocaleRtl&&!this.isBookRtl||!this.isLocaleRtl&&this.isBookRtl)?e.rightPage??e.leftPage:e.currentPage,e.singleMode?(i=e.widePageSecondHalf,o=this.isBookRtl&&this.$store.getters["pages/pageProp"](s,"wide")&&!i):i=this.isLocaleRtl&&e.wide,this.$root.$emit("contextMenu:zoomOut"),this.$store.dispatch("notes/addNote",{pageId:s,wideRight:i,wideOpposite:o,target:"noteList"}),setTimeout((()=>{this.$children[0].scrollComponent.refresh()}),200)},onClickDownload(){this.isDownloadDropdown?this.toggleDropdown():(Fe(),this.$root.$emit("download",{action:"downloadNoteTxtList"}))},toggleDropdown(){this.showDropdown?this.closeDropdown():this.openDropdown()},openDropdown(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.showDropdown=!0,this.$nextTick((()=>{const e=this.$refs["download-button"].getBoundingClientRect(),s=this.$refs["download-button-options"].getBoundingClientRect();this.$store.getters["workspace/size"].height-e.bottom<s.height&&(this.shouldOpenUp=!0),t&&this.focusDropdownItem(0)})),this.$el.addEventListener("click",this.closeDropdown),this.$root.$el.addEventListener("click",this.closeDropdown),this.$el.addEventListener("keydown",this.onDropdownKeydown,{capture:!0})},onDropdownKeydown(t){switch(t.code){case"Escape":t.preventDefault(),t.stopPropagation(),this.closeDropdown();break;case"ArrowRight":case"ArrowDown":t.preventDefault(),this.focusDropdownItem(1);break;case"ArrowUp":case"ArrowLeft":t.preventDefault(),this.focusDropdownItem(-1)}},closeDropdown(){this.shouldOpenUp=!1,this.showDropdown&&(this.showDropdown=!1,this.$refs["download-button"]?.focus(),this.$el.removeEventListener("click",this.closeDropdown),this.$root.$el.removeEventListener("click",this.closeDropdown),this.$el.addEventListener("keydown",this.onDropdownKeydown,{capture:!0}))},focusDropdownItem(t){const e=this.$refs["download-button-options"],s=e?.children;if(!e||!s)return;const i=document.activeElement,o=[...s];let a=o.indexOf(i)+t;a=Math.min(Math.max(a,0),o.length-1),o[a]?.focus()},onClickEmbedNotes(){this.$store.dispatch("popup/openPopup",{component:"download",params:{option:"full",embedNotes:!0,target:"noteList"}}),this.closeDropdown()},onClickListTxt(){Fe(),this.$root.$emit("download",{action:"downloadNoteTxtList"}),this.closeDropdown()},keyDown(t){let e=!1;switch(t.code){case"Space":case"Enter":this.$refs["noteItem"+this.activeIndex][0].onClick(),this.$root.$once("note:closeDeleteDialog",this.setFocus.bind(this)),e=!0;break;case"ArrowUp":case"ArrowLeft":this.$store.dispatch("notes/setOpenedId",{id:null}),this.$store.dispatch("notes/setActivePreviousItem"),e=!0;break;case"ArrowDown":case"ArrowRight":this.$store.dispatch("notes/setOpenedId",{id:null}),this.$store.dispatch("notes/setActiveNextItem"),e=!0;break;case"Home":this.$store.dispatch("notes/setOpenedId",{id:null}),this.$store.dispatch("notes/setActiveItemToFirst"),e=!0;break;case"End":this.$store.dispatch("notes/setOpenedId",{id:null}),this.$store.dispatch("notes/setActiveItemToLast"),e=!0;break;case"Delete":case"Backspace":this.$refs["noteItem"+this.activeIndex][0].deleteNote(),this.$root.$once("note:closeDeleteDialog",this.setFocus.bind(this)),e=!0}e&&(t.stopPropagation(),t.preventDefault())},setFocus:function(t){if(0===this.notesCount)return void this.$refs["add-button"].focus();const e=this.$refs["noteItem"+this.activeIndex];if(e?.[0]&&(e?.[0].isCurrentPage||t))e[0].setFocus(!0);else{const t=this.getCurrentPageNotes();t.length?(this.$store.dispatch("notes/setActiveItemById",t[t.length-1].id),this.setFocus()):this.$store.dispatch("notes/setActiveItemByIndex",null)}},setScrollToActiveElement(t){this.$nextTick((()=>{this.$children[0].scrollComponent.refresh();const e=this.$refs["noteItem"+t];e?.[0]&&this.$children[0].scrollComponent.scrollToElement(e[0].$el,50,0,!0)}))},focusOnButton(){this.$children[0].scrollComponent.scrollToElement(this.$refs["add-button"],50,0,!0)}}};const We=(0,m.Z)(Ve,ze,Me,!1,null,"265f331d",null).exports;var Ue=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("sidebar",{ref:"sidebar",staticClass:"right",attrs:{title:t.title,icon:t.icon},on:{"click-by-sidebar":t.setFocus}},[s("div",{staticClass:"tool-header",attrs:{slot:"subheader",id:"tool-header"},slot:"subheader"},[s("div",{staticClass:"search-input-block"},[s("label",{on:{click:function(t){t.stopPropagation()}}},[s("input",{ref:"searchInput",attrs:{tabindex:"0",placeholder:t.placeholder,dir:t.inputDir,"aria-label":t.localization.queryLabel},on:{input:function(e){return t.input(e.target.value)}}}),t._v(" "),t.showClear?s("button",{ref:"clearButton",staticClass:"clear-icon",attrs:{tabindex:"0","aria-label":t.localization.clearQueryLabel},on:{click:t.clear}},[s("svgicon",{attrs:{focusable:"false",name:"rounded-close",scale:"1"}})],1):t._e()]),t._v(" "),s("button",{ref:"filtersButton",class:["filters-icon",{active:t.showFilters}],attrs:{"aria-expanded":t.showFilters?"true":"false","aria-haspopup":"menu","aria-controls":"search-filters",role:"button",tabindex:"0","aria-label":t.localization.filtersTitle,title:t.localization.filtersTitle},on:{click:function(e){t.showFilters=!t.showFilters}}},[s("svgicon",{attrs:{name:"equalizer"}})],1)]),t._v(" "),t.showFilters?s("div",{staticClass:"filters",attrs:{id:"search-filters"}},[s("checkbox",{attrs:{value:t.exactMatch,label:t.localization.exactMatchLabel},model:{value:t.exactMatch,callback:function(e){t.exactMatch=e},expression:"exactMatch"}})],1):t._e(),t._v(" "),s("div",{staticClass:"search-sub-header subheader"},[t.subtitle?s("span",{staticClass:"search-results-count",attrs:{tabindex:"0",role:"alert","aria-atomic":"false","aria-live":"assertive"}},[t._v("\n                "+t._s(t.subtitle)+"\n            ")]):t._e(),t._v(" "),t.preloaderVisible?s("div",{staticClass:"search-live-preloader"},[s("div",{staticClass:"dot"})]):t._e()])]),t._v(" "),s("ul",{ref:"searchResultsList",staticClass:"search-ul",attrs:{"data-focus-trap":"list",tabindex:t.numberOfResults>0&&0,role:t.numberOfResults>0&&"grid","aria-rowcount":t.numberOfResults,"aria-label":t.title},on:{focus:t.focusIsSet,keydown:t.keyDown}},t._l(t.visibleResultsPerPages,(function(e,i){return s("div",{ref:"page"+i,refInFor:!0,staticClass:"items-page",style:{"min-height":t.getPageHeight(e)+"px"}},t._l(e,(function(e,o){return s("search-result-item",{key:i*t.resultsInPage+o,ref:"searchItem"+(i*t.resultsInPage+o),refInFor:!0,attrs:{"item-data":e,"item-index":i*t.resultsInPage+o,depth:"0"}})})),1)})),0)])},Ze=[],Ge=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{class:"search-item p"+t.pageId,attrs:{role:"row","aria-rowindex":t.itemIndex+1}},[s("div",{ref:"wrapper",class:["list-item search-item-p",{active:t.isCurrent}],attrs:{tabindex:"-1","data-focus-trap":"item",role:"gridcell"},on:{click:function(e){return e.stopPropagation(),t.onClick(e)}}},[s("span",{staticClass:"search-item-title",attrs:{dir:"ltr"}},[t._v(t._s(t.title))]),t._v(" "),s("span",{staticClass:"search-item-result"},[s("bdi",[t._l(t.textData,(function(e){return[e.emphasize?[s("b",[t._v(t._s(e.text))])]:[t._v(t._s(e.text))]]}))],2)]),t._v(" "),t.moreResults?s("span",{staticClass:"search-item-more"},[t._v(t._s(t.moreResults))]):t._e()])])},Ke=[];const qe={mixins:[s(3866).Z],props:{itemIndex:{type:Number,required:!0}},computed:{isCurrent(){return this.$store.state.pager.singleMode&&this.itemData.isWide&&!this.itemData.isDivided?this.$store.getters["pager/isCurrentPage"]({pageId:this.pageId,widePageSecondHalf:!0})||this.$store.getters["pager/isCurrentPage"]({pageId:this.pageId,widePageSecondHalf:!1}):this.$store.getters["pager/isCurrentPage"]({pageId:this.pageId,widePageSecondHalf:this.isItemDataArray?null:this.itemData.widePageSecondHalf})},activeIndex(){return this.$store.state.search.activeItemIndex}},watch:{activeIndex:function(t){t===this.itemIndex&&this.setFocus()}},methods:{setFocus:function(){(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||document.activeElement?.getAttribute("data-focus-trap"))&&this.$refs.wrapper.focus({preventScroll:!0})},onClick:function(){this.setFocus(!0),this.$store.dispatch("search/setActiveItemByIndex",this.itemIndex);const t=this.pageId.toString(),e=this.$store.getters["search/getRightWideHalfSelection"](t),s=this.itemData.widePageSecondHalf??e;this.$store.dispatch("pager/goToPageById",{id:t,target:"search",widePageSecondHalf:s})}}};const je=(0,m.Z)(qe,Ge,Ke,!1,null,"3e158d5e",null).exports;s(9074),s(5958);var Ye=s(2248);const Xe=360,Je={mixins:[Ye.Z],data:function(){return{tempTimeout:null,showClear:!1,showFilters:!1,resultsPerPages:[],visibleResultsPerPages:[],visibleResultsHeights:[],loadedTo:0,resultsInPage:10}},components:{"search-result-item":je,sidebar:de,checkbox:ot},created(){this.exactMatch&&(this.showFilters=!0,this.showFiltersIgnoreWatcher=!0)},mounted(){this.$refs.searchInput.value=this.$store.state.search.query;const t=this.$store.state.search.scrollY;this.$refs.sidebar.refresh(),this.$refs.sidebar.$on("scroll",this.onScroll),this.$refs.sidebar.$on("scrollEnd",this.onScrollEnd),this.setInputDir(),this.params.initial||this.focusInput(),this.arrangeResultsInPages(),this.loadedTo=this.$store.state.search.loadedTo,this.checkVisibleResults(),""!==this.$refs.searchInput.value&&(this.showClear=!0),null!==this.activeIndex?this.setScrollToActiveElement():0!==t&&this.$nextTick((()=>this.$refs.sidebar.scrollComponent.scrollTo(0,t)))},computed:{localization(){return{queryLabel:this.$i18n.t("SearchToolWindow.QUERY_LABEL"),clearQueryLabel:this.$i18n.t("SearchToolWindow.CLEAR_QUERY"),filtersTitle:this.$i18n.t("SearchToolWindow.FILTERS_BUTTON"),exactMatchLabel:this.$i18n.t("SearchToolWindow.EXACT_MATCH_LABEL")}},numberOfResults(){return this.$store.state.search.results.length},subtitle:function(){return this.searchQueryIsEmpty?null:this.isInitializing?this.$i18n.t("SearchToolWindow.INITIALIZING"):this.$store.state.search.query.length<this.$store.state.search.searchCharactersLimit?this.$i18n.t("SearchToolWindow.MIN_WORD_ERRROR",this.$store.state.search.searchCharactersLimit,{0:this.$store.state.search.searchCharactersLimit}):this.isSearching?this.$i18n.t("SearchToolWindow.SEARCH_IN_PROGRESS"):0===this.numberOfResults&&100===this.progress?this.$i18n.t("SearchToolWindow.NOTHING_FOUND"):this.$i18n.tc("SearchToolWindow.PAGES_FOUND",this.numberOfResults,{0:this.numberOfResults})},title:function(){return this.$i18n.t("SearchToolWindow.TITLE")},placeholder:function(){return this.$i18n.t("SearchToolWindow.QUERY_PLACEHOLDER")},icon:function(){return"search"},activeIndex(){return this.$store.state.search.activeItemIndex},params(){return this.$store.state.sidebar.params}},methods:{keyDown(t){let e=!1;switch(t.code){case"Space":case"Enter":this.$refs["searchItem"+this.activeIndex][0].onClick(),e=!0;break;case"ArrowUp":case"ArrowLeft":this.$store.dispatch("search/setActivePreviousItem"),e=!0;break;case"ArrowDown":case"ArrowRight":this.$store.dispatch("search/setActiveNextItem"),e=!0;break;case"Home":this.$store.dispatch("search/setActiveItemToFirst"),e=!0;break;case"End":this.$store.dispatch("search/setActiveItemToLast"),e=!0}e&&(t.stopPropagation(),t.preventDefault())},setScrollToActiveElement(){const t=Math.floor(this.activeIndex/this.resultsInPage);this.$nextTick((()=>{this.visibleResultsPerPages[t]&&0!==this.visibleResultsPerPages[t].length||this.checkVisibleResults(t),this.$nextTick((()=>{this.$refs.sidebar.scrollComponent.refresh();const t=this.$el.getElementsByClassName("active")[0],e=document.activeElement.classList.contains("list-item")?document.activeElement:null;this.$refs.sidebar.scrollComponent.scrollToElement(e||t,50,0,!0)}))}))},focusInput:function(){const t=this.$refs.searchInput;t.focus(),t.selectionStart=t.value.length},setFocus(){this.$refs.searchInput.focus()},focusIsSet:function(t){null===this.activeIndex?this.$store.dispatch("search/setActiveItemToFirst"):t.relatedTarget&&"item"===t.relatedTarget.getAttribute("data-focus-trap")?this.$refs.exactMatchCheckbox?this.$refs.exactMatchCheckbox.focus():this.$refs.filtersButton?this.$refs.filtersButton.focus():this.$refs.clearButton?this.$refs.clearButton.focus():this.$refs.searchInput.focus():this.$refs["searchItem"+this.activeIndex][0].setFocus()},onScroll(){this.checkVisibleResults()},onScrollEnd(){this.checkVisibleResults()},getPageHeight(t){return t&&0!==t.length?Xe/this.resultsInPage*t.length:Xe},checkVisibleResults:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const e=Math.abs(this.$refs.sidebar.scrollComponent.y),s=Math.abs(this.$refs.sidebar.scrollComponent.maxScrollY),i=e+this.$refs.sidebar.scrollComponent.wrapper.getBoundingClientRect().height;this.visibleResultsPerPages=[];let o=i>=s,a=0;for(let n=0;n<this.resultsPerPages.length;n++){const s=a;this.visibleResultsHeights[n]?a+=this.visibleResultsHeights[n]:this.$refs["page"+n]&&this.$refs["page"+n][0]?(this.visibleResultsHeights[n]=this.$refs["page"+n][0].clientHeight,a+=this.visibleResultsHeights[n],o=!0):a+=Xe;(t===n||s>=e&&s<=i||a>=e&&a<=i||s<=e&&a>=i)&&(this.visibleResultsPerPages[n]=this.resultsPerPages[n],(this.loadedTo<n||null!==t)&&(this.loadedTo=n))}for(let n=0;n<=this.loadedTo;n++)this.visibleResultsPerPages[n]=this.resultsPerPages[n];this.loadedTo<this.resultsPerPages.length-1&&(this.visibleResultsPerPages[this.loadedTo+1]=[]),o&&this.$nextTick((()=>{this.$refs.sidebar.scrollComponent.refresh()}))},arrangeResultsInPages:function(){this.resultsPerPages=[],this.loadedTo=0;for(let t=0;t<this.results.length;t++){const e=Math.ceil((t+1)/this.resultsInPage)-1;let s=this.resultsPerPages[e];s||(this.resultsPerPages[e]=s=[]),s.push(this.results[t])}}},beforeDestroy:function(){this.$store.dispatch("search/saveScrollInfo",{y:this.$children[0].scrollComponent.y,loadedTo:this.loadedTo})},watch:{activeIndex:function(t){null!==t&&this.setScrollToActiveElement()},exactMatch:function(){this.$refs.exactMatchCheckbox?.focus()},showFilters:function(){this.showFiltersIgnoreWatcher?delete this.showFiltersIgnoreWatcher:setTimeout((()=>{this.$refs.filtersButton?.focus()}),0)},results:function(){this.visibleResultsHeights=[],this.arrangeResultsInPages(),this.checkVisibleResults(),this.$children[0].refresh(),this.$refs.sidebar.scrollComponent.scrollTo(0,0)}}},Qe=Je;const ts=(0,m.Z)(Qe,Ue,Ze,!1,null,"8f67c0c6",null).exports;var es=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.enabled?s("div",[t.backgroundEnabled?s("audio",{ref:"background",attrs:{type:"audio/mp3",src:t.backgroundUrl,loop:t.backgroundLoop}}):t._e(),t._v(" "),t._l(t.flipSoftSounds,(function(e,i){return t.flipEnabled?s("audio",{key:e+"soft"+i,ref:"soft",refInFor:!0,attrs:{id:"soft"+i}},[s("source",{attrs:{type:"audio/mp3",src:e}})]):t._e()})),t._v(" "),t._l(t.flipHardSounds,(function(e,i){return t.flipEnabled?s("audio",{key:e+"hard"+i,ref:"hard",refInFor:!0,attrs:{id:"hard"+i}},[s("source",{attrs:{type:"audio/mp3",src:e}})]):t._e()}))],2):t._e()},ss=[];const is={name:"Sound",data:function(){return{canPlay:this.canPlayMp3(),fadeEffectInterval:null}},computed:{enabled(){return this.$store.state.sound.enabled},muteGlobalSound(){return this.$store.state.sound.muteSound},soundMuted(){return this.muteGlobalSound},flipEnabled(){return this.$store.state.sound.flip.enabled&&"flip-book"===this.bookComponent},backgroundEnabled(){return!!this.backgroundUrl},backgroundUrl(){const t=this.$store.state.sound.background.url;return t?(0,M.Z)().translatePath("assets/sound/"+encodeURIComponent(t)):null},backgroundLoop(){return this.$store.state.sound.background.loop},backgroundVolume(){return this.$store.state.sound.background.volume/100},flipHardSounds(){const t=[];return this.$store.state.sound.flip.hard.forEach((e=>{t.push((0,M.Z)().translatePath("static/sound/"+e))})),t},flipSoftSounds(){const t=[];return this.$store.state.sound.flip.soft.forEach((e=>{t.push((0,M.Z)().translatePath("static/sound/"+e))})),t},flipVolume(){return this.$store.state.sound.flip.volume/100},soundNotification(){return this.$store.state.sound.notification},playSound(){return this.soundNotification.notify},bookComponent(){return this.$store.state.workspace.bookComponent},videosPlayingWithSound(){return this.$store.state.content.videosPlayingWithSound.length>0}},beforeMount(){"undefined"!=typeof Audio||this.$store.state.workspace.userAgentInfo.browser.publisher||this.$store.dispatch("sound/enableSound",!1)},mounted(){this.canPlay&&this.backgroundEnabled&&this.playBackgroundSound()},methods:{canPlayMp3(){if(this.$store.state.workspace.userAgentInfo.browser.publisher)return!0;if(!("Audio"in window))return!1;const t=new Audio;return!!t.canPlayType&&""!==t.canPlayType("audio/mp3")},playBackgroundSound(){if(!this.backgroundEnabled)return;this.backgroundChangeAttr("volume",this.backgroundVolume);const t=this.$refs.background.play();t&&t.then&&"function"==typeof t.then&&t.catch((t=>{this.$root.$options.api.once&&"function"==typeof this.$root.$options.api.once&&this.$root.$options.api.once("turned",(()=>{this.playBackgroundSound()}))}))},playFlipSound(){const t=!0===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])?this.$refs.hard:this.$refs.soft;if(t&&t.length>0){const e=t[this.getRandomInt(0,t.length-1)];if(!(0,Zt.hj)(e.duration)||e.error)return;if(!(0,Zt.o8)(e)){const t=this.getRandomInt(5,10)/10;e.volume=this.flipVolume*t;const s=e.pause();if(s&&s.then&&"function"==typeof s.then&&s.catch((()=>{})),e.paused){e.currentTime=0;const t=e.play();t&&t.then&&"function"==typeof t.then&&t.catch((()=>{}))}}}},fadeBackgroundSound(t){if((0,Zt.o8)(this.$refs.background))return;const e=(0,Zt.o8)(t)?this.muteGlobalSound||!this.backgroundEnabled:t,s=100,i=500/s;let o;(0,Zt.o8)(this.fadeEffectInterval)||clearInterval(this.fadeEffectInterval),e?(o=this.$refs.background.volume/i,this.fadeEffectInterval=setInterval((()=>{0===this.$refs.background.volume?(this.$refs.background.muted=!0,clearInterval(this.fadeEffectInterval)):this.$refs.background.volume>o?this.$refs.background.volume-=o:this.$refs.background.volume=0}),s)):(o=(this.backgroundVolume-this.$refs.background.volume)/i,this.$refs.background.muted=!1,this.fadeEffectInterval=setInterval((()=>{this.$refs.background.volume===this.backgroundVolume?clearInterval(this.fadeEffectInterval):this.$refs.background.volume+o<=this.backgroundVolume?this.$refs.background.volume+=o:this.$refs.background.volume=this.backgroundVolume}),s))},flipChangeAttr(t,e){if(!this.flipEnabled)return;[].concat(this.$refs.soft,this.$refs.hard).forEach((s=>{s&&(s[t]=e)}))},backgroundChangeAttr(t,e){this.backgroundEnabled&&(this.$refs.background?this.$refs.background[t]=e:this.$nextTick((()=>{this.backgroundChangeAttr(t,e)})))},getRandomInt:(t,e)=>Math.floor(Math.random()*(e-t+1))+t,checkMuted(){const t=this.soundMuted||this.videosPlayingWithSound;this.flipChangeAttr("muted",t),this.fadeBackgroundSound(t)}},watch:{flipVolume(t){this.flipChangeAttr("volume",t)},backgroundVolume(t){this.backgroundChangeAttr("volume",t)},backgroundUrl(t){this.canPlay&&t&&this.$nextTick((()=>{this.playBackgroundSound()}))},soundMuted:"checkMuted",videosPlayingWithSound:"checkMuted",muteGlobalSound(t){this.$root.$emit("sound",{action:t?"on":"off"})},playSound(){if(!this.canPlay||!this.flipEnabled)return;const t=this.soundNotification.hardcover;this.playFlipSound(t)}}};const os=(0,m.Z)(is,es,ss,!1,null,null,null).exports;var as=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.menuShown?s("div",{staticClass:"context-menu",style:t.menuStyles,on:{mousedown:function(t){t.stopPropagation()}}},t._l(t.menu,(function(e,i){return s("ul",{key:i,staticClass:"context-menu-group"},t._l(e,(function(e,i){return s("li",{key:i,staticClass:"context-menu-item",on:{click:function(s){return t.itemClick(e)}}},[s("svgicon",{staticClass:"svg-icon icon",attrs:{focusable:"false",name:e.icon}}),t._v(" "),s("span",{staticClass:"menu-item-title"},[t._v(t._s(t.$t(e.captionId)))])],1)})),0)})),0):t._e()},ns=[],rs=s(924);s(8856),s(6062),s(7558),s(6722),s(7328),s(7005),s(7367);const ls=getComputedStyle(document.documentElement).getPropertyValue("--z-index-context-menu"),cs={name:"ContextMenu",props:{toggleFullscreen:{type:Function,default:()=>{}}},data:function(){return{menuShown:!1,x:0,y:0,pageScaleOffsetX:0,pageScaleOffsetY:0,event:null,elementPath:[],classPath:[],groups:[],items:[],pageId:null,pageObj:null,urlBlackList:this.$store.state.workspace.urlBlackList}},computed:{menu(){const t=[];return this.groups.forEach((e=>{const s=this.items.filter((t=>!(t.group!==e.id||t.elClass&&-1===this.classPath.indexOf(t.elClass)||t.condition&&!0!==t.condition(this.event))));s.length>0&&t.push(s)})),t},menuLength(){let t=0;return this.menu.forEach((e=>{t+=e.length})),t},menuHeight(){return 36*this.menuLength},menuStyles(){let t=this.isRtl?null:this.x,e=this.isRtl?this.workspaceSize.width-this.x:null,s=this.y;return s+this.menuHeight>this.workspaceSize.height&&(s-=this.menuHeight,s<0&&(s=0)),!this.isRtl&&t+300>this.workspaceSize.width&&(t=null,e=this.workspaceSize.width-this.x),this.isRtl&&e+300>this.workspaceSize.width&&(e=null,t=this.x),{left:(0,Zt.Ft)(t)?null:t+"px",right:(0,Zt.Ft)(e)?null:e+"px",top:s+"px",zIndex:ls,opacity:this.menuShown?"1":"0"}},isStub(){return this.$store.getters["pages/pageProp"](this.pageId,"stub")},isPageReady(){return this.$store.getters["pages/pageProp"](this.pageId,"status")===rs.Z.READY},isRtl(){return this.$store.getters["i18n/isLocaleRtl"]},workspaceSize(){return this.$store.getters["workspace/size"]},pagesSize(){return this.$store.getters["pages/size"]},notesEnabled(){return this.$store.state.workspace.components.notes},pagerState(){return this.$store.getters["pager/legacyState"]},miniMode(){return this.$store.state.workspace.mini},isOnline(){return!this.$store.getters["workspace/isOffline"]},activeInteractiveElement(){return this.$store.state.workspace.activeInteractiveElement},isTextContextMenu(){return"text-context-menu"===this.activeInteractiveElement}},mounted(){this.groups=[{id:"item",order:1},{id:"note",order:3},{id:"text",order:2},{id:"page",order:4},{id:"all",order:5}],this.items=[{group:"page",order:1,elClass:"page",icon:"add-note",captionId:"RightClickMenu.ADD_NOTE",name:"Add note",action:()=>{this.$store.dispatch("notes/addNote",{pageId:this.pageId,pX:this.pageScaleOffsetX,pY:this.pageScaleOffsetY,target:"contextMenu"})},condition:()=>this.notesEnabled&&this.classPath&&-1===this.classPath.indexOf("publication-note")},{group:"note",order:2,elClass:"publication-note",icon:"trash-can",captionId:"RightClickMenu.DELETE_NOTE",name:"Delete note",action:t=>{this.$root.$emit("contextMenu:deleteNote",parseInt(t.target.closest(".publication-note").dataset.noteId))},condition:()=>!0},{group:"note",order:1,elClass:"publication-note",icon:"edit-note",captionId:"RightClickMenu.EDIT_NOTE",name:"Edit note",action:t=>{this.$root.$emit("contextMenu:editNote",parseInt(t.target.closest(".publication-note").dataset.noteId))},condition:()=>!0},{group:"page",order:5,elClass:"page",icon:"zoomin",captionId:"RightClickMenu.SWITCH_TO_ZOOM",name:"Zoom in",action:()=>{this.$root.$emit("contextMenu:zoomIn",{center:{x:this.x,y:this.y},target:this.event.target},"context-menu-zoom")},condition:()=>1===this.pagesSize.zoomFactor},{group:"page",order:5,elClass:"page",icon:"zoomout",captionId:"RightClickMenu.SWITCH_TO_BOOK",name:"Zoom out",action:()=>{this.$root.$emit("contextMenu:zoomOut",!1,"context-menu-zoom")},condition:()=>this.pagesSize.zoomFactor>1},{group:"item",order:1,elClass:"link",icon:"link",captionId:"RightClickMenu.COPY_LINK",name:"Copy link",action:t=>{this.copyLink(t.target.dataset.url)},condition:t=>this.isOnline&&!!t.target.dataset.url&&Nt().isSupported()&&this.checkUrl(t.target.dataset.url)},{group:"text",order:2,icon:"text-link",elClass:"text-block",captionId:"RightClickMenu.SHARE_SELECTED_TEXT",name:"Copy Text Link",action:t=>{this.$root.$emit("contextMenu:copyTextLink")},condition:t=>this.isOnline&&null!==this.$store.state.text.selectionRect&&this.isTextContextMenu},{group:"text",order:1,icon:"clipboard",elClass:"text-block",captionId:"RightClickMenu.COPY_TEXT",name:"Copy Text",action:t=>{this.$root.$emit("contextMenu:copyText")},condition:t=>null!==this.$store.state.text.selectionRect&&this.isTextContextMenu},{group:"item",order:2,elClass:"link",icon:"open-link",captionId:"RightClickMenu.OPEN_LINK_IN_NEW_TAB",name:"Open link",action:t=>{this.openLink(t.target.dataset.url)},condition:t=>!!t.target.dataset.url&&this.checkUrl(t.target.dataset.url)},{group:"item",order:1,elClass:"logo-container",icon:"link",captionId:"RightClickMenu.COPY_LINK",name:"Copy logo link",action:()=>{this.copyLink(this.$store.state.logo.url)},condition:()=>Nt().isSupported()&&!!this.$store.state.logo.url},{group:"item",order:2,elClass:"logo-container",icon:"open-link",captionId:"RightClickMenu.OPEN_LINK_IN_NEW_TAB",name:"Open logo link",action:()=>{this.openLink(this.$store.state.logo.url)},condition:()=>!!this.$store.state.logo.url},{group:"page",order:4,elClass:"page",icon:"social",captionId:"RightClickMenu.SHARE_PAGE",name:"Share",action:this.sharePage,condition:()=>!0===this.$store.state.workspace.components.share},{group:"page",order:2,elClass:"page",icon:"download",captionId:"RightClickMenu.DOWNLOAD_PAGE",name:"Download",action:this.downloadPage,condition:()=>!this.isStub&&this.isPageReady&&!0===this.$store.state.downloads.enabled&&!0===this.$store.state.downloads.currentPagesVisible},{group:"page",order:3,elClass:"page",icon:"print",captionId:"RightClickMenu.PRINT_PAGE",name:"Print",action:this.printPage,condition:()=>!this.isStub&&this.isPageReady&&!0===this.$store.state.workspace.components.print&&!0===this.$store.state.print.currentPagesVisible},{group:"all",order:6,elClass:"book-container",icon:"fullscreen-out",captionId:"RightClickMenu.EXIT_FULLSCREEN",name:"Enter Fullscreen",action:this.toggleFullscreen,condition:()=>!0===this.$store.state.workspace.fullScreenMode},{group:"all",order:6,elClass:"book-container",icon:"fullscreen",captionId:"RightClickMenu.ENTER_FULLSCREEN",name:"Exit Fullscreen",action:this.toggleFullscreen,condition:()=>!1===this.$store.state.workspace.fullScreenMode}],this.items.sort(this.sortFunc)},methods:{sortFunc:(t,e)=>t.order-e.order,addItem(t){this.items.push(t),this.items.sort(this.sortFunc)},addGroup(t){this.groups.push(t),this.groups.sort(this.sortFunc)},showMenu(t){if(t.ctrlKey||"input"===t.target.tagName.toLowerCase()||"textarea"===t.target.tagName.toLowerCase())return;t.preventDefault();const e=this.$root.$el.getBoundingClientRect();if(this.x=t.clientX-e.left,this.y=t.clientY-e.top,this.event=t,this.elementPath=(0,Zt.kJ)(t.path)?t.path:(0,z.iZ)(t.target),this.classPath=(0,z.UZ)(t.target),this.findPage(),this.isPointInSelection(t)&&this.$store.state.text.pageID===this.pageId?this.$store.dispatch("workspace/setActiveInteractiveElement","text-context-menu"):this.$store.dispatch("workspace/setActiveInteractiveElement","context-menu"),this.isTextContextMenu&&this.classPath.indexOf("text-block")<0&&this.classPath.push("text-block"),this.elementPath)for(let s=0;s<this.elementPath.length;s++){if(this.elementPath[s].classList&&"note-rect"===this.elementPath[s].classList[0])return void(this.menuShown=!1);if(this.elementPath[s].classList&&"page"===this.elementPath[s].classList[0]){const e=this.elementPath[s].__vue__,i=this.elementPath[s].getBoundingClientRect();e.isWide&&"right"===e.pageSide?this.pageScaleOffsetX=(t.clientX-i.left+e.pageSize.width)*this.$store.state.book.bookSize.width/e.pageSize.width:e.isWide&&"both"===e.pageSide?this.pageScaleOffsetX=(t.clientX-i.left)*this.$store.state.book.bookSize.width*2/e.pageSize.width:this.pageScaleOffsetX=(t.clientX-i.left)*this.$store.state.book.bookSize.width/e.pageSize.width,this.pageScaleOffsetY=(t.clientY-i.top)*this.$store.state.book.bookSize.height/e.pageSize.height;break}}this.menu.length>0&&!this.miniMode&&(this.menuShown=!0,this.$root.$emit("contextMenu",{action:"open",page:this.$store.getters["pages/pageCaptionById"]({id:this.pageId}),elementType:"",x:this.x,y:this.y}))},hideMenu(){this.menuShown=!1},itemClick(t){this.$root.$emit("contextMenu",{action:"select",selectedItem:t.name}),t.action(this.event,{classPath:this.classPath,elementPath:this.elementPath})},openLink(t,e){const s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("target","_blank"),e&&s.setAttribute("download",e),document.body.appendChild(s),s.click(),document.body.removeChild(s)},copyLink(t){const e=document.createElement("button");e.setAttribute("data-clipboard-text",t),document.body.appendChild(e);const s=new(Nt())(e);e.click(),s.destroy(),document.body.removeChild(e)},checkUrl:function(t){for(let e=0;e<this.urlBlackList.length;e++)if(-1!==t.indexOf(this.urlBlackList[e]))return!1;return!0},sharePage(){this.$store.dispatch("popup/openPopup",{component:"social",params:{currentPage:!0}})},printPage(){this.$store.dispatch("popup/openPopup",{component:"print",params:{pageId:this.pageId}})},downloadPage(){const t=this.$store.getters["downloads/getPageFiles"].filter((t=>t.ready&&t.pageId===this.pageId));if(t.length<1)return;const e=(0,M.Z)().translatePath(t[0].url);this.openLink(e,t[0].fileName),this.$root.$emit("download",{option:"page",fileName:t[0].fileName,downloadPage:this.$store.getters["pages/urlHeaderById"]({id:t[0].pageId}),leftPageUrl:this.$store.getters["pages/urlHeaderById"]({id:this.pagerState.leftPage}),rightPageUrl:this.$store.getters["pages/urlHeaderById"]({id:this.pagerState.rightPage})})},findPage(){if(!this.elementPath)return this.pageObj=null,void(this.pageId=null);let t;for(let e=0;e<this.elementPath.length;e++)if(this.elementPath[e].classList&&"page"===this.elementPath[e].classList[0]){t=this.elementPath[e].__vue__;break}t&&t.pageId?(this.pageObj=t,this.pageId=t.pageId):(this.pageObj=null,this.pageId=null)},isPointInSelection(t){return!(!this.pageObj||!(0,Zt.mf)(this.pageObj.isPointInSelection))&&this.pageObj.isPointInSelection(t)}},watch:{menuShown(t){this.$store.dispatch("workspace/setContextMenuState",t)},activeInteractiveElement(t){t&&-1!==t.indexOf("context-menu")||this.hideMenu()}},components:{}},hs=cs;const ds=(0,m.Z)(hs,as,ns,!1,null,"80cdef5e",null).exports;var us=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"banner-notice"},[s("span",{staticClass:"notice-text",domProps:{innerHTML:t._s(t.noticeText)}}),t._v(" "),s("button",{staticClass:"close-icon",attrs:{tabindex:"0"},on:{click:t.close}},[s("svgicon",{attrs:{focusable:"false",name:"cancel"}})],1)])},ps=[];s(2731);const gs={props:{show:{type:Boolean,default:!1}},mounted(){setTimeout((()=>{const t=this.$el.getElementsByTagName("a")[0];t&&t.addEventListener("touchstart",(function(e){e.stopPropagation(),t.click()}))}),100)},computed:{noticeText(){return this.customNoticeText?this.customNoticeText:this.$t("Other.COOKIE_POLICY_NOTICE")},customNoticeText(){if(this.$store.state.workspace.cookieNotice.link){const t=this.$t("Other.CUSTOM_POLICY_LINK_CAPTION"),e='<a href="'+this.$store.state.workspace.cookieNotice.link+'" target="_blank" title="'+t+'">'+t+"</a>";return this.$t("Other.CUSTOM_POLICY_TEXT",{0:e})}return null}},methods:{close(){this.$emit("close"),this.$store.commit("workspace/SET_BANNER_HEIGHT",0)}},components:{}};const ms=(0,m.Z)(gs,us,ps,!1,null,"65d9be9d",null).exports;var fs=s(6411),vs=s(562);const bs=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)}).bind(window);function ws(t,e){const s=Object.prototype.toString.call(t),i="[object Array]"===s||"[object NodeList]"===s||"[object HTMLCollection]"===s||"[object Object]"===s||"undefined"!=typeof jQuery&&t instanceof jQuery||"undefined"!=typeof Elements&&t instanceof Elements;let o=0;const a=t.length;if(i)for(;o<a;o++)e(t[o]);else e(t)}const ks=function(t,e){function s(){let t,e,s=[];this.add=function(t){s.push(t)},this.call=function(){for(t=0,e=s.length;t<e;t++)s[t].call()},this.remove=function(i){const o=[];for(t=0,e=s.length;t<e;t++)s[t]!==i&&o.push(s[t]);s=o},this.length=function(){return s.length}}function i(t,e){if(!t)return;if(t.resizedAttached)return void t.resizedAttached.add(e);t.resizedAttached=new s,t.resizedAttached.add(e);const i="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden; direction: ltr;",o="position: absolute; left: 0; top: 0; transition: 0s;";t.resizeSensor=document.createElement("div"),t.resizeSensor.className="resize-sensor",t.resizeSensor.style.cssText=i;const a=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div");let c,h,d,u;a.className="resize-sensor-expand",r.className="resize-sensor-shrink",a.style.cssText=r.style.cssText=i,n.style.cssText=l.style.cssText=o,l.style.width="200%",l.style.height="200%",a.appendChild(n),r.appendChild(l),t.resizeSensor.appendChild(a),t.resizeSensor.appendChild(r),t.appendChild(t.resizeSensor),t.resizeSensor.offsetParent!==t&&(t.style.position="relative");let p=t.offsetWidth,g=t.offsetHeight;const m=function(){n.style.width="100000px",n.style.height="100000px",a.scrollLeft=1e5,a.scrollTop=1e5,r.scrollLeft=1e5,r.scrollTop=1e5};m();const f=function(){h=0,c&&(p=d,g=u,t.resizedAttached&&t.resizedAttached.call())},v=function(){d=t.offsetWidth,u=t.offsetHeight,c=d!==p||u!==g,c&&!h&&(h=bs(f)),m()},b=function(t,e,s){t.attachEvent?t.attachEvent("on"+e,s):t.addEventListener(e,s)};b(a,"scroll",v),b(r,"scroll",v)}ws(t,(function(t){i(t,e)})),this.detach=function(e){ks.detach(t,e)}};ks.detach=function(t,e){ws(t,(function(t){t&&(t.resizedAttached&&"function"==typeof e&&(t.resizedAttached.remove(e),t.resizedAttached.length())||t.resizeSensor&&(t.contains(t.resizeSensor)&&t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached))}))};const _s=ks;var ys=s(7592);let $s,Cs,xs;const Ts={mixins:[fs.Z,vs.Z],data:function(){return{showPreloader:!1,layout:"desktop",navTimeout:0,windowWidth:0,windowHeight:0,altTimer:null,containerSize:{width:0,height:0,left:0,top:0},wheelScroll:null,noticeShown:!1,dragActive:!0,savedWheelState:null,embedScript:null,embedLightbox:null,pageLoaded:!1}},beforeMount(){this.checkNoticeShow()},mounted(){this.$root.$emit("log",{message:"mounted desktop layout"}),this.sensor=new _s(this.$refs.bookContainer.$el,this.onResize),s.g.addEventListener("keydown",this.keyDownHandler,!0),s.g.addEventListener("keyup",this.keyUpHandler),s.g.addEventListener("gesturestart",this.preventEvent),s.g.addEventListener("gesturechange",this.preventEvent),s.g.addEventListener("gestureend",this.preventEvent),s.g.addEventListener("blur",this.blurHandler),document.addEventListener("onfullscreenchange",this.checkFullscreen),document.addEventListener("webkitfullscreenchange",this.checkFullscreen,!1),document.addEventListener("mozfullscreenchange",this.checkFullscreen,!1),document.addEventListener("fullscreenchange",this.checkFullscreen,!1),document.addEventListener("MSFullscreenChange",this.checkFullscreen,!1),document.addEventListener("mousedown",this.onMouseDown),this.$root.$el.addEventListener("onfullscreenchange",this.checkFullscreen),this.$root.$el.addEventListener("webkitfullscreenchange",this.checkFullscreen,!1),this.$root.$el.addEventListener("mozfullscreenchange",this.checkFullscreen,!1),this.$root.$el.addEventListener("fullscreenchange",this.checkFullscreen,!1),this.$root.$el.addEventListener("MSFullscreenChange",this.checkFullscreen,!1),this.$root.$on("contextMenu:copyText",this.copyText),this.$root.$on("contextMenu:copyTextLink",this.copyTextLink),this.onResize(),this.checkPreloader(),this.$root.$once("pageLoaded",(()=>{this.pageLoaded=!0,this.$root.onPublicationLoad({})})),this.wheelScroll=this.$store.state.workspace.wheelScroll,this.embedScript=this.$store.state.workspace.embedScript,this.embedLightbox=this.$store.state.workspace.embedLightbox,this.embedScript&&this.wheelScroll&&!this.embedLightbox&&(this.$el.onwheel=t=>t.preventDefault()),this.wheelScroll&&(this.wheelScroll=!("false"===(0,M.Z)().getLocalStorage().getItem("wheelScroll"))),this.embedLightbox&&(this.setFocusTraps(),this.$root.$once("preloader-off",(()=>{this.$root.$el?.focus()}))),this.noticeShown&&this.$refs.noticeBanner&&this.$store.commit("workspace/SET_BANNER_HEIGHT",this.$refs.noticeBanner.$el.getBoundingClientRect().height)},beforeCreate(){this.$root.$emit("log",{message:"beforeCreate desktop layout"}),this.$store.dispatch("workspace/setLayout","desktop")},beforeDestroy(){this.sensor.detach(this.$refs.bookContainer.$el,this.onResize),this.$root.$off("contextMenu:copyText",this.copyText),this.$root.$off("contextMenu:copyTextLink",this.copyTextLink),this.$el.onwheel=null,s.g.removeEventListener("keydown",this.keyDownHandler,!0),s.g.removeEventListener("keyup",this.keyUpHandler),s.g.removeEventListener("blur",this.blurHandler),s.g.removeEventListener("gesturestart",this.preventEvent),s.g.removeEventListener("gesturechange",this.preventEvent),s.g.removeEventListener("gestureend",this.preventEvent),document.removeEventListener("onfullscreenchange",this.checkFullscreen),document.removeEventListener("webkitfullscreenchange",this.checkFullscreen,!1),document.removeEventListener("mozfullscreenchange",this.checkFullscreen,!1),document.removeEventListener("fullscreenchange",this.checkFullscreen,!1),document.removeEventListener("MSFullscreenChange",this.checkFullscreen,!1),document.removeEventListener("mousedown",this.onMouseDown),this.$root.$el.removeEventListener("onfullscreenchange",this.checkFullscreen),this.$root.$el.removeEventListener("webkitfullscreenchange",this.checkFullscreen,!1),this.$root.$el.removeEventListener("mozfullscreenchange",this.checkFullscreen,!1),this.$root.$el.removeEventListener("fullscreenchange",this.checkFullscreen,!1),this.$root.$el.removeEventListener("MSFullscreenChange",this.checkFullscreen,!1)},destroyed(){this.$el.parentNode.removeChild(this.$el)},computed:{isMini(){return this.$store.state.workspace.mini},publicationPreloaderVisibility(){return this.$store.state.workspace.preloader},isLightShadow(){return this.$store.state.pages.size.height<500},isLightboxNavEnabled(){return this.$store.getters["lightbox/isNavEnabled"]},isEdge(){return!!this.$store.state.workspace.userAgentInfo.browser.msedge},isSafari(){return!!this.$store.state.workspace.userAgentInfo.browser.safari},isPublisher(){return this.$store.state.workspace.userAgentInfo.browser.publisher},flashMessageVisibility(){return null!==this.$store.getters["workspace/flashMessage"]},skinClasses(){return this.$store.state.skin.styles.classes.split(" ")},mainClasses(){return[{edge:this.isEdge,publisher:this.isPublisher,"light-shadows":this.isLightShadow},...this.skinClasses]},publicationClasses(){return{"publication-container":!0,desktop:!0,safari:this.isSafari,accessibilityMode:this.accessibilityMode,mini:this.isMini,"moving-note":this.isMovingNote}},isPopupOpened(){return null!==this.$store.state.popup.opened},isSidebarOpened(){return!!this.activeSidebarComponent},isModalOpened(){return this.$store.state.workspace.modalOpened},isWorkspaceFrozen(){return this.$store.getters["workspace/isFrozen"]},noticeEnabled:function(){return this.$store.state.workspace.cookieNotice&&this.$store.state.workspace.cookieNotice.enabled},activeSidebarComponent(){return this.pageLoaded?this.$store.state.sidebar.opened:""},rightToLeftBook(){return this.$store.state.book.rightToLeft},dir(){return this.$store.getters["i18n/isLocaleRtl"]?"rtl":"ltr"},topBarEnabled(){return this.$store.getters["workspace/desktopTopBarVisible"]},bottomBarEnabled(){return this.$store.getters["workspace/desktopBottomBarVisible"]},zoomFactor(){return this.$store.state.pages.size.zoomFactor},accessibilityMode(){return this.$store.state.workspace.accessibilityMode},isFlipbookTypeAuto(){return"auto"===this.$store.state.workspace.components.book.flipbookType},isMovingNote(){return this.$store.state.notes.isMoving},isLightboxShown(){return this.$store.getters["lightbox/isShown"]},isSlideshowActive(){return this.$store.state.workspace.components.slideshow.active},innerContainerStyles(){return{height:`calc(100% - ${this.$store.state.workspace.bannerHeight}px)`}},activeInteractiveElement(){return this.$store.state.workspace.activeInteractiveElement}},methods:{onResize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const e=this.$el.getBoundingClientRect(),s=e.width<=550||e.height<=300;if(this.windowWidth=e.width,this.windowHeight=e.height,this.containerSize=this.$refs.bookContainer.$el.getBoundingClientRect(),s!==this.isMini)this.$store.dispatch("workspace/setMini",s);else if(this.isFlipbookTypeAuto){const t=this.$store.state.book.bookSize.width/this.$store.state.book.bookSize.height>this.containerSize.width/this.containerSize.height?"single":"spread";this.$store.state.pager.mode!==t&&(this.showPreloader=!0,this.$store.dispatch("pager/changeMode",{mode:t}))}this.$store.dispatch("workspace/setSize",{width:this.windowWidth,height:this.windowHeight,changedBy:t}),this.noticeShown&&this.$refs.noticeBanner&&this.$store.commit("workspace/SET_BANNER_HEIGHT",this.$refs.noticeBanner.$el.getBoundingClientRect().height),clearTimeout($s),$s=setTimeout((()=>{this.showPreloader=!1}),1e3)},onInnerContainerClick(t){0===t.clientX&&0===t.clientY||(this.$store.state.workspace.accessibilityMode?this.$store.dispatch("workspace/toggleAccessibilityMode"):this.$store.state.caniuse.userInteractions.firstClick||this.$store.dispatch("caniuse/setFirstClick"))},keyDownHandler(t){if(Ss(t)&&t.preventDefault(),!this.embedLightbox||"Escape"!==t.code||this.isPopupOpened||this.isSidebarOpened&&this.$refs["opened-sidebar-component"].$el.contains(document.activeElement)||this.isModalOpened||window.parent.postMessage({fbPublicationUrl:window.location.href,action:"closeLightbox"},"*"),this.isWorkspaceFrozen||this.publicationPreloaderVisibility){const e="leadform"===this.$store.state.workspace.apiFreezeTarget,s="customizer-password-form"===this.$store.state.workspace.apiFreezeTarget;if(e||s)return;return void t.preventDefault()}const e=(!!window.FB_PUBL_DEBUG||this.$store.state.workspace.showConfig)&&t.altKey&&(t.ctrlKey||t.metaKey);if(t.altKey&&(clearTimeout(this.altTimer),this.altTimer=!e&&setTimeout((()=>{this.$store.dispatch("workspace/toggleAccessibilityMode")}),1e3)),"Tab"!==t.code||this.$store.state.workspace.accessibilityMode||(this.$store.dispatch("workspace/toggleAccessibilityMode"),t.preventDefault()),"F1"===t.code||"Slash"===t.code&&t.shiftKey&&t.metaKey){if(!this.$store.state.workspace.components.help.enabled)return;return this.$store.dispatch("popup/openPopup",{component:"help"}),void t.preventDefault()}if(this.isPopupOpened&&"info"!==this.$store.state.popup.opened&&!this.isAccessibilityKey(t))return void t.preventDefault();(t.ctrlKey||t.metaKey)&&this.dragActive&&(this.$root.$emit("zoomMove",{direction:"drag",active:!1}),this.dragActive=!1);if(["input","textarea","select","option"].indexOf(t.target?.tagName.toLowerCase())>=0)return;const s=t.ctrlKey||t.metaKey;s&&"KeyC"===t.code&&""!==this.$store.state.text.selectedText&&null!==this.$store.state.text.selectedText&&this.copyText();const i=this.$refs["opened-sidebar-component"]?.$el.contains(document.activeElement);switch(t.code){case"Escape":this.isLightboxShown&&this.$root.$emit("lightbox-close");break;case"ArrowLeft":if(this.isLightboxShown)return void this.lightboxGoTo("left");if(i)return;if(this.zoomFactor>1)this.$root.$emit("zoomMove",{direction:"left"});else{if(this.navTimeout>Date.now())return;this.$root.$emit("nav:goLeft"),this.movePagerLeft({target:"keyboard"}),this.navTimeout=Date.now()+(this.zoomFactor>1?1e3:100)}t.preventDefault();break;case"ArrowRight":if(this.isLightboxShown)return void this.lightboxGoTo("right");if(i)return;if(this.zoomFactor>1)this.$root.$emit("zoomMove",{direction:"right"});else{if(this.navTimeout>Date.now())return;if(this.$refs["opened-sidebar-component"]?.$el.contains(document.activeElement))return;this.$root.$emit("nav:goRight"),this.movePagerRight({target:"keyboard"}),this.navTimeout=Date.now()+(this.zoomFactor>1?1e3:100)}t.preventDefault();break;case"ArrowUp":this.zoomFactor>1&&!i&&!this.isLightboxShown&&this.$root.$emit("zoomMove",{direction:"up"}),t.preventDefault();break;case"ArrowDown":this.zoomFactor>1&&!i&&!this.isLightboxShown&&this.$root.$emit("zoomMove",{direction:"down"}),t.preventDefault();break;case"Space":const e="body"!==document.activeElement?.tagName.toLowerCase();if(this.$store.state.workspace.components.slideshow?.enabled&&!e){const t=this.$store.state.workspace.components.slideshow.active,e=t?this.$t("AlertMessage.SLIDESHOW_STOPPED"):this.$t("AlertMessage.SLIDESHOW_STARTED");this.$store.dispatch("workspace/setSlideshowActive",{value:!t,target:"keyboard",messageText:e})}break;case"KeyF":if(s){if(t.preventDefault(),!this.$store.state.search.enabled)return;"search"===this.$store.state.sidebar.opened?this.$refs["opened-sidebar-component"].focusInput():this.$store.dispatch("sidebar/openSidebar",{component:"search"})}break;case"KeyM":if(this.$store.state.sound.enabled){if(t.preventDefault(),this.isLightboxShown)return;this.$store.dispatch("sound/toggleMuteSound")}break;case"KeyA":if(s){if(t.preventDefault(),this.isLightboxShown)return;null!==this.$store.state.text.selectionRect&&this.$store.dispatch("text/setSelectAll")}break;case"KeyP":s&&(t.preventDefault(),this.$store.state.workspace.components.print&&this.$store.dispatch("popup/openPopup",{component:"print"}));break;case"KeyW":!t.shiftKey||this.isLightboxShown||this.isPopupOpened||this.isModalOpened||this.isMini||(this.wheelScroll=!this.wheelScroll,(0,M.Z)().getLocalStorage().setItem("wheelScroll",this.wheelScroll),this.$store.dispatch("workspace/setFlashMessage",{text:this.wheelScroll?this.$t("AlertMessage.WHEEL_FLIP_ENABLED"):this.$t("AlertMessage.WHEEL_FLIP_DISABLED")}));break;case"KeyI":s&&t.shiftKey&&t.altKey&&(t.preventDefault(),this.$store.dispatch("popup/openPopup",{component:"info"}))}},isAccessibilityKey:t=>["Tab","Space","Enter"].includes(t.code),keyUpHandler(t){const e="AltLeft"===t.code||"AltRight"===t.code,s="ControlLeft"===t.code||"ControlRight"===t.code,i="MetaLeft"===t.code||"MetaRight"===t.code;xs=!1,clearTimeout(Cs),e&&clearTimeout(this.altTimer),!s&&!i||this.dragActive||(this.$root.$emit("zoomMove",{direction:"drag",active:!0}),this.dragActive=!0)},blurHandler(t){this.dragActive||(this.$root.$emit("zoomMove",{direction:"drag",active:!0}),this.dragActive=!0)},copyTextLink(){let t;if(!this.$store.getters["pages/isFirstPage"](this.$store.state.text.pageID)){t=this.$store.getters["pages/urlHeaderById"]({id:this.$store.state.text.pageID});const e=this.$store.getters["pages/pageProp"](this.$store.state.text.pageID,"urlHeader");this.$store.getters["pages/pageProp"](this.$store.state.text.pageID,"wide")&&!e&&("left"===this.$store.state.text.pageSide&&(t=t.split("-")[0]),"right"===this.$store.state.text.pageSide&&(t=t.split("-")[1]))}const e=(0,M.Z)().getShareUrl(!0,t),s=e+(-1===e.indexOf("#")?"#":"&")+"t="+btoa(this.$store.state.text.pageID+","+this.$store.state.text.pageSide+","+this.$store.state.text.selectionRect.top.toFixed(2)+","+this.$store.state.text.selectionRect.left.toFixed(2)+","+this.$store.state.text.selectionRect.width.toFixed(2)+","+this.$store.state.text.selectionRect.height.toFixed(2)+","+this.$store.state.text.selectionRect.cursorHSide+","+this.$store.state.text.selectionRect.cursorVSide),i=document.createElement("button");i.setAttribute("data-clipboard-text",s),document.body.appendChild(i);const o=new(Nt())(i,{container:this.$root.$el});i.click(),o.destroy(),document.body.removeChild(i),this.$root.$emit("selectText",{action:"link",pageId:this.$store.state.text.pageID,text:this.$store.state.text.selectedText,url:s}),this.$store.dispatch("workspace/setFlashMessage",{text:this.$t("AlertMessage.LINK_COPIED")})},copyText(){const t=document.createElement("button");t.setAttribute("data-clipboard-text",this.$store.state.text.selectedText),document.body.appendChild(t);const e=new(Nt())(t,{container:this.$root.$el});t.click(),e.destroy(),document.body.removeChild(t),this.$root.$emit("selectText",{action:"copy",pageId:this.$store.state.text.pageID,text:this.$store.state.text.selectedText}),this.$store.dispatch("workspace/setFlashMessage",{text:this.$t("AlertMessage.TEXT_COPIED")})},checkPreloader:function(){document.getElementById("preloader")?(this.$store.dispatch("workspace/setPreloader",!0),this.$root.$options.api.once&&"function"==typeof this.$root.$options.api.once&&this.$root.$options.api.once("preloader-off",(()=>{this.$store.state.workspace.preloader&&this.$store.dispatch("workspace/setPreloader",!1)}))):this.$store.dispatch("workspace/setPreloader",!1)},checkFullscreen(t){this.isFullscreen()?(3===t.eventPhase&&(this.savedWheelState=this.wheelScroll,this.wheelScroll=!("false"===(0,M.Z)().getLocalStorage().getItem("wheelScroll"))),this.$store.dispatch("workspace/setFullScreen",!0)):(3===t.eventPhase&&(this.wheelScroll=this.savedWheelState),this.$store.dispatch("workspace/setFullScreen",!1))},isFullscreen:()=>!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement),launchIntoFullscreen(t){this.isFullscreen()||(t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.msRequestFullscreen&&t.msRequestFullscreen())},exitFullscreen(){this.isFullscreen()&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())},toggleFullscreen(){this.isFullscreen()?this.exitFullscreen():this.launchIntoFullscreen(this.$root.$options.fullscreenContainer)},onContextMenu(t){this.dragActive||(this.$root.$emit("zoomMove",{direction:"drag",active:!0}),this.dragActive=!0),this.$refs.contextMenu.showMenu(t)},onClick(t){this.$refs.contextMenu.menuShown&&(this.$store.dispatch("workspace/setHighlightTimeout",Date.now()+50),this.$store.dispatch("workspace/setActiveInteractiveElement","text-context-menu"===this.activeInteractiveElement?"selected-text":null))},noticeClose:function(){this.$store.onNoticeClose&&(0,Zt.mf)(this.$store.onNoticeClose)?this.$store.onNoticeClose():(this.isPublisher||(0,M.Z)().getLocalStorage().setItem("fb_cookieNotice_dismissed","true"),this.noticeShown=!1,this.$nextTick((()=>{this.onResize("notice")})))},checkNoticeShow:function(t){!0===t?this.noticeShown=!0:this.noticeEnabled?this.noticeShown="true"!==(0,M.Z)().getLocalStorage().getItem("fb_cookieNotice_dismissed"):this.noticeShown=!1},onWheel(t){t.target&&"textarea"===t.target.tagName.toLowerCase()||(this.wheelScroll&&t.preventDefault(),this.$root.$emit("wheel",t))},preventEvent(t){t.preventDefault()},preventWheel(t){t.target&&"textarea"===t.target.tagName.toLowerCase()||t.preventDefault()},setFocusTraps(){const t=this.$refs["first-trap"],e=this.$refs["last-trap"];let s=!1;t.addEventListener("focus",(t=>{t.relatedTarget===e||s||e.focus()})),e.addEventListener("focus",(e=>{e.relatedTarget===t||s||t.focus()}))},lightboxGoTo(t){this.isLightboxNavEnabled&&!xs&&(this.$root.$emit("lightbox-go-"+t,"keyboard"),xs=!0,Cs=setTimeout((()=>{xs=!1}),300))},onMouseLeave(t){this.$root.$emit("publication:mouseleave",t)},onMouseDown(){null!==this.activeInteractiveElement&&this.$store.dispatch("workspace/setActiveInteractiveElement",null)}},watch:{isFlipbookTypeAuto(t){t&&this.onResize()},publicationPreloaderVisibility(t){!t&&this.$store.state.workspace.components.slideshow&&this.$store.state.workspace.components.slideshow.enabled&&this.$store.state.workspace.components.slideshow.auto&&!this.isLightboxShown&&this.$store.dispatch("workspace/setSlideshowActive",{value:!0,target:"auto"})},isSidebarOpened(){this.$nextTick((()=>{this.onResize("sidebar")}))},isMini(){this.$nextTick((()=>{this.onResize("sidebar")}))},wheelScroll(t){this.$store.dispatch("workspace/setWheelScroll",t)},noticeEnabled:"checkNoticeShow",noticeShown(t){t&&this.$nextTick((()=>{this.onResize("notice")}))},isSlideshowActive(t){t&&this.zoomFactor>1&&this.$root.$emit("bottomMenu:zoomOut",!1,"slideshow-active")}},components:{preloader:q,"flash-message":v.Z,"bottom-toolbar":f,"top-toolbar":R,"book-container":F.Z,"th-window":ye,"toc-window":Le,"note-window":We,"search-window":ts,"context-menu":ds,"banner-notice":ms,popup:ie,sound:os,lightbox:ys.Z}};function Ss(t){return!(!t.metaKey&&!t.ctrlKey||!["Equal","NumpadAdd","Minus","NumpadSubstract","KeyM","KeyP","KeyF"].includes(t.code))}const Is=Ts;const Ps=(0,m.Z)(Is,i,o,!1,null,"7030de7d",null).exports}}]);