(globalThis.webpackChunk_flippingbook_publication=globalThis.webpackChunk_flippingbook_publication||[]).push([[14],{1355:(t,e,s)=>{s(4147).register({"download-attach":{width:16,height:16,viewBox:"0 0 18 18",data:'<path pid="0" d="M15.114 12H17v4a1 1 0 01-1 1H2a1 1 0 01-1-1v-4h1.885v3.114h12.23V12zM8 1h2v9.079l2.293-2.293L13.707 9.2 9 13.907 4.293 9.2l1.414-1.414L8 10.079V.999z"/>'}})},8305:(t,e,s)=>{s(4147).register({"download-full":{width:16,height:16,viewBox:"0 0 18 18",data:'<path pid="0" d="M13.2 15.222H4.8c-.514 0-.933-.399-.933-.889s.419-.889.933-.889h8.4v1.778zM12.267 1v6.222L10.4 5.444 8.533 7.222V1H4.8C3.253 1 2 2.194 2 3.667v10.666C2 15.806 3.253 17 4.8 17H16v-1.778h-.933v-1.778H16V1h-3.733z"/>'}})},7089:(t,e,s)=>{s(4147).register({"download-left":{width:16,height:16,viewBox:"0 0 18 18",data:'<path pid="0" d="M7 1h7c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V5.9L7 1zm7 14V3H9v5H4v7h10z"/>'}})},730:(t,e,s)=>{s(4147).register({"download-right":{width:16,height:16,viewBox:"0 0 18 18",data:'<path pid="0" d="M11 1H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V5.9L11 1zM4 15V3h5v5h5v7H4z"/>'}})},3202:(t,e,s)=>{s(4147).register({hamburger:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M4.1 17c-.7 0-1.1.584-1.1 1.365v1.27C3 20.512 3.4 21 4.1 21h15.8c.7 0 1.1-.78 1.1-1.365v-1.269c0-.878-.4-1.366-1.1-1.366H4.1zm0-7c-.7 0-1.1.6-1.1 1.4v1.3c0 .9.4 1.3 1.1 1.3h15.8c.7 0 1.1-.7 1.1-1.3v-1.4c0-.8-.4-1.3-1.1-1.3H4.1zm.035-7C3.435 3 3 3.5 3 4.3v1.3C3 6.5 3.435 7 4.135 7H19.9c.7 0 1.1-.7 1.1-1.3V4.4c0-.9-.4-1.4-1.1-1.4H4.135z"/>'}})},9145:(t,e,s)=>{s(4147).register({"up-arrow":{width:16,height:16,viewBox:"0 0 16 16",data:'<path pid="0" d="M2.008 10.993h11.979l-5.978-5.98-6.001 5.98"/>'}})},3087:(t,e,s)=>{s(4147).register({warn:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M11.898 3.01a9.153 9.153 0 00-8.888 9.206 8.857 8.857 0 008.888 8.783 9.088 9.088 0 007.514-4.233 9.087 9.087 0 001.587-4.656 9.313 9.313 0 00-9.1-9.1zm.106 15.873a7.058 7.058 0 01-6.772-6.879 6.963 6.963 0 016.666-6.878 7.058 7.058 0 016.773 6.878 6.964 6.964 0 01-6.667 6.879zm0-4.233c-.584 0-1.058.474-1.058 1.058.04.567.491 1.018 1.058 1.058.584 0 1.058-.474 1.058-1.058a1.141 1.141 0 00-1.058-1.058zm0-8.466a.995.995 0 00-1.058 1.058v5.291a.995.995 0 001.058 1.059.995.995 0 001.058-1.059v-5.29a.995.995 0 00-1.058-1.059z"/>'}})},6649:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>zt});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.containerClasses,style:t.containerStyle,attrs:{dir:t.dir}},[s("span",{staticClass:"status",attrs:{role:"status",tabindex:"-1"}},[t._v(t._s(t.status))]),t._v(" "),t.noticeShown?s("cookie-notice",{ref:"noticeBanner",on:{close:t.noticeClose}}):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"inner-container"},[s("div",t._g({class:t.mainClasses},t.isEmbed?{}:{touchstart:t.preventTouch}),[t.showProgress?s("simple-page-progress"):t._e(),t._v(" "),s("transition",{attrs:{name:"bars-fade"}},[t.showBars&&!t.isMobileApp?s("div",{staticClass:"top-bar-container"},[t.showInAppNotice?s("in-app-notice",{staticClass:"inside",attrs:{role:"alert"},on:{close:t.inAppClose}}):t._e(),t._v(" "),s("div",{staticClass:"top-bar-mobile",class:t.topBarClasses,attrs:{role:"menubar"},on:{touchstart:function(t){t.preventDefault()}}},[t.isEmbedLightbox?s("v-touch",{staticClass:"back-button svg-menu-button",attrs:{id:"toolbar-back-button",tag:"button",tabindex:"3",role:"menuitem"},on:{tap:t.backFromEmbedLightbox}},[s("svgicon",{attrs:{focusable:"false",name:"arrow-down"}})],1):t._e(),t._v(" "),t.showMenuIcon?s("v-touch",{staticClass:"menu-button svg-menu-button",attrs:{id:"toolbar-menu-button",tag:"button",tabindex:"4",title:t.$t("TopMenu.MENU"),"aria-label":t.$t("TopMenu.MENU"),"aria-haspopup":"dialog","aria-expanded":"false",role:"menuitem"},on:{tap:function(e){return t.openSidebar("toc",e)}}},[s("svgicon",{attrs:{focusable:"false",name:"hamburger"}})],1):t._e(),t._v(" "),s("v-touch",{staticClass:"title",attrs:{tag:"span",tabindex:"1",role:"heading","aria-level":"1",dir:t.titleDirection},on:{tap:t.titleTap}},[t._v("\n                            "+t._s(t.title)+"\n                        ")]),t._v(" "),t.accessiblePDF?s("v-touch",{staticClass:"accessibility-button svg-menu-button",attrs:{id:"toolbar-accessibility-button",tag:"button",tabindex:"2",title:t.$t("Accessibility.DOWNLOAD_TITLE"),"aria-label":t.$t("Accessibility.DOWNLOAD_TITLE"),role:"menuitem"},on:{tap:t.accessibilityShow},nativeOn:{click:function(e){return t.accessibilityShow(e,!0)}}},[s("svgicon",{attrs:{focusable:"false",name:"accessibility"}})],1):t._e(),t._v(" "),t.showSearchIcon?s("v-touch",{staticClass:"search-button svg-menu-button",attrs:{id:"toolbar-search-button",tag:"button",title:t.$t("TopMenu.SEARCH"),"aria-label":t.$t("TopMenu.SEARCH"),"aria-haspopup":"dialog","aria-expanded":"false",tabindex:"5",role:"menuitem"},on:{tap:function(e){return t.openSidebar("search",e)}}},[s("svgicon",{attrs:{focusable:"false",name:"search"}})],1):t._e()],1)],1):t._e()]),t._v(" "),s("v-touch",{attrs:{role:"application"},on:{tap:t.containerTap}},[s("book-container",{attrs:{size:t.bookContainerSize}})],1),t._v(" "),s("transition",{attrs:{name:"bars-fade"}},[t.showBars&&!t.isMobileApp?s("div",{staticClass:"bottom-bar-mobile",attrs:{role:"menubar"},on:{touchstart:function(t){t.preventDefault()}}},[t.showThumbsIcon?s("v-touch",{staticClass:"thumbnails-button svg-menu-button",attrs:{tag:"button","aria-label":t.$t("BottomMenu.THUMBNAILS_TIP"),"aria-haspopup":"dialog","aria-expanded":"false",role:"menuitem"},on:{tap:function(e){return t.openSidebar("thumbnails",e)}}},[s("svgicon",{attrs:{focusable:"false",name:"thumbnails"}})],1):s("span",{staticClass:"empty-button svg-menu-button"}),t._v(" "),t.displayPages?s("div",{staticClass:"pager-mobile"},[t._v(t._s(t.stateText))]):t._e(),t._v(" "),t.showLogo?s("logo",{key:t.logoKey}):t._e()],1):t._e()])],1),t._v(" "),t.isResizing?s("div",{ref:"rotate-indicator",staticClass:"rotate-indicator"},[s("spinner",{attrs:{size:48,"line-size":6,"line-fg-color":t.spinnerFgColor,"line-bg-color":t.spinnerBgColor}})],1):t._e(),t._v(" "),s("transition",{attrs:{name:"spinner-fade"}},[!t.isUpdating||t.isResizing||t.showSidebar?t._e():s("div",{staticClass:"update-indicator"},[s("spinner",{attrs:{size:24,"line-size":4,"line-fg-color":t.spinnerFgColor,"line-bg-color":t.spinnerBgColor}})],1)]),t._v(" "),t.isEmbed&&!t.miniFullScreen?s("v-touch",{class:t.clickToReadClass,attrs:{tag:"span"},on:{tap:t.clickToRead}},[t._v("\n            "+t._s(t.clickToReadText)+"\n        ")]):t._e(),t._v(" "),t.isEmbed&&t.miniFullScreen?s("v-touch",{class:t.miniFullscreenButtonClass,attrs:{tag:"span"},on:{tap:t.clickToRead}},[s("div",{staticClass:"fullscreen-button-mini-holder"},[s("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"open-link"}})],1)]):t._e(),t._v(" "),s("transition",{attrs:{name:"change-orientation"}},[t.isOrientationChanged?t._e():s("div",[s("transition",{attrs:{name:"sidebar-fade"}},[["toc"===t.currentWindow?s("toc-window"):t._e(),t._v(" "),"thumbnails"===t.currentWindow?s("th-window"):t._e(),t._v(" "),"search"===t.currentWindow?s("search-window"):t._e()]],2)],1)])],1),t._v(" "),t.flashMessageVisibility?s("flash-message",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}]}):t._e(),t._v(" "),s("lightbox",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}]})],1)},o=[],n=s(5343),a=s(8384),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("sidebar",{ref:"sidebar",class:t.sidebarClass,attrs:{title:t.title}},[t.isPreloader?s("div",{staticClass:"th-preloader",staticStyle:{position:"absolute",top:"0",width:"100%",height:"100%"},attrs:{slot:"preloader"},slot:"preloader"},[s("div",{staticClass:"preloader-container"},[s("spinner",{attrs:{size:36,"line-size":3,"line-fg-color":"#5692AE","line-bg-color":"#ffffff"}})],1)]):t._e(),t._v(" "),t.singleMode?s("v-touch",{staticClass:"th-wrapper",attrs:{dir:t.isRtl?"rtl":"ltr",role:"navigation"},on:{tap:t.onClick}},t._l(t.thumbsArray,(function(e){return s("th-item",{key:e.index,ref:"thArr",refInFor:!0,attrs:{data:e,showPreloader:e.index>=t.visibleMinIndex&&e.index<=t.visibleMaxIndex}})})),1):s("v-touch",{staticClass:"th-wrapper",attrs:{dir:t.isRtl?"rtl":"ltr",role:"navigation"},on:{tap:t.onClick}},t._l(t.thumbsArray,(function(e){return s("div",{ref:"thArr",refInFor:!0,class:"th-spread-wrapper"+(2===e.length?" double":""),style:t.spreadWrapperStyle},t._l(e,(function(e){return s("th-item",{key:e.index,attrs:{data:e,showPreloader:e.index>=t.visibleMinIndex&&e.index<=t.visibleMaxIndex}})})),1)})),0)],1)},l=[],c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["tool-window",{"mobile-app":t.isMobileApp}]},[t._t("preloader"),t._v(" "),s("header",{directives:[{name:"show",rawName:"v-show",value:t.isHeaderVisible,expression:"isHeaderVisible"}],staticClass:"tool-title-frame"},[s("h3",{ref:"title",staticClass:"tool-title",attrs:{tabindex:"-1"}},[t._v(t._s(t.title))]),t._v(" "),s("v-touch",{staticClass:"close-button svg-menu-button",class:t.closeButtonStyle,attrs:{tag:"button",role:"button","aria-label":t.closeLabel},on:{tap:t.close}},[s("svgicon",{attrs:{focusable:"false",name:"cancel"}})],1)],1),t._v(" "),t._t("subheader"),t._v(" "),s("div",{ref:"scroller",staticClass:"scroller",attrs:{id:"scroller"}},[s("div",{staticClass:"cont"},[t._t("default")],2)]),t._v(" "),s("footer",[t.footerTitle?s("h3",{staticClass:"tool-footer-title"},[t._v(t._s(t.footerTitle))]):t._e(),t._v(" "),t._t("footer")],2)],2)},h=[],d=s(5109);s(607),s(2731);let u;const p={props:{title:{type:String,required:!0},footerTitle:{type:String,required:!1,default:""},isHeaderVisible:{type:Boolean,required:!1,default:!0}},data:function(){return{sidebarRect:{},isMobileApp:"mobile-app"===this.$store.getters["info/version"]}},methods:{close:function(){this.isAndroid&&"search"===this.activeComponent&&"input"===document.activeElement?.tagName.toLowerCase()&&document.activeElement.blur(),this.$store.dispatch("sidebar/closeSidebar")},refresh:function(){this.$nextTick((function(){this.scrollComponent.refresh()}),this)},scrollToElement:function(t){void 0!==t.el&&this.scrollComponent.scrollToElement(t.el,t.speed,!0,!0)},getScrollPageSize(){return this.$refs.scroller.getBoundingClientRect()},onResize(){this.sidebarRect=this.$refs.scroller.getBoundingClientRect()},isVisible(t){if(!t||void 0===!t.getBoundingClientRect)return null;const e=this.sidebarRect,s=t.getBoundingClientRect();return s.left<e.right&&s.right>e.left&&s.top<e.bottom&&s.bottom>e.top}},computed:{isAndroid:function(){return this.$store.state.workspace.userAgentInfo.os.android},activeComponent:function(){return this.$store.state.sidebar.opened},closeButtonStyle:function(){return this.$store.getters["i18n/isLocaleRtl"]?"close-button-left":"close-button-right"},closeLabel(){switch(this.activeComponent){case"toc":return this.$t("Accessibility.CLOSE_DIALOG");case"thumbnails":return this.$t("ThumbnailsToolWindow.CLOSE_LABEL");case"search":return this.$t("SearchToolWindow.CLOSE_LABEL");default:return""}}},beforeCreate:function(){const t=this;u=function(e){"Escape"===e.code&&t.$store.dispatch("sidebar/closeSidebar")},window.addEventListener("keydown",u)},beforeDestroy:function(){window.removeEventListener("keydown",u),window.removeEventListener("resize",this.onResize),u=null},mounted:function(){this.scrollComponent=new d.ZP(document.getElementById("scroller"),{mouseWheel:!0,scrollbar:{fade:!0,interactive:!1},probeType:0,autoBlur:!1,disablePointer:!0,disableTouch:!1,disableMouse:!1,resizePolling:200,bounce:!1}),this.onResize(),window.addEventListener("resize",this.onResize),this.$nextTick((()=>{this.$refs.title.focus()}))}};var g=s(1900);const m=(0,g.Z)(p,c,h,!1,null,null,null).exports;var b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.wrapperClasses,style:t.itemStyles,attrs:{"data-id":t.data.id,"data-index":t.data.index,role:"button","aria-label":t.hasDoubleCaption?t.captions.left+" "+t.captions.right:t.data.caption}},[s("div",{staticClass:"th-img-element",style:t.itemStyles},[s("thumb",{attrs:{id:t.data.id,side:t.data.side,size:t.data.size,contentCrop:t.contentCrop,showPreloader:t.showPreloader}})],1),t._v(" "),t.hasDoubleCaption?[s("div",{staticClass:"th-item-title wide-title",attrs:{dir:"ltr"}},[s("div",{staticClass:"title-half"},[t._v(t._s(t.captions.left))]),t._v(" "),s("div",{staticClass:"title-half"},[t._v(t._s(t.captions.right))])])]:s("span",{staticClass:"th-item-title",attrs:{dir:t.textDirection}},[t._v(t._s(t.data.caption))])],2)},f=[];const w={name:"ThItem",mixins:[s(663).Z],props:{showPreloader:{type:Boolean,required:!0}},computed:{hasDoubleCaption(){return this.data.wide&&!this.slideMode&&!this.singleMode},isRtl:function(){return this.$store.state.book.rightToLeft},wrapperClasses:function(){const t={"th-item-wrapper":!0};return t["p"+this.data.index]=!0,t.wide=!this.data.sm&&!!this.data.wide,t["side-right"]=this.data.sm&&!!this.data.wide&&("right"===this.data.side&&!this.isRtl||"left"===this.data.side&&this.isRtl),t},captions(){const t=this.data.caption.split(" - ");return{left:t[0],right:t[1]||t[0]}}}};const v=(0,g.Z)(w,b,f,!1,null,"418876a7",null).exports;var $=s(3549),C=s(2918),_=s(9426),k=s(5622),T=s(320);const x=10,S=10,L=150,I={data:function(){return{visibleMinIndex:null,visibleMaxIndex:null,thumbsData:[],scrollTimeout:0,onScroll:!1}},mixins:[$.Z],computed:{thumbnails(){return this.$store.state.thumbnails.thumbnails},getScrollPageSize:function(){return this.$children[0].getScrollPageSize()},isPreloader:function(){return!this.thumbsArray||0===this.thumbsArray.length&&this.hasPages},tablet:function(){return this.$store.state.workspace.userAgentInfo.device.ipad},columnsNumber(){const t=this.landscapePages&&!this.slideMode?L:L/1.46,e=this.singleMode?t/2:t;return Math.max(2,Math.floor((this.workspaceSize.width-x)/(e+S)))},landscapePages:function(){return this.$store.getters["pages/size"].width>this.$store.getters["pages/size"].height},workspaceSize:function(){return this.$refs.sidebar.sidebarRect},thumbsArray:function(){return this.thumbsData},sidebarClass:function(){const t=this.$store.getters["i18n/isLocaleRtl"];return{single:this.pagerState.singleMode,tablet:this.tablet,onscroll:this.onScroll,"panel-left":!t,"panel-right":t}},spreadWrapperStyle:function(){return{width:this.thumbDoubleSizes.width+"px",height:this.thumbDoubleSizes.height+"px"}}},methods:{thumbsArrayData:function(){if(!this.hasPages)return;if(this.thumbnails)return void(this.thumbsData=this.thumbnails);const t=[];let e;if(this.singleMode){e=this.thumbDoubleSizes;for(let s=0;s<this.$store.state.pages.structure.length;s++){const i=this.$store.state.pages.structure[s];if(null===i)continue;const o={};if(o.id=i,o.index=this.$store.getters["pages/pageIndexById"](o.id),o.wide=this.$store.getters["pages/pageProp"](i,"wide"),o.caption=this.$store.getters["pages/pageCaptionByIndex"](o.index),o.size=e,o.sm=!0,o.wide){o.side=this.isRtl?"right":"left",t.push(o);const e=Object.assign({},o);e.index=o.index+1,e.caption=this.$store.getters["pages/pageCaptionByIndex"](e.index),e.side=this.isRtl?"left":"right",t.push(e)}else t.push(o)}}else{let s=[];s.isWide=!1,e=this.thumbSizes;const i=this.thumbDoubleSizes;for(let o=0;o<this.$store.state.pages.structure.length;o++){const n=this.$store.state.pages.structure[o];if(null===n)continue;const a={};a.id=n,a.index=this.$store.getters["pages/pageIndexById"](a.id),a.wide=this.$store.getters["pages/pageProp"](n,"wide"),a.caption=this.$store.getters["pages/pageCaptionById"]({id:a.id}),a.size=this.slideMode?this.getSlideThumbSizes(n):a.wide?i:e,a.sm=!1,(0!==s.length||a.index%2!=0||0===a.index||this.slideMode)&&(a.wide&&(s.isWide=!0),s.push(a),(this.slideMode||a.wide||a.index%2==0||0===a.index)&&(t.push(s),s=[]))}s&&s.length>0&&t.push(s)}this.thumbsData=t,this.$store.dispatch("thumbnails/setThumbnails",this.thumbsData)},setActiveThumbnail(){const t=this.$el.querySelector(".active");t&&t.classList.remove("active");const e=this.pagerState.currentPage;let s=this.$store.getters["pages/pageIndexById"](e);if(this.singleMode){const t=this.$store.getters["pages/pageProp"](e,"wide"),i=this.pagerState.pageSide===(this.isRtl?"left":"right");t&&i&&s++}const i=this.$el.querySelector(`[data-index="${s}"]`);if(!i)return;const o=this.singleMode||this.slideMode?i:i.parentElement;o&&(o.classList.add("active"),this.$children[0].scrollToElement({el:o,speed:0}))},getWrapperRect(t){const e=Math.floor((this.workspaceSize.width-x)/this.columnsNumber)-S,s=Math.floor(e*this.$store.getters["pages/size"].height/this.$store.getters["pages/size"].width);return{width:Math.floor(e/(t?1:2)),height:s}},getThumbSizes:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e={width:this.$store.getters["pages/size"].width*(this.singleMode||!t||this.slideMode&&this.landscapePages?1:2),height:1*this.$store.getters["pages/size"].height},s=(0,C.Tj)(e,this.getWrapperRect(t));return{width:Math.round(s.width),height:Math.round(s.height)}},getSlideThumbSizes:function(t){const e={width:this.$store.getters["pages/pageProp"](t,"width"),height:this.$store.getters["pages/pageProp"](t,"height")},s=(0,C.Tj)(e,this.thumbDoubleSizes);return{width:Math.round(s.width),height:Math.round(s.height)}},checkScroll:function(){if(Date.now()<this.scrollTimeout||!this.hasPages)return;let t,e=null;for(let s=0,i=this.$refs.thArr.length;s<i;s++){const i=this.singleMode?this.$refs.thArr[s].$el:this.$refs.thArr[s];if(this.isVisibleFunc(i))e=null===e?s:e,t=s;else if(null!==e)break}this.singleMode?e=null===this.$store.state.pages.structure[e]?e-1:e:(e=this.thumbsData[e][0].index,t=this.thumbsData[t][1]?this.thumbsData[t][1].index:this.thumbsData[t][0].index),this.visibleMinIndex!==e&&this.visibleMaxIndex!==t&&(this.$store.dispatch("thumbnails/changeRange",{minPage:e,maxPage:t}),this.visibleMinIndex=e,this.visibleMaxIndex=t)},isVisibleFunc(t){return this.$refs.sidebar.isVisible(t)},onScrollEnd:function(){this.onScroll&&(this.onScroll=!1,this.scrollTimeout=Date.now()+500),setTimeout(this.checkScroll,500)},onScrollStart:function(){this.onScroll=!0,this.scrollTimeout=Date.now()+500},onClick:function(t){if(Date.now()<this.scrollTimeout-300)return;const e=(0,k.iZ)(t.target);for(let s=0,i=e.length;s<i;s++){const t=e[s].className;if((0,T.HD)(t)&&t.indexOf("th-item-wrapper")>-1){const i=e[s].getAttribute("data-id");this.$store.dispatch("pager/goToPageById",{id:i,target:"thumbnails",widePageSecondHalf:t.indexOf("side-right")>-1}),this.$store.dispatch("sidebar/closeSidebar");break}}},rebuild(){this.thumbsArrayData(),this.$children[0].refresh(),this.checkScroll()}},watch:{numerationOffset:"rebuild",lowercaseRomans:"rebuild"},components:{sidebar:m,"th-item":v,spinner:_.Z},mounted:function(){const t=this;setTimeout((function(){t.thumbsArrayData(),t.$children[0].refresh(),t.$children[0].scrollComponent.on("scrollEnd",t.onScrollEnd),t.$children[0].scrollComponent.on("scrollStart",t.onScrollStart),t.$nextTick((function(){t.setActiveThumbnail(),setTimeout(t.checkScroll,100)}))}),this.thumbnails?0:100)},beforeDestroy(){this.$children[0].scrollComponent.off("scrollEnd",this.onScrollEnd),this.$children[0].scrollComponent.off("scrollStart",this.onScrollStart)}};const y=(0,g.Z)(I,r,l,!1,null,"3fec3e67",null).exports;var P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("sidebar",{class:t.sidebarClass,attrs:{title:t.title}},[s("ul",{staticClass:"toc-items",class:{"additional-padding":t.level2Items,"flat-padding":!t.level2Items},attrs:{role:"tree"}},t._l(t.tocItems,(function(e,i){return s("toc-item",{key:i,attrs:{"item-data":e,depth:"0"},on:{updateHeight:t.updateHeight}})})),1),t._v(" "),t.showDownloads?s("downloads",{attrs:{slot:"footer"},slot:"footer"}):t._e()],1)},E=[],M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"toc-item"},[s("p",{staticClass:"list-item toc-item-button",class:{haschildren:t.itemData.children},style:t.isLocaleRtl?"padding-right: "+t.paddingLeft+"px;":"padding-left: "+t.paddingLeft+"px;"},[t.openChildIcon||!t.pageLabel?s("v-touch",{staticClass:"icon",attrs:{tag:"span"},on:{tap:t.toggleOpen}},[s("svgicon",{staticClass:"icon",attrs:{focusable:"false",name:t.openChildIcon}})],1):t._e(),t._v(" "),s("v-touch",{staticClass:"toc-item-title",attrs:{tag:"span",dir:t.textDirection,role:"button","aria-label":t.itemData.title,"aria-haspopup":t.itemData.children?"tree":null,"aria-expanded":t.itemData.children?t.itemData.toggle?"true":"false":null,tabindex:"0"},domProps:{innerHTML:t._s(t.itemTitle)},on:{tap:function(e){return t.goToPage(t.itemData.page)}}}),t._v(" "),t.pageLabel&&t.showPageLabels?s("v-touch",{staticClass:"page-label",attrs:{tag:"span",role:"button","aria-label":t.pageLabel,"aria-haspopup":t.itemData.children?"tree":null,"aria-expanded":t.itemData.children?t.itemData.toggle?"true":"false":null,tabindex:"0"},on:{tap:function(e){return t.goToPage(t.itemData.page)}}},[t._v(t._s(t.pageLabel))]):t._e()],1),t._v(" "),t.itemData.children&&t.itemData.toggle?s("ul",{staticClass:"toc-sub-item-ul"},t._l(t.itemData.children,(function(e,i){return s("toc-item",{key:i,attrs:{"item-data":e,depth:1*t.depth+1}})})),1):t._e()])},A=[],z=s(3760);s(5274),s(9145);const D={mixins:[z.Z],name:"TocItem",computed:{paddingLeft:function(){return this.depth<=2?20*this.depth:60},openChildIcon:function(){return this.itemData.children?this.itemData.toggle?"up-arrow":"down-arrow":null}},methods:{goToPage:function(t){this.$store.dispatch("pager/goToPageByIndex",{target:"toc",pageIndex:t-1}),this.$store.dispatch("sidebar/closeSidebar")}}};const R=(0,g.Z)(D,M,A,!1,null,"5279b91b",null).exports;var N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"downloads",style:t.drawerStyle},[s("v-touch",{staticClass:"download-header",attrs:{tag:"div",role:"button","aria-label":t.$t("SaveWindow.TITLE"),"aria-haspopup":"menu","aria-expanded":t.showCustom?"true":"false","aria-controls":"download-items"},on:{tap:t.toggleShowCustom}},[s("span",[t._v(t._s(t.$t("SaveWindow.TITLE")))]),t._v(" "),t.customFiles||t.pageFiles||t.fullPdf?s("button",{class:"arrow "+(t.showCustom?"open":"closed"),attrs:{"aria-label":t.$t("SaveWindow.TITLE"),"aria-haspopup":"menu","aria-expanded":t.showCustom?"true":"false","aria-controls":"download-items"}},[s("svgicon",{attrs:{focusable:"false",name:"arrow-down"}})],1):t._e()]),t._v(" "),s("div",{staticClass:"download-items",attrs:{id:"download-items"}},[s("div",{ref:"scroller",attrs:{id:"download-scroller"}},[s("div",{staticClass:"cont"},[s("ul",[t.fullPdf?s("v-touch",{staticClass:"download-item full",attrs:{tag:"li"},on:{tap:function(e){return t.downloadFullPdf()}}},[s("a",{ref:"linkFull",attrs:{target:"_blank",title:t.fullTooltip,"aria-label":t.fullTooltip}},[s("span",{staticClass:"download-icon"},[s("svgicon",{attrs:{focusable:"false",name:"download-full"}})],1),t._v(" "),s("div",{staticClass:"download-title",attrs:{"aria-label":t.fullTooltip}},[t._v(t._s(t.pagesTitle.full))]),t._v(" "),s("span",{staticClass:"download-size"},[s("bdi",[t._v(t._s(t.fullPdf.size))])])])]):t._e(),t._v(" "),t._l(t.filesArray,(function(e,i){return s("v-touch",{key:i,staticClass:"download-item custom",attrs:{tag:"li"},on:{tap:function(s){return t.download(e,i)}}},[s("a",{ref:"linkPage",refInFor:!0,attrs:{target:"_blank",title:e.tooltip,"aria-label":e.tooltip}},[s("span",{staticClass:"download-icon"},[s("svgicon",{attrs:{focusable:"false",name:e.icon}})],1),t._v(" "),s("div",{staticClass:"download-title",attrs:{"aria-label":e.tooltip}},[t._v(t._s(e.title))]),t._v(" "),s("span",{staticClass:"download-size"},[s("bdi",[t._v(t._s(e.size))])])])])}))],2)])])])],1)},F=[],O=s(462),B=(s(8305),s(7089),s(730),s(1355),s(776));const H={mixins:[O.Z],name:"Downloads",data:function(){return{showCustom:!this.$store.state.toc.enabled}},mounted:function(){this.scrollComponent=new d.ZP(document.getElementById("download-scroller"),{mouseWheel:!0,scrollbar:{fade:!1},probeType:0,disablePointer:!0,disableTouch:!1,disableMouse:!1,resizePolling:200,bounce:!1}),this.refresh(),this.showCustom&&this.$root.$emit("window",{action:"open",component:"download"})},beforeDestroy(){this.showCustom&&this.$root.$emit("window",{action:"close",component:"download"})},computed:{drawerStyle:function(){const t={};let e=this.filesArray.length;return this.fullPdf&&e++,e>0&&(this.isRetina?t.marginBottom=this.showCustom?0:(e<=3?-90*e:-360)+"px":t.marginBottom=this.showCustom?0:(e<=3?-45*e:-180)+"px"),t},filesArray(){const t=[];return this.pageFiles&&this.pageFiles.filter((t=>t.ready)).forEach((e=>{t.push({title:1===this.pageFiles.length?this.pagesTitle.one:this.pagesTitle[e.side],tooltip:1===this.pageFiles.length?this.pagesTooltip.one:this.pagesTooltip[e.side],url:()=>(0,B.Z)().translatePath(e.url),type:"page",size:e.size,icon:"right"===e.side?"download-right":"download-left",fileName:e.fileName,pageId:e.pageId})})),this.customFiles&&this.customFiles.forEach((e=>{t.push({title:e.title,tooltip:this.windowTitle+" "+e.title,url:()=>(0,B.Z)().translatePath(e.url),type:"custom",size:e.size,icon:"download-attach",fileName:e.fileName})})),t}},methods:{downloadFullPdf:function(){this.$refs.linkFull&&(this.$refs.linkFull.href=(0,B.Z)().translatePath(this.fullPdf.url),this.$refs.linkFull.click(),this.emitDownloadEvent({type:"full",fileName:this.fullPdf.fileName}))},download:function(t,e){this.$refs.linkPage&&this.$refs.linkPage[e]&&(this.$refs.linkPage[e].href=t.url(),this.$refs.linkPage[e].click(),this.emitDownloadEvent(t))},emitDownloadEvent:function(t){const e={action:"downloaded",option:t.type,fileName:t.fileName,leftPageUrl:this.$store.getters["pages/urlHeaderById"]({id:this.pagerState.leftPage}),rightPageUrl:this.$store.getters["pages/urlHeaderById"]({id:this.pagerState.rightPage})};"page"===t.type&&(e.downloadPage=this.$store.getters["pages/urlHeaderById"]({id:t.pageId})),this.$root.$emit("download",e)},toggleShowCustom:function(){this.showCustom=!this.showCustom,this.$root.$emit("window",{action:this.showCustom?"open":"close",component:"download"}),setTimeout((()=>{this.refresh()}),300)},refresh:function(){this.$parent.refresh(),this.scrollComponent.refresh()}}};const W=(0,g.Z)(H,N,F,!1,null,"4a6f89e7",null).exports;const U={mixins:[s(8002).Z],components:{tocItem:R,sidebar:m,downloads:W},computed:{title:function(){return this.$store.state.toc.enabled?this.$i18n.t("TOCToolWindow.TITLE"):""},footerTitle:function(){return this.showDownloads?this.$i18n.t("SaveWindow.TITLE"):null},showDownloads:function(){const t=this.$store.state.downloads;return t.enabled&&(t.url&&t.allPagesVisible||!(0,T.xb)(t.pageFiles)&&t.currentPagesVisible||!(0,T.xb)(t.customFiles)&&t.customFiles[0].url)},sidebarClass:function(){const t=this.$store.getters["i18n/isLocaleRtl"];return{"sidebar-left":!t,"sidebar-right":t}}},beforeDestroy:function(){this.$store.dispatch("toc/saveScrollY",this.$children[0].scrollComponent.y)},mounted:function(){this.$children[0].refresh(),this.$children[0].scrollComponent.scrollTo(0,this.$store.state.toc.scrollY),this.$root.$emit("develop",{action:"toc",data:0===this.tocItems.length?"empty":"full"})}},Z=U;const V=(0,g.Z)(Z,P,E,!1,null,"0c0a1d1b",null).exports;var K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("sidebar",{class:t.sidebarClass,attrs:{title:t.title,icon:t.icon,isHeaderVisible:t.isHeaderVisible}},[s("div",{staticClass:"container"},[s("div",{staticClass:"tool-header",attrs:{slot:"subheader",id:"tool-header",role:"search"},slot:"subheader"},[s("div",{staticClass:"search-input-block"},[s("label",[s("span",{staticClass:"search-icon"},[s("svgicon",{attrs:{focusable:"false",name:"search"}})],1),t._v(" "),t.showClear?s("v-touch",{staticClass:"clear-icon",attrs:{tag:"span"},on:{tap:t.clear}},[s("svgicon",{attrs:{focusable:"false",name:"rounded-close"}})],1):t._e(),t._v(" "),s("v-touch",{on:{tap:t.onSearchInputTap}},[s("input",{ref:"searchInput",attrs:{type:"search",placeholder:t.placeholder,dir:t.inputDir},on:{input:function(e){return t.input(e.target.value)},keyup:function(e){return t.keyUp(e)}}})])],1),t._v(" "),s("v-touch",{class:["filters-icon",{active:t.showFilters}],attrs:{tag:"button",tabindex:"0","aria-label":t.localization.filtersTitle,title:t.localization.filtersTitle,"aria-haspopup":"menu","aria-expanded":t.showFilters?"true":"false","aria-controls":"search-filters"},on:{tap:t.toggleFilters}},[s("svgicon",{attrs:{name:"equalizer"}})],1)],1),t._v(" "),t.showFilters?s("div",{staticClass:"filters",attrs:{id:"search-filters"}},[s("label",t._g({staticClass:"checkbox-container exact-match-label",attrs:{role:"checkbox","aria-checked":t.exactMatch?"true":"false",for:"exact-match-checkbox-mobile",tabindex:"0"}},t.editorMode?{click:t.toggleExactMatch}:{touchend:t.toggleExactMatch}),[s("input",{staticClass:"exact-match-checkbox",attrs:{id:"exact-match-checkbox-mobile",type:"checkbox","aria-label":t.localization.exactMatchLabel},domProps:{checked:t.exactMatch}}),t._v(" "),s("div",{staticClass:"checkbox-body"}),t._v(" "),s("span",{attrs:{"aria-hidden":"true"}},[t._v("\n                        "+t._s(t.localization.exactMatchLabel)+"\n                    ")])])]):t._e(),t._v(" "),s("div",{staticClass:"search-sub-header subheader"},[t.subtitle?s("span",{staticClass:"search-results-count"},[t._v("\n                    "+t._s(t.subtitle)+"\n                ")]):t._e(),t._v(" "),t.preloaderVisible?s("div",{staticClass:"search-live-preloader"},[s("div",{staticClass:"dot"})]):t._e()])]),t._v(" "),s("ul",t._l(t.results,(function(t){return s("search-result-item",{key:t.pageId+"-"+t.widePageSecondHalf,attrs:{"item-data":t,depth:"0"}})})),1)])])},q=[],G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{class:"search-item p"+t.pageId},[s("v-touch",{staticClass:"list-item search-item-p",attrs:{tag:"p"},on:{tap:function(e){return t.onClick()}}},[s("span",{staticClass:"search-item-title",attrs:{dir:"ltr"}},[t._v(t._s(t.title))]),t._v(" "),s("span",{staticClass:"search-item-result"},[s("bdi",[t._l(t.textData,(function(e){return[e.emphasize?[s("b",[t._v(t._s(e.text))])]:[t._v(t._s(e.text))]]}))],2)]),t._v(" "),t.moreResults?s("span",{staticClass:"search-item-more"},[t._v(t._s(t.moreResults))]):t._e()])],1)},Y=[];const j={mixins:[s(3866).Z],methods:{onClick:function(){const t=this.pageId.toString(),e=this.$store.getters["search/getRightWideHalfSelection"](t),s=this.itemData.widePageSecondHalf??e;this.$store.dispatch("sidebar/closeSidebar"),this.$store.dispatch("pager/goToPageById",{id:t,target:"search",widePageSecondHalf:s})}}};const X=(0,g.Z)(j,G,Y,!1,null,"23f6d61b",null).exports;s(9074),s(6010),s(5958);const Q={mixins:[s(2248).Z],components:{"search-result-item":X,sidebar:m},data:function(){return{showFilters:!1,isInputFocusedFirstTime:!1}},mounted(){this.$refs.searchInput.value=this.$store.state.search.query,this.$children[0].scrollComponent.scrollTo(0,this.$store.state.search.scrollY),this.$children[0].scrollComponent.on("scrollStart",this.blurFocus),this.setInputDir(),this.$store.getters["workspace/shouldActivateSearchKeyboard"]&&this.$nextTick((()=>{this.isInputFocusedFirstTime=!this.isPortrait&&document.documentElement.clientHeight<350,this.focusInput()})),this.$store.state.search.query&&(this.showClear=!0),this.$refs.searchInput.addEventListener("blur",this.onSearchInputBlur)},computed:{localization(){return{filtersTitle:this.$i18n.t("SearchToolWindow.FILTERS_BUTTON"),exactMatchLabel:this.$i18n.t("SearchToolWindow.EXACT_MATCH_LABEL")}},subtitle:function(){return this.searchQueryIsEmpty?null:this.isInitializing?this.$i18n.t("SearchToolWindow.INITIALIZING"):this.$store.state.search.query.length<this.$store.state.search.searchCharactersLimit?this.$i18n.t("SearchToolWindow.MIN_WORD_ERRROR",this.$store.state.search.searchCharactersLimit,{0:this.$store.state.search.searchCharactersLimit}):this.isSearching?this.$i18n.t("SearchToolWindow.SEARCH_IN_PROGRESS"):0===this.$store.state.search.results.length&&100===this.progress?this.$i18n.t("SearchToolWindow.NOTHING_FOUND"):this.$i18n.tc("SearchToolWindow.PAGES_FOUND",this.$store.state.search.results.length,{0:this.$store.state.search.results.length})},title:function(){return this.$i18n.t("SearchToolWindow.TITLE")},placeholder:function(){return this.$i18n.t("SearchToolWindow.QUERY_PLACEHOLDER")},icon:function(){return"search"},sidebarClass:function(){const t=this.$store.getters["i18n/isLocaleRtl"];return{"sidebar-left":t,"sidebar-right":!t}},isAndroid:function(){return this.$store.state.workspace.userAgentInfo.os.android},editorMode(){return!!this.$store.state.workspace.userAgentInfo.browser.publisher},androidKeyboardOpened(){return this.$store.state.workspace.isAndroidKeyboardOpened},isHeaderVisible(){return!this.isInputFocusedFirstTime}},methods:{focusInput:function(){const t=this.$refs.searchInput;t.focus(),t.selectionStart=t.value.length,this.$root.$children[0].onResize(null,!0)},onSearchInputTap:function(){this.isAndroid?setTimeout(this.focusInput,1):this.focusInput()},blurFocus:function(){"input"===document.activeElement?.tagName.toLowerCase()&&document.activeElement.blur()},keyUp:function(t){"Enter"===t.code&&document.activeElement?.blur()},toggleFilters:function(){this.showFilters=!this.showFilters},toggleExactMatch:function(t){t.preventDefault(),this.exactMatch=!this.exactMatch},onSearchInputBlur:function(){this.isInputFocusedFirstTime=!1}},beforeDestroy:function(){this.$children[0].scrollComponent.off("scrollStart",this.blurFocus),this.$store.dispatch("search/saveScrollInfo",{y:this.$children[0].scrollComponent.y,loadedTo:0}),this.$refs.searchInput.removeEventListener("blur",this.onSearchInputBlur)},watch:{results:function(){this.$children[0].refresh()},androidKeyboardOpened:function(t,e){!t&&e&&this.blurFocus()}}};const J=(0,g.Z)(Q,K,q,!1,null,"187ef532",null).exports;var tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("notice",{on:{close:t.close}},[s("span",{attrs:{"aria-hidden":"true"}},[s("svgicon",{staticClass:"in-app-warn-icon",attrs:{focusable:"false",name:"warn"}})],1),t._v(" "),s("div",{staticClass:"notice-text"},[s("span",{staticClass:"text"},[t._v("\n            "+t._s(t.localization.mainText)+"\n            "),t.showMore?t._e():s("v-touch",{staticClass:"link",attrs:{tag:"a",role:"button",title:t.localization.learnMore},on:{tap:t.showMoreToggle}},[t._v(t._s(t.localization.learnMore))])],1),t._v(" "),t.showMore?s("span",{staticClass:"text"},[t._v("\n            "+t._s(t.localization.moreText1)+"\n            "),s("a",{ref:"copyURL",staticClass:"link",attrs:{"data-clipboard-text":t.currentUrl,role:"button",title:t.localization.tapHere},on:{touchstart:function(t){t.stopPropagation()}}},[t._v(t._s(t.localization.tapHere))]),t._v("\n            "+t._s(t.localization.moreText2)+"\n            "),t.showMore?s("v-touch",{staticClass:"link",attrs:{tag:"a",role:"button",title:t.localization.hide},on:{tap:t.showMoreToggle}},[t._v(" "+t._s(t.localization.hide))]):t._e()],1):t._e()])])},et=[],st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"banner-notice"},[t._t("default"),t._v(" "),s("v-touch",{staticClass:"close-icon",attrs:{tag:"span"},on:{tap:t.close}},[s("svgicon",{attrs:{focusable:"false",name:"cancel"}})],1)],2)},it=[];const ot={props:{show:{type:Boolean,default:!1}},methods:{close(){this.$emit("close")}}};const nt=(0,g.Z)(ot,st,it,!1,null,"dc9b83ca",null).exports;s(3087);var at=s(2152),rt=s.n(at);const lt={extends:nt,components:{Notice:nt},data:()=>({showMore:!1}),computed:{isIos(){return this.$store.state.workspace.userAgentInfo.os.ios},currentUrl:()=>(0,B.Z)().getShareUrl(!0),localization(){return{mainText:this.$i18n.t("AlertWindow.IN-APP_NOTICE_TEXT",[this.browserName]),learnMore:this.$i18n.t("AlertWindow.IN-APP_NOTICE_MORE_LINK"),tapHere:this.$i18n.t("AlertWindow.IN-APP_NOTICE_COPY_LINK"),moreText1:this.$i18n.t("AlertWindow.IN-APP_NOTICE_DESCRIPTION_1",[this.browserName]),moreText2:this.$i18n.t("AlertWindow.IN-APP_NOTICE_DESCRIPTION_2",[this.browserName]),hide:this.$i18n.t("AlertWindow.IN-APP_NOTICE_HIDE_LINK")}},browserName(){return this.isIos?this.$i18n.t("Other.IOS_DEFAULT_BROWSER"):this.$i18n.t("Other.ANDROID_DEFAULT_BROWSER")}},watch:{showMore(t){t?this.$nextTick((()=>{this.enableClipboard()})):this.disableClipboard()}},methods:{close(){(0,B.Z)().getLocalStorage().setItem("in-app_notice_dismissed","true"),this.$emit("close")},showMoreToggle(){this.showMore=!this.showMore},enableClipboard(){this.copyURLClipboard=new(rt())(this.$refs.copyURL),this.copyURLClipboard.on("success",(t=>{this.$store.dispatch("workspace/setFlashMessage",{text:this.$i18n.t("AlertMessage.LINK_COPIED")})}))},disableClipboard(){this.copyURLClipboard.destroy()}}};const ct=(0,g.Z)(lt,tt,et,!1,null,"8f711cb2",null).exports;var ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("notice",{on:{close:t.close}},[s("span",{staticClass:"notice-text",domProps:{innerHTML:t._s(t.text)}})])},dt=[];const ut={extends:nt,components:{Notice:nt},mounted(){setTimeout((()=>{const t=this.$el.getElementsByTagName("a")[0];t&&t.addEventListener("touchstart",(function(e){e.stopPropagation(),t.click()}))}),100)},computed:{text(){return this.customText?this.customText:this.$t("Other.COOKIE_POLICY_NOTICE")},customText(){if(this.$store.state.workspace.cookieNotice.link){const t=this.$t("Other.CUSTOM_POLICY_LINK_CAPTION"),e='<a href="'+this.$store.state.workspace.cookieNotice.link+'" target="_blank" title="'+t+'">'+t+"</a>";return this.$t("Other.CUSTOM_POLICY_TEXT",{0:e})}return null}},methods:{close(){(0,B.Z)().getLocalStorage().setItem("fb_cookieNotice_dismissed","true"),this.$emit("close"),setTimeout((()=>{this.$store.commit("workspace/SET_BANNER_HEIGHT",0)}),100)}}};const pt=(0,g.Z)(ut,ht,dt,!1,null,"0bab3b32",null).exports;var gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-progress-container",attrs:{dir:t.dir}},[s("div",{staticClass:"page-progress-filler",style:{width:t.progress+"%"}})])},mt=[];const bt={computed:{progress(){const t=this.$store.getters["pages/pagesCount"],e=this.$store.getters["pager/state"],s=e.currentPage,i=(e.wide||e.leftPage&&e.rightPage)&&!e.singleMode;return 100*(e.widePageSecondHalf||i?this.$store.getters["pages/pageIndexById"](s)+2:this.$store.getters["pages/pageIndexById"](s)+1)/t},dir(){return this.$store.state.book.rightToLeft?"rtl":"ltr"}}};const ft=(0,g.Z)(bt,gt,mt,!1,null,null,null).exports;var wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-touch",{staticClass:"logo-touch",attrs:{tag:t.logoLink?"button":"div",role:t.logoLink?"link":"none","aria-label":t.label},on:{tap:t.onTap}},[s("div",{staticClass:"logo-container"},[t.customLogoUrl?s("img",{staticClass:"logo-custom",attrs:{src:t.customLogoUrl}}):s("svgicon",{staticClass:"logo-svg",attrs:{name:"made-with",focusable:"false"}})],1)])},vt=[],$t=s(9937);const Ct={name:"Logo",data:function(){return{customLogoUrl:null}},computed:{currentPage:function(){return this.$store.getters["pager/state"].currentPage},rawCustomLogoUrl:function(){return this.$store.getters["logo/customLogoUrl"]},hasDefaultLogo:function(){return this.$store.getters["logo/hasDefaultLogo"]},showLogo:function(){return this.$store.getters["logo/showLogo"]},logoLink:function(){return this.$store.state.logo.url},label(){return this.logoLink?this.$i18n.t("TopMenu.EXTERNAL_LINK_TIP",{0:this.logoLink}):null}},watch:{rawCustomLogoUrl:"loadCustomLogo"},mounted:function(){this.loadCustomLogo()},methods:{onTap:function(){this.logoLink&&window.open(this.logoLink,"_blank");const t=this.currentPage;this.$root.$emit("link",{type:"external",source:"logo",url:this.logoLink,target:"_blank",pageId:t})},loadCustomLogo:function(){this.rawCustomLogoUrl&&(0,$t.Z)({url:this.rawCustomLogoUrl,callback:t=>{this.customLogoUrl&&window.URL.revokeObjectURL(this.customLogoUrl),this.customLogoUrl=t}})}}};const _t=(0,g.Z)(Ct,wt,vt,!1,null,"bc6c49ca",null).exports;var kt=s(562),Tt=s(7592),xt=(s(1083),s(3202),s(5606),s(5903),s(6722),s(5284),s(90)),St=s(8531),Lt=s(6382),It=s.n(Lt);let yt,Pt;const Et=window.location!==window.parent.location,Mt={mixins:[kt.Z],data:function(){return{isOrientationChanged:null,layout:"mobile",windowWidth:document.documentElement.clientWidth,windowHeight:document.documentElement.clientHeight,showBars:!this.checkEmbed(),isEmbedLightbox:this.checkEmbedLightbox(),isProtected:this.$store.state.workspace.isProtected,fullscreen:!1,noticeShown:!1,showInAppNotice:!1,tapTimeout:0,flipCountTrigger:0,miniFullScreen:!1,androidKeyboardShift:0,androidTempHeight:null,customLogoUrl:null}},beforeCreate:function(){this.$root.$emit("log",{message:"beforeCreate mobile layout"}),this.$store.dispatch("workspace/setLayout","mobile")},beforeMount(){this.noticeShown=this.cookieNoticeShouldShow()},mounted:function(){this.$root.$emit("log",{message:"mounted mobile layout"}),window.addEventListener("resize",this.onResize),document.addEventListener("fullscreenchange",this.onFullscreenChange),document.addEventListener("webkitfullscreenchange",this.onWebkitfullscreenChange),this.onResize(null,!0),this.isEmbed&&this.$el.parentNode.classList.add("embed"),setTimeout((()=>{this.noticeShown&&this.$refs.noticeBanner&&this.$store.commit("workspace/SET_BANNER_HEIGHT",this.$refs.noticeBanner.$el.getBoundingClientRect().height)}),500),this.checkPreloader(),this.loadCustomLogo(),this.$root.$once("pageLoaded",(()=>{this.$root.onPublicationLoad({})})),this.checkInApp()},beforeDestroy:function(){window.removeEventListener("resize",this.onResize),document.removeEventListener("fullscreenchange",this.onFullscreenChange),document.removeEventListener("webkitfullscreenchange",this.onWebkitfullscreenChange),"function"==typeof this.keyboardDetectorUnsubscribe&&this.keyboardDetectorUnsubscribe()},destroyed(){this.$el.parentNode.removeChild(this.$el)},methods:{changeMode(){if(this.isModeLocked)return;const t=this.forcedSingle||this.portrait?"single":"spread";t!==this.$store.getters["pager/mode"]&&this.$store.dispatch("pager/changeMode",{mode:t,target:"orientation"})},preventTouch:function(t){-1===(0,k.UZ)(t.target).indexOf("w-chrome")&&t.preventDefault()},accessibilityShow:function(t,e){if(!this.isAndroid&&e)return;if(confirm(this.$t("Accessibility.DOWNLOAD_TITLE")+" ("+this.accessiblePDF.size+")")){const t=document.createElement("a");t.setAttribute("target","_blank"),t.setAttribute("href",this.accessiblePDFPath),t.click(),this.$root.$emit("accessibility",{action:"download",fileName:this.accessiblePDF.fileName})}else t.preventDefault()},onResize:function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=document.documentElement.clientWidth,i=document.documentElement.clientHeight;if(this.isAndroid&&(this.isMobileApp||this.isOldChrome)){if(this.windowWidth===s&&this.windowHeight===i&&null===this.androidTempHeight&&!e)return;const t=document.activeElement;if(this.windowHeight>i&&this.windowWidth===s&&("input"===t.tagName.toLowerCase()||"textarea"===t.tagName.toLowerCase()||"iframe"===t.tagName.toLowerCase())){const e=t.getBoundingClientRect();return this.androidTempHeight=i,e.top+e.height>i&&!this.modalOpened&&!this.androidKeyboardShift&&(this.androidKeyboardShift=-(e.top+e.height)/2),void(this.$store.state.workspace.isAndroidKeyboardOpened||this.$store.dispatch("workspace/setAndroidKeyboardOpened",!0))}this.$store.state.workspace.isAndroidKeyboardOpened&&this.$store.dispatch("workspace/setAndroidKeyboardOpened",!1),this.androidKeyboardShift=0,this.androidTempHeight=null}this.$store.state.workspace.userAgentInfo.browser.chrome&&!this.isAndroid?this.isOrientationChanged=s!==this.windowWidth||i!==this.windowHeight:this.isOrientationChanged=s!==this.windowWidth&&i!==this.windowHeight,this.$store.dispatch("workspace/setResizing",!e&&(!this.showSidebar||this.isOrientationChanged)),clearTimeout(yt),clearTimeout(Pt);const o=()=>{this.fullscreen||(this.windowWidth=s,this.windowHeight=i,!this.isAndroid&&visualViewport.height>i&&(this.windowHeight=visualViewport.height),this.$store.dispatch("workspace/setSize",{width:this.windowWidth,height:this.windowHeight})),this.$nextTick((()=>{this.noticeShown&&this.$refs.noticeBanner&&this.$store.commit("workspace/SET_BANNER_HEIGHT",this.$refs.noticeBanner.$el.getBoundingClientRect().height)})),this.fullscreen||this.modalOpened||this.slideMode||this.changeMode()};yt=setTimeout((()=>{this.isResizing?Pt=setTimeout((()=>{o.call(this),this.isOrientationChanged=!1,this.$store.dispatch("workspace/setResizing",!1)}),this.isIphonePlus?850:500):o.call(this),e&&this.$root.$emit("orientation",this.portrait?"portrait":"landscape","load")}),e?100:500)},onFullscreenChange:function(){this.fullscreen=!!document.fullscreenElement},onWebkitfullscreenChange:function(){this.fullscreen=!!document.webkitFullscreenElement},openSidebar:function(t){this.isWorkspaceFrozen||this.isEmbed||(this.showPopup&&this.$store.dispatch("popup/closePopup"),this.showSidebar?this.$store.dispatch("sidebar/closeSidebar"):this.$store.dispatch("sidebar/openSidebar",{component:t}))},containerTap:function(t){if(this.$root.$emit("container-tapped"),this.isResizing)return;if(this.showSidebar)return void this.$store.dispatch("sidebar/closeSidebar");this.$store.state.caniuse.userInteractions.firstClick||this.$store.dispatch("caniuse/setFirstClick");const e=(0,k.iZ)(t.target);let s=!0,i=!1;for(let o=0,n=e.length;o<n;o++){const t=e[o].className;if((0,T.HD)(t)){if(t.indexOf("content-element")>-1||t.indexOf("nav-left-arrow")>-1||t.indexOf("nav-right-arrow")>-1){s=!1;break}t.indexOf("book-container")>-1&&(i=!0)}}s&&i&&(Date.now()>this.tapTimeout&&setTimeout(this.toggleBars,this.$store.state.workspace.doubletapInterval+1),this.tapTimeout=Date.now()+this.$store.state.workspace.doubletapInterval)},titleTap:function(){this.$store.dispatch("pager/goToFirst",{target:"titleTap"})},toggleBars:function(){this.isWorkspaceFrozen||this.isEmbed||Date.now()>this.tapTimeout&&(this.showBars=!this.showBars,this.$root.$emit("develop",{action:"showBars",data:this.showBars?"show":"hide"}))},closeAll:function(){this.showPopup&&this.$store.dispatch("popup/closePopup"),this.showSidebar&&this.$store.dispatch("sidebar/closeSidebar")},goLogoLink:function(){if(this.logoLink){window.open(this.logoLink,"_blank");const t=this.pagerState.currentPage;this.$root.$emit("link",{type:"external",source:"logo",url:this.logoLink,target:"_blank",pageId:t})}},noticeClose:function(){this.noticeShown=!1,this.onResize(null,!0)},inAppClose:function(){this.showInAppNotice=!1},cookieNoticeShouldShow:function(){return!(!this.$store.state.workspace.cookieNotice||this.isMobileApp)&&(this.$store.state.workspace.cookieNotice.enabled&&"true"!==(0,B.Z)().getLocalStorage().getItem("fb_cookieNotice_dismissed"))},checkPreloader:function(){document.getElementById("preloader")?(this.$store.dispatch("workspace/setPreloader",!0),this.$root.$options.api.once&&"function"==typeof this.$root.$options.api.once&&this.$root.$options.api.once("preloader-off",(()=>{this.$store.state.workspace.preloader&&this.$store.dispatch("workspace/setPreloader",!1)}))):this.$store.dispatch("workspace/setPreloader",!1)},checkEmbed:function(){const t=Et&&this.$store.state.workspace.embedScript;return this.$store.dispatch("workspace/setEmbed",t),t},checkEmbedLightbox:function(){return Et&&this.$store.state.workspace.embedLightbox},clickToRead(){this.isProtected?this.openInEmbedLightbox():this.openInNewWindow()},openInEmbedLightbox:function(){window.parent.postMessage({fbPublicationUrl:window.location.href,action:"openMobileLightbox"},"*")},openInNewWindow:function(){window.open(window.location.href,"_blank")},backFromEmbedLightbox:function(){this.$store.state.workspace.usePostMsg?window.parent.postMessage({fbPublicationUrl:window.location.href,action:"closeMobileLightbox"},"*"):window.history.go(-1),this.$root.$emit("develop",{action:"mobileLightboxClose",data:"arrow"})},loadCustomLogo:function(t,e){t?(0,$t.Z)({url:t,callback:t=>{this.customLogoUrl&&window.URL.revokeObjectURL(this.customLogoUrl),this.customLogoUrl=t}}):e&&!t&&(this.customLogoUrl=null)},checkInApp(){const t="true"===(0,B.Z)().getLocalStorage().getItem("in-app_notice_dismissed"),e=this.$store.state.workspace.userAgentInfo.browser.inApp;this.showInAppNotice=e&&!t}},computed:{bannerHeight(){return this.$store.state.workspace.bannerHeight},initialWindowDimensionsSum(){return this.$store.state.workspace.initialWindowDimensionsSum},flashMessageVisibility(){return null!==this.$store.getters["workspace/flashMessage"]},accessiblePDF:function(){return this.$store.getters["downloads/getAccessiblePdf"]},showAccessibilityButton:function(){return this.$store.getters["workspace/accessibilityButtonVisible"]},accessiblePDFPath:function(){this.$store.state.workspace.policiesUpdated;return(0,B.Z)().translatePath(this.accessiblePDF.url)},isTablet(){return this.$store.getters["workspace/isTablet"]},isPhone(){return this.$store.getters["workspace/isPhone"]},containerClasses:function(){const t={"publication-container":!0,"sidebar-left":this.isLocaleRtl,"sidebar-right":!this.isLocaleRtl,sidebar:this.showSidebar,portrait:this.portrait,landscape:!this.portrait,"cookie-notice":this.noticeShown,loading:this.isResizing&&!this.fullscreen,embed:this.isEmbed,iframe:Et,"bars-shown":this.showBars,shifted:0!==this.androidKeyboardShift,lightbox:this.isEmbedLightbox,"mobile-app":this.isMobileApp,android:this.isAndroid,tablet:this.isTablet,phone:this.isPhone};return t[this.layout]=!0,t},containerStyle:function(){return{width:this.isEmbed?null:this.containerSize.width+"px",height:this.isEmbed?null:this.containerSize.height+"px",top:this.androidKeyboardShift+"px"}},containerSize:function(){return{width:this.windowWidth,height:this.windowHeight}},bookContainerSize:function(){const t={width:this.windowWidth,height:this.windowHeight,left:0,top:0};return this.noticeShown&&(t.height-=this.bannerHeight,t.top=this.bannerHeight),t},topBarClasses(){const t={"top-bar-in-app-active":this.showInAppNotice},e=!!this.isEmbedLightbox+!!this.showMenuIcon,s=!!this.accessiblePDF+!!this.showSearchIcon;return t["start-buttons-"+e]=!0,t["end-buttons-"+s]=!0,t},portrait:function(){return this.windowWidth<=this.windowHeight},isMobileApp:function(){return"mobile-app"===this.$store.getters["info/version"]},isLegacy:function(){return"mobile-old"===this.$store.getters["info/version"]},isAndroid:function(){return this.$store.state.workspace.userAgentInfo.os.android},isOldChrome:function(){const t=this.$store.state.workspace.userAgentInfo.browser;return t.chrome&&t.version.split(".")[0]<108},isIphonePlus:function(){return this.$store.state.workspace.userAgentInfo.os.ios&&(736===document.documentElement.clientWidth||414===document.documentElement.clientWidth)},isLocaleRtl(){return this.$store.getters["i18n/isLocaleRtl"]},dir(){return this.isLocaleRtl?"rtl":"ltr"},forcedSingle(){return"single"===this.$store.state.workspace.components.book.flipbookType},slideMode(){return"slide-book"===this.$store.state.workspace.bookComponent&&!(this.isLegacy&&this.$store.state.workspace.components.book.flip)},isResizing:function(){return this.$store.state.workspace.isResizing},isZoomed(){return this.$store.state.pages.size.zoomFactor>1},isUpdating(){return this.isZoomed&&this.$store.getters["pages/currentPagesUpdating"]},isFlipping:function(){return"inProgress"===this.$store.state.pager.flipState},modalOpened:function(){return this.$store.state.workspace.modalOpened},mainClasses:function(){return{"main-frame":!0}},title:function(){return(0,St.m9)(this.$store.state.workspace.title)},titleDirection:function(){return It().getDirection(this.title)},showSearchIcon:function(){return this.$store.state.search.enabled},showMenuIcon:function(){const t=this.$store.state.downloads;return this.$store.state.toc.enabled&&this.$store.state.toc.children||t.enabled&&(t.url&&t.allPagesVisible||!(0,T.xb)(t.pageFiles)&&t.currentPagesVisible||!(0,T.xb)(t.customFiles)&&t.customFiles[0].url)},showThumbsIcon:function(){return this.$store.state.workspace.components.thumbnails},showPopup:function(){return null!==this.$store.state.popup.opened},showSidebar:function(){return null!==this.currentWindow},currentWindow:function(){return this.$store.state.sidebar.opened},isModeLocked(){return this.isLightboxShown},totalPagesVisible:function(){return!1!==this.$store.state.workspace.components.paginator.totalPagesVisible},displayPages:function(){return!(!1===this.$store.state.workspace.components.paginator||!1===this.$store.state.workspace.components.paginator.enabled)},totalForDisplay:function(){return this.$store.getters["pager/totalForDisplay"]},pagerState:function(){return this.$store.getters["pager/state"]},stateForDisplay:function(){return this.$store.getters["pager/stateForDisplay"]},stateText:function(){return this.isLocaleRtl?(this.totalPagesVisible?""+this.totalForDisplay+"/":"")+this.stateForDisplay:this.stateForDisplay+(this.totalPagesVisible?"/"+this.totalForDisplay:"")},rawCustomLogoUrl:function(){return this.$store.getters["logo/customLogoUrl"]},hasDefaultLogo:function(){return this.$store.getters["logo/hasDefaultLogo"]},showLogo:function(){return this.$store.getters["logo/showLogo"]},logoLink:function(){return this.$store.state.logo.url},logoKey:function(){return this.$store.getters["logo/logoKey"]},cookieNoticeEnabled:function(){return this.$store.state.workspace.cookieNotice&&this.$store.state.workspace.cookieNotice.enabled},visible:function(){return this.$store.state.workspace.visible},isWorkspaceFrozen(){return this.$store.state.workspace.freezed},isEmbed(){return this.$store.state.workspace.isEmbed},clickToReadText(){return this.$t("Other.CLICK_TO_READ")},clickToReadClass(){return{"fullscreen-button":!0,hidden:"inProgress"===this.$store.state.pager.flipState}},miniFullscreenButtonClass(){return{"fullscreen-button-mini":!0,"top-position":this.miniTopPosition}},miniTopPosition:function(){return this.$store.getters["logo/showLogo"]},spinnerBgColor(){const t=this.$store.state.skin.styles["main-button-color"];if(t){return"rgba("+(0,xt.l)(t).join(",")+", 0.8)"}return"#FFFFFF"},spinnerFgColor(){const t=this.$store.state.skin.styles["second-text-color"];if(t){return"rgba("+(0,xt.l)(t).join(",")+", 0.8)"}return"#5692AE"},showProgress(){return!this.showBars&&this.$store.getters["pages/pagesCount"]>1},isLightboxShown(){return this.$store.getters["lightbox/isShown"]},status(){return this.$store.state.workspace.preloader?null:this.$store.getters["lightbox/isShown"]?this.$t("Lightbox.LIGHTBOX_STATUS",{0:this.$store.getters["lightbox/currentItemNumber"],1:this.$store.getters["lightbox/itemsCount"]}):this.$t("Other.STATUS",{0:this.stateForDisplay,1:this.totalForDisplay})}},watch:{currentWindow(t,e){null===t&&this.$root.$emit("onSidebarClose",{component:e})},isModeLocked(t,e){this.slideMode||!e||t||this.changeMode()},cookieNoticeEnabled:function(t){this.noticeShown=t},fullscreen:function(t){t||this.$nextTick((()=>{this.onResize()}))},modalOpened:function(t){t||this.onResize(null,!0)},pagerState:function(t,e){if(t.mode!==e.mode&&(this.$store.dispatch("thumbnails/setThumbnails",null),"th"===this.currentWindow&&this.$store.dispatch("sidebar/closeSidebar")),t.currentPage===e.currentPage&&t.widePageSecondHalf===e.widePageSecondHalf&&t.lastTarget===e.lastTarget)return;const s=this.$store.state.pager.lastTarget;this.miniFullScreen=!0;["toc","thumbnails","search","orientation"].indexOf(s)>=0||t.zoomMode!==e.zoomMode?this.flipCountTrigger=0:this.flipCountTrigger++,this.flipCountTrigger>3&&!this.showAccessibilityButton&&!this.isMobileApp&&(this.showBars=!1)},showBars:function(t,e){!e&&t&&(this.flipCountTrigger=0),this.$root.$emit("panelStateChanged",{state:t})},portrait:function(t){this.$root.$emit("orientation",t?"portrait":"landscape","change")},visible:function(t){t&&(this.onResize(null,!0),this.showBars=!0,this.flipCountTrigger=0)},isWorkspaceFrozen(t){t&&(this.showBars=!0,this.closeAll())},rawCustomLogoUrl:"loadCustomLogo"},components:{bookContainer:a.Z,thWindow:y,tocWindow:V,searchWindow:J,inAppNotice:ct,cookieNotice:pt,Spinner:_.Z,simplePageProgress:ft,flashMessage:n.Z,logo:_t,lightbox:Tt.Z}},At=Mt;const zt=(0,g.Z)(At,i,o,!1,null,"66dc7d9c",null).exports}}]);