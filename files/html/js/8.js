"use strict";(globalThis.webpackChunk_flippingbook_publication=globalThis.webpackChunk_flippingbook_publication||[]).push([[8],{4459:(e,t,n)=>{n.r(t),n.d(t,{App:()=>He});var r=n(3084),o=n(4950),a=n(776),i=n(5392);function s(e,t){let n="",r=0;for(let o=0;o<e.length;r++,o++)r>=t.length&&(r=0),n+=String.fromCharCode(e[o].charCodeAt(0)^t[r].charCodeAt(0));return n}function l(e,t){return btoa(s(e,t))}var c=n(320),d=n(5622),g=n(6382),u=n.n(g),p=n(710),h=n(4618),f=n(6142),m=n(1378),E=n(1071),S=n(2155),y=n(2918);const I=JSON.parse('{"locales":["en","ar","de","es","fi","fr","he","it","ja","nl","no","pl","pt","ru","sv","tr","zh"],"substitutes":{"nb":"no","nn":"no","be":"ru"},"rtl":["ar","he"],"fonts":[{"locales":["de","en","es","fi","fr","it","nl","no","pl","pt","sv","tr"],"font-family":"Open Sans","subset":"latin-ext","font-weight-bold":"800","font-weight-normal":"600","css":"open-sans_latin-ext.css","checkString":"The five boxing wizards jump quickly.123!@#$%^&*()-=+","timeout":1000},{"locales":["ar"],"font-family":"Cairo","subset":"arabic","font-weight-bold":"700","font-weight-normal":"400","css":"cairo_arabic.css","checkString":"نصٌّ حكيمٌ لهُ سِرٌّ قاطِعٌ وَذُو شَأنٍ عَظيمٍ مكتوبٌ على ثوبٍ أخضرَ ومُغلفٌ بجلدٍ أزرق ABCdef123!@#$%^&*()-=+","timeout":2000},{"locales":["he"],"font-family":"Open Sans","subset":"hebrew","font-weight-bold":"800","font-weight-normal":"600","css":"open-sans_hebrew.css","checkString":"דג סקרן שט בים מאוכזב ולפתע מצא חברה ABCdef123!@#$%^&*()-=+","timeout":1500},{"locales":["ru"],"font-family":"Open Sans","subset":"cyrillic,cyrillic-ext","font-weight-bold":"800","font-weight-normal":"600","css":"open-sans_cyrillic.css","checkString":"Я любовался штормом, прекрасным, но пугающим.ABCdef123ё!!@#$%^&*()-=+","timeout":1700},{"locales":["zh"],"font-family":"Noto Sans SC","subset":"chinese-simplified","font-weight-bold":"700","font-weight-normal":"400","css":"noto-sans-sc_chinese-simplified.css","checkString":"船隻离开港口后，就在薄雾的笼罩下航行了三小时。ABCdef123!@#$%^&*()-=+","timeout":30000},{"locales":["ja"],"font-family":"Noto Sans JP","subset":"japanese","font-weight-bold":"700","font-weight-normal":"400","css":"noto-sans-jp_japanese.css","checkString":"日本語漢字ひらがなカタカナ。ABCdef123!@#$%^&*()-=+","timeout":30000}]}');const b={thumbnailUrl:null,substrateUrl:null,textUrl:null,nextSubstrateUrl:null,nextTextUrl:null,status:n(924).Z.READY,loadPending:!0,updatePending:!1,currentSize:null},P="T?-kWlq5";let T={};const _={blocks:"block",links:"link",images:"image",gifs:"gif",galleries:"gallery",videos:"video",forms:"form"},w=300;function v(e){let t;return e.forEach((e=>{t+=e.text})),"ltr"===u().getDirection(t)?"ltr":"rtl"}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=(0,S.Z)({},o.Z);s.info.module.state.version=r;let g=!1,u=!1,C=!1,L=!1,O=!1,A=!1;const x=Object.assign(n.services||{},n.providers||{}),N=n.getPager,R="fbo-customizer"!==n.productType&&void 0===window.flippingbook;function k(r){A||(J("Loaded skin config"),n.extensions&&n.extensions.skinConfig&&(0,c.Kn)(n.extensions.skinConfig)&&(r=(0,S.Z)(r,n.extensions.skinConfig)),s.skin.module.state=(0,S.Z)(s.skin.module.state,{styles:R?Object.freeze(r):r}),r=null,g=!0,J("Skin config ready"),X(e,t))}function D(r){if(A)return;if(J("Loaded workspace.json"),n.extensions&&n.extensions.workspaceProps&&(0,c.Kn)(n.extensions.workspaceProps)&&(J("Extending workspace config"),r=(0,S.Z)(r,n.extensions.workspaceProps)),r.cookieNotice&&r.cookieNotice.onClose&&(0,c.mf)(r.cookieNotice.onClose)&&(e.onNoticeClose=r.cookieNotice.onClose,delete r.cookieNotice.onClose),r.search&&(delete r.search.path,delete r.search.searchCharactersLimit),s.search.module.state=(0,S.Z)(s.search.module.state,r.search),delete r.search,s.downloads.module.state=(0,S.Z)(s.downloads.module.state,r.downloads),delete r.downloads,s.downloads.module.state.accessibilityPDF=(0,S.Z)(s.downloads.module.state.accessibilityPDF,r.accessibilityPDF),delete r.accessibilityPDF,r.toc&&r.toc.children?(s.toc.module.state=(0,S.Z)(s.toc.module.state,r.toc),delete r.toc):s.toc.module.state.enabled=!1,s.print.module.state=(0,S.Z)(s.print.module.state,r.print),delete r.print,r.logoLink&&r.logoLink.url&&(0,c.HD)(r.logoLink.url)&&-1!==r.logoLink.url.toLowerCase().indexOf("flippingbook.com")){const e=l(window.location.href,P),t=-1!==r.logoLink.url.indexOf("?");r.logoLink.url+=(t?"&":"?")+"utm_term="+e}s.logo.module.state=(0,S.Z)(s.logo.module.state,r.logoLink),delete r.logoLink,s.info.module.state=(0,S.Z)(s.info.module.state,r.publicationInfo),delete r.publicationInfo,s.sound.module.state=(0,S.Z)(s.sound.module.state,r.sound),delete r.sound,r.userAgentInfo=n.userAgentInfo,s.workspace.module.state=(0,S.Z)(s.workspace.module.state,r);const o=(0,a.Z)().getLocalStorage().getItem("showConfig");s.workspace.module.state.showConfig=!!o,n.embed&&(s.workspace.module.state.embedScript=!0,s.workspace.module.state.wheelScroll=!1),n.lightbox&&(s.workspace.module.state.embedLightbox=!0,s.workspace.module.state.wheelScroll=!0),n.isProtected&&(s.workspace.module.state.isProtected=!0),n.usePostMsg&&(s.workspace.module.state.usePostMsg=!0),n.DRMKey&&(s.workspace.module.state.urlBlackList=M(n.DRMKey)),n.wheel&&(s.workspace.module.state.wheelScroll=!0),n.embedId&&(s.info.module.state.embedId=n.embedId),n.preloader&&(s.workspace.module.state.preloaderConfig=n.preloader),r=null,J("Running feature checks"),B();const i=[U(),z()].map((e=>e.catch((e=>!1))));Promise.all(i).then((n=>{let[r,o]=n;const a=!!s.workspace.module.state.userAgentInfo.browser.safari,i=!!s.workspace.module.state.userAgentInfo.os.ios;s.workspace.module.state.webPSupported=r&&!a&&!i,s.workspace.module.state.alteredSVGColors=!o,u=!0,J("Workspace config ready"),X(e,t)}))}function M(e){const t=[];function n(e){const t=[];for(let n=0;n<e.length;n++)t.push(e.charCodeAt(n));return t}function r(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}function o(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:13;const i=n(e),s=n(t),l=[];for(let n=0;n<i.length;n++)l[n]=i[n]^(n>0?o?i[n-1]:l[n-1]:a)^s[n%s.length];return r(l)}for(let a=0;a<e.length;a++)t.push(o(atob(e[a]),"FlippingBook",!0,13));return t}function U(){return new Promise((e=>{J("Checking WebP support");const t=new Image;t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",t.onload=t.onerror=function(){e(2===t.height)}}))}function z(){return new Promise(((e,t)=>{J("Checking color change");const n=document.createElement("canvas");n.width=10,n.height=10;const r=n.getContext("2d"),o=new Image;o.onload=()=>{try{r.drawImage(o,0,0,10,10);const t=r.getImageData(2,2,1,1).data;e(0===t[0]&&0===t[1]&&0===t[2]&&255===t[3])}catch(n){t(n)}},o.onerror=e=>t(e),o.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMCAxMCI+PHRleHQgZmlsbD0iIzAwMCIgeD0iMCIgeT0iMCI+JiM5NjA4OzwvdGV4dD48L3N2Zz4="}))}function B(){const e={prefers_light_scheme:window.matchMedia("(prefers-color-scheme: light)").matches,prefers_dark_scheme:window.matchMedia("(prefers-color-scheme: dark)").matches,prefers_reduced_motion:window.matchMedia("(prefers-reduced-motion: reduce)").matches,prefers_reduced_transparency:window.matchMedia("(prefers-reduced-transparency: reduce)").matches,prefers_reduced_data:window.matchMedia("(prefers-reduced-data: reduce)").matches,prefers_more_contrast:window.matchMedia("(prefers-contrast: more)").matches,prefers_less_contrast:window.matchMedia("(prefers-contrast: less)").matches,prefers_inverted_colors:window.matchMedia("(inverted-colors: inverted)").matches};setTimeout((()=>{for(const t in e)e[t]&&n.api.trigger("develop",{action:t,data:`${e[t]}`})}),3e3)}function F(r,o){if(A)return;J("Loaded pager.json");let a=!1;function l(e,t){const n=r.pages[e]?.[t];return(0,c.o8)(n)?r.pages.defaults?.[t]:n}o||(o=JSON.stringify(r).length),o&&o>2097152&&(a=!0,s.content.module.state.outsideStorage=!0,J("Switching pager to outside storage mode",{level:"warn"}));const d=(0,c.mf)(x?.contentIdProvider?.nextId)?x.contentIdProvider:h.X;(0,c.Kn)(n?.extensions?.pagesProps)&&(J("Extending pager config"),r=(0,S.Z)(r,n.extensions.pagesProps));let g=!0;!1===x?.resourceProvider?.states?.fullyConverted&&(g=!1,b.status=null),s.search.module.state=(0,S.Z)(s.search.module.state,r.search),delete r.search;const u={};s.content.module.state.hasRtlContent=!!r.pages.defaults?.rtlContent;const p=r.bookSize;for(const e in r.pages){if(!r.pages.hasOwnProperty(e)||"defaults"===e||"structure"===e)continue;const t={width:l(e,"width"),height:l(e,"height")},n=l(e,"wide");r.pages[e].hasMargins=(0,y.lx)({rect:{width:n?t.width/2:t.width,height:t.height},bounds:p});const o=r.pages[e],h=[];for(const l in o)if(o.hasOwnProperty(l)){const u=o[l];(0,i.k)(u)&&(0,c.e$)(_,l)&&(u.forEach((r=>{"videos"===l&&(s.content.module.state.hasVideoContent=!0);const o=d.nextId();if(r.type=_[l],r.pageId=e,r.itemId=o,n){const e=r.rect[2],n=r.rect[0],o=e<t.width/2,a=e+n>t.width/2;let i;i=o&&a?"both":o?"left":"right",r.side=i,r.crossWide="both"===i}"gallery"===r.type&&r.items.forEach((e=>{e.pageId=r.pageId})),r.crossWide&&"block"!==r.type&&"link"!==r.type&&(r.iconDelay=25*Math.round(Math.random()*w/25)),r.descriptionByType&&(r.descriptionDir=v(r.descriptionByType)),"gallery"===r.type&&r.items.forEach((e=>{e.pageId=r.pageId,e.descriptionByType&&(e.descriptionDir=v(e.descriptionByType))})),h.push(o),r=g&&R?Object.freeze(r):r,a?T[o]=r:s.content.module.state.items[o]=r})),delete r.pages[e][l])}const f=(0,S.Z)(o,b,{content:h});r.pages[e]=f,f.urlHeader&&(u[f.urlHeader]=e)}s.pages.module.state=(0,S.Z)(s.pages.module.state,r.pages),delete r.pages,r.urlNames=u,s.book.module.state=(0,S.Z)(s.book.module.state,r),r=null,C=!0,J("Pager config ready"),X(e,t)}function G(n){A||(s.pages.module.state.downloadProgress=n,O=!0,J("Progress config loaded"),X(e,t))}function H(n,r){const o=new URL(r).pathname.split("/").pop();A=!0,e.loadingError=!0,J("Failed to load config",{level:"error",data:{url:r,err:n,filename:o}}),t(null,!0,o)}function Z(){return s.pager||s.pages}function V(){return s.i18n}function Y(){return s.skin}function j(){return s.downloads||s.workspace}function $(){return"mobile-app"===r}function W(){return(!Z()||C)&&(!V()||L)&&(!Y()||g)&&(!$()||O)&&(!j()||u)}s.content.module.state.freeze=R,n.modules&&(s=K(n.modules)),n.excludeModules&&q(n.excludeModules),"true"===n.zoom&&(s.pages.module.state.size.zoomFactor=s.workspace.module.state.defaultZoomFactor,s.workspace.module.state.initialZoom=!0),Y()&&(J("Loading skin config.json"),(0,p.Z)({url:(0,a.Z)().translatePath("skins/current/config.json"),responseType:"json",callback:k,errorback:H})),j()&&(J("Loading workspace.json"),(0,p.Z)({url:(0,a.Z)().translatePath("assets/workspace.json"),responseType:"json",callback:D,errorback:H})),Z()&&((0,c.mf)(N)?(J("Launching getPager()"),N().then(F)):(0,c.mf)(x.pagerJSON)?(J("Requesting pagerJSON() from provider"),x.pagerJSON().then(F)):(J("Loading pager.json"),(0,p.Z)({url:(0,a.Z)().translatePath("assets/pager.json"),responseType:"json",callback:F,errorback:H}))),V()&&(J("Loading locale config"),s.i18n.module.state.config=(0,S.Z)(s.i18n.module.state.config,I),L=!0),$()&&(J("Loading progress.json"),(0,p.Z)({url:(0,a.Z)().translatePath("assets/progress.json?rand="+(1e6*Math.random()).toFixed()),responseType:"json",callback:G,errorback:H}));const X=function(e,t){if(!A){if(W()){J("All configs ready");const o=-1!==r.indexOf("mobile");s.workspace.module.state.components.book.flip?"single"===s.workspace.module.state.components.book.flipbookType?s.pager.module.state.mode="single":o&&(s.pager.module.state.mode=window.innerWidth<=window.innerHeight?"single":"spread"):s.pager.module.state.mode="slide",s?.toc?.module?.state?.children&&function(){let e=!1,t=s.toc.module.state.children;const r=s.pages.module.state.structure.length,o=t=>t.filter((t=>t.page>0&&t.page<=r?(t.children&&(t.children=o(t.children),t.children.length||delete t.children),!0):(e||(e=!0,e&&n.api.trigger("error",{action:"tocCorruption",url:window.location.href})),!1)));t=o(t),(0,d.OZ)(t,"children","toggle",!1),(0,d.OZ)(t,"children","active",!1,!0),(0,d.QX)(t,"children","route"),1===t.length&&t[0]?.children?.length>0&&(t[0].toggle=!0),s.toc.module.state=(0,S.Z)(s.toc.module.state,{children:t})}(),J("Registering store modules");for(const t in s)e.registerModule(t,s[t].module);J("Starting init"),Y()&&e.commit("skin/"+f.qg),V()&&e.commit("i18n/"+m.qg),e.dispatch("pager/init");const i=(0,a.Z)().getPathInfo(),l=(0,a.Z)().getLocalStorage().getItem("overridePage");if(s.pager)if(i?.lightboxItemId&&e.state.pager.singleMode){const t=e.getters["content/pageIdByContentId"](i.lightboxItemId);let n=!1;if(e.getters["pages/pageProp"](t,"wide")){const t=e.getters["content/pageSideByContentId"](i.lightboxItemId);n=e.state.book.rightToLeft?"left"===t:"right"===t}e.dispatch("pager/goToPageById",{id:t,widePageSecondHalf:n,target:"init"})}else l?((0,a.Z)().getLocalStorage().removeItem("overridePage"),e.dispatch("pager/goToPageByUserInput",{userInput:l,type:"url",target:"override"})):i?.page?e.dispatch("pager/goToPageByUserInput",{userInput:i.page,type:"url",target:"init"}):e.dispatch("pager/goToFirst",{target:"init"});i&&i.lightboxItemId&&e.dispatch("lightbox/openLightbox",{type:i.lightboxItemType,itemId:i.lightboxItemId,galleryItemIndex:i.lightboxGalleryItemIndex,target:"init"}),e.commit("search/"+E.pz),i&&i.selectText&&(e.dispatch("text/setSelectionAttributes",{pageID:i.selectText.pageID,pageSide:i.selectText.pageSide,selectionRect:i.selectText.selectionRect,preliminary:!0}),e.dispatch("text/setEffect",!0));const c=s.workspace.module.state.defaultToolWindow;s.search.module.state.enabled&&i&&i.search?(e.dispatch("sidebar/openSidebar",{component:"search",params:{initial:!0}}),e.dispatch("search/setExactMatch",{value:i.exactMatch}),e.dispatch("search/setQuery",{value:i.search})):!o&&c&&"none"!==c&&e.dispatch("sidebar/openSidebar",{component:c,params:{initial:!0}}),g=!1,u=!1,C=!1,L=!1,t(T),T=null}return!1}};function K(e){const t={};for(const n in e){const r=e[n];s.hasOwnProperty(r)&&(t[r]=s[r])}return t}function q(e){for(const t in e){const n=e[t];s.hasOwnProperty(n)&&delete s[n]}}function J(e){let{level:t="info",data:r={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.api.trigger("log",{message:e,data:r,level:t,timestamp:Date.now()})}}var L=n(3718),O=n.n(L),A=n(3074),x=n(8352),N=n.n(x);const R='<svg width="119" height="30" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 119 30">\n  <path transform="translate(0 12)" fill-rule="nonzero" d="M27.1018599,14.0625583 C27.1018599,14.3527683 26.8688399,14.5880783 26.5769499,14.5880783 L25.5246499,14.5880783 C25.2345099,14.5880783 24.9997399,14.3524183 24.9997399,14.0625583 L24.9997399,3.05155829 C24.9997399,2.69665829 25.3007399,2.52568829 25.4966199,2.52568829 L31.8344199,2.52568829 C32.1235099,2.52568829 32.3579299,2.75820829 32.3579299,3.04981829 L32.3579299,4.09981829 C32.3579299,4.38897829 32.1214099,4.62359829 31.8344199,4.62359829 L27.2097199,4.62359829 C27.1501499,4.62359829 27.1017999,4.66905329 27.1017999,4.72639829 L27.1017999,7.40539829 C27.1017999,7.46204129 27.1487499,7.50819829 27.2072699,7.50819829 L31.0428699,7.50819829 C31.3337099,7.50819829 31.5695299,7.74071829 31.5695299,8.03197829 L31.5695299,9.08197829 C31.5695299,9.37148829 31.3358099,9.60610829 31.0428699,9.60610829 L27.2072699,9.60610829 C27.1490999,9.60610829 27.1017999,9.65296129 27.1017999,9.71169829 L27.1018599,14.0625583 Z M35.7744599,2.52455829 C35.7744599,2.23609829 35.5393399,2.00077829 35.2491999,2.00077829 L34.1968999,2.13189829 C33.8012899,2.18084929 33.6719899,2.36651829 33.6719899,2.65567829 C33.6719899,2.65567829 33.6656899,12.4570783 33.6719899,12.4892783 C33.6656899,13.8581783 34.7985899,14.5934783 35.7743899,14.5878783 C36.7499199,14.5822783 36.3024499,14.5934783 36.3024499,14.5934783 C36.5890799,14.5927793 36.8252599,14.3532683 36.8252599,14.0641083 L36.8252599,12.8886083 C36.8252599,12.6585383 36.6377899,12.4893083 36.4377099,12.4893083 L36.1678999,12.4893083 C35.9397799,12.4893083 35.7863099,12.3239283 35.7743899,12.1151783 L35.7744599,2.52455829 Z M39.1902199,5.40982829 L40.2425199,5.40982829 C40.5323099,5.40982829 40.7674299,5.59339829 40.7674299,5.93639829 L40.7674299,14.0615983 C40.7674299,14.3521583 40.5344099,14.5878183 40.2425199,14.5878183 L39.1902199,14.5878183 C38.9000799,14.5878183 38.6649599,14.3518083 38.6649599,14.0615983 L38.6649599,5.93639829 C38.6649599,5.64548829 38.8054699,5.40982829 39.1902199,5.40982829 Z M38.6649599,3.04972829 C38.6649599,2.47035829 39.1369599,2.00072829 39.7161599,2.00072829 C40.2967799,2.00072829 40.7673599,2.47170829 40.7673599,3.04972829 C40.7673599,3.62909829 40.2957099,4.09872829 39.7161599,4.09872829 C39.1355399,4.09872829 38.6649599,3.62809829 38.6649599,3.04972829 Z M42.8719199,8.24832829 L42.8719199,8.24828129 C42.8705209,8.13779129 42.8698199,8.03080129 42.8698199,7.92765129 L42.8698199,8.29199129 C42.8698199,6.55529129 44.2802199,5.14759129 46.0235199,5.14759129 L46.8119399,5.14759129 C48.5534399,5.14759129 49.9652399,6.55849129 49.9652399,8.29449129 L49.9652399,11.7031913 C49.9652399,13.4413913 48.5558399,14.8500913 46.8101399,14.8500913 L46.5504899,14.8500913 C45.9975899,14.8500913 45.4583099,14.7095313 44.9722899,14.4626813 L44.9722899,16.9472813 C44.9722899,17.2375013 44.7392699,17.4724613 44.4470299,17.4724613 L43.3947299,17.4724613 C43.1049399,17.4724613 42.8698199,17.2374913 42.8698199,16.9472813 L42.8698199,8.29518129 C42.8698199,8.27944729 42.8705199,8.26371329 42.8719199,8.24832829 Z M44.9722199,8.29203429 L44.9722199,11.7060343 C44.9722199,12.4252743 45.5605299,13.0144343 46.2862199,13.0144343 L46.5486699,13.0144343 C47.2743899,13.0144343 47.8630699,12.4287643 47.8630699,11.7060343 L47.8630699,8.29203429 C47.8630699,7.57249429 47.2743599,6.98333429 46.5486699,6.98333429 L46.2862199,6.98333429 C45.5605499,6.98333429 44.9722199,7.56930429 44.9722199,8.29203429 Z M51.8069199,8.24832829 L51.8068199,8.24828129 C51.8054209,8.13779129 51.8047199,8.03080129 51.8047199,7.92765129 L51.8047199,8.29199129 C51.8047199,6.55529129 53.2151199,5.14759129 54.9584199,5.14759129 L55.7468399,5.14759129 C57.4884399,5.14759129 58.9005399,6.55849129 58.9005399,8.29449129 L58.9005399,11.7031913 C58.9005399,13.4413913 57.4908399,14.8500913 55.7454399,14.8500913 L55.4854399,14.8500913 C54.9325399,14.8500913 54.3935999,14.7095313 53.9072399,14.4626813 L53.9072399,16.9472813 C53.9072399,17.2375013 53.6742199,17.4724613 53.3819799,17.4724613 L52.3300799,17.4724613 C52.0399399,17.4724613 51.8048199,17.2374913 51.8048199,16.9472813 L51.8048199,8.29518129 C51.8048199,8.27944729 51.8055199,8.26371329 51.8069199,8.24832829 Z M53.9072199,8.29203429 L53.9072199,11.7060343 C53.9072199,12.4252743 54.4955799,13.0144343 55.2216199,13.0144343 L55.4837199,13.0144343 C56.2094399,13.0144343 56.7981199,12.4287643 56.7981199,11.7060343 L56.7981199,8.29203429 C56.7981199,7.57249429 56.2097599,6.98333429 55.4837199,6.98333429 L55.2216199,6.98333429 C54.4955499,6.98333429 53.9072199,7.56930429 53.9072199,8.29203429 Z M61.2650799,5.40983429 L62.3173799,5.40983429 C62.6071699,5.40983429 62.8422899,5.59340429 62.8422899,5.93640429 L62.8422899,14.0616043 C62.8422899,14.3521643 62.6092699,14.5878243 62.3173799,14.5878243 L61.2650799,14.5878243 C60.9749399,14.5878243 60.7398199,14.3518143 60.7398199,14.0616043 L60.7398199,5.93640429 C60.7398199,5.64549429 60.9052099,5.40983429 61.2650799,5.40983429 Z M60.7398199,3.04973429 C60.7398199,2.47036429 61.2118199,2.00073429 61.7910199,2.00073429 C62.3716399,2.00073429 62.8422199,2.47171429 62.8422199,3.04973429 C62.8422199,3.62910429 62.3705699,4.09873429 61.7910199,4.09873429 C61.2107499,4.09873429 60.7398199,3.62810429 60.7398199,3.04973429 Z M65.4699799,14.5878343 L66.5218799,14.5878343 C66.6627399,14.5878343 66.7899399,14.5336343 66.8834999,14.4448243 C66.9844199,14.3479743 67.0471399,14.2119543 67.0471399,14.0616043 L67.0471399,8.29450429 C67.0471399,7.57037429 67.6354699,6.98330429 68.3615399,6.98330429 L68.6236399,6.98330429 C69.3493299,6.98330429 69.9380399,7.57141429 69.9380399,8.29270429 L69.9380399,13.5354043 L69.9383909,14.0724643 C69.9372909,14.3616243 70.1714109,14.5962443 70.4615509,14.5948628 L71.5148509,14.5903443 C71.8070909,14.5889443 72.0401109,14.3532843 72.0401109,14.0637743 L72.0401109,8.29447429 C72.0401109,6.55597429 70.6283109,5.14757429 68.8868109,5.14757429 L68.0983909,5.14757429 C67.6099209,5.14757429 67.1477409,5.25806429 66.7356909,5.45526429 C66.6701609,5.42589329 66.5979809,5.40980929 66.5219409,5.40980929 L65.4700409,5.40980929 C65.1778009,5.40980929 64.9447809,5.64546929 64.9447809,5.93637929 L64.9447809,14.0615793 C64.9447809,14.2070393 65.0040009,14.3391993 65.0996609,14.4343093 C65.1935709,14.5290693 65.3249709,14.5878093 65.4700409,14.5878093 L65.4699799,14.5878343 Z M81.2429799,8.00673429 L81.2428599,8.00674429 C81.2428599,8.29310429 81.2337399,8.53121429 81.2239399,8.86548429 C81.2246399,9.49418429 81.2390399,11.4609843 81.2320399,13.6067843 C81.2239399,16.1585843 79.9225399,17.7427843 77.5639399,17.735097 C77.4132599,17.7344343 77.3806699,17.7344343 77.2990299,17.735097 C75.5091299,17.7476843 74.3889299,16.5784843 74.3889299,16.5784843 C74.2088199,16.3606543 74.2774999,16.1344343 74.4053999,16.0012143 L75.1247799,15.2103043 C75.2810599,15.0704443 75.4131699,15.1113543 75.5365099,15.2103043 C75.6599099,15.3092543 76.2699099,16.0536543 77.5640099,16.0274343 C78.3282499,16.0120343 79.1531099,15.5449343 79.1531099,14.4596343 C78.6351099,14.7474043 78.1589599,14.8526443 77.5587099,14.8526443 L77.2990599,14.8526443 C75.5533599,14.8526443 74.1443599,13.4435443 74.1443599,11.7057443 L74.1443599,8.29664429 C74.1443599,6.56054429 75.5558599,5.14974429 77.2973599,5.14974429 L78.0857799,5.14974429 C79.8286799,5.14974429 81.2390799,6.55774429 81.2390799,8.29414429 L81.2429799,8.00673429 Z M79.1373799,8.29414429 C79.1373799,7.57141429 78.5490499,6.98544429 77.8233799,6.98544429 L77.5609199,6.98544429 C76.8352299,6.98544429 76.2469199,7.57495429 76.2469199,8.29414429 L76.2469199,11.7081443 C76.2469199,12.4308743 76.8352499,13.0168443 77.5609199,13.0168443 L77.8233799,13.0168443 C78.5490699,13.0168443 79.1373799,12.4276843 79.1373799,11.7081443 L79.1373799,8.29414429 Z M88.5951799,14.5878443 L84.6548899,14.5873343 L84.1285799,14.5873343 C83.8384399,14.5873343 83.6033199,14.3520243 83.6033199,14.0614643 L83.6033199,3.05146429 C83.6033199,2.76090429 83.8363399,2.52524429 84.1285799,2.52524429 L88.4662799,2.52524429 C90.2074799,2.52524429 91.6188799,3.93404429 91.6188799,5.67214429 C91.6188799,6.72464429 91.1016999,7.65641429 90.3069799,8.22774429 C91.3269799,8.81724429 92.0130799,9.91794429 92.0130799,11.1791443 C92.0130799,13.0616443 90.4834799,14.5878443 88.5951799,14.5878443 Z M88.3334299,9.60564429 L85.8122299,9.60564429 C85.7512599,9.60564429 85.7057099,9.65145129 85.7057099,9.70809429 L85.7057099,12.3874943 C85.7057099,12.4448443 85.7533599,12.4899443 85.8122299,12.4899443 L88.3334299,12.4899443 C89.1299299,12.4899443 89.7792299,11.8444443 89.7792299,11.0479443 C89.7792299,10.2528443 89.1320099,9.60564429 88.3334299,9.60564429 Z M87.9385199,4.36084429 L85.8136199,4.36074429 C85.7522999,4.36074429 85.7056999,4.40760229 85.7056999,4.46564429 L85.7056999,7.40274429 C85.7056999,7.46323829 85.7540499,7.50764429 85.8136199,7.50764429 L87.9385199,7.50764429 C88.8099999,7.50764429 89.5164199,6.80312429 89.5164199,5.93424429 C89.5164199,5.06713429 88.8099799,4.36084429 87.9385199,4.36084429 Z M93.5899199,8.29444429 C93.5899199,6.55634429 94.9999199,5.14754429 96.7432199,5.14754429 L97.5316399,5.14754429 C99.2735399,5.14754429 100.68534,6.55834429 100.68534,8.29444429 L100.68534,11.7031443 C100.68534,13.4412443 99.2749399,14.8500443 97.5316399,14.8500443 L96.7432199,14.8500443 C95.0017199,14.8500443 93.5899199,13.4392443 93.5899199,11.7031443 L93.5899199,8.29444429 Z M95.6920199,8.29199429 L95.6920199,11.7059943 C95.6920199,12.4252343 96.2807299,13.0143943 97.0064199,13.0143943 L97.2688799,13.0143943 C97.9945499,13.0143943 98.5828799,12.4287243 98.5828799,11.7059943 L98.5828799,8.29199429 C98.5828799,7.57245429 97.9945699,6.98329429 97.2688799,6.98329429 L97.0064199,6.98329429 C96.2806999,6.98329429 95.6920199,7.56926429 95.6920199,8.29199429 Z M101.99932,8.29444429 C101.99932,6.55634429 103.40972,5.14754429 105.15262,5.14754429 L105.94139,5.14754429 C107.68289,5.14754429 109.09469,6.55834429 109.09469,8.29444429 L109.09469,11.7031443 C109.09469,13.4412443 107.68429,14.8500443 105.94139,14.8500443 L105.15262,14.8500443 C103.41112,14.8500443 101.99932,13.4392443 101.99932,11.7031443 L101.99932,8.29444429 Z M104.07552,8.29199429 L104.07552,11.7059943 C104.07552,12.4252343 104.66383,13.0143943 105.38952,13.0143943 L105.65197,13.0143943 C106.37764,13.0143943 106.96597,12.4287243 106.96597,11.7059943 L106.96597,8.29199429 C106.96597,7.57245429 106.37767,6.98329429 105.65197,6.98329429 L105.38952,6.98329429 C104.66386,6.98329429 104.07552,7.56926429 104.07552,8.29199429 Z M116.02452,14.2674943 C116.11882,14.3800843 116.31116,14.5902243 116.45552,14.5902243 L118.29622,14.5902243 C118.54641,14.5902243 118.60668,14.3038643 118.51067,14.1807843 L114.72597,9.61398429 C116.63747,8.38668429 117.46437,6.02378429 117.49947,5.81018429 C117.53447,5.59654429 117.45497,5.42312429 117.16764,5.42312429 L115.80914,5.42312429 C115.4314,5.42312429 115.41704,5.71892429 115.2951,5.93046429 C115.1728,6.14200429 114.72604,7.73706429 112.7778,8.65636429 L112.77745,2.78996429 C112.7771,2.49940429 112.54198,2.26513429 112.25184,2.26513429 L111.20064,2.26513429 C110.85234,2.26513429 110.67503,2.52597429 110.67503,2.78996429 L110.67538,14.0669643 C110.67538,14.3568243 110.91051,14.5907443 111.20064,14.5907443 L112.25254,14.5907443 C112.54477,14.5907443 112.77779,14.3564843 112.77779,14.0669643 L112.77779,10.3998643 L116.02452,14.2674943 Z M0.00938241498,15.9614475 C0.00312750472,15.9127081 0,15.8632564 0,15.8134385 L0,2.14503949 C0,2.04471059 0.0135524874,1.94616439 0.0378767527,1.85366129 C0.226566331,0.816193895 1.11336867,0.0281215946 2.18162123,0.0211006946 C2.51417582,0.0196775946 2.83039722,0.0933234946 3.11395223,0.227098395 L9.01304276,3.35293199 L9.00887764,3.35150739 C9.02867978,3.33941209 9.16455373,3.24797429 9.21737135,3.21915809 L14.8860914,0.206473195 C15.1692993,0.0723431946 15.4855207,-0.00166130542 15.8180753,2.83078265e-05 C16.9564406,0.00759069458 17.8881369,0.902011895 17.9905789,2.03832149 C17.9968266,2.08706299 18,2.13616049 18,2.18632039 L18,15.8547194 C18,15.9557595 17.9867906,16.0539506 17.9621272,16.1468098 C17.7730905,17.1838702 16.8866353,17.9723495 15.8183827,17.9786582 C15.4858281,17.980795 15.1696067,17.9071466 14.8863988,17.7733727 L8.99107674,14.649269 C8.97161673,14.6610112 8.83505355,14.7520898 8.78258304,14.780906 L3.11386298,17.7939979 C2.83030797,17.9281279 2.51443366,18.0017763 2.18187907,18.000087 C1.04351376,17.9921688 0.112214119,17.0984593 0.00937547312,15.9617934 L0.00938241498,15.9614475 Z M2.64361218,15.4053605 L7.88599603,12.6932522 C8.3966319,12.3734037 8.72870911,11.8013212 8.70903039,11.1588261 C8.69936973,10.8539251 8.6116978,10.5689471 8.46533894,10.3238154 L8.46462327,10.3241705 L8.46927999,10.3210162 L7.69777592,8.96791289 C7.30809222,8.37482869 7.07263173,7.67107869 7.04865371,6.91149699 C7.02861449,6.25153099 7.17032072,5.62392219 7.4383374,5.06642089 L7.44621094,5.07140669 L2.64325394,2.61622329 C2.58957707,2.59451539 2.5301753,2.58206399 2.4679121,2.58206399 C2.21062834,2.58206399 2.00057556,2.79019849 2.00057556,3.04670609 L2.00057556,4.51682469 L1.9998599,4.51682469 L1.9998599,13.5048171 L2.00057556,13.5048171 L2.00057556,14.9752409 C2.00057556,15.2314026 2.21062834,15.4391708 2.46826953,15.4391708 C2.53053375,15.4391708 2.58957912,15.4277847 2.64361136,15.4053686 L2.64361218,15.4053605 Z M15.998342,14.9535371 L15.998342,13.4838255 L15.9994652,13.4838255 L15.9994652,4.49583319 L15.998342,4.49583319 L15.998342,3.02612159 C15.998342,2.76889149 15.7886577,2.56183559 15.5306727,2.56183559 C15.4684128,2.56183559 15.4093696,2.57322069 15.3556976,2.59527849 L10.1132847,5.30769209 C9.60303324,5.62682829 9.27061619,6.19926689 9.29029387,6.84211819 C9.29995401,7.14701919 9.38726289,7.43199709 9.53432984,7.67712879 L9.53504546,7.67677309 L9.53003158,7.67890989 L10.3011374,9.03262379 C10.6911579,9.62606409 10.9269634,10.3297633 10.9505827,11.0890396 C10.9709752,11.7493618 10.8289221,12.3766144 10.5602048,12.934421 L15.3557597,15.3846187 C15.4094316,15.4059663 15.4688323,15.4184208 15.5310922,15.4184208 C15.7887198,15.4184208 15.998404,15.2099302 15.998404,14.9534225 L15.998342,14.9535371 Z"/>\n  <path class="made-with" fill-rule="evenodd" d="M13.102293,2.54304 C13.832763,2.54304 14.404993,2.72566 14.819093,3.09089 C15.233153,3.45613 15.448003,3.95905 15.463623,4.59969 L15.463623,7.51769 C15.463623,8.09972 15.537843,8.56259 15.686283,8.90639 L15.686283,9.00014 L14.549503,9.00005 C14.487003,8.87505 14.436223,8.6524 14.397163,8.33208 C13.893253,8.85552 13.291663,9.11724 12.592463,9.11724 C11.967463,9.11724 11.454763,8.94048 11.054363,8.58697 C10.653973,8.23345 10.453773,7.78521 10.453773,7.24227 C10.453773,6.58211 10.704743,6.06947 11.206703,5.70417 C11.708663,5.33893 12.414703,5.15632 13.324903,5.15632 L14.379603,5.15632 L14.379603,4.65827 C14.379603,4.27936 14.266323,3.97761 14.039763,3.753 C13.813203,3.52839 13.479223,3.41609 13.037763,3.41609 C12.651043,3.41609 12.326823,3.513745 12.065103,3.70906 C11.803383,3.90437 11.672523,4.1407 11.672523,4.41804 L10.582723,4.41804 C10.582723,4.10163 10.695023,3.79597 10.919633,3.50105 C11.144243,3.20613 11.448933,2.97273 11.833693,2.80085 C12.218463,2.62897 12.641313,2.54304 13.102293,2.54304 Z M22.361013,0 L22.361013,9 L21.364923,9 L21.312193,8.32031 C20.878593,8.85156 20.275093,9.11719 19.501693,9.11719 C18.767313,9.11719 18.168693,8.81641 17.705793,8.21485 C17.242893,7.61328 17.011403,6.82815 17.011403,5.85935 L17.011403,5.77738 C17.011403,4.80472 17.241873,4.02248 17.702813,3.43068 C18.163753,2.83888 18.767213,2.54298 19.513313,2.54298 C20.255503,2.54298 20.843413,2.79688 21.277013,3.3047 L21.277013,0 L22.361013,0 Z M26.650963,2.54298 C27.475183,2.54298 28.115763,2.81446 28.572863,3.35743 C29.029893,3.9004 29.258413,4.67773 29.258413,5.68943 L29.258413,6.1406 L24.963513,6.1406 C24.979143,6.7656 25.161753,7.2705 25.511363,7.6552 C25.860973,8.03997 26.305303,8.23235 26.844363,8.23235 C27.227173,8.23235 27.551393,8.154226 27.817023,7.99797 C28.082653,7.84172 28.315073,7.63469 28.514283,7.37688 L29.176393,7.8925 C28.645143,8.70891 27.848293,9.1171 26.785793,9.1171 C25.926423,9.11723 25.227203,8.83501 24.688103,8.27055 C24.149033,7.70609 23.879513,6.95125 23.879513,6.00595 L23.879513,5.80673 C23.879513,5.17782 23.999633,4.61633 24.239863,4.12213 C24.480103,3.62799 24.816033,3.24127 25.247663,2.96193 C25.679303,2.68263 26.147073,2.54298 26.650963,2.54298 Z M47.332633,1.12501 L47.332633,2.66021 L48.516233,2.66021 L48.516233,3.4981 L47.332633,3.4981 L47.332633,7.4297 C47.332633,7.68361 47.385363,7.87404 47.490833,8.00099 C47.596303,8.12794 47.775993,8.19142 48.029893,8.19142 C48.154893,8.19142 48.326763,8.167983 48.545513,8.121108 L48.545513,9.000018 C48.260353,9.078143 47.983013,9.117208 47.713483,9.117208 C47.229103,9.117208 46.863873,8.970728 46.617783,8.677758 C46.371693,8.384788 46.248643,7.968778 46.248643,7.429758 L46.248643,3.498158 L45.094343,3.498158 L45.094343,2.660268 L46.248643,2.660268 L46.248643,1.12501 L47.332633,1.12501 Z M6.76764,2.54303 C8.15824,2.54303 8.86534,3.27935 8.88874,4.75203 L8.88874,9.00003 L7.80474,9.00003 L7.80474,4.81643 C7.80474,4.3633 7.70123,4.02444 7.49419,3.79983 C7.28715,3.57522 6.93951,3.46292 6.45119,3.46292 C6.04884,3.46292 5.71486,3.58304 5.44919,3.82327 C5.18356,4.06351 5.02927,4.38674 4.9863,4.793 L4.9863,9.00003 L3.8965,9.00003 L3.8965,4.8457 C3.8965,3.92382 3.44533,3.4629 2.543,3.4629 C1.83206,3.4629 1.3457,3.76563 1.084,4.3711 L1.084,9.00003 L7.10542736e-15,9.00003 L7.10542736e-15,2.6602 L1.025503,2.66025 L1.0548,3.36337 C1.51965,2.81649 2.1466,2.54303 2.9357,2.54303 C3.82242,2.54303 4.4259,2.8829 4.7462,3.56256 C4.95714,3.25787 5.23155,3.01178 5.56944,2.82428 C5.90733,2.63678 6.30674,2.54303 6.76764,2.54303 Z M34.217613,2.66023 L35.465613,7.40633 L36.942213,2.66023 L37.815263,2.66023 L39.321033,7.50593 L40.539833,2.66023 L41.623833,2.66023 L39.778133,9.00003 L38.899223,9.00003 L37.358223,4.19533 L35.858223,9.00003 L34.979313,9.00003 L33.139513,2.66023 L34.217613,2.66023 Z M44.015333,2.66023 L44.015333,9.00003 L42.931333,9.00003 L42.931333,2.66023 L44.015333,2.66023 Z M50.977973,5e-05 L50.978033,3.42771 C51.458503,2.83786 52.083533,2.54294 52.853033,2.54294 C54.192833,2.54294 54.868633,3.29879 54.880333,4.81054 L54.880333,9.00005 L53.796333,9.00005 L53.796333,4.80474 C53.792427,4.34771 53.687933,4.00982 53.482853,3.79104 C53.277773,3.57229 52.958443,3.46292 52.524843,3.46292 C52.173283,3.46292 51.864683,3.556669 51.599063,3.74417 C51.333433,3.93167 51.126403,4.17776 50.977973,4.48245 L50.977973,9.00005 L49.893973,9.00005 L49.893973,5e-05 L50.977973,5e-05 Z M19.783013,3.46295 C19.251763,3.46295 18.837703,3.66803 18.540813,4.07818 C18.243933,4.48834 18.095503,5.09578 18.095503,5.90048 C18.095403,6.61918 18.243843,7.18163 18.540713,7.58793 C18.837593,7.99418 19.247743,8.19731 19.771213,8.19731 C20.458713,8.19731 20.960713,7.88872 21.277113,7.27153 L21.277113,4.35943 C20.952893,3.76177 20.454853,3.46295 19.783013,3.46295 Z M14.379613,5.92386 L13.530003,5.92386 C12.201903,5.92386 11.537803,6.31253 11.537803,7.08986 C11.537803,7.42971 11.651083,7.69533 11.877643,7.88674 C12.104203,8.07815 12.395223,8.17385 12.750693,8.17385 C13.090543,8.17388 13.412813,8.08599 13.717503,7.91021 C14.022193,7.73443 14.242893,7.50591 14.379613,7.22466 L14.379613,5.92386 Z M26.651043,3.43363 C26.213533,3.43363 25.846343,3.59281 25.549433,3.91117 C25.252553,4.22953 25.068963,4.67582 24.998653,5.25007 L28.174453,5.25007 L28.174453,5.168039 C28.143202,4.617259 27.994763,4.190499 27.729143,3.887739 C27.463523,3.584979 27.104143,3.43363 26.651043,3.43363 Z M43.482103,0.35158 C43.693043,0.35158 43.853193,0.412126 43.962573,0.53322 C44.071953,0.65431 44.126633,0.80275 44.126633,0.97853 C44.126633,1.15431 44.071943,1.3008 43.962573,1.41798 C43.853193,1.53517 43.693043,1.59376 43.482103,1.59376 C43.271163,1.59376 43.111983,1.535167 43.004563,1.41798 C42.897143,1.30079 42.843433,1.15431 42.843433,0.97853 C42.843433,0.80275 42.897143,0.65431 43.004563,0.53322 C43.111983,0.41213 43.271163,0.35158 43.482103,0.35158 Z"/>\n</svg>\n',k="openSidebar",D="closeSidebar",M="getState",U="freeze",z="unfreeze",B="getProperty",F="goToPage",G="goToPageById",H="goToPageByUserInput",Z="getFullUrl",V="setLocalizationString",Y="hide",j="show",$="getDefaultLogoUrl",W="removePageProperty",X="resetNumeration",K="getPagerState",q=["bookStateChanged","goToFirstPage","goToLastPage","init","zoomed","unzoomed","fullscreen","sound","note","link","linkToForm","lightbox","video","image","gif","download","share","print","orientation","contextMenu","develop","turnStart","turnStop","turned","window","selectText","search","preloader-off","swipe","log","accessibility","time"];let J,Q,ee,te,ne,re,oe,ae,ie;const se=e=>e.width<e.height?"portrait":"landscape",le=n.g.location!==n.g.parent.location;let ce=(0,a.Z)().getLocalStorage().getItem("showConfig"),de=!1;const ge=e=>{let{api:t,events:n,store:r}=e;ce=ce||r?.state?.workspace?.showConfig,ce&&n.forEach((e=>{t.on(e,(()=>{r?.state?.workspace?.isInited&&r.commit("workspace/LOG_API_EVENT",e)}))})),de=ce},ue=e=>{let{param:t,value:n,target:r,store:o}=e;ce=ce||o?.state?.workspace?.showConfig,ce&&o?.state?.workspace?.isInited&&o.commit("workspace/LOG_API_USAGE",{param:t,value:JSON.stringify(n),target:r})};function pe(){J.getters["pager/isFrozen"]?oe=setTimeout((()=>{pe()}),250):(oe=null,ie?J.dispatch("pager/goToPageById",{id:ae,target:"api"}):J.dispatch("pager/goToPageByIndex",{pageIndex:ae,target:"api"}))}function he(){const e={},t=e.ui={};t.toolWindow=J.state.sidebar.opened,t.popup=J.state.popup.opened,t.isFullscreen=J.state.workspace.fullScreenMode,t.searchQuery=J.state.search.query;const n=J.state.workspace.size;t.orientation=n.width<n.height?"portrait":"landscape";const r=J.getters["pager/legacyState"];return e.isZoomed=r.zoomMode,e.isSingle="single"===J.getters["pager/mode"],e.mode=r.mode,e.rightPageId=r.rightPage,e.leftPageId=e.isSingle?null:r.leftPage,e.isWide=r.wide,r.leftPage&&(e.leftPageUrl=J.getters["pages/urlHeaderById"]({id:r.leftPage,forceFullWide:!0})),r.rightPage?e.rightPageUrl=J.getters["pages/urlHeaderById"]({id:r.rightPage,forceFullWide:!0}):e.rightPageUrl=e.leftPageUrl,r.leftPage||(e.leftPageUrl=e.rightPageUrl),e.version=ee,e.isStarted=J.state.workspace.isInited,e.currentPage=r.currentPage,e.pageIndex=J.getters["pages/pageIndexById"](e.currentPage),r.singleMode&&r.widePageSecondHalf&&e.pageIndex++,e.locale=J.state.i18n.currentLocale,e.device=J.getters["workspace/deviceType"],e}function fe(e,t,r){Q=r,te=he().pageIndex,r.$on("link",(n=>{const r={type:n.type,source:n.source,isBlacklisted:n.isBlacklisted};"internal"===n.type&&(r.pageUrl=e.getters["pages/urlHeaderById"]({id:n.pageId}),r.pageToUrl=e.getters["pages/urlHeaderById"]({id:n.pageToId})),"external"===n.type&&(r.url=n.url,r.pageUrl=e.getters["pages/urlHeaderById"]({id:n.pageId}),r.target=n.target),t.trigger("link",r)})),r.$on("video",(e=>{t.trigger("video",e)})),r.$on("image",(n=>{n.pageUrl=e.getters["pages/urlHeaderById"]({id:n.pageId}),t.trigger("image",n)})),r.$on("lightbox",(e=>{t.trigger("lightbox",e)})),r.$on("gif",(e=>{t.trigger("gif",e)})),r.$on("download",(e=>{t.trigger("download",e)})),r.$on("share",(e=>{t.trigger("share",e)})),r.$on("print",(e=>{t.trigger("print",e)})),r.$on("orientation",((e,n)=>{t.trigger("orientation",{action:n,state:he(),value:e})})),r.$on("develop",(e=>{t.trigger("develop",e)})),r.$on("contextMenu",(e=>{t.trigger("contextMenu",e)})),r.$on("turnStart",(e=>{const n=he();t.trigger("turnStart",n,e)})),r.$on("turnStop",(e=>{const n=he();t.trigger("turnStop",n,e)})),r.$on("window",(e=>{t.trigger("window",e)})),r.$on("selectText",(n=>{n.pageUrl=e.getters["pages/urlHeaderById"]({id:n.pageId}),t.trigger("selectText",n)})),r.$on("turned",(()=>{const n=e.state.pager.lastTarget,r=se(e.state.workspace.size),o=he();o.pageIndex!==te&&ne&&r===ne?(t.trigger("turned",o,n,r),te=o.pageIndex,ne=r):ne=ne?r:null})),r.$on("preloader-off",(()=>{ne=se(e.state.workspace.size),t.trigger("preloader-off",he()),le&&n.g.parent.postMessage({action:"publicationLoaded",id:e.state.info?.embedId||null},"*")})),r.$on("highlight",(e=>{t.trigger("highlight",e)})),r.$on("panelStateChanged",(e=>{t.trigger("panelStateChanged",e)})),r.$on("popupStateChanged",(e=>{t.trigger("popupStateChanged",e)})),r.$on("onSidebarClose",(e=>{t.trigger("onSidebarClose",e)})),r.$on("swipe",(e=>{t.trigger("swipe",e)})),r.$on("log",(e=>{t.trigger("log",{level:"info",...e,timestamp:Date.now()})})),r.$on("accessibility",(e=>{t.trigger("accessibility",e)})),r.$on("note",(e=>{void 0!==window.flippingbook&&(e.initiator="customizer"),t.trigger("note",e)})),r.$on("onTabFormOpen",(n=>{t.trigger("onTabFormOpen",n),t.trigger("formLink",{pageUrl:e.getters["pages/urlHeaderById"]({id:n.pageId}),...n})})),r.$on("popupFormOpenPrevented",(e=>{t.trigger("popupFormOpenPrevented",e)}))}function me(e,t,r){J=e,ee=r;const o=(0,d.Ds)((function(){const n=e.state.search.results;e.state.search.query&&t.trigger("search",{query:e.state.search.query,success:n.length>0,quantity:n.length})}),2500),i={get skin(){const t=JSON.parse(JSON.stringify(e.state.skin.styles));return t.set=function(t,n){ue({param:t,value:n,target:"skin",store:e}),e.dispatch("skin/setParam",{param:t,value:n})},t.getJSON=function(e){let{replacer:n=null,space:r=null}=e;return JSON.stringify(t,n,r)},t},get pages(){const t={block:"blocks",link:"links",image:"images",gif:"gifs",gallery:"galleries",video:"videos"},n=JSON.parse(JSON.stringify(e.state.book)),r=e.state.content.outsideStorage;n.search={color:e.state.search.color},n.pages=JSON.parse(JSON.stringify(e.state.pages)),delete n.pages.size;let o=n.pages.hasOwnProperty("defaults")&&n.pages.defaults.textBlocks||!1;const a=["defaults","structure","downloadProgress","downloadProgressUpdated","changeInPage","apiChange"];for(const i in n.pages)if(n.pages.hasOwnProperty(i)&&-1===a.indexOf(i)){if(n.pages[i]?.content?.length>0){const o={};for(const a in n.pages[i].content){if(!n.pages[i].content.hasOwnProperty(a))continue;const s=n.pages[i].content[a];let l;l=r?JSON.parse(JSON.stringify(e.contentData[s])):JSON.parse(JSON.stringify(e.state.content.items[s]));const c=l.type;delete l.type,delete l.pageId,delete l.itemId,delete l.descriptionDir,l.items&&l.items.forEach((e=>{delete e.pageId,delete e.descriptionDir})),o[t[c]]||(o[t[c]]=[]),o[t[c]].push(l)}n.pages[i]=Object.assign(n.pages[i],o)}o=o||n.pages[i].textBlocks||!1,delete n.pages[i].content,delete n.pages[i].substrateUrl,delete n.pages[i].nextSubstrateUrl,delete n.pages[i].textUrl,delete n.pages[i].nextTextUrl,delete n.pages[i].thumbnailUrl,delete n.pages[i].status,delete n.pages[i].loadPending,delete n.pages[i].updatePending,delete n.pages[i].currentSize,delete n.pages[i].side,delete n.pages[i].crossWide,delete n.pages[i].hasMargins}return delete n.pages.apiChange,delete n.pages.changeInPage,delete n.pages.downloadProgress,delete n.pages.downloadProgressUpdated,n.selectText={textBlocks:o},n.set=function(t,n){ue({param:t,value:n,target:"pages",store:e});const r=t.split(".");switch(r[0]){case"links":"color"===r[1]&&e.dispatch("book/setLinksColor",n),"target"===r[1]&&e.dispatch("book/setLinksTarget",n),"highlightOnFlip"===r[1]&&e.dispatch("book/setLinksFlipHighlight",n);break;case"bookSize":"width"===r[1]&&e.dispatch("book/setBookSizeWidth",n),"height"===r[1]&&e.dispatch("book/setBookSizeHeight",n),e.dispatch("sidebar/closeSidebar",{target:"api"});break;case"pages":3===r.length&&(e.dispatch("pages/setPageProperty",{pageID:r[1],property:r[2],value:n}),"shadowDepth"===r[2]&&e.dispatch("pager/setForceRerender",{forceRerender:!0}));break;case"numerationOffset":case"thickness":case"hardcover":case"hardcoverColor":case"contentCrop":case"flipCorner":e.dispatch("book/changeProperty",{key:r[0],value:n});break;case"rightToLeft":case"pageFlippingDuration":case"shadowDepth":e.dispatch("book/changeProperty",{key:r[0],value:n}),e.dispatch("pager/setForceRerender",{forceRerender:!0});break;default:console.error("We've forgotten about this property",t,n)}},n.getJSON=function(e){let{replacer:t=null,space:r=null}=e;return JSON.stringify(n,t,r)},n},get workspace(){const t=JSON.parse(JSON.stringify(e.state.workspace));return delete t.userAgentInfo,delete t.muteSound,delete t.pausedByReader,delete t.freezed,delete t.fullScreenMode,delete t.isInited,delete t.isResizing,delete t.isEmbed,delete t.isProtected,delete t.usePostMsg,delete t.embedScript,delete t.embedLightbox,delete t.layout,delete t.bookComponent,delete t.modalOpened,delete t.preloader,delete t.size,delete t.containerSize,delete t.holderSize,delete t.visible,delete t.status,delete t.highlightTimeout,delete t.mini,delete t.zoomPanel,delete t.urlBlackList,delete t.flashMessage,delete t.wheelScroll,delete t.components.slideshow.active,delete t.components.slideshow.target,delete t.contextMenuVisible,delete t.callToNavigation,delete t.frozenBy,delete t.webPSupported,delete t.animationInProgress,delete t.animationType,delete t.defaultZoomFactor,delete t.doubletapInterval,delete t.inspectorMode,delete t.accessibilityMode,delete t.policiesUpdated,delete t.isAndroidKeyboardOpened,delete t.lastAndroidKeyboardOpened,delete t.lastAndroidKeyboardClosed,delete t.lastOrientationChanged,delete t.isPrintedInSafari15,delete t.selectTextTipShowsCount,delete t.initialZoom,t.toc=JSON.parse(JSON.stringify(e.state.toc)),(0,d.l)(t.toc,"toggle"),(0,d.l)(t.toc,"active"),(0,d.l)(t.toc,"route"),delete t.toc.scrollY,t.accessibilityPDF=JSON.parse(JSON.stringify(e.state.downloads.accessibilityPDF)),t.downloads=JSON.parse(JSON.stringify(e.state.downloads)),delete t.downloads.accessibilityPDF,t.print=JSON.parse(JSON.stringify(e.state.print)),t.logoLink=JSON.parse(JSON.stringify(e.state.logo)),t.publicationInfo=JSON.parse(JSON.stringify(e.state.info)),delete t.publicationInfo.version,t.search={enabled:e.state.search.enabled},t.set=function(t,n){ue({param:t,value:n,target:"workspace",store:e});const r=t.split(".");switch(r[0]){case"attractOnControlsSet":e.dispatch("workspace/setAttractToControlsSet",n);break;case"keepZoomOnPagerMove":e.dispatch("workspace/setKeepZoomOnPagerMove",n);break;case"lightboxNeighborsNavEnabled":e.dispatch("workspace/setLightboxNeighborsNavEnabled",n);break;case"toc":"enabled"===r[1]&&(n?e.dispatch("toc/enable"):(e.dispatch("toc/disable"),"toc"===e.state.sidebar.opened&&e.dispatch("sidebar/closeSidebar",{target:"api"}))),"showPageLabels"===r[1]&&e.dispatch("toc/setShowPageLabels",n),"children"===r[1]&&(e.dispatch("toc/setChildren",n),e.dispatch("toc/resetRoutes"));break;case"downloads":1===r.length?(0,c.Kn)(n)&&(void 0!==n.enabled&&(n.enabled?e.dispatch("downloads/enable"):(e.dispatch("downloads/disable"),"download"===e.state.popup.opened&&e.dispatch("popup/closePopup"),-1!==ee.indexOf("mobile")&&e.dispatch("sidebar/closeSidebar",{target:"api"}))),void 0!==n.allPagesVisible&&e.dispatch("downloads/changeProperty",{key:"allPagesVisible",value:n.allPagesVisible}),void 0!==n.currentPagesVisible&&e.dispatch("downloads/changeProperty",{key:"currentPagesVisible",value:n.currentPagesVisible}),void 0!==n.url&&e.dispatch("downloads/changeProperty",{key:"url",value:n.url}),void 0!==n.size&&e.dispatch("downloads/changeProperty",{key:"size",value:n.size}),void 0!==n.pageFiles&&e.dispatch("downloads/changeProperty",{key:"pageFiles",value:n.pageFiles}),void 0!==n.customFiles&&e.dispatch("downloads/changeProperty",{key:"customFiles",value:n.customFiles})):"enabled"===r[1]&&(n?e.dispatch("downloads/enable"):(e.dispatch("downloads/disable"),"download"===e.state.popup.opened&&e.dispatch("popup/closePopup"),-1!==ee.indexOf("mobile")&&e.dispatch("sidebar/closeSidebar",{target:"api"})));break;case"sound":1===r.length?e.dispatch("sound/setSound",n):"enabled"===r[1]&&e.dispatch("sound/enableSound",n);break;case"print":2===r.length&&e.dispatch("print/changeProperty",{key:r[1],value:n});break;case"search":1===r.length?(0,c.Kn)(n):(e.commit("search/CHANGE_PROPERTY",{key:r[1],value:n}),"search"===e.state.sidebar.opened&&"enabled"===r[1]&&!1===n&&e.dispatch("sidebar/closeSidebar",{target:"api"}));break;case"logoLink":2===r.length&&e.commit("logo/CHANGE_PROPERTY",{key:r[1],value:n});break;case"components":const o=e.state.workspace.attractOnControlsSet;let a=!1;if(3===r.length){if("paginator"===r[1]&&"enabled"===r[2]&&e.dispatch("workspace/setPaginatorEnabled",n),"paginator"===r[1]&&"totalPagesVisible"===r[2]&&e.dispatch("workspace/changeTotalPagesVisible",n),"copyright"===r[1]&&e.dispatch("workspace/setCopyright",{param:r[2],value:n}),"slideshow"===r[1]&&e.dispatch("workspace/setSlideshow",{param:r[2],value:n,target:"api"}),"book"===r[1]){o&&(e.dispatch("workspace/setAttractToControlsSet",!1),a=!0);const t=Object.assign({},e.state.workspace.components.book,{[r[2]]:n}),i=t.flip?"single"===t.flipbookType?"single":"spread":"slide";e.dispatch("pager/changeMode",{mode:i,target:"api"}),e.dispatch("workspace/setComponent",{component:"book",value:t})}}else if(!0===n)e.dispatch("workspace/enable",r[1]);else if(!1===n)("notes"===r[1]&&"notes"===e.state.sidebar.opened||"thumbnails"===r[1]&&"thumbnails"===e.state.sidebar.opened)&&e.dispatch("sidebar/closeSidebar",{target:"api"}),("print"===r[1]&&"print"===e.state.popup.opened||"share"===r[1]&&"share"===e.state.popup.opened)&&e.dispatch("popup/closePopup"),"textSelection"===r[1]&&e.dispatch("text/reset"),e.dispatch("workspace/disable",r[1]);else{if("book"===r[1]){o&&(e.dispatch("workspace/setAttractToControlsSet",!1),a=!0);const t=n.flip?"single"===n.flipbookType?"single":"spread":"slide";e.dispatch("pager/changeMode",{mode:t,target:"api"})}e.dispatch("workspace/setComponent",{component:r[1],value:n})}a&&setTimeout((()=>{e.dispatch("workspace/setAttractToControlsSet",!0)}),100);break;case"locales":e.dispatch("i18n/setCurrentLocale",{locale:n[0]});break;case"defaultToolWindow":e.dispatch("workspace/changeProperty",{key:"defaultToolWindow",value:n}),n&&"none"!==n?e.dispatch("sidebar/openSidebar",{component:n,params:{initial:!0},target:"api"}):null!==e.state.sidebar.opened&&e.dispatch("sidebar/closeSidebar",{target:"api"});break;case"accessibilityPDF":r[1]?("enabled"!==r[1]||n||"accessibility"!==e.state.popup.opened||e.dispatch("popup/closePopup"),e.dispatch("downloads/changeAccessibilityProperty",{key:r[1],value:n})):e.dispatch("downloads/changeProperty",{key:"accessibilityPDF",value:n});break;case"title":case"bookSize":case"cookieNotice":case"lowercaseRomans":e.dispatch("workspace/changeProperty",{key:r[0],value:n});break;default:console.error("We've forgotten about this property",t,n)}},t.getJSON=function(e){let{replacer:n=null,space:r=null}=e;return JSON.stringify(t,n,r)},t}};if(t){ge({api:t,events:q,store:e}),q.forEach((e=>{t.addEvent(e)}));let r="",s="",l=!1,d=!1;e.subscribe(((g,u)=>{let p;!de&&ge({api:t,events:q,store:e});const h=function(e,t){let n=!0;return["stateForDisplay","leftPageUrl","rightPageUrl","isWide","widePageSecondHalf","isSlide","isSingle"].map((r=>{n=n&&e[r]===t[r]})),n},f=function(){p=he();const r=u.pager.lastTarget,o=u.workspace.size,a=o.width<o.height?"portrait":"landscape",i=n.g.location!==n.g.parent.location;"history"===r&&h(p,re)||(re=p,t.trigger("bookStateChanged",{stateForDisplay:e.getters["pager/stateForDisplay"],totalForDisplay:e.getters["pager/totalForDisplay"],leftPageUrl:p.leftPageUrl,rightPageUrl:p.rightPageUrl,currentPageId:u.pager.currentPage,isWide:p.isWide,widePageSecondHalf:u.pager.widePageSecondHalf,isSlide:!u.workspace.components.book.flip,isSingle:p.isSingle},r,a),i&&n.g.parent.postMessage({action:"pageChanged",leftPageUrl:p.leftPageUrl,rightPageUrl:p.rightPageUrl},"*"),"nav-first"===r&&t.trigger("goToFirstPage"),"nav-last"===r&&t.trigger("goToLastPage"))};switch(g.type){case"workspace/INIT":(0,c.Kn)(t)&&(0,c.mf)(t.addMethod)&&(t.addMethod(M,(function(){return he()})),t.addMethod(U,(function(){let{target:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.dispatch("pager/freeze",{target:"api"}),e.dispatch("workspace/freeze",{target:"api",apiTarget:t})})),t.addMethod(z,(function(){let{target:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.dispatch("pager/unfreeze",{target:"api"}),e.dispatch("workspace/unfreeze",{target:"api"})})),t.addMethod(B,(function(e){if(i[e])return i[e]})),t.addMethod(F,(function(t){oe?(ie=!1,ae=t):e.state.pager.freezed?(ie=!1,ae=t,oe=setTimeout((()=>{pe()}),250)):e.dispatch("pager/goToPageByIndex",{pageIndex:t,target:"api"})})),t.addMethod(G,(function(t){t=""+t,oe?(ie=!0,ae=t):e.getters["pager/isFrozen"]?(ie=!0,ae=t,oe=setTimeout((()=>{pe()}),250)):e.dispatch("pager/goToPageById",{id:t,target:"api"})})),t.addMethod(Z,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,a.Z)().getShareUrl(!!e,e)})),t.addMethod(V,(function(t,n){e.dispatch("i18n/setLocaleString",{name:t,value:n})})),t.addMethod(Y,(function(){e.dispatch("workspace/setVisible",!1)})),t.addMethod(j,(function(){e.dispatch("workspace/setVisible",!0)})),t.addMethod($,(function(){let t=R;return-1!==e.state.logo.position.indexOf("right")&&(t=t.replace('class="made-with"','class="made-with" transform="translate(62 0)"')),"data:image/svg+xml;base64,"+btoa(t)})),t.addMethod(W,(function(t,n){-1!==["backgroundColor","customSubstrateSize","displayName","height","pageResize","rasterize","shadowDepth","slideDelay","stub","substrateFormat","substrateSizes","substrateSizesReady","substrateZoomFormat","textLayer","thFormat","urlHeader","vectorText","wide","width"].indexOf(n)?e.dispatch("pages/removePageProperty",{pageID:t,property:n}):console.log("This is not a property that you are allowed to remove")})),t.addMethod(X,(function(){e.dispatch("pages/resetNumeration"),e.dispatch("book/changeProperty",{key:"numerationOffset",value:0})})),t.addMethod(k,(function(t){e.dispatch("sidebar/openSidebar",{component:t,target:"api"})})),t.addMethod(D,(function(){e.dispatch("sidebar/closeSidebar",{target:"api"})})),t.addMethod(H,(function(t){e.dispatch("pager/goToPageByUserInput",{userInput:t,type:"caption",target:"api"})})),t.addMethod(K,(function(){return e.getters["pager/stateForDisplay"]})));const n=(0,a.Z)().adapter.options.hashMode;t.trigger("init",{...he(),hashMode:n}),f();break;case"pager/CHANGE_PAGE":if(!u.workspace.isInited)return;f();break;case"pager/CHANGE_ZOOM_MODE":p=he(),p.isZoomed?re=p:(p=re,p.isZoomed=!1),e.state.pager.isMoveWatcherActive||t.trigger(p.isZoomed?"zoomed":"unzoomed",p);break;case"search/CHANGE_STATUS":"complete"===g.payload&&o();break;case"sidebar/OPEN_SIDEBAR":if(s=e.state.sidebar.opened,d=!!g.payload.params,d)break;t.trigger("window",{action:"open",component:s});break;case"sidebar/CLOSE_SIDEBAR":if(d){d=!1;break}t.trigger("window",{action:"close",component:s});break;case"popup/OPEN_POPUP":if(r=e.state.popup.opened,l=!!g.payload.params,l)break;t.trigger("window",{action:"open",component:e.state.popup.opened});break;case"popup/CLOSE_POPUP":if(l){l=!1;break}t.trigger("window",{action:"close",component:r});break;case"workspace/SET_FULLSCREEN_MODE":t.trigger("fullscreen",{action:"on"});break;case"workspace/UNSET_FULLSCREEN_MODE":t.trigger("fullscreen",{action:"off"});break;case"sound/MUTE_SOUND":t.trigger("sound",{action:"off"});break;case"sound/UNMUTE_SOUND":t.trigger("sound",{action:"on"});break;case"notes/ADD_NOTE":const h=e.state.notes.items.length;Q.$emit("note",{action:"add",target:g.payload.target,count:h}),1===h&&Q.$emit("note",{action:"addFirst",target:g.payload.target}),2===h&&Q.$emit("note",{action:"addSecond",target:g.payload.target}),h>=3&&Q.$emit("note",{action:"addMore",target:g.payload.target});break;case"notes/DELETE_NOTE":Q.$emit("note",{action:"remove",target:g.payload.target,count:e.state.notes.items.length});break;case"notes/SET_OPENED":g.payload.id&&Q.$emit("note",{action:"open",target:g.payload.target});break;case"workspace/SET_SLIDESHOW":"active"!==g.payload.param||(0,c.o8)(g.payload.value)||t.trigger("slideshow",{action:g.payload.value?"start":"stop",target:g.payload.target});break;case"workspace/SET_SLIDESHOW_ACTIVE":(0,c.o8)(g.payload.value)||t.trigger("slideshow",{action:g.payload.value?"start":"stop",target:g.payload.target});break;case"workspace/SET_BANNER_HEIGHT":t.trigger("bannerHeight",g.payload)}}))}}var Ee=n(8941);let Se={};const ye={install(e){e.prototype.$behavior=function(e){if(e in Se){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Se[e](...n)}}},setBehavior(){Se=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},clearBehavior(){Se={}}},Ie={},be={},Pe={install(e){e.prototype.$pageRegistry={registerPage(e,t,n){Ie[e+"_"+t]={component:n}},deregisterPage(e,t){delete Ie?.[e+"_"+t]},getPageComponent:(e,t)=>Ie[e+"_"+t]?.component||null},e.prototype.$contentRegistry={registerContentItem(e,t,n){const r="left"===t?"right":"left";if(be[e+"_"+t]={component:n},be[e+"_"+r]?.component){const t=be[e+"_"+r].component;t.$emit("crossWideRegistered",n),n.$emit("crossWideRegistered",t)}},deregisterContentItem(e,t){delete be[e+"_"+t]}}}};var Te=n(154),_e=n(2574),we=n(8093),ve=n(4487),Ce=n(8943);const Le="https://74501e2d31bd4e18a13f1e9071b905a4@o26255.ingest.sentry.io/1844548",Oe="https://2200a5f5f5a14e42b5708b426ec62f7f@o26255.ingest.sentry.io/4504077408665600";let Ae,xe,Ne,Re,ke=!0,De=!1,Me=null;ke=!1,Ae="4.20.100",Re="production";const Ue=6e5,ze={init(e,t){xe=e.api,Ne=t,!ke&&Ae&&e.useSentry&&this._loadExternalConfig((e=>this._start(e)),(e=>{this._sendCrash(e)}))},_processExternalConfig:e=>(["denyUrls","allowUrls","ignoreErrors"].forEach((t=>{if(e.hasOwnProperty(t)){let n=e[t];for(let e=0;e<n.length;e++){let t=n[e];0===t.indexOf("regex:")&&(t=t.slice(6),n[e]=new RegExp(t,"i"))}e[t]=n}})),e),_matchSubRule(e,t,n){const r=t.split(".");let o=n;"exception"===r[0]&&(r.shift(),o=n.exception.values[0]);for(let a=0;a<r.length;a++){if(!o.hasOwnProperty(r[a]))return!1;if(!(a<r.length-1)){if(a===r.length-1&&(0,c.HD)(o[r[a]])){return new RegExp(e,"i").test(o[r[a]])}return!1}o=o[r[a]]}},_matchRule(e,t){for(const n in e){if(!e.hasOwnProperty(n))return!1;if(!this._matchSubRule(e[n],n,t))return!1}return!0},_start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rules:[],delay:null,enabled:!1,sampleRate:1,disabledVersions:[],enabledVersions:[],denyUrls:[],allowUrls:[],ignoreErrors:[]},t=!e.enabled||e.disabledVersions.indexOf(Ae)>=0;if(t&&e.enabledVersions.indexOf(Ae)<0)return;e.denyUrls=e.denyUrls||e.blacklistUrls||[],e.allowUrls=e.allowUrls||e.whitelistUrls||[],this.config=this._processExternalConfig(e);const n={Vue:O(),dsn:"mobile-app"===Ne?Oe:Le,release:Ae,environment:Re,integrations:[(0,Ce.E)({depth:5})],denyUrls:this.config.denyUrls,allowUrls:this.config.allowUrls,ignoreErrors:this.config.ignoreErrors,sampleRate:this.config.sampleRate||1,maxValueLength:5120,attachStacktrace:!0,normalizeDepth:6};n.beforeSend=(e,n)=>{if(t=!this.config.enabled||this.config.disabledVersions.indexOf(Ae)>=0,t&&this.config.enabledVersions.indexOf(Ae)<0)return null;if(null!==this.config.delay&&null!==Me&&Me+this.config.delay>Date.now())return console.log("Event sending throttled: "),console.error(n.originalException),null;try{for(let t=0;t<this.config.rules.length;t++){const n=this.config.rules[t];if(this._matchRule(n,e))return null}}catch{}return console.info("Event id:",n.event_id),console.error(n.originalException),Me=Date.now(),e},we.S(n),De=!0,xe.trigger("log",{message:"Sentry inited",level:"info",timestamp:Date.now()}),this._watchExternalConfigChanges()},_watchExternalConfigChanges(){setInterval((()=>{this._loadExternalConfig((e=>{this.config=this._processExternalConfig(e)}))}),Ue)},_loadExternalConfig(e,t){xe.trigger("log",{message:"Loading Sentry config",level:"info",timestamp:Date.now()}),(0,p.Z)({url:window.location.protocol+"//d2acn53ctcwkeb.cloudfront.net/config/rules.json?rnd="+Date.now(),responseType:"json",callback:e,errorback:t})},_sendCrash(e){setTimeout((()=>{xe.trigger("develop",{action:"Sentry Config Error",data:[e,Ae,Re].join(",")}),xe.trigger("log",{action:"Sentry Config Error",level:"error",timestamp:Date.now(),data:[e,Ae,Re].join(",")})}),5e3)},destroy(){if(!De)return;const e=ve.s3();e&&e.close().then((function(){process.exit()}))},log(e,t,n){De&&ve.n_({category:e,message:t,data:n,level:"info"})}};var Be=n(4147),Fe=n.n(Be);const Ge=function(e){const t=document.createElement("div");t.id="publication",t.dataset.a3c6d="",t.className="publication-container";const n=document.createElement("layout");return t.appendChild(n),e.appendChild(t),n};function He(e,t){var o=this;e.api.trigger("log",{message:"Starting app",level:"info",timestamp:Date.now()});const i=Ge(e.container);e.fullscreenContainer||(e.fullscreenContainer=e.container),N().registerCustomEvent("doubletap",{type:"tap",taps:2,posThreshold:50}),N().config.tap={domEvents:!0},O().use(N(),{name:"v-touch"}),O().use(ye),O().use(Pe),O().use(Fe(),{tagName:"svgicon"}),(0,c.Kn)(e.api)&&me((0,r.bh)(),e.api,t),ze.init(e,t);const s=Object.assign(e.services||{},e.providers||{});(0,Ee.XO)(s),C((0,r.bh)(),(function(l){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return;const d=()=>"html"===t?Promise.all([n.e(15),n.e(13),n.e(10),n.e(11)]).then(n.bind(n,7823)):Promise.all([n.e(15),n.e(10),n.e(14)]).then(n.bind(n,6649));o.vm=new(O())({el:i,fullscreenContainer:e.fullscreenContainer,i18n:A.Z,api:e.api,store:(0,r.bh)(),providers:s,render:e=>e(d),mounted:function(){(0,r.bh)().contentData=l,l=null,fe((0,r.bh)(),e.api,this),this.subscribeLogger(e.api),this.$root.$emit("log",{message:"mounted Vue root"})},methods:{onPublicationLoad:function(){this.$root.$emit("log",{message:"Calling onPublicationLoad"}),e.onPublicationLoad(this)},onReady:function(){this.$emit("preloader-off"),this.$root.$emit("log",{message:"Removed preloader"}),this.$store.state.workspace.preloader&&(0,r.bh)().dispatch("workspace/setPreloader",!1)},destructor:function(){this.$destroy(),(0,Te.W)((0,r.bh)()),(0,Ee.Ix)(),(0,r.YF)(),(0,r.kr)(),(0,_e.q)(),(0,a.Z)().destructor()},log:function(e,t,n){ze.log(e,t,n)},subscribeLogger:function(e){e.events.forEach((t=>{-1===t.indexOf("turn")&&e.on(t,(e=>{let n,r=t;if(e&&e.action&&(r=t+"."+e.action,delete e.action),(0,c.Kn)(e)){n={};for(const t in e)e.hasOwnProperty(t)&&(n[t]=JSON.stringify(e[t]))}else n=e;this.log(r,null,n)}))}))}}})}),e,t),(0,a.Z)().setCallback((e=>{const t=(0,r.bh)();t.dispatch("pager/goToPageByUserInput",{userInput:e.page,type:"url",target:"history",zoomMode:e.zoom});const n=t.getters["lightbox/isShown"];n&&void 0!==e.lightboxItemId?t.dispatch("lightbox/lightboxGoTo",{itemId:e.lightboxItemId,galleryItemIndex:e.lightboxGalleryItemIndex,target:"history",type:e.lightboxItemType}):n&&void 0===e.lightboxItemId?t.dispatch("lightbox/closeLightbox","history"):void 0!==e.lightboxItemId&&t.dispatch("lightbox/openLightbox",{type:e.lightboxItemType,itemId:e.lightboxItemId,target:"history"})}))}He.prototype.constructor=He,He.prototype.destructor=function(){this.vm.$destroy(),this.vm=null,ze.destroy()}},3074:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(3718),o=n.n(r),a=n(7152);o().use(a.Z);const i=new a.Z({fallbackLocale:"en",pluralizationRules:{ru:function(e,t){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}}})},3084:(e,t,n)=>{n.d(t,{YF:()=>_e,bh:()=>Te,kr:()=>we});var r=n(3718),o=n.n(r),a=n(629),i=n(1071),s=n(5688),l=n(7003),c=n(776),d=(n(5666),n(710));const g="search/";let u=null,p=null,h=null,f=null;function m(e,t,n){!t.enabled||n.getters["search/isInitializing"]||n.getters["search/isInitialized"]||(n.commit(g+i.lJ,!0),E(e,n),S(e,n),I(e,t,n))}function E(e,t){e.normalizeInitialized||(String.prototype.normalize?String.prototype.normalize.isPolyfill?t.commit(g+i.J$,!0):t.commit(g+i.J$,!1):(async()=>{await n.e(19).then(n.bind(n,4027)),t.commit(g+i.J$,!0)})())}function S(e,t){e.libraryInitialized||(async()=>{u=await n.e(28).then(n.bind(n,9070)),p=await n.e(24).then(n.bind(n,6233)),t.commit(g+i.Ql)})()}function y(e,t,n){e.libraryInitialized&&e.indexLoaded&&!e.algorithmInitialized&&(h=new u.Search(t,n),f=new p.SearchHighlight(n),n.commit(g+i.V8,!0))}function I(e,t,n){function r(e,t){for(;e.length;)n.commit(g+i.B9,e.splice(0,t));setTimeout((()=>{n.commit(g+i.Hc)}),100)}e.indexLoaded||e.indexLoading||(n.commit(g+i.n5),(0,d.Z)({url:(0,c.Z)().translatePath("assets/search/searchtext.js"),responseType:"json",callback:function(e){r(e.pages.page,t.chunkSize)}}))}function b(e){return e.libraryInitialized&&e.normalizeInitialized&&e.indexLoaded}function P(e){e.commit(g+i.IC)}function T(e,t){e.enabled&&t.getters["search/isInitialized"]&&h.search(e.query)}function _(){f&&f.clear()}function w(e,t){if(e.enabled&&t.getters["search/isInitialized"]&&f&&e.query.length>0){const n=t.getters["search/getSearchTextInfoLoadedPages"].slice(0);for(let t=0,r=n.length;t<r;t++){const r=n[t];e.highlights[r]&&e.highlights[r].ready&&e.highlights[r].query===e.query||f.findHighlights(e.query,r)}}}function v(e){let t=null;for(let n=0,r=e.state.search.results.length;n<r;n++){const r=e.state.search.results[n],o=Array.isArray(r)?r[0].pageId:r.pageId;if(e.getters["pager/isCurrentPage"]({pageId:o})){t=n;break}}e.dispatch("search/setActiveItemByIndex",t)}const C=e=>{e.subscribe(((t,n)=>{const r=n.search,o=n.search.initialization;switch(t.type.replace(g,"")){case i.pz:E(r,e);break;case i.Ql:case i.Hc:y(o,r,e);break;case i.J$:case i.V8:b(o)&&P(e),T(r,e);break;case i.A9:m(o,r,e),T(r,e),_();break;case i.Kk:case i.o6:case"pager/"+l.gG:"complete"===r.status&&(w(r,e),v(e));break;case"pager/"+l.OC:T(r,e);break;case i.lY:if("enabled"===t.payload.key)m(o,r,e);break;case"sidebar/"+s.Op:"search"===t.payload?.component&&m(o,r,e)}}))};var L=n(154),O=n(2574),A=n(8941);const x=e=>{e.subscribe((t=>{e.state.caniuse.userInteractions.firstFlip||"init"===e.state.pager.lastTarget||"orientation"===e.state.pager.lastTarget||"pager/CHANGE_PAGE"!==t.type?("caniuse/SET_FIRST_FLIP"===t.type||"caniuse/SET_FIRST_CLICK"===t.type||"workspace/SET_PRELOADER"===t.type&&!e.state.workspace.preloader)&&(e.dispatch("caniuse/updateAudioPermissions"),e.dispatch("caniuse/updateVideoPermissions")):e.dispatch("caniuse/setFirstFlip")}))},N=x,R=e=>{let t=!1,n=!1;const r=function(){return e.state.book.flipCorner},o=function(){return"slide-book"===e.state.workspace.bookComponent},a=function(){return"single"===e.getters["pager/state"].mode},i=function(){return"slide"===e.getters["pager/state"].mode},s=function(){return e.state.book.rightToLeft},l=function(){return e.getters["book/hasHardcover"]},c=function(){return e.getters["pager/isFirstSpread"]},d=function(){return e.getters["pager/isLastSpread"]},g=function(){return e.getters["pager/flipState"]},u=function(){return null!==e.getters["pager/nextPageId"]},p=function(){const t=e.state.pager.lastTarget;return["orientation"].includes(t)},h=function(e){if(i())return!1;const t=g(),n=l()&&(c()||d()),r="right"===e&&t.currentRight+3>t.pagesCount||"left"===e&&t.currentLeft-2<0;return n||r},f=function(){return o()&&u()||c()},m=function(){return s()?"left":"right"},E=function(e){return o()||a()||h(e)?"arrow":"corner"},S=function(){if(t||!r())return;if(t=!0,n=!1,!f())return;const o=m(),a=E(o);e.dispatch("workspace/setCallToNavigation",{type:a,side:o})},y=function(){n||(n=!0,e.dispatch("workspace/setCallToNavigation",{type:null,side:null}))};e.subscribe((e=>{"pager/CHANGE_PAGE"===e.type?t&&!p?y():setTimeout((()=>{S()}),1e3):t&&"pager/SET_CURRENT_MODE"===e.type?(y(),setTimeout((()=>{t=!1,S()}),500)):"pager/FREEZE"===e.type&&"api"!==e.payload?.target||"pager/CHANGE_FLIP_STATE"===e.type||"content/START_VIDEO"===e.type?y():"book/CHANGE_PROPERTY"===e.type&&"flipCorner"===e.payload?.key?e.payload.value?(t=!1,S()):y():"book/CHANGE_PROPERTY"!==e.type||"hardcover"!==e.payload?.key&&"rightToLeft"!==e.payload?.key||(t=!1,S())}))};var k=n(923),D=n(8968);const M=(0,c.Z)().getShareUrl(!1),U=window.parent,z=U!==window&&(new k.Z).browser.safari,B=window.location.href;let F,G,H,Z=!1;const V=e=>{e.subscribe(((t,n)=>{if(!Z){const n=e.state.workspace.components.notes;return void(z?n&&"workspace/SET_PRELOADER"===t.type&&!t.payload&&Q({store:e}):n&&"workspace/INIT"===t.type&&ne({store:e}))}let r,o,a,i,s,l,c,d,g,u;switch(t.type){case"notes/ADD_NOTE":r=t.payload.id,({page:a,pX:i,pY:s,side:l,color:c,date:d,text:g}=e.getters["notes/noteByID"](r)),u={id:r,pX:i,pY:s,side:l,color:c,date:d,text:g},Y(a,u);break;case"notes/CHANGE_TEXT":case"notes/CHANGE_COLOR":o=t.payload.index,({id:r,page:a,pX:i,pY:s,side:l,color:c,date:d,text:g}=n.notes.items[o]),u={id:r,pX:i,pY:s,side:l,color:c,date:d,text:g},j(a,u);break;case"notes/MOVE_NOTE":r=t.payload.oldValue.id,({page:a,pX:i,pY:s,side:l,color:c,date:d,text:g}=e.getters["notes/noteByID"](r)),u={id:r,pX:i,pY:s,side:l,color:c,date:d,text:g},t.payload.page===t.payload.oldValue.page?j(a,u):($(t.payload.oldValue.page,u),Y(a,u));break;case"notes/DELETE_NOTE":$(t.payload.notePage,{id:t.payload.deletedId});break;case"notes/SET_COLOR":W(t.payload.color);break;case"notes/SET_NOTES":t.payload.internal||(ee({store:e}),te({store:e}))}}))};function Y(e,t){K(e).push(t),X(e)}function j(e,t){const n=K(e),r=n.findIndex((e=>e.id===t.id));-1!==r&&(n[r]=Object.assign(n[r],t),X(e))}function $(e,t){const n=K(e),r=n.findIndex((e=>e.id===t.id));-1!==r&&(n.splice(r,1),X(e))}function W(e){const t=J("~color");H?(H[t]=e,U.postMessage({action:"saveLocalStorageFallback",fbPublicationUrl:B,localStorageFallback:H},"*")):(0,c.Z)().getLocalStorage().setItem(t,e)}function X(e){const t=J(e);F[t].length?G[e]=F[t].length:delete G[e];const n=JSON.stringify(F[t]);H?(H[t]=n,H[J("~index")]=JSON.stringify(G),U.postMessage({action:"saveLocalStorageFallback",fbPublicationUrl:B,localStorageFallback:H},"*")):((0,c.Z)().getLocalStorage().setItem(t,n),(0,c.Z)().getLocalStorage().setItem(J("~index"),JSON.stringify(G)))}function K(e){const t=J(e);if(F.hasOwnProperty(t))return F[t];const n=q(e);return F[t]=n?JSON.parse(n):[],F[t]}function q(e){return H?H[J(e)]:(0,c.Z)().getLocalStorage().getItem(J(e))}function J(e){return"~color"===e?`${M}~color`:`${M}~page${e}`}function Q(e){let{store:t}=e;const n=e=>{e.source===U&&e.data&&"localStorageFallback"===e.data.action&&(window.removeEventListener("message",n),H=e.data.localStorageFallback||{},ne({store:t}))};window.addEventListener("message",n,!1),U.postMessage({action:"getLocalStorageFallback",fbPublicationUrl:B},"*")}function ee(e){let{store:t}=e;F={},G={};t.state.pages.structure.filter((e=>!!e)).forEach((e=>{(0,c.Z)().getLocalStorage().removeItem(J(e))})),(0,c.Z)().getLocalStorage().removeItem(J("~index")),(0,c.Z)().getLocalStorage().removeItem(J("~color"))}function te(e){let{store:t}=e;t.state.notes.items.forEach((e=>{const{page:t,pX:n,pY:r,side:o,color:a,date:i,text:s,id:l}=e;Y(t,{id:l,pX:n,pY:r,side:o,color:a,date:i,text:s})}));W(t.state.notes.color)}function ne(e){let{store:t}=e;const n=q("~index"),r=q("~color"),o=t.getters["pages/pageProp"];let a,i=[],s=0;F={},G=n?JSON.parse(n):{},Object.keys(G).forEach((e=>{if(-1!==t.state.pages.structure.indexOf(e)&&(a=JSON.parse(q(e)),a)){if(!Array.isArray(a)&&Array.isArray(a.notes)){a=a.notes;for(let e=0,t=a.length;e<t;e++)s++,a[e].id=s,a[e].text||(a[e].text="")}for(let t=0,n=a.length;t<n;t++)a[t].page=e;i=i.concat(a)}})),i.forEach((e=>{s=e.id>s?e.id:s;o(e.page,"wide")&&(e.side=e.pX>=t.state.book.bookSize.width?"right":"left")})),i.sort(((e,n)=>e.page===n.page&&e.side&&n.side&&e.side!==n.side?e.side===(t.state.book.rightToLeft?"left":"right")?1:-1:e.page-n.page)),t.commit("notes/"+D.f3,{items:i,lastId:s,color:r,internal:!0}),Z=!0}let re=!1;const oe=e=>{e.subscribeAction({before:e=>{e.payload?.params?.firstNote&&(re=!0,setTimeout((()=>{re=!1}),10))}}),e.subscribe((t=>{if(!e.state.workspace.preloader&&!re)switch(t.type){case"pages/CHANGE_PAGE_SIZE":case"pager/CHANGE_PAGE":case"popup/OPEN_POPUP":case"sidebar/OPEN_SIDEBAR":e.dispatch("workspace/setActiveInteractiveElement",null);break;case"workspace/SET_SLIDESHOW_ACTIVE":t.payload&&e.dispatch("workspace/setActiveInteractiveElement",null)}}))},ae=function(e,t,n,r){const o={};o.zoom=!r&&(e.state.pages.size.zoomFactor>1||t.pager.isMoveWatcherActive);const a=t.pager.currentPage;let i;if(n&&(o.numerationOffset=t.book.numerationOffset),t.pager.single_wide){const n=e.state.book.rightToLeft;i=t.pager.single_currentSide===(n?"left":"right")}t.lightbox.currentItemId&&(o.lightboxItemId=t.lightbox.currentItemId,o.lightboxGalleryItemIndex=t.lightbox.currentGalleryItemIndex,o.lightboxItemType=t.lightbox.currentItemType),o.page=e.getters["pages/urlHeaderById"]({id:a,forceFullWide:null,widePageSecondHalf:i}),(0,c.Z)().setPath(o)};function ie(e,t){const n=e.state.pager.lastTarget,r=1!==e.state.pages.size.zoomFactor;if(["init","search","notes","orientation"].indexOf(n)>-1)return;const o=e.state.workspace.keepZoomOnPagerMove;"history"===n?e.dispatch("pager/setMoveWatcher",e.state.pager.zoomMode):r&&o&&e.dispatch("pager/setMoveWatcher",!0)}const se=e=>{e.subscribe(((t,n)=>{switch(t.type){case"lightbox/SET_CURRENT_ITEM":case"lightbox/CLOSE_LIGHTBOX":if("history"===n.lightbox.target)return;ae(e,n);break;case"pager/CHANGE_PAGE":if(ie(e,n),"history"===n.pager.lastTarget||"init"===n.pager.lastTarget)return;const r=!e.state.workspace.keepZoomOnPagerMove&&e.state.pages.size.zoomFactor>1,o="search"===n.pager.lastTarget||"notes"===n.pager.lastTarget;ae(e,n,!1,r||o);break;case"pager/CHANGE_ZOOM_MODE":if(n.pager.isMoveWatcherActive||"history"===n.pager.lastTarget)return;ae(e,n);break;case"book/CHANGE_PROPERTY":"numerationOffset"===t.payload.key&&ae(e,n,!0),"rightToLeft"===t.payload.key&&ae(e,n,!1);break;case"workspace/CHANGE_PROPERTY":"lowercaseRomans"===t.payload.key&&ae(e,n,!1)}}))};function le(e){this.store=e,this.turnTimeoutId=null,this.active=!1,this.interval=e.state.workspace.components.slideshow.interval,this.loop=e.state.workspace.components.slideshow.loop,this.waitingIntervalId=null,this.waitingInterval=250}let ce;le.prototype.constructor=le,le.prototype.turnPage=function(){const e=this.store.getters["pager/isLastSpread"];this.active&&(!this.loop&&e?this.store.dispatch("workspace/setSlideshowActive",{value:!1,target:"last-page"}):(clearTimeout(this.turnTimeoutId),this.turnTimeoutId=setTimeout((()=>{const t=e?"pager/goToFirst":"pager/goForward";this.store.dispatch(t,{target:"slide-show"})}),this.interval)))},le.prototype.waitCurrentSpreadAndTurnPage=function(){ce.currentSpreadLoaded()?this.turnPage():this.waitForCurrentSpreadLoad()},le.prototype.currentSpreadLoaded=function(){const e=this.store.getters["pager/currentPages"];return e.length>0&&!e.some((e=>!this.pageContentLoaded(e)))},le.prototype.pageContentLoaded=function(e){const t=document.querySelectorAll(`div.page[data-page-id="${e}"]`);let n=t.length>0;return Array.prototype.forEach.call(t,(e=>{if(n){const t=e.__vue__;n=!t.rawIsLoading&&!t.isLoading}if(n){const t=e.querySelectorAll("img");Array.prototype.forEach.call(t,(e=>{n&=e.classList.contains("bg-layer")||e.complete}))}if(n){const t=e.querySelectorAll(".content-element");Array.prototype.forEach.call(t,(e=>{let t=e.__vue__;t.$vnode.tag.indexOf("v-touch")>=0&&(t=e.__vue__.$parent),n&=!t.rawThumbnailUrl||!!t.thumbnailBlob}))}})),n},le.prototype.waitForCurrentSpreadLoad=function(){clearInterval(this.waitingIntervalId),this.waitingIntervalId=setInterval((()=>{this.currentSpreadLoaded()&&(this.stopActivities(),this.turnPage())}),this.waitingInterval)},le.prototype.stopActivities=function(){clearTimeout(this.turnTimeoutId),clearInterval(this.waitingIntervalId)};const de=function(e){let{store:t,active:n,nameParam:r,valueParam:o}=e;ce||(ce=new le(t)),r&&(ce[r]=o),ce.active=n,ce.active?ce.waitCurrentSpreadAndTurnPage():ce.stopActivities()},ge=e=>{const t=(t,n)=>{if(ce?.active){const n=-1!==["pager/goForward","pager/goToFirst","pager/goBackward","pager/goToLast","pager/goToPageById"].indexOf(t.type),r=n&&"slide-show"!==t.payload.target,o="workspace/setStatus"===t.type&&"pan"===t.payload,a="pages/changePageSize"===t.type&&1!==t.payload.zoomFactor,i=["workspace/setModalOpened","popup/openPopup","lightbox/openLightbox"].includes(t.type),s=["notes/addNote","notes/setMoving","notes/changeText","notes/changeColor","notes/deleteNote"].includes(t.type)||"notes/setOpenedId"===t.type&&t.payload.id,l=(r?"change-page":a&&"zoom")||o&&"pan-page"||i&&"modal"||s&&"note-interaction";if(l)return void e.dispatch("workspace/setSlideshowActive",{value:!1,target:l});n&&(ce.stopActivities(),ce.waitCurrentSpreadAndTurnPage())}if("workspace/setSlideshowActive"===t.type)de({store:e,active:t.payload.value});else if("workspace/setSlideshow"===t.type)switch(ce&&ce.stopActivities(),t.payload.param){case"enabled":de({store:e,active:!1}),e.dispatch("workspace/setSlideshowActive",{value:!1,target:"api"});break;case"active":de({store:e,active:t.payload.value}),e.dispatch("workspace/setSlideshowActive",{value:t.payload.value,target:"api"});break;default:de({store:e,active:n.workspace.components.slideshow.active,nameParam:t.payload.param,valueParam:t.payload.value})}},n=(t,n)=>{if("workspace/setComponent"===t.type&&"slideshow"===t.component){const r=n.workspace.components.slideshow,o=t.payload.value,a=o.enabled&&o.active;["enabled","interval","loop"].filter((e=>r[e]!==o[e])).forEach((n=>{de("enabled"===n?{store:e,active:a}:{store:e,active:a,nameParam:n,valueParam:t.payload.value[n]})})),e.dispatch("workspace/setSlideshowActive",{value:a,target:"api"})}};e.subscribeAction({before:n,after:t})};var ue=n(770);function pe(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return r.top<=n.top&&n.top<=r.bottom&&r.top<=n.bottom&&n.bottom<=r.bottom&&r.left<=n.left&&n.left<=r.right&&r.left<=n.right&&n.right<=r.right}var he=n(5392);const fe="1267acea530b57b536c02856ab16889a4e01c4fbeb6c4c0e6d1a69fda1601957",me="d0ec4208e2a052b0784b5c7d6027a62c6945701e8131153283992e95a13dba9e",Ee=5,Se=1,ye=e=>{let t,n=!1,r=!1,o=0,a=0;const i=function(){return"html"===e.getters["info/version"]},s=function(){return document.querySelector("a.logo-link")},l=function(){return document.querySelector("svg.logo-svg.svg-icon.svg-fill")},g=function(){return document.querySelector(".logo-container")},u=function(){return document.querySelector(".bottom-toolbar-frame")},p=function(){return document.querySelector("div.main-frame")},h=function(){return e.getters["workspace/animationInProgress"]||"pending"!==e.state.pager.flipState},f=function(){return e.getters["popup/isOpened"]||e.getters["lightbox/isShown"]||e.state.workspace.modalOpened},m=function(){return e.getters["logo/fitInMenu"]},E=function(){const t=e.getters["logo/showLogo"],n=e.getters["logo/hasDefaultLogo"],[r,o]=e.state.logo.position.split("-");return{showLogo:t,hasDefaultLogo:n,verticalPosition:r,horizontalPosition:o}},S=function(){const t=e.state.info?.id,n=e.state.info?.publicationVer,r=e.state.info?.environment;return{reportNum:t,publicationVer:n,environment:r,productCode:(0,c.Z)().getEmbedPrefix()}},y=function(){const e={develop:"https://stats.dev.flippingbook.com/REST/PostJSON",test:"https://stats.test.flippingbook.com/REST/PostJSON",release:"https://stats.flippingbook.com/REST/PostJSON"},{environment:t}=S();return e[t]||null},I=function(e){return pe(e,p())},b=function(e){return window.getComputedStyle(e).opacity>=.8},P=function(e){return"auto"===window.getComputedStyle(e).zIndex},T=[{id:"001",name:"containerOutbound",func:I,fix:"reset"},{id:"002",name:"containerOpacity",func:b,fix:"css"},{id:"003",name:"containerZindex",func:function(e){const t=window.getComputedStyle(e);return-1!==["auto","inherit","1","2"].indexOf(t.zIndex)},fix:"css"}],_=[{id:"101",name:"linkOutbound",func:I,fix:"reset"},{id:"102",name:"linkOpacity",func:b,fix:"css"},{id:"103",name:"linkZindex",func:P,fix:"css"},{id:"104",name:"linkHref",func:function(t){return t.href===e.state.logo.url},fix:"reset"},{id:"105",name:"linkTarget",func:function(t){return t.target===e.state.logo.target},fix:"reset"}],w=[{id:"201",name:"logoOutbound",func:I,fix:"reset"},{id:"202",name:"logoOpacity",func:b,fix:"css"},{id:"203",name:"logoZindex",func:P,fix:"css"},{id:"204",name:"logoElPoint",func:function(e){if(f()||!m())return!0;const t=e.getBoundingClientRect(),n=t.left+t.width/2,r=t.top+t.height/2;return e===document.elementFromPoint(n,r)},fix:"move"},{id:"301",name:"svgIntegrity",func:function(e){let t=e?.outerHTML;if(!t)return!1;t=t.replace(/data-v-[\w="]*\s?/gm,"");const n=ue.Z.hex_sha256(t);return n===fe||n===me},fix:"reset"}],v=function(){const{reportNum:e,productCode:r}=S(),{hasDefaultLogo:o}=E(),i=y();"fbp"===r&&o&&e&&i&&(t=setInterval((async()=>{L(),a++,a===Ee&&clearInterval(t)}),1e4),n=!0)},C=function(e,t){const n=e.func(t);return{...e,passed:n}},L=function(){if(!n)return;if(h())return;const e=g(),t=s(),r=l();if(i()&&(!t||!e)||!r)return A(),void N(["0"]);const a=[],c={move:!1,reset:!1,css:!1};let d=w.map((e=>C(e,r)));i()&&(d=[...d,...T.map((t=>C(t,e))),..._.map((e=>C(e,t)))]),d.forEach((e=>{e.passed||(a.push(e.id),e.fix&&(c[e.fix]=!0))})),a.length>0&&N(a),c.move&&o<Se&&x(),c.reset&&A(),c.css&&setTimeout((()=>{O()}),100)},O=function(){[g(),u(),s(),l()].filter((e=>!!e)).forEach((e=>{e.style.setProperty("z-index","initial","important"),e.style.setProperty("opacity","1","important")}))},A=function(){e.dispatch("logo/resetLogo")},x=function(){o++;const{horizontalPosition:t,verticalPosition:n}=E(),r=n+"-"+("left"===t?"right":"left");e.dispatch("logo/changeProperty",{key:"position",value:r})},N=async function(e){if(r||!(0,he.k)(e)||e.length<1)return;const{reportNum:t="empty",publicationVer:n="empty"}=S(),o=location.href,a=y(),i=[];e.forEach((e=>{i.push({Event:"publication-ping",Attributes:[{Type:"text",Name:"url",Value:o},{Type:"text",Name:"error",Value:e},{Type:"text",Name:"reportNum",Value:t},{Type:"text",Name:"version",Value:n}]})}));const s={Application:"Publication",Statistics:[...i]};(0,d.Z)({url:a,method:"POST",data:JSON.stringify(s),headers:{"Content-Type":"application/json"},callback:()=>{},errorback:()=>{}}),r=!0};e.subscribe((async e=>{if("workspace/INIT"===e.type)v()}))};var Ie=n(4950);o().use(a.ZP);const be=!1;let Pe=null;function Te(){return Pe||(Pe=new a.ZP.Store({modules:{},strict:be,plugins:[N,L.Z,O.Z,C,A.tq,se,V,ge,R,ye,oe]}))}function _e(){if(!Pe)return;const e={};Object.keys(Pe.state).forEach((t=>{e[t]=null})),Pe.replaceState(e);for(const t in Ie.Z)Pe.unregisterModule(t)}function we(){Pe=null}},4950:(e,t,n)=>{n.d(t,{Z:()=>Po});const r="CHANGE_PROPERTY",o="SET_LINKS_COLOR",a="SET_LINKS_TARGET",i="SET_LINKS_FLIP_HIGHLIGHT",s="SET_LINKS_FLIP_HOVER",l="SET_BOOK_SIZE_WIDTH",c="SET_BOOK_SIZE_HEIGHT",d={CHANGE_PROPERTY:r,SET_LINKS_COLOR:o,SET_LINKS_TARGET:a,SET_LINKS_FLIP_HIGHLIGHT:i,SET_LINKS_FLIP_HOVER:s,SET_BOOK_SIZE_WIDTH:l,SET_BOOK_SIZE_HEIGHT:c},g={changeProperty:function(e,t){let{commit:n}=e,{key:r,value:o}=t;n(d.CHANGE_PROPERTY,{key:r,value:o})},setLinksColor(e,t){let{commit:n}=e;n(d.SET_LINKS_COLOR,t)},setLinksTarget(e,t){let{commit:n}=e;n(d.SET_LINKS_TARGET,t)},setLinksFlipHighlight(e,t){let{commit:n}=e;n(d.SET_LINKS_FLIP_HIGHLIGHT,t)},setLinksFlipHover(e,t){let{commit:n}=e;n(d.SET_LINKS_FLIP_HOVER,t)},setBookSizeWidth(e,t){let{commit:n}=e;n(d.SET_BOOK_SIZE_WIDTH,t)},setBookSizeHeight(e,t){let{commit:n}=e;n(d.SET_BOOK_SIZE_HEIGHT,t)}},u={hasHardcover:(e,t,n)=>e.hardcover&&"flip-book"===n.workspace.bookComponent};var p=n(3718),h=n.n(p);const f={[r]:function(e,t){let{key:n,value:r}=t;h().set(e,n,r)},[o]:(e,t)=>{e.links.color=t},[a]:(e,t)=>{e.links.target=t},[i]:(e,t)=>{e.links.highlightOnFlip=t},[s]:(e,t)=>{e.links.highlightOnHover=t},[l]:(e,t)=>{e.bookSize.width=t},[c]:(e,t)=>{e.bookSize.height=t}},m={namespaced:!0,actions:g,getters:u,mutations:f,state:{links:{color:"#40C6FF",target:"_blank",highlightOnFlip:!0,highlightOnHover:!0},hardcover:!1,hardcoverColor:"#5a5f63",contentCrop:!0,thickness:!0,flipCorner:!0,rightToLeft:!1,numerationOffset:0,pageFlippingDuration:1,shadowDepth:2}},E="ENABLE",S="DISABLE",y="CHANGE_PROPERTY",I="CHANGE_ACCESSIBILITY_PROPERTY",b={DISABLE:S,ENABLE:E,CHANGE_PROPERTY:y,CHANGE_ACCESSIBILITY_PROPERTY:I},P={changeProperty(e,t){let{commit:n}=e,{key:r,value:o}=t;n(b.CHANGE_PROPERTY,{key:r,value:o})},changeAccessibilityProperty(e,t){let{commit:n}=e,{key:r,value:o}=t;n(b.CHANGE_ACCESSIBILITY_PROPERTY,{key:r,value:o})},enable(e){let{commit:t}=e;t(b.ENABLE)},disable(e){let{commit:t}=e;t(b.DISABLE)}};var T=n(8531),_=n(320),w=n(924);const v={getFullPdf:e=>e.url?{size:e.size?(0,T.BU)(e.size):"",url:"assets/downloads/"+encodeURIComponent(e.url),fileName:e.url}:null,getAccessiblePdf:(e,t)=>{if(e.accessibilityPDF.useOriginalPdf)return t.getFullPdf;if(e.accessibilityPDF.url||e.accessibilityPDF.fileName){return{url:e.accessibilityPDF.url?e.accessibilityPDF.url:"assets/downloads/accessibility/"+encodeURIComponent(e.accessibilityPDF.fileName),size:e.accessibilityPDF.size?(0,T.BU)(e.accessibilityPDF.size):"",fileName:e.accessibilityPDF.fileName}}return null},getCustomFiles:e=>{if(!e.customFiles||e.customFiles.length<1)return null;const t=[];for(const n in e.customFiles){if(!e.customFiles.hasOwnProperty(n))continue;const r=e.customFiles[n];let o=r.url;if((0,_.HD)(o)){const e=o.lastIndexOf("/");e>-1&&(o=o.slice(e+1))}let a=(0,T.m9)(o);a.length>45&&(a=a.slice(0,20)+" ... "+a.slice(-15)),t.push({size:r.size?(0,T.BU)(r.size):"",url:"assets/downloads/files/"+encodeURIComponent(r.url),title:a,fileName:r.url})}return t},getPageFiles:(e,t,n,r)=>{if(!e.pageFiles||e.pageFiles.length<1)return null;const o=[],a=r["pager/state"],i=a.spreadMode?2:1,s=(e,t,r,a)=>{const i=["right","left"],s=i[0]===r?i[1]:i[1]===r?i[0]:r;o.push({size:e.size?(0,T.BU)(e.size):"",url:"assets/downloads/page"+(0,T.qQ)(t)+".pdf",side:n.book.rightToLeft?s:r,pageId:t,fileName:"page"+(0,T.qQ)(t)+".pdf",ready:a===w.Z.READY})};for(const l in e.pageFiles)if(e.pageFiles.hasOwnProperty(l)){const t=r["pages/pageProp"](l,"status"),n=e.pageFiles[l];if(a.currentPage!==l||a.spreadMode?a.leftPage===l?s(n,l,"left",t):a.rightPage===l&&s(n,l,"right",t):s(n,l,"current",t),o.length===i)break}return o}},C={[y]:function(e,t){let{key:n,value:r}=t;h().set(e,n,r)},[I]:function(e,t){let{key:n,value:r}=t;h().set(e.accessibilityPDF,n,r)},[E]:function(e){e.enabled=!0},[S]:function(e){e.enabled=!1}},L={namespaced:!0,actions:P,getters:v,mutations:C,state:{enabled:!1,allPagesVisible:!0,currentPagesVisible:!1,accessibilityPDF:{enabled:!0,useOriginalPdf:!1}}},O={version:e=>e.version},A={namespaced:!0,actions:{},getters:O,mutations:{},state:{version:"",embedId:""}},x="CHANGE_PROPERTY",N="UPDATE_KEY",R="SET_RENDER_LOGO",k="SET_FIT_RECT_NAME",D={CHANGE_PROPERTY:x,UPDATE_KEY:N,SET_RENDER_LOGO:R,SET_FIT_RECT_NAME:k},M={customLogoUrl:e=>e.image&&(0,_.HD)(e.image)?e.image:null,hasDefaultLogo:e=>!(!e.url||!(0,_.HD)(e.url)||e.image)&&-1!==e.url.toLowerCase().indexOf("flippingbook.com"),showLogo:(e,t,n)=>{const r="desktop"===n.workspace.layout;return(t.customLogoUrl||t.hasDefaultLogo)&&(r||e.useInMobile)},logoKey:e=>e.logoKey,renderLogo:e=>e.renderLogo,fitInMenu:e=>!!(0,_.HD)(e.fitRectName)&&-1!==e.fitRectName.indexOf("menu")},U={[x]:function(e,t){let{key:n,value:r}=t;h().set(e,n,r)},[N]:function(e){e.logoKey=(1e6*Math.random()).toFixed()},[R]:function(e,t){e.renderLogo=t},[k]:function(e,t){e.fitRectName=t}},z={namespaced:!0,actions:{changeProperty:function(e,t){let{commit:n,state:r}=e,{key:o,value:a}=t;n(D.CHANGE_PROPERTY,{key:o,value:a})},updateKey:function(e){let{commit:t}=e;t(D.UPDATE_KEY)},resetLogo:function(e){let{commit:t}=e;t(D.SET_RENDER_LOGO,!1),setTimeout((()=>{t(D.SET_RENDER_LOGO,!0)}),0)},setFitRectName:function(e,t){let{commit:n}=e;n(D.SET_FIT_RECT_NAME,t)}},getters:M,mutations:U,state:{useInMobile:!0,allowOpaqueBar:!0,position:"bottom-right",logoKey:null,renderLogo:!0,fitRectName:null}};var B=n(7003);const F="single",G="slide",H="spread";var Z=n(3084);function V(e){return(0,Z.bh)().state[e]}function Y(e,t){return(0,Z.bh)().commit(e,t)}function j(){return(0,Z.bh)().getters}class ${_getNextPageId(e,t){const n=this._getPagesStructure();for(let r=n.indexOf(e)+1;r<n.length;r++){const e=n[r];if(e&&(t||!j()["pages/pageProp"](e,"stub")))return e}return null}_getPrevPageId(e,t){const n=this._getPagesStructure();for(let r=n.indexOf(e)-1;r>=0;r--){const e=n[r];if(e&&(t||!j()["pages/pageProp"](e,"stub")))return e}return null}_getPagesStructure(){return V("pages").structure}_getPageIndex(e){return e?this._getPagesStructure().indexOf(e):null}_isValidPageId(e){return null!==e&&this._getPageIndex(e)>=0}_isRtl(){return V("book").rightToLeft}_getPageSides(){return this._isRtl()?["right","left"]:["left","right"]}}class W{constructor(e){let{isFirstSpread:t,isLastSpread:n,zoomMode:r,mode:o,target:a}=e;this.isFirstSpread=t,this.isLastSpread=n,this.zoomMode=r,this.mode=o,this.target=a}}class X extends W{constructor(e){let{currentPage:t,pageSide:n,leftPage:r,rightPage:o,wide:a,widePageSecondHalf:i,zoomMode:s,isFirstSpread:l,isLastSpread:c,target:d}=e;super({isFirstSpread:l,isLastSpread:c,mode:F,zoomMode:s,target:d}),this.currentPage=t,this.widePageSecondHalf=i,r&&(this.leftPage=r),o&&(this.rightPage=o),this.pageSide=n,this.wide=a,this.singleMode=!0}isEqualState(e){return e&&this.mode===e.mode&&this.currentPage===e.currentPage&&this.pageSide===e.pageSide}}class K extends W{constructor(e){let{currentPage:t,leftPage:n,rightPage:r,wide:o,zoomMode:a,isFirstSpread:i,isLastSpread:s,target:l}=e;super({isFirstSpread:i,isLastSpread:s,mode:G,zoomMode:a,target:l}),this.currentPage=t,n&&(this.leftPage=n),r&&(this.rightPage=r),this.wide=o,this.slideMode=!0}isEqualState(e){return e&&this.mode===e.mode&&this.currentPage===e.currentPage}}class q extends W{constructor(e){let{leftPage:t,rightPage:n,currentPage:r,wide:o,zoomMode:a,isFirstSpread:i,isLastSpread:s,target:l}=e;super({isFirstSpread:i,isLastSpread:s,mode:H,zoomMode:a,target:l}),this.leftPage=t,this.rightPage=n,this.currentPage=r,this.wide=o,this.spreadMode=!0}isEqualState(e){return e&&this.mode===e.mode&&this.leftPage===e.leftPage&&this.rightPage===e.rightPage}}class J extends ${constructor(e){super(),this.state=e}onSelect(){const e=this.getStateByPageId(this.state.currentPage);this.setPageParameters(e.leftPage,e.rightPage,this.state.currentPage,this.state.widePageSecondHalf)}goToPageById(e,t){if(!this._isValidPageId(e))return;const n=this.getStateByPageId(e);this.setPageParameters(n.leftPage,n.rightPage,e,t)}setPageParameters(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Y("pager/SET_PROPERTY",{key:"spread_leftPage",value:e}),Y("pager/SET_PROPERTY",{key:"spread_rightPage",value:t});Y("pager/CHANGE_PAGE",{pageId:n??e??t,widePageSecondHalf:!(0,_.Ft)(r)&&r})}goForward(){const e=this._getNextState(this.state.spread_leftPage,this.state.spread_rightPage,!0);(e.leftPage||e.rightPage)&&this.setPageParameters(e.leftPage,e.rightPage)}goBackward(){const e=this._getPrevState(this.state.spread_leftPage,this.state.spread_rightPage,!0);(e.leftPage||e.rightPage)&&this.setPageParameters(e.leftPage,e.rightPage)}getNextPageId(e){return this._getNextPageId(this.state.spread_rightPage??this.state.spread_leftPage,e)}getPrevPageId(e){return this._getPrevPageId(this.state.spread_leftPage??this.state.spread_rightPage,e)}getNextState(e){const t=this._getNextState(this.state.spread_leftPage,this.state.spread_rightPage,e);return t.leftPage||t.rightPage?this.getStateByPageId(t.leftPage||t.rightPage):null}getPrevState(e){const t=this._getPrevState(this.state.spread_leftPage,this.state.spread_rightPage,e);return t.leftPage||t.rightPage?this.getStateByPageId(t.leftPage||t.rightPage):null}getSecondNextState(e){const t=this._getNextState(this.state.spread_leftPage,this.state.spread_rightPage,e);if(!t.leftPage&&!t.rightPage)return null;const n=this._getNextState(t.leftPage,t.rightPage,e);return n.leftPage||n.rightPage?this.getStateByPageId(n.leftPage||n.rightPage):null}getSecondPrevState(e){const t=this._getPrevState(this.state.spread_leftPage,this.state.spread_rightPage,e);if(!t.leftPage&&!t.rightPage)return null;const n=this._getPrevState(t.leftPage,t.rightPage,e);return n.leftPage||n.rightPage?this.getStateByPageId(n.leftPage||n.rightPage):null}getDeltaTurns(e,t){if(!e.spreadMode||!t.spreadMode)return null;if(e.rightPage===t.rightPage&&e.leftPage===t.leftPage)return 0;const n=this._getPageIndex(e.rightPage??e.leftPage),r=this._getPageIndex(t.leftPage??e.rightPage)-n,o=r>0?this._getNextState:this._getPrevState;let a=0,i={leftPage:e.leftPage,rightPage:e.rightPage};for(;i.leftPage!==t.leftPage||i.rightPage!==t.rightPage;){const e=o.apply(this,[i.leftPage,i.rightPage,!0]);if(e.null)return null;if(i=e,a++,a>this.state.maxDeltaTurns)break}return r>0?a:-a}getState(){const e=this.state.currentPage,t=j()["pages/pageProp"](e,"wide");return new q({leftPage:this.state.spread_leftPage,rightPage:this.state.spread_rightPage,currentPage:e,wide:t,zoomMode:this.state.zoomMode,isFirstSpread:!this.getPrevPageId(!0),isLastSpread:!this.getNextPageId(!0),target:this.state.lastTarget})}getLegacyState(){return this.getState()}getStateByPageId(e){const t=this._getPagesStructure().indexOf(e),n=j()["pages/pageProp"](e,"wide");if(t%2!=0){const t=e,r=n?t:this._getNextPageId(t,!0);return this._getStateByPages(t,r,n)}{const t=e,r=n?t:this._getPrevPageId(t,!0);return this._getStateByPages(r,t,n)}}getFlipState(){const e=j()["pages/pageIndexById"](this.state.spread_leftPage),t=e+1,n=j()["pages/pagesCount"];return this._isRtl()?{pagesCount:n,currentRight:n-e-1,currentLeft:n-t-1}:{pagesCount:n,currentRight:t,currentLeft:e}}getFlipParams(e){if(null===e)return null;const t=j()["pages/pagesCount"];let n=e%2!=0?"left":"right",r=e;this._isRtl()&&(r=t-e-1,n=t%2!=0?e%2!=0?"right":"left":e%2!=0?"left":"right");const o=j()["pages/pageIdByIndexWide"](r);return{pageId:o,pageSide:n,isReverseSide:void 0,wide:j()["pages/pageProp"](o,"wide")}}isCurrentPage(e){return e===this.state.spread_leftPage||e===this.state.spread_rightPage}currentPages(){const e=this.state.spread_leftPage??this.state.spread_rightPage,t=[e];return this.state.spread_rightPage&&this.state.spread_rightPage!==e&&t.push(this.state.spread_rightPage),t}_getNextState(e,t,n){const r=this._getNextPageId(t??e,n);if(!r)return{leftPage:null,rightPage:null};return{leftPage:r,rightPage:j()["pages/pageProp"](r,"wide")?r:this._getNextPageId(r,n)}}_getPrevState(e,t,n){const r=this._getPrevPageId(e??t,n);if(!r)return{leftPage:null,rightPage:null};return{leftPage:j()["pages/pageProp"](r,"wide")?r:this._getPrevPageId(r,n),rightPage:r}}_getStateByPages(e,t,n){const r=this._getPrevPageId(e??t,!0),o=this.getNextPageId(t??e,!0);return new q({leftPage:e,rightPage:t,currentPage:e??t,isFirstSpread:!r,isLastSpread:!o,wide:n,zoomMode:this.state.zoomMode,target:this.state.lastTarget})}}class Q extends ${constructor(e){super(),this.state=e}onSelect(){const e=this.state.currentPage,t=this._calculateTargetSide(e,this.state.widePageSecondHalf);this.setPageParameters(e,t)}goToPageById(e,t){if(!this._isValidPageId(e))return;const n=this._calculateTargetSide(e,t);this.setPageParameters(e,n)}setPageParameters(e,t){Y("pager/SET_PROPERTY",{key:"single_currentPage",value:e});Y("pager/SET_PROPERTY",{key:"single_currentSide",value:t??this._calculateTargetSide(e,!1)});const n=j()["pages/pageProp"](e,"wide");Y("pager/SET_PROPERTY",{key:"single_wide",value:n});Y("pager/CHANGE_PAGE",{pageId:e,widePageSecondHalf:n&&t===this._getPageSides()[1]})}goForward(){const e=this._getNextState(this.state.single_currentPage,this.state.single_currentSide,!0);null!==e.pageId&&this.setPageParameters(e.pageId,e.pageSide)}goBackward(){const e=this._getPrevState(this.state.single_currentPage,this.state.single_currentSide,!0);null!==e.pageId&&this.setPageParameters(e.pageId,e.pageSide)}getNextPageId(e){return this._getNextState(this.state.single_currentPage,this.state.single_currentSide,e).pageId}getPrevPageId(e){return this._getPrevState(this.state.single_currentPage,this.state.single_currentSide,e).pageId}getNextState(e){const t=this._getNextState(this.state.single_currentPage,this.state.single_currentSide,e);return t.pageId?this._getFullState(t.pageId,t.pageSide):null}getPrevState(e){const t=this._getPrevState(this.state.single_currentPage,this.state.single_currentSide,e);return t.pageId?this._getFullState(t.pageId,t.pageSide):null}getSecondNextState(e){const t=this._getNextState(this.state.single_currentPage,this.state.single_currentSide,e);if(!t.pageId)return null;const n=this._getNextState(t.pageId,t.pageSide,e);return n.pageId?this._getFullState(n.pageId,n.pageSide):null}getSecondPrevState(e){const t=this._getPrevState(this.state.single_currentPage,this.state.single_currentSide,e);if(!t.pageId)return null;const n=this._getPrevState(t.pageId,t.pageSide,e);return n.pageId?this._getFullState(n.pageId,n.pageSide):null}getDeltaTurns(e,t){if(!e.singleMode||!t.singleMode)return null;if(e.currentPage===t.currentPage){const n=this._getPageSides().indexOf(e.pageSide);return this._getPageSides().indexOf(t.pageSide)-n}const n=this._getPageIndex(e.currentPage),r=this._getPageIndex(t.currentPage)-n,o=r>0?this._getNextState:this._getPrevState;let a=0,i={pageId:e.currentPage,pageSide:e.pageSide};for(;i.pageId!==t.currentPage||i.pageSide!==t.pageSide;){const e=o.apply(this,[i.pageId,i.pageSide,!0]);if(null===e.pageId)return null;if(i=e,a++,a>this.state.maxDeltaTurns)break}return r>0?a:-a}getState(){return new X({currentPage:this.state.single_currentPage,pageSide:this.state.single_currentSide,wide:this.state.single_wide,widePageSecondHalf:this.state.widePageSecondHalf,zoomMode:this.state.zoomMode,isFirstSpread:!this.getPrevPageId(!0),isLastSpread:!this.getNextPageId(!0),target:this.state.lastTarget})}getLegacyState(){return new X({currentPage:this.state.single_currentPage,pageSide:this.state.single_currentSide,leftPage:null,rightPage:this.state.single_currentPage,widePageSecondHalf:this.state.widePageSecondHalf,wide:this.state.single_wide,zoomMode:this.state.zoomMode,isFirstSpread:!this.getPrevPageId(!0),isLastSpread:!this.getNextPageId(!0),target:this.state.lastTarget})}getStateByPageId(e){const t=j()["pages/pageProp"](e,"wide"),n=this._getPageSides()[0],r=t?n:"both",o=this._getPrevState(e,r,!0),a=this._getNextState(e,r,!0),i=t&&e===o.pageId;return new X({currentPage:e,pageSide:r,wide:t,widePageSecondHalf:i,zoomMode:this.state.zoomMode,isFirstSpread:!o.pageId,isLastSpread:!a.pageId,target:this.state.lastTarget})}getFlipState(){let e=j()["pages/pageIndexById"](this.state.single_currentPage);const t=this.getPrevPageId(!0);this.state.single_currentPage===t&&e++;const n=2*j()["pages/pagesCount"]-1,r=2*e,o=2*e-1;return this._isRtl()?{pagesCount:n,currentRight:n-o-1,currentLeft:n-r-1}:{pagesCount:n,currentRight:r,currentLeft:o}}getFlipParams(e){const t=e%2!=0&&0!==e,n=V("workspace").components.book.isTranslucentReverseSide;return t?n?this._getFlipParamsTranslucentReverseSide(e):{isReverseSide:t}:null===e?{}:this._getFlipParamsFrontSide(e)}_getFlipParamsTranslucentReverseSide(e){let t,n;if(this._isRtl()){const r=j()["pages/pagesCount"];t=(e+1)/2,n=r%2!=0?(t+1)%2!=0?"left":"right":(t+1)%2!=0?"right":"left",t=r-t-1}else t=(e-1)/2,n=(t-1)%2!=0?"right":"left";return this._createFlipParamsResult({pageIndex:t,pageSide:n,isReverseSide:!0})}_getFlipParamsFrontSide(e){let t,n=e/2;if(this._isRtl()){const e=j()["pages/pagesCount"];t=e%2!=0?n%2!=0?"right":"left":n%2!=0?"left":"right",n=e-n-1}else t=n%2!=0?"left":"right";return this._createFlipParamsResult({pageIndex:n,pageSide:t,isReverseSide:!1})}_createFlipParamsResult(e){let{pageSide:t,pageIndex:n,isReverseSide:r}=e;const o=j()["pages/pageIdByIndexWide"](n);return{pageId:o,wide:j()["pages/pageProp"](o,"wide"),pageSide:t,isReverseSide:r}}isCurrentPage(e,t,n){if(this.state.single_currentPage!==e)return!1;if(!this.state.single_wide)return!0;if(t)return this.state.single_currentSide===t;const r=this.state.single_currentSide===this._getPageSides()[0]&&!n,o=this.state.single_currentSide===this._getPageSides()[1]&&n;return r||o}currentPages(){return[this.state.single_currentPage]}_getNextState(e,t,n){const r=j()["pages/pageProp"](e,"wide"),o=this._getPageSides()[0];if(r&&t===o)return{pageId:e,pageSide:this._getPageSides()[1]};const a=this._getNextPageId(e,n);if(null===a)return{pageId:null,pageSide:null};return{pageId:a,pageSide:j()["pages/pageProp"](a,"wide")?this._getPageSides()[0]:"both"}}_getPrevState(e,t,n){const r=j()["pages/pageProp"](e,"wide"),o=this._getPageSides()[1];if(r&&t===o)return{pageId:e,pageSide:this._getPageSides()[0]};const a=this._getPrevPageId(e,n);if(null===a)return{pageId:null,pageSide:null};return{pageId:a,pageSide:j()["pages/pageProp"](a,"wide")?this._getPageSides()[1]:"both"}}_getFullState(e,t){const n=j()["pages/pageProp"](e,"wide"),r=n?t:"both",o=this._getPrevState(e,t,!0),a=this._getNextState(e,t,!0),i=n&&e===o.pageId;return new X({currentPage:e,pageSide:r,wide:n,widePageSecondHalf:i,zoomMode:this.state.zoomMode,isFirstSpread:!o.pageId,isLastSpread:!a.pageId,target:this.state.lastTarget})}_calculateTargetSide(e,t){return j()["pages/pageProp"](e,"wide")?t?this._getPageSides()[1]:this._getPageSides()[0]:"both"}}class ee extends ${constructor(e){super(),this.state=e}onSelect(){const e=this.state.currentPage;this.setPageParameters(e,!0)}goToPageById(e){this._isValidPageId(e)&&this.setPageParameters(e)}setPageParameters(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Y("pager/SET_PROPERTY",{key:"slide_currentPage",value:e});Y("pager/SET_PROPERTY",{key:"slide_wide",value:j()["pages/pageProp"](e,"wide")});Y("pager/CHANGE_PAGE",{pageId:e,widePageSecondHalf:!!t&&this.state.widePageSecondHalf})}goForward(){this.goToPageById(this.getNextPageId(!0))}goBackward(){this.goToPageById(this.getPrevPageId(!0))}getNextPageId(e){return this._getNextPageId(this.state.slide_currentPage,e)}getPrevPageId(e){return this._getPrevPageId(this.state.slide_currentPage,e)}getNextState(e){const t=this._getNextState(this.state.slide_currentPage,e);return t.currentPage?this.getStateByPageId(t.currentPage):null}getPrevState(e){const t=this._getPrevState(this.state.slide_currentPage,e);return t.currentPage?this.getStateByPageId(t.currentPage):null}getSecondNextState(e){const t=this._getNextState(this.state.slide_currentPage,e);if(!t.currentPage)return null;const n=this._getNextState(t.currentPage,e);return n.currentPage?this.getStateByPageId(n.currentPage):null}getSecondPrevState(e){const t=this._getPrevState(this.state.slide_currentPage,e);if(!t.currentPage)return null;const n=this._getPrevState(t.currentPage,e);return n.currentPage?this.getStateByPageId(n.currentPage):null}getDeltaTurns(e,t){if(!e.slideMode||!t.slideMode)return null;if(e.currentPage===t.currentPage)return 0;const n=this._getPageIndex(e.currentPage),r=this._getPageIndex(t.currentPage)-n,o=r>0?this._getNextState:this._getPrevState;let a=0,i=e.currentPage;for(;i!==t.currentPage&&a<=this.state.maxDeltaTurns;){const e=o.apply(this,[i,!0]);if(e.null)return null;i=e.currentPage,a++}return r>0?a:-a}getState(){return new K({currentPage:this.state.slide_currentPage,wide:this.state.slide_wide,isFirstSpread:!this.getPrevPageId(!0),isLastSpread:!this.getNextPageId(!0),zoomMode:this.state.zoomMode,target:this.state.lastTarget})}getLegacyState(){return new K({currentPage:this.state.slide_currentPage,leftPage:this.state.slide_currentPage,rightPage:null,wide:this.state.slide_wide,isFirstSpread:!this.getPrevPageId(!0),isLastSpread:!this.getNextPageId(!0),zoomMode:this.state.zoomMode,target:this.state.lastTarget})}getStateByPageId(e){const t=j()["pages/pageProp"](e,"wide");return new K({currentPage:e,wide:t,isFirstSpread:!this.getPrevPageId(this.state.slide_currentPage,!0),isLastSpread:!this.getNextPageId(this.state.slide_currentPage,!0),zoomMode:this.state.zoomMode,target:this.state.lastTarget})}getFlipState(){throw new Error("Not implemented")}getFlipParams(){throw new Error("Not implemented")}isCurrentPage(e){return this.state.slide_currentPage===e}currentPages(){return[this.state.slide_currentPage]}_getNextState(e,t){return{currentPage:this._getNextPageId(e,t)??null}}_getPrevState(e,t){return{currentPage:this._getPrevPageId(e,t)??null}}}const te=function(e,t){return e===H?new J(t):e===G?new ee(t):e===F?new Q(t):null},ne=function(e,t){const n=t??e.mode;return e.logic[n]},re=function(e){const t=e.mode;return e.logic=e.logic??{},e.logic[t]||(e.logic[t]=te(t,e)),e.logic[t]};function oe(e){const t=/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,n={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};let r,o=0;if(!(e=e.toUpperCase())||!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(e))return null;for(r=t.exec(e);r;)o+=n[r[0]],r=t.exec(e);return o}function ae(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!+(e=parseInt(e,10))||e<0)return null;const n=String(+e).split(""),r=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let o="",a=3;for(;a--;)o=(r[+n.pop()+10*a]||"")+o;let i=Array(+n.join("")+1).join("M")+o;return t&&(i=i.toLowerCase()),i}let ie=null;const se={init(e){let{state:t,dispatch:n}=e;n("changeMode",{mode:t.mode,target:"init"})},changeMode(e,t){let{state:n,commit:r,rootState:o,getters:a,rootGetters:i}=e,{mode:s,target:l}=t;if(s===n.mode&&n.initiated||!a.canChangeModeTo(s))return;r(B.ZP.CHANGE_LAST_TARGET,{target:l}),r(B.ZP.SET_CURRENT_MODE,s);const c=re(n);n.currentPage&&c.onSelect()},goToPageById(e,t){let{state:n,commit:r,rootState:o}=e,{id:a,widePageSecondHalf:i,target:s=null,zoomMode:l}=t;if(void 0!==l&&l!==n.zoomMode&&(r(B.ZP.CHANGE_LAST_TARGET,{target:s}),r(B.ZP.CHANGE_ZOOM_MODE,{zoomMode:l})),!a||-1===o.pages.structure.indexOf(a)||n.freezed||n.isPageChanging)return;if(n.currentPage===a&&n.widePageSecondHalf===i)return void r(B.ZP.CHANGE_LAST_TARGET,{target:s});r(B.ZP.CHANGE_LAST_TARGET,{target:s});ne(n).goToPageById(a,i)},goForward:(e,t)=>{let{state:n,commit:r}=e,{target:o=null}=t;if(n.freezed)return;r(B.ZP.CHANGE_LAST_TARGET,{target:o});ne(n).goForward()},goBackward:(e,t)=>{let{state:n,commit:r}=e,{target:o=null}=t;if(n.freezed)return;r(B.ZP.CHANGE_LAST_TARGET,{target:o});ne(n).goBackward()},goToFirst:(e,t)=>{let{dispatch:n}=e,{target:r=null}=t;n("goToPageByIndex",{pageIndex:0,target:r})},goToLast:(e,t)=>{let{dispatch:n,rootGetters:r}=e,{target:o=null}=t;n("goToPageByIndex",{pageIndex:r["pages/pagesCount"]-1,target:o})},goToPageByIndex:(e,t)=>{let{dispatch:n,rootGetters:r,state:o}=e,{pageIndex:a,target:i=null,zoomMode:s}=t;if(o.freezed||o.isPageChanging)return void("history"===i&&(ie={pageIndex:a,target:i,zoomMode:s}));if(a<0||a>=r["pages/pagesCount"])return!1;let l=!1,c=r["pages/pageIdByIndex"](a);if(null===c&&(c=r["pages/pageIdByIndex"](a-1),l=!0),null===c)return!1;n("goToPageById",{id:c,widePageSecondHalf:l,target:i,zoomMode:s})},goToPageByUserInput:(e,t)=>{let{dispatch:n,state:r,rootState:o,rootGetters:a}=e,{userInput:i,type:s,target:l=null,zoomMode:c}=t;const d=o.pages?.structure;if(!d)return;if("url"===s){const e=d.filter((function(e){return e+="",o.pages[e]?.urlHeader===i}));if(e.length>0)return void n("goToPageById",{id:e[0],target:l,zoomMode:c})}if("caption"===s){const e=d.filter((function(e){return e+="",o.pages[e]?.displayName===i}));if(e.length>0)return void n("goToPageById",{id:e[0],target:l,zoomMode:c})}const g=o.book.numerationOffset,u=i.split("-");i=u.length>1&&o.book.rightToLeft?u[1]:u[0];const p=a["pages/pagesCount"];if(g>0){const e=oe(i);if(null!==e)return void(e<=Math.min(g,p)?n("goToPageByIndex",{pageIndex:e-1,target:l,zoomMode:c}):n("goToFirst",{target:"error"}))}const h=parseInt(i,10),f=!isNaN(h)&&h>0,m=f?h+g-1:null;f&&m>=0&&m<p?n("goToPageByIndex",{pageIndex:m,target:l,zoomMode:c}):n("goToFirst",{target:"error"})},freeze:function(e){let{commit:t,state:n}=e,{target:r="unknown"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.freezed||t(B.ZP.FREEZE,{target:r})},unfreeze:function(e){let{dispatch:t,commit:n,state:r}=e,{target:o="unknown"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.freezed&&r.frozenBy===o&&(n(B.ZP.UNFREEZE),ie&&"slide-book"!==o&&(t("goToPageByIndex",ie),ie=null))},setFlipState:(e,t)=>{let{state:n,commit:r}=e,{newState:o}=t;if(o===n.flipState)return!1;r(B.ZP.CHANGE_FLIP_STATE,{flipState:o})},setForceFlip:(e,t)=>{let{state:n,commit:r}=e,{forceFlip:o}=t;if(o===n.forceFlip)return!1;r(B.ZP.CHANGE_FORCE_FLIP,{forceFlip:o})},setForceRerender:(e,t)=>{let{state:n,commit:r}=e,{forceRerender:o}=t;if(o===n.forceRerender)return!1;r(B.ZP.CHANGE_FORCE_RERENDER,{forceRerender:o})},changeZoomMode:(e,t)=>{let{state:n,commit:r}=e,{zoomMode:o}=t;o!==n.zoomMode&&r(B.ZP.CHANGE_ZOOM_MODE,{zoomMode:o})},setMoveWatcher:(e,t)=>{let{commit:n}=e;n(B.ZP.SET_MOVE_WATCHER,t)},isPageChanging:(e,t)=>{let{dispatch:n,commit:r,state:o}=e;r(B.ZP.SET_PAGE_CHANGING,t),ie&&!t&&(n("goToPageByIndex",ie),ie=null)},setLastTarget:function(e){let{commit:t,state:n}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";t(B.ZP.CHANGE_LAST_TARGET,{target:r})}};function le(e,t,n,r){let o=[];if(e.slideMode||e.singleMode){t=t.filter((e=>null!==e));const r=e.currentPage,a=t.indexOf(r);o.push(t[a]),n&&(o.push(t[a+1]||null),o.push(t[a-1]||null),o.push(t[a+2]||null),o.push(t[a-2]||null))}else{const n=(e,n)=>{const r=t.indexOf(e);return r>=0?r:n},a=n(e.leftPage||!1,-10);let i=n(e.rightPage||!1,-10);a===i&&(i+=1),o.push(t[a]||null),o.push(t[i]||null),r&&(o.push(t[i+1]||null),o.push(t[i+2]||null),o.push(t[a-1]||null),o.push(t[a-2]||null),o.push(t[i+3]||null),o.push(t[a-3]||null))}return o=o.filter((e=>null!==e&&!(0,_.o8)(e))),o}const ce={mode:e=>e.mode,canChangeModeTo:(e,t,n,r)=>e=>{const t=r["workspace/isMobile"],n=r["workspace/orientation"];return!(t&&"portrait"===n&&"spread"===e)},isFirstSpread:e=>null===ne(e).getPrevPageId(!0),isLastSpread:e=>null===ne(e).getNextPageId(!0),isCurrentPage:e=>t=>{let{pageId:n,pageSide:r,widePageSecondHalf:o}=t;const a=ne(e);return(0,_.hj)(n)&&(n=n.toString()),a.isCurrentPage(n,r,o)},currentPages:e=>ne(e).currentPages(),nextPageId:e=>ne(e).getNextPageId(!0),nextNonStubPageId:e=>ne(e).getNextPageId(!1),nextState:e=>ne(e).getNextState(!0),secondNextState:e=>ne(e).getSecondNextState(!0),prevPageId:e=>ne(e).getPrevPageId(!0),prevNonStubPageId:e=>ne(e).getPrevPageId(!1),prevState:e=>ne(e).getPrevState(!0),secondPrevState:e=>ne(e).getSecondPrevState(!0),state:e=>ne(e).getState(),isFrozen:e=>e.freezed,legacyState:e=>ne(e).getLegacyState(),flipState:e=>ne(e).getFlipState(),flipParams:e=>t=>ne(e).getFlipParams(t),stateByPageId:e=>t=>ne(e).getStateByPageId(t),stateForDisplay:(e,t,n,r)=>{if(0===r["pages/pagesCount"])return"0";const o=r["pages/pageProp"](e.currentPage,"wide");if(e.spreadMode&&!o){const t=n.book.rightToLeft,o=r["pages/pageCaptionWithTrimmedDisplayNameById"]({id:e.spread_leftPage})??"",a=r["pages/pageCaptionWithTrimmedDisplayNameById"]({id:e.spread_rightPage})??"";return o&&a?t?a+" -‎ "+o:o+" -‎ "+a:o||a}let a;if(e.single_wide){const t=n.book.rightToLeft;a=e.single_currentSide===(t?"left":"right")}return r["pages/pageCaptionWithTrimmedDisplayNameById"]({id:e.currentPage,widePageSecondHalf:a})??""},totalForDisplay:(e,t,n)=>{const r=n.book.numerationOffset,o=n.pages.structure.length;if(r>=o)return ae(o,n.workspace.lowercaseRomans);const a=o-r;return n.workspace.customTotalPages||a},getDeltaTurns:e=>(t,n)=>{if(t.mode!==n.mode)return null;return ne(e,t.mode).getDeltaTurns(t,n)},resourcesForLoading:(e,t,n)=>le(t.state,n.pages.structure,!0,!0),currentResourcesForLoading:(e,t,n)=>le(t.state,n.pages.structure,!1,!1)},de={[B.n_]:(e,t)=>{e.isMoveWatcherActive=t},[B.MC]:function(e,t){let{key:n,value:r}=t;h().set(e,n,r)},[B.gG]:function(e,t){let{pageId:n,widePageSecondHalf:r}=t;e.currentPage=n,e.widePageSecondHalf=r??!1},[B.OC]:function(e,t){e.mode=t,e.singleMode=e.slideMode=e.spreadMode=!1,t===F?e.singleMode=!0:t===G?e.slideMode=!0:t===H&&(e.spreadMode=!0),e.initialized||(e.initialized=!0)},[B.In]:function(e,t){let{target:n}=t;e.freezed=!0,e.frozenBy=n},[B.zC]:function(e){e.freezed=!1,e.frozenBy=null},[B.Bm]:(e,t)=>{let{target:n}=t;e.lastTarget=n},[B.Zs]:(e,t)=>{let{flipState:n}=t;e.flipState=n},[B.hp]:(e,t)=>{let{forceFlip:n}=t;e.forceFlip=n},[B.Kq]:(e,t)=>{let{forceRerender:n}=t;e.forceRerender=n},[B.RA]:(e,t)=>{let{zoomMode:n}=t;e.zoomMode=n},[B.SX]:(e,t)=>{e.isPageChanging=t}},ge={namespaced:!0,actions:se,getters:ce,mutations:de,state:{mode:"spread",singleMode:!1,spreadMode:!1,slideMode:!1,currentPage:null,widePageSecondHalf:!1,freezed:!1,frozenBy:null,lastTarget:null,flipState:"pending",forceFlip:!1,forceRerender:!1,zoomMode:!1,initialized:!1,isMoveWatcherActive:!1,maxDeltaTurns:2,isPageChanging:!1}},ue="ADD_CONTENT",pe="REMOVE_CONTENT",he="CHANGE_PAGE_SIZE",fe="LOAD_THUMBNAIL",me="LOAD_SUBSTRATE",Ee="LOAD_TEXT_LAYER",Se="LOAD_VECTOR_LAYER",ye="SET_NEXT_SUBSTRATE_URL",Ie="SET_NEXT_TEXT_URL",be="RESET_RESOURCES",Pe="RESET_RESOURCES_EXCL_TH",Te="CHANGE_LOAD_PENDING",_e="CHANGE_UPDATE_PENDING",we="SET_PAGE_PROPERTY",ve="REMOVE_PAGE_PROPERTY",Ce="SET_PAGE_INFO",Le="API_CHANGE",Oe="SET_CURRENT_SIZE",Ae="SET_DOWNLOAD_PROGRESS",xe={ADD_CONTENT:ue,REMOVE_CONTENT:pe,CHANGE_PAGE_SIZE:he,CHANGE_LOAD_PENDING:Te,CHANGE_UPDATE_PENDING:_e,LOAD_THUMBNAIL:fe,LOAD_SUBSTRATE:me,LOAD_TEXT_LAYER:Ee,LOAD_VECTOR_LAYER:Se,SET_NEXT_SUBSTRATE_URL:ye,SET_NEXT_TEXT_URL:Ie,RESET_RESOURCES:be,RESET_TH_RESOURCES:"RESET_TH_RESOURCES",RESET_RESOURCES_EXCL_TH:Pe,SET_PAGE_PROPERTY:we,REMOVE_PAGE_PROPERTY:ve,SET_PAGE_INFO:Ce,API_CHANGE:Le,SET_CURRENT_SIZE:Oe,SET_DOWNLOAD_PROGRESS:Ae};var Ne=n(2155);const Re={changePageSize(e,t){let{state:n,commit:r,dispatch:o}=e,{width:a,height:i,zoomFactor:s=1}=t;n.size.width===a&&n.size.height===i||(r(xe.CHANGE_PAGE_SIZE,{width:Math.round(a),height:Math.round(i),zoomFactor:s}),s>=1&&o("pager/changeZoomMode",{zoomMode:s>1},{root:!0}))},restoreUnzoomedPageSize(e){let{getters:t,dispatch:n}=e;const r=t.size;if(1===r.zoomFactor)return;n("changePageSize",{width:r.width/r.zoomFactor,height:r.height/r.zoomFactor,zoomFactor:1})},resourceLoad(e,t){let{state:n,commit:r,rootGetters:o}=e,{resType:a,url:i,pageID:s,thOnly:l}=t;switch(a){case"thumbnail":r(xe.LOAD_THUMBNAIL,{url:i,pageID:s});break;case"substrate":r(xe.LOAD_SUBSTRATE,{url:i,pageID:s});break;case"text":r(xe.LOAD_TEXT_LAYER,{url:i,pageID:s});break;case"vector":r(xe.LOAD_VECTOR_LAYER,{url:i,pageID:s})}if(!l){if(!o["pages/pageProp"](s,"substrateUrl"))return;if((o["pages/textImageUrl"](s)||o["pages/vectorUrl"](s))&&!o["pages/pageProp"](s,"textUrl"))return;r(xe.CHANGE_LOAD_PENDING,{pageID:s,value:!1})}o["pages/pageProp"](s,"updatePending")&&(o["pages/pageProp"](s,"nextSubstrateUrl")&&o["pages/pageProp"](s,"substrateUrl")!==o["pages/pageProp"](s,"nextSubstrateUrl")||o["pages/pageProp"](s,"nextTextUrl")&&!o["pages/vectorUrl"](s)&&o["pages/pageProp"](s,"textUrl")!==o["pages/pageProp"](s,"nextTextUrl")||r(xe.CHANGE_UPDATE_PENDING,{pageID:s,value:!1}))},setNextUrl(e,t){let{commit:n}=e,{resType:r,url:o,pageID:a}=t;switch(r){case"substrate":n(xe.SET_NEXT_SUBSTRATE_URL,{url:o,pageID:a});break;case"text":n(xe.SET_NEXT_TEXT_URL,{url:o,pageID:a})}n(xe.CHANGE_UPDATE_PENDING,{pageID:a,value:!0})},resetResources(e){let{commit:t,getters:n,rootGetters:r}=e;r["thumbnails/windowIsOpen"]?t(xe.RESET_RESOURCES_EXCL_TH,{pageIDsArray:n.pagesWithResources}):t(xe.RESET_RESOURCES,{pageIDsArray:n.pagesWithResources})},resetPageResources(e,t){let{commit:n,getters:r}=e,{pageID:o,thumbnail:a=!0}=t;n(a?xe.RESET_RESOURCES:xe.RESET_RESOURCES_EXCL_TH,{pageIDsArray:[o]})},addContent(e,t){let{commit:n}=e;n(xe.ADD_CONTENT,t)},removeContent(e,t){let{commit:n}=e;n(xe.REMOVE_CONTENT,t)},changeLoadPending(e,t){let{commit:n}=e;n(xe.CHANGE_LOAD_PENDING,t)},setStatus(e,t){let{commit:n}=e,{pageID:r,value:o}=t;n(xe.SET_PAGE_PROPERTY,{pageID:r,property:"status",value:o})},setPageProperty(e,t){let{commit:n}=e,{pageID:r,property:o,value:a}=t;n(xe.SET_PAGE_PROPERTY,{pageID:r,property:o,value:a}),n(xe.API_CHANGE,{pageID:r,property:o})},removePageProperty(e,t){let{commit:n}=e,{pageID:r,property:o}=t;n(xe.REMOVE_PAGE_PROPERTY,{pageID:r,property:o}),n(xe.API_CHANGE,{pageID:r,property:o})},setPageInfo(e,t){let{state:n,dispatch:r,commit:o,rootState:a}=e,{pageID:i,value:s}=t;const l=(0,Ne.Z)({},n[i],s);o(xe.SET_PAGE_INFO,{pageID:i,value:l})},resetNumeration(e){let{state:t,commit:n}=e;for(const r in t)if(t.hasOwnProperty(r)){if("size"===r||"defaults"===r||"structure"===r||!t[r])continue;t[r].hasOwnProperty("displayName")&&n(xe.REMOVE_PAGE_PROPERTY,{pageID:r,property:"displayName"}),t[r].hasOwnProperty("urlHeader")&&n(xe.REMOVE_PAGE_PROPERTY,{pageID:r,property:"urlHeader"})}},setCurrentSize(e,t){let{state:n,commit:r}=e,{pageID:o,value:a}=t;n[o]?.currentSize?.width===a?.width&&n[o]?.currentSize?.height===a?.height||r(xe.SET_CURRENT_SIZE,{pageID:o,value:a})},setDownloadProgress(e,t){let{state:n,commit:r}=e;r(xe.SET_DOWNLOAD_PROGRESS,t)}};var ke=n(2918),De=n(776);let Me;const Ue=function(e,t,n){return e<t?ae(e+1,n):e-t+1},ze={pageProp:e=>(t,n)=>{if(!t||!n)return null;let r=null;return void 0!==e[t][n]?r=e[t][n]:void 0!==e.defaults[n]&&(r=e.defaults[n]),"displayName"===n&&(r=(0,T.m9)(r)),r},pageIdByIndex:(e,t)=>n=>null===n||(0,_.o8)(n)||n>=t.pagesCount||n<0?null:e.structure[n],pageIdByIndexWide:(e,t)=>n=>null===n||(0,_.o8)(n)||n>=t.pagesCount||n<0?null:e.structure[n]?e.structure[n]:e.structure[n-1],pagesCount:e=>e.structure.length,pageResourcesCount:e=>e.structure.filter((e=>null!==e)).length,pageIndexById:e=>t=>null===t||(0,_.o8)(t)?-1:e.structure.indexOf(t),urlHeaderById:(e,t,n)=>r=>{let{id:o,forceFullWide:a,widePageSecondHalf:i,joinSpread:s=!1,forceSingleMode:l}=r;if(!e[o])return null;const c=t.pageProp(o,"wide"),d=n.pager.spreadMode;if(!c&&d&&s){const e=t.pageIndexById(o),r=e%2==0?e-1:e+1,a=t.pageIdByIndex(r);let i,s=t.pageProp(o,"urlHeader")||t.pageCaptionById({id:o});if(a){let o=t.pageCaptionById({id:a});n.book.rightToLeft&&([s,o]=[o,s]),i=e>r?o+"-"+s:s+"-"+o}else i=s;return i}return t.pageProp(o,"urlHeader")&&!a?t.pageProp(o,"urlHeader"):t.calculatedCaptionById({id:o,divider:"-",forceFullWide:a,widePageSecondHalf:i,forceSingleMode:l})},calculatedCaptionById:(e,t,n,r)=>e=>{let{id:o,divider:a,forceFullWide:i=!1,widePageSecondHalf:s,forceSingleMode:l}=e;const c=t.pageIndexById(o),d=t.pageProp(o,"wide"),g=n.book.rightToLeft,u=n.book.numerationOffset,p=n.workspace.lowercaseRomans,h=r["pager/state"];if(u>0&&(!h.singleMode||i)&&!l){let e=Ue(c,u,p);return d&&(g?e=Ue(c+1,u,p)+a+e:e+=a+Ue(c+1,u,p)),""+e}return h.singleMode&&!i||l?h.singleMode||l?d&&(s??h.widePageSecondHalf)?Ue(c+1,u,p).toString():Ue(c,u,p).toString():(c+1).toString():d?g?(c+2-u).toString()+a+(c+1-u).toString():(c+1-u).toString()+a+(c+2-u).toString():(c+1-u).toString()},pageCaptionById:(e,t)=>n=>{let{id:r,forceFullWide:o=!1,widePageSecondHalf:a,forceSingleMode:i}=n;return e[r]?t.pageProp(r,"displayName")||t.calculatedCaptionById({id:r,divider:" - ",forceFullWide:o,widePageSecondHalf:a,forceSingleMode:i}):null},pageCaptionWithTrimmedDisplayNameById:(e,t)=>n=>{let{id:r,widePageSecondHalf:o,trimLength:a=15}=n;if(!e[r])return null;let i=t.pageProp(r,"displayName");return i.length>a&&(i=i.substr(0,a)+"…"),i||t.calculatedCaptionById({id:r,divider:" - ",widePageSecondHalf:o})},pageCaptionByIndex:(e,t,n)=>r=>{r*=1;let o=t.pageIdByIndex(r);if(!o){const e=t.pageIdByIndex(r-1);t.pageProp(e,"wide")&&(o=e)}if(!e[o])return null;const a=t.pageProp(o,"displayName");if(a)return a;{const e=n.book.numerationOffset,t=n.workspace.lowercaseRomans;return e>0?Ue(r,e,t).toString():(r+1-e).toString()}},pageIdByUrlHeader:(e,t,n)=>e=>{const r=e.split("-"),o=n.book.numerationOffset;let a,i;return n.book.urlNames&&(a=n.book.urlNames[e],a)?a:(i=(0,_.sH)(r[0])?oe(r[0]):Number(r[0])+o,t.pageIdByIndexWide(i-1))},isFirstPage:(e,t)=>n=>e[n]?0===t.pageIndexById(n):null,isLastPage:(e,t)=>n=>{if(!e[n])return null;return t.pageIndexById(n)+(t.pageProp(n,"wide")?2:1)===t.pagesCount},contentSize:(e,t,n)=>e=>{let{pageID:r,pageSide:o="both",pageSize:a,resizeOverride:i=null}=e;const s=t.pageProp(r,"wide")&&"both"!==o,l=parseInt(t.pageProp(r,"width"),10)/(s?2:1),c=parseInt(t.pageProp(r,"height"),10),d="FIT"===(i||t.pageProp(r,"pageResize"))?ke.Tj:ke.hl;let g;return!(n.workspace.userAgentInfo.browser.publisher?(0,ke.lx)({rect:{width:l,height:c},bounds:n.book.bookSize}):t.pageProp(r,"hasMargins"))||n.pager.slideMode&&n.book.contentCrop?g=a:(g=d({width:l,height:c},a),g.width=Math.ceil(g.width),g.height=Math.ceil(g.height),g.width=g.width%2==0||g.width===a.width?g.width:g.width-1,g.height=g.height%2==0||g.height===a.height?g.height:g.height-1),{width:g.width,height:g.height,offsetX:(a.width-g.width)/(s?1:2),offsetY:(a.height-g.height)/2,scaleRatio:{w:g.width/l,h:g.height/c}}},imageSizes:(e,t,n)=>(e,r)=>{const o=t.pageProp(e,"substrateSizes"),a={};if(o){let n=parseInt(t.pageProp(e,"substrateSizesReady"),10);const i=t.pageProp(e,"customSubstrateSize"),s=t.pageProp(e,"textSizes");0===n&&(n=4);let l=o.slice(0,n);i&&(l=l.slice(0,l.length-1),l.push(parseInt(i,10)));const c=t.pageProp(e,"wide");let d=Math.max(c?r.width/2:r.width,r.height);window.devicePixelRatio>=1.5&&(d*=1.5);const g=l.filter((function(e){return e>=d||e===l[l.length-1]}))[0],u=s.filter((function(e){return e>=d||e===s[s.length-1]}))[0];a.substrate=l.indexOf(g)+1,a.text=s.indexOf(u)+1}else n.pager.singleMode||!0===n.pager.zoomMode?(a.substrate="l",a.text="l1"):(a.substrate="",a.text="c");return a},isSVGSupported:(e,t,n)=>e=>{const r=n.workspace.userAgentInfo;return!!t.pageProp(e,"vectorText")&&(!t.pageProp(e,"rasterize")&&(!r.browser.msedge&&((!r.browser.samsung||!n.workspace.alteredSVGColors)&&(!(r.os.ios&&r.os.version.split(".")[0]<9)&&!(r.os.android&&r.os.version.split(".")[0]<5)))))},thumbnailUrl:(e,t)=>e=>{if(t.pageProp(e,"stub"))return null;const n=(0,T.qQ)(e);let r=t.pageProp(e,"thFormat");return r&&(r="."+r),(0,De.Z)().translatePath(`assets/pages/thumbnails/page${n}_s${r}`)},currentSize:(e,t)=>n=>{const r=t.pageProp(n,"wide")?2*e.size.width:e.size.width;return t.pageProp(n,"currentSize")||{height:e.size.height,width:r}},substrateUrl:(e,t,n)=>e=>{if(t.pageProp(e,"stub"))return null;const r=function(e){return""===e?"":"."+e},o=t.currentSize(e),a=t.contentSize({pageID:e,pageSize:o}),i=t.imageSizes(e,a).substrate,s=t.pageProp(e,"substrateWebPCount"),l=n.workspace.webPSupported&&(0,_.hj)(i)&&s>=i?".webp":r(t.pageProp(e,"substrateFormat")),c=i?"_":"",d=(0,T.qQ)(e);return(0,De.Z)().translatePath(`assets/pages/substrates/page${d}${c}${i}${l}`)},textImageUrl:(e,t)=>e=>{if(t.pageProp(e,"stub"))return null;const n=t.pageProp(e,"textLayer"),r=t.currentSize(e),o=t.contentSize({pageID:e,pageSize:r}),a=t.imageSizes(e,o).text,i=(0,T.qQ)(e);return n?(0,De.Z)().translatePath(`assets/pages/text/page${i}_${a}.png`):null},vectorUrl:(e,t)=>e=>{if(t.pageProp(e,"stub"))return null;const n=t.isSVGSupported(e),r=(0,T.qQ)(e);return n?(0,De.Z)().translatePath(`assets/pages/vector/${r}.svg`):null},pagesWithResources:(e,t,n,r)=>{const o=[],a=r["pager/resourcesForLoading"];for(const i in e){const t=["size","defaults","structure","downloadProgress","downloadProgressUpdated","changeInPage","apiChange"];if(e.hasOwnProperty(i)&&-1===t.indexOf(i)){const t=e[i];if(-1!==a.indexOf(i))continue;null===t.substrateUrl&&null===t.textUrl&&null===t.thumbnailUrl||o.push(i)}}return o},pageContent:(e,t,n)=>t=>e[t].content.map((e=>n.content.items[e])).filter((e=>!!e)),contentItems:(e,t)=>e=>{let{pageID:n,contentType:r}=e;return t.pageContent(n).filter((e=>e.type===r))},pageContentGrouppedByType:(e,t,n,r)=>e=>t.pageContent(e).reduce(((e,t)=>(e[t.type]=[...e[t.type]||[],t],e)),{}),size:e=>e.size,pageGradient:(e,t,n)=>r=>{let o=e[r]?t.pageProp(r,"shadowDepth"):null;switch(null===o&&(o=e.defaults.shadowDepth),null!==o&&-1!==o||(o=n.book.shadowDepth),1*o){case 0:return"gradient-zero";case 1:return"gradient-light";case 3:return"gradient-dark";case 4:return"gradient-max";default:return"gradient-middle"}},originalPageSize:(e,t)=>e=>({width:t.pageProp(e,"width"),height:t.pageProp(e,"height")}),hasError:(e,t)=>e=>t.pageProp(e,"status")===w.Z.ERROR||-1===t.pageProp(e,"thumbnailUrl")||-1===t.pageProp(e,"substrateUrl")||-1===t.pageProp(e,"textUrl"),currentPagesUpdating:(e,t,n,r)=>{let o=!1,a=!1;return r["pager/currentPages"].forEach((n=>{o|=e[n]?.updatePending,a|=t.hasError(n)})),o&&!a},isDownloaded:(e,t)=>n=>!!t.isFullyDownloaded||e.downloadProgress[n-1],isFullyDownloaded:(e,t,n,r)=>"mobile-app"!==r["info/version"]||0===e.downloadProgress.length||0===e.downloadProgress.filter((e=>!e)).length,getPdfPageIndexById:e=>t=>{if(!Me){const t=e.structure.filter((t=>!!t&&!e[t].stub));let n=0;Me=Object.fromEntries(t.map((e=>[e,n++])))}return Me[t]},pageList:(e,t,n,r)=>n=>{let{forceSingleMode:o=!1,excludeStubs:a=!1}=n;const i=[],s=r["pager/state"];return e.structure.filter((e=>!(!e||a&&t.pageProp(e,"stub")))).forEach((e=>{const n=t.pageProp(e,"wide");i.push(t.pageCaptionById({id:e,divider:" - ",widePageSecondHalf:!1,forceSingleMode:o})),n&&(s.singleMode||o)&&i.push(t.pageCaptionById({id:e,divider:" - ",widePageSecondHalf:!0,forceSingleMode:o}))})),i}},Be={[Le]:(e,t)=>{let{property:n,pageId:r}=t;e.apiChange={pageId:r,property:n}},[he]:(e,t)=>{let{width:n,height:r,zoomFactor:o}=t;e.size={width:n,height:r,zoomFactor:o}},[fe]:(e,t)=>{let{pageID:n,url:r}=t;h().set(e,n,{...e[n],thumbnailUrl:r}),e.changeInPage={pageID:n,action:"LOAD_THUMBNAIL",value:r}},[me]:(e,t)=>{let{pageID:n,url:r}=t;h().set(e,n,{...e[n],substrateUrl:r}),e.changeInPage={pageID:n,action:"LOAD_SUBSTRATE",value:r}},[Ee]:(e,t)=>{let{pageID:n,url:r}=t;h().set(e,n,{...e[n],textUrl:r}),e.changeInPage={pageID:n,action:"LOAD_TEXT_LAYER",value:r}},[Se]:(e,t)=>{let{pageID:n,url:r}=t;h().set(e,n,{...e[n],textUrl:r}),e.changeInPage={pageID:n,action:"LOAD_VECTOR_LAYER",value:r}},[ye]:(e,t)=>{let{pageID:n,url:r}=t;h().set(e,n,{...e[n],nextSubstrateUrl:r})},[Ie]:(e,t)=>{let{pageID:n,url:r}=t;h().set(e,n,{...e[n],nextTextUrl:r})},[be]:(e,t)=>{let{pageIDsArray:n}=t;for(let r=0,o=n.length;r<o;r++){const t=Object.assign({},e[n[r]]);t.thumbnailUrl=null,t.textUrl=null,t.substrateUrl=null,h().set(e,n[r],t),e.changeInPage={pageID:n[r],action:"RESET_RESOURCES"}}},[Pe]:(e,t)=>{let{pageIDsArray:n}=t;for(let r=0,o=n.length;r<o;r++){const t=Object.assign({},e[n[r]]);t.textUrl=null,t.substrateUrl=null,h().set(e,n[r],t),e.changeInPage={pageID:n[r],action:"RESET_RESOURCES_EXCL_TH"}}},[ue]:(e,t)=>{let{pageID:n,itemId:r}=t;if(!(n in e))return;const o=Object.assign({},e[n]),a=[...o.content,r];o.content=a,h().set(e,n,o),e.changeInPage={pageID:n,action:"ADD_CONTENT",value:r}},[pe]:(e,t)=>{let{pageID:n,itemId:r}=t;if(!(n in e))return;const o=Object.assign({},e[n]),a=o.content||[];o.content=a.filter((e=>e!==r)),h().set(e,n,o),e.changeInPage={pageID:n,action:"REMOVE_CONTENT",value:r}},[Te]:(e,t)=>{let{pageID:n,value:r}=t;h().set(e,n,{...e[n],loadPending:r}),e.changeInPage={pageID:n,action:"CHANGE_LOAD_PENDING",value:r}},[_e]:(e,t)=>{let{pageID:n,value:r}=t;h().set(e,n,{...e[n],updatePending:r})},[we]:(e,t)=>{let{pageID:n,property:r,value:o}=t;const a=Object.assign({},e[n]);a[r]=o,h().set(e,n,a),e.changeInPage={pageID:n,action:"SET_PAGE_PROPERTY",property:r,value:o}},[ve]:(e,t)=>{let{pageID:n,property:r}=t;if(n in e&&e[n].hasOwnProperty(r)){const t=Object.assign({},e[n]);delete t[r],h().set(e,n,t)}},[Ce]:(e,t)=>{let{pageID:n,value:r}=t;h().set(e,n,r),e.changeInPage={pageID:n,action:"SET_PAGE_INFO",value:r}},[Oe]:(e,t)=>{let{pageID:n,value:r}=t;h().set(e,n,{...e[n],currentSize:r})},[Ae]:(e,t)=>{h().set(e,"downloadProgress",t),e.downloadProgressUpdated=Date.now()}},Fe={namespaced:!0,actions:Re,getters:ze,mutations:Be,state:{defaults:{width:0,height:0,thFormat:"",textLayer:!0,substrateFormat:"",substrateZoomFormat:"",substrateWebPCount:0,stub:!1,slideDelay:2,backgroundColor:"#FFFFFF",wide:!1,pageResize:"FIT",shadowDepth:-1},size:{width:null,height:null,zoomFactor:1},structure:[],downloadProgress:[],downloadProgressUpdated:null,changeInPage:null,apiChange:null}},Ge="CHANGE_PROPERTY",He={CHANGE_PROPERTY:Ge},Ze={[Ge]:function(e,t){let{key:n,value:r}=t;h().set(e,n,r)}},Ve={namespaced:!0,actions:{changeProperty(e,t){let{commit:n}=e,{key:r,value:o}=t;n(He.CHANGE_PROPERTY,{key:r,value:o})}},getters:{},mutations:Ze,state:{currentPagesVisible:!0,selectedPagesVisible:!0}};var Ye=n(1071);const je={setQuery:function(e,t){let{commit:n}=e,{value:r}=t;n(Ye.A9,r)},saveScrollInfo(e,t){let{commit:n}=e,{y:r,loadedTo:o}=t;n(Ye.BQ,{y:r,loadedTo:o})},setExactMatch:function(e,t){let{commit:n}=e,{value:r}=t;n(Ye.Tt,r)},setActiveItemByIndex:function(e,t){let{state:n,commit:r}=e;0===n.results.length||t>=n.results.length||r(Ye.n_,{resultIndex:t})},setActiveItemToFirst:function(e){let{state:t,commit:n}=e;0!==t.results.length&&n(Ye.n_,{resultIndex:0})},setActiveItemToLast:function(e){let{state:t,commit:n}=e;if(0===t.results.length)return;const r=t.results.length;n(Ye.n_,{resultIndex:r-1})},setActiveNextItem:function(e){let{state:t,commit:n}=e;if(0===t.results.length)return;const r=t.results.length-1,o=t.activeItemIndex;return null!==o?o<r&&void n(Ye.n_,{resultIndex:o+1}):void 0},setActivePreviousItem:function(e){let{state:t,commit:n}=e;if(0===t.results.length)return;const r=t.activeItemIndex;return null!==r?r>0&&void n(Ye.n_,{resultIndex:r-1}):void 0}};var $e=n(5475);const We={normalizedQuery:e=>e.query?$e.Z.normalize(e.query,!0):"",trimmedNormalizedQuery:(e,t)=>t.normalizedQuery?.trim()??"",getProgress:e=>{if(null===e.status)return null;if("complete"===e.status)return 100;{const{progress:t,of:n}=e.status;return Math.round(100*t/n)}},getHighlights:e=>t=>"complete"===e.status?e.highlights[t]:[],getSearchText:e=>t=>((e.searchIndex.filter((e=>e.some((e=>e["@ID"]==t))))[0]||[]).filter((e=>e["@ID"]==t))[0]||{})["#text"]||"",isSearchTextInfoLoaded:(e,t,n,r)=>t=>(0,_.e$)(e.textInfo,t)&&(r["pages/pageProp"](t,"hasNoText")||!(0,_.xb)(e.textInfo[t].searchTextMap)),isSelectTextInfoLoaded:e=>t=>(0,_.e$)(e.textInfo,t),getSearchTextInfoLoadedPages:(e,t)=>{const n=[];for(const r in e.textInfo)t.isSearchTextInfoLoaded(r)&&n.push(r);return n},getSelectTextInfo:(e,t,n,r)=>(n,o,a)=>{if(!t.isSelectTextInfoLoaded(n))return{};const i=r["pages/pageProp"](n,"wide"),s=e.textInfo[n].isCrossWide||a,l=e.textInfo[n].isRtlSelection;let c=e.textInfo[n].finalTree.filter((e=>!e.onlyForSearch));return i&&!s&&(c=c.filter((e=>e.isRight===o))),{isCrossWide:s,isRtlSelection:l,finalTree:c}},getSearchTextInfo:(e,t)=>n=>t.isSearchTextInfoLoaded(n)?{finalTree:e.textInfo[n].finalTree,searchTextMap:e.textInfo[n].searchTextMap}:{},getRightWideHalfSelection:(e,t,n,r)=>e=>{const o=r["pages/pageProp"](e,"wide");if(!n.pager.singleMode||!o)return!1;const a=t.getHighlights(e);if(!a?.ready)return!1;const i=r["pages/pageProp"](e,"width")/2,s=n.book.rightToLeft,l=a.data;for(let t=0,n=l.length;t<n;t++)if(s?l[t].rect[2]>=i:l[t].rect[2]<i)return!1;return!0},isInitializing:e=>e.initialization.started&&!e.initialization.completed,isInitialized:e=>e.initialization.completed,isNormalizationInitialized:e=>e.initialization.normalizeInitialized,isNormalizePolyfillUsed:e=>e.initialization.normalizePolyfillUsed};function Xe(e,t){let n,r,o,a;return Array.isArray(e)?(n=Math.min(e[0].relevance,e[1].relevance),o=e[0].pageId):(n=e.relevance,o=e.pageId),Array.isArray(t)?(r=Math.min(t[0].relevance,t[1].relevance),a=t[0].pageId):(r=t.relevance,a=t.pageId),n-r||o-a}function Ke(e){if(e){for(const t in e){if(!e.hasOwnProperty(t))continue;const n=Object.freeze(e[t]);Object.freeze(n.lines);for(const e in n.lines){if(!n.lines.hasOwnProperty(e))continue;const t=Object.freeze(n.lines[e]);Object.freeze(t.symbols);for(const e in t.symbols)t.symbols.hasOwnProperty(e)&&Object.freeze(t.symbols[e])}}Object.freeze(e)}}function qe(e){if(e){for(const t in e)e.hasOwnProperty(t)&&Object.freeze(e[t]);Object.freeze(e)}}const Je={[Ye.pz]:function(){},[Ye.J$]:function(e,t){e.initialization.normalizeInitialized=!0,e.initialization.normalizePolyfillUsed=t},[Ye.Ql]:function(e){e.initialization.libraryInitialized=!0},[Ye.V8]:function(e){e.initialization.algorithmInitialized=!0},[Ye.lJ]:function(e){e.initialization.started=!0},[Ye.IC]:function(e){e.initialization.started=!1,e.initialization.completed=!0},[Ye.n5]:function(e){e.initialization.indexLoading=!0},[Ye.Hc]:function(e){e.initialization.indexLoading=!1,e.initialization.indexLoaded=!0},[Ye.A9]:function(e,t){e.query=t,e.scrollY=0,e.loadedTo=0},[Ye.Tt]:function(e,t){e.exactMatch=t},[Ye.lY]:function(e,t){let{key:n,value:r}=t;e[n]=r},[Ye.po]:function(e,t){Array.prototype.push.apply(e.results,t),e.results.sort(Xe)},[Ye.If]:function(e){e.results=[],e.activeItemIndex=null},[Ye._m]:function(e,t){let{key:n,query:r,value:o}=t;h().set(e.highlights,n,{ready:!0,query:r,data:o})},[Ye.Sb]:function(e){for(const t in e.highlights)e.highlights.hasOwnProperty(t)&&h().set(e.highlights,t,{ready:!1,query:"",data:[]})},[Ye.B9]:function(e,t){e.searchIndex.push(t)},[Ye.Kk]:function(e,t){e.status=t},[Ye.BQ]:function(e,t){let{y:n,loadedTo:r}=t;e.scrollY=n,e.loadedTo=r},[Ye.o6]:function(e,t){let{pageId:n,isCrossWide:r=!1,isRtlSelection:o=!1,finalTree:a=[],searchTextMap:i=[]}=t;Ke(a),qe(i);const s={isCrossWide:r,isRtlSelection:o,finalTree:a,searchTextMap:i};h().set(e.textInfo,n,s),e.selectTextInfoLoaded={pageId:n}},[Ye.Eg]:function(e,t){let{pageIds:n}=t;for(const r in e.textInfo)e.textInfo.hasOwnProperty(r)&&n.indexOf(r)<0&&delete e.textInfo[r]},[Ye.n_]:function(e,t){let{resultIndex:n}=t;e.activeItemIndex=n}},Qe={namespaced:!0,actions:je,getters:We,mutations:Je,state:{color:"#FFE921",path:"/searchtext.xml",exactMatch:!1,searchCharactersLimit:1,enabled:!1,chunkSize:66,searchInterval:33,maxTextResultLength:90,searchIndex:[],query:"",results:[],highlights:{},textInfo:[],selectTextInfoLoaded:{},status:null,scrollY:0,loadedTo:0,activeItemIndex:null,initialization:{started:!1,completed:!1,indexLoading:!1,indexLoaded:!1,libraryInitialized:!1,algorithmInitialized:!1,normalizeInitialized:!1,normalizePolyfillUsed:!1}}};var et=n(6142);const tt={setParam:function(e,t){let{commit:n,state:r}=e,{param:o,value:a}=t;r.styles.hasOwnProperty(o)&&n(et.kd,{param:o,value:a})}},nt={},rt={[et.qg]:function(e){e.initialized=!0},[et.vG]:function(e){e.templateLoaded=!0},[et.kd]:function(e,t){let{param:n,value:r}=t;e.styles[n]=r}},ot={namespaced:!0,actions:tt,getters:nt,mutations:rt,state:{initialized:!1,templateLoaded:!1,styles:{"font-weight-normal":"600","font-weight-bold":"800"}}},at="ENABLE",it="DISABLE",st="SET_CHILDREN",lt="TOGGLE_STATE",ct="UPDATE_SCROLL",dt="SET_ACTIVE",gt="SET_ROUTE",ut="SET_SHOW_PAGE_LABELS",pt={DISABLE:it,ENABLE:at,SET_CHILDREN:st,TOGGLE_STATE:lt,UPDATE_SCROLL:ct,SET_ACTIVE:dt,SET_ROUTE:gt,SET_SHOW_PAGE_LABELS:ut};var ht=n(5622);let ft={},mt=!1;const Et=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let n=0,r=e.length;n<r;n++)void 0===ft[e[n].page-1]&&(ft[e[n].page-1]=t.concat([n])),e[n].hasOwnProperty("children")&&Et(e[n].children,t.concat([n]))},St={enable(e){let{commit:t}=e;t(pt.ENABLE)},disable(e){let{commit:t}=e;t(pt.DISABLE)},resetRoutes(e){let{state:t,dispatch:n,getters:r}=e;ft={},Et(t.children);n("setActiveByPage",r.activePageIndexes)},setChildren(e,t){let{commit:n}=e;(0,ht.OZ)(t,"children","toggle",!1),(0,ht.OZ)(t,"children","active",!1,!0),(0,ht.QX)(t,"children","route"),n(pt.SET_CHILDREN,{value:t})},toggleState(e,t){let{commit:n}=e;n(pt.TOGGLE_STATE,{branch:t})},saveScrollY(e,t){let{commit:n}=e;n(pt.UPDATE_SCROLL,{y:t})},setActive(e,t){let{commit:n,state:r,dispatch:o}=e;o("removeActive"),n(pt.SET_ACTIVE,{branch:t,value:!0}),n(pt.SET_ROUTE,{value:t.route})},setActiveByPage(e,t){let{commit:n,state:r,dispatch:o}=e;if(!r.enabled)return;if(mt&&0===ft.length)return;mt||(Et(r.children),mt=!0);let a=[];for(let i=0;i<t.length;i++){if(ft[t[i]]){a=ft[t[i]];break}i===t.length-1&&(a=yt(t[i]))}o("removeActive"),o("addActive",a),n(pt.SET_ROUTE,{value:a})},addActive(e,t){let{commit:n,state:r}=e,o=r.children;for(let a=0,i=t.length;a<i;a++)o[t[a]].toggle||n(pt.TOGGLE_STATE,{branch:o[t[a]]}),a===i-1&&n(pt.SET_ACTIVE,{branch:o[t[a]],value:!0}),o=o[t[a]].children},removeActive(e){let{commit:t,state:n}=e,r=n.children;const o=n.activeRoute;for(let a=0,i=o.length;a<i&&(a===i-1&&r[o[a]]&&t(pt.SET_ACTIVE,{branch:r[o[a]],value:!1}),r[o?.[a]]?.children);a++)r=r[o[a]].children},setShowPageLabels(e,t){let{commit:n}=e;n(pt.SET_SHOW_PAGE_LABELS,{value:t})}},yt=function(e){const t=[];for(;e>1;)if(e--,void 0!==ft[e])return ft[e];return t},It={getItem:e=>t=>{let n=e;for(let e=0,r=t.length;e<r;e++){const r=n.children;if(!(void 0!==r&&r.length>t[e]))return null;n=r[t[e]]}return n},getActiveItem:(e,t)=>t.getItem(e.activeRoute),firstElement:(e,t)=>t.getItem([0]),lastElement:(e,t)=>{let n=[];function r(e){const t=e.length-1,o=e[t];n.push(t),o.children&&o.toggle&&r(o.children)}return r(e.children),t.getItem(n)},nextElement:(e,t)=>{let n=null;for(let r=e.activeRoute.length-1;r>=0;r--){const o=t.getItem(e.activeRoute);if(o.toggle&&o.children){n=t.getItem([...e.activeRoute,0]);break}const a=e.activeRoute[r]+1;let i=[...e.activeRoute];if(i[r]=a,i=i.slice(0,r+1),n=t.getItem(i),null!==n)break}return n},prevElement:(e,t)=>{let n=[...e.activeRoute],r=e.activeRoute.length-1;function o(e){return e.toggle&&e.children&&(e=o(e.children[e.children.length-1])),e}if(n[r]>0){n[r]-=1;return o(t.getItem(n))}return 1===n.length?null:(n=n.slice(0,r),t.getItem(n))},activePageIndexes:(e,t,n,r)=>{const o=r["pager/state"],a=r["pages/pageIndexById"](o.currentPage),i=n.pager.lastTarget;if("toc"===i||"thumbnails"===i||"search"===i||"link"===i||"notes"===i||"init"===i)return[a];const s=(o.spreadMode?[o.leftPage,o.rightPage]:[]).map((e=>r["pages/pageIndexById"](e)));return[...new Set([a,...s])]}},bt={[at]:function(e){e.enabled=!0},[it]:function(e){e.enabled=!1},[st]:function(e,t){let{value:n}=t;h().set(e,"children",n)},[lt]:function(e,t){let{branch:n}=t;n.toggle=!n.toggle},[ct]:function(e,t){let{y:n}=t;e.scrollY=n},[dt]:function(e,t){let{branch:n,value:r}=t;n.active=r},[gt]:function(e,t){let{value:n}=t;e.activeRoute=n},[ut]:function(e,t){let{value:n}=t;e.showPageLabels=n}},Pt={namespaced:!0,actions:St,getters:It,mutations:bt,state:{enabled:!0,scrollY:0,activeRoute:[],children:[],showPageLabels:!0}},Tt="SET_FULLSCREEN_MODE",_t="UNSET_FULLSCREEN_MODE",wt="ENABLE",vt="INIT",Ct="DISABLE",Lt="FREEZE",Ot="UNFREEZE",At="FROZEN_BY",xt="CHANGE_PROPERTY",Nt="SET_LAYOUT",Rt="SET_BOOK_COMPONENT",kt="SET_RESIZING",Dt="SET_MODAL",Mt="SET_PRELOADER",Ut="SET_SIZE",zt="SET_CONTAINER_SIZE",Bt="SET_HOLDER_SIZE",Ft="SET_VISIBLE",Gt="SET_EMBED",Ht="SET_STATUS",Zt="SET_COMPONENT",Vt="SET_HIGHLIGHT_TIMEOUT",Yt="SET_MINI",jt="SET_ZOOM_PANEL",$t="SET_FLASH_MESSAGE",Wt="SET_COPYRIGHT",Xt="SET_SLIDESHOW",Kt="SET_SLIDESHOW_ACTIVE",qt="SET_WHEEL_SCROLL",Jt="SET_ANIMATION_PROGRESS",Qt="UNSET_ANIMATION_PROGRESS",en="SET_ANIMATION_TYPE",tn="UNSET_ANIMATION_TYPE",nn="SET_SHOW_SELECT_TEXT_TIP_COUNT",rn="SET_CONTEXT_MENU_VISIBLE",on="TOGGLE_ACCESSIBILITY_MODE",an="SET_CALL_TO_NAVIGATION",sn="CHANGE_POLICY_UPDATED",ln="SET_ATTRACT_ON_CONTROLS_SET",cn="SET_INSPECTOR_MODE",dn="SET_KEEP_ZOOM_ON_PAGER_MOVE",gn="SET_LIGHTBOX_NEIGHBORS_NAV_ENABLED",un="SET_PRINTED_IN_SAFARI_15",pn="SET_ANDROID_KEYBOARD_OPENED",hn="RESET_ANDROID_KEYBOARD_TIMINGS",fn="CLEAR_INITIAL_ZOOM",mn="SET_PAUSED_BY_READER",En="SET_ACTIVE_INTERACTIVE_ELEMENT",Sn="SET_BANNER_HEIGHT",yn="SET_SHOW_CONFIG",In="LOG_API_EVENT",bn="LOG_API_USAGE",Pn={SET_PRINTED_IN_SAFARI_15:un,SET_KEEP_ZOOM_ON_PAGER_MOVE:dn,SET_LIGHTBOX_NEIGHBORS_NAV_ENABLED:gn,SET_FULLSCREEN_MODE:Tt,UNSET_FULLSCREEN_MODE:_t,DISABLE:Ct,ENABLE:wt,INIT:vt,FREEZE:Lt,UNFREEZE:Ot,FROZEN_BY:At,CHANGE_PROPERTY:xt,SET_LAYOUT:Nt,SET_BOOK_COMPONENT:Rt,SET_RESIZING:kt,SET_MODAL:Dt,SET_PRELOADER:Mt,SET_SIZE:Ut,SET_CONTAINER_SIZE:zt,SET_HOLDER_SIZE:Bt,SET_VISIBLE:Ft,SET_EMBED:Gt,SET_STATUS:Ht,SET_COMPONENT:Zt,SET_HIGHLIGHT_TIMEOUT:Vt,SET_MINI:Yt,SET_ZOOM_PANEL:jt,SET_FLASH_MESSAGE:$t,SET_COPYRIGHT:Wt,SET_SLIDESHOW:Xt,SET_SLIDESHOW_ACTIVE:Kt,SET_WHEEL_SCROLL:qt,SET_ANIMATION_PROGRESS:Jt,UNSET_ANIMATION_PROGRESS:Qt,SET_ANIMATION_TYPE:en,UNSET_ANIMATION_TYPE:tn,SET_SHOW_SELECT_TEXT_TIP_COUNT:nn,SET_CONTEXT_MENU_VISIBLE:rn,TOGGLE_ACCESSIBILITY_MODE:on,SET_CALL_TO_NAVIGATION:an,CHANGE_POLICY_UPDATED:sn,SET_ATTRACT_ON_CONTROLS_SET:ln,SET_INSPECTOR_MODE:cn,SET_ANDROID_KEYBOARD_OPENED:pn,RESET_ANDROID_KEYBOARD_TIMINGS:hn,CLEAR_INITIAL_ZOOM:fn,SET_PAUSED_BY_READER:mn,SET_ACTIVE_INTERACTIVE_ELEMENT:En,SET_BANNER_HEIGHT:Sn,SET_SHOW_CONFIG:yn,LOG_API_EVENT:In,LOG_API_USAGE:bn},Tn={setInspectorMode(e,t){let{commit:n}=e;n(Pn.SET_INSPECTOR_MODE,t)},setShowConfig(e,t){let{commit:n}=e;n(Pn.SET_SHOW_CONFIG,t)},setPrintedInSafari15:function(e){let{commit:t}=e;t(Pn.SET_PRINTED_IN_SAFARI_15)},toggleAccessibilityMode:function(e){let{commit:t}=e;t(Pn.TOGGLE_ACCESSIBILITY_MODE)},workspaceInit:function(e){let{commit:t}=e;t(Pn.INIT)},toggleFullScreen:function(e){let{commit:t,state:n}=e;n.fullScreenMode?t(Pn.UNSET_FULLSCREEN_MODE):t(Pn.SET_FULLSCREEN_MODE)},setFullScreen:function(e,t){let{commit:n,state:r}=e;r.fullScreenMode&&!t?n(Pn.UNSET_FULLSCREEN_MODE):!r.fullScreenMode&&t&&n(Pn.SET_FULLSCREEN_MODE)},freeze:function(e){let{commit:t,state:n}=e,{target:r="unknown",apiTarget:o=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.freezed||(t(Pn.FROZEN_BY,{target:r,apiTarget:o}),t(Pn.FREEZE))},unfreeze:function(e){let{commit:t,state:n}=e,{target:r="unknown"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.freezed&&n.frozenBy===r&&(t(Pn.FROZEN_BY,{target:null,apiTarget:null}),t(Pn.UNFREEZE))},setLayout:function(e,t){let{commit:n,state:r}=e;n(Pn.SET_LAYOUT,t)},setBookComponent:function(e,t){let{commit:n,state:r}=e;n(Pn.SET_BOOK_COMPONENT,t)},setResizing:function(e,t){let{commit:n,state:r}=e;n(Pn.SET_RESIZING,t)},setModalOpened:function(e,t){let{commit:n,state:r}=e;n(Pn.SET_MODAL,t)},setPreloader:function(e,t){let{commit:n,state:r}=e;n(Pn.SET_PRELOADER,t)},setSize:function(e,t){let{commit:n,state:r}=e,{width:o,height:a,changedBy:i=null}=t;n(Pn.SET_SIZE,{width:o,height:a,changedBy:i}),0===o||0===a||r.isInited||n(Pn.INIT)},setContainerSize:function(e,t){let{commit:n,state:r}=e;n(Pn.SET_CONTAINER_SIZE,t)},setHolderSize:function(e,t){let{commit:n,state:r}=e,{width:o,height:a,top:i,left:s}=t;n(Pn.SET_HOLDER_SIZE,{width:Math.round(o),height:Math.round(a),top:Math.round(i),left:Math.round(s)})},setVisible:function(e,t){let{commit:n,state:r}=e;n(Pn.SET_VISIBLE,t)},setEmbed:function(e,t){let{commit:n,state:r}=e;n(Pn.SET_EMBED,t)},setStatus:function(e,t){let{commit:n,state:r}=e;n(Pn.SET_STATUS,t)},changeProperty:function(e,t){let{commit:n,state:r}=e,{key:o,value:a}=t;"cookieNotice"===o&&!a.enabled&&n(Pn.SET_BANNER_HEIGHT,0),n(Pn.CHANGE_PROPERTY,{key:o,value:a})},enable:function(e,t){let{commit:n,state:r}=e;n(Pn.ENABLE,t)},disable:function(e,t){let{commit:n,state:r}=e;n(Pn.DISABLE,t)},setComponent:function(e,t){let{commit:n,state:r}=e,{component:o,value:a}=t;n(Pn.SET_COMPONENT,{component:o,value:a})},changeTotalPagesVisible:function(e,t){let{commit:n,state:r}=e;!0===r.components.paginator||!1===r.components.paginator?n(Pn.SET_COMPONENT,{component:"paginator",value:{enabled:r.components.paginator,totalPagesVisible:t}}):n(Pn.SET_COMPONENT,{component:"paginator",value:{enabled:r.components.paginator.enabled,totalPagesVisible:t}})},setPaginatorEnabled:function(e,t){let{commit:n,state:r}=e;!0===r.components.paginator||!1===r.components.paginator?n(Pn.SET_COMPONENT,{component:"paginator",value:{enabled:t}}):n(Pn.SET_COMPONENT,{component:"paginator",value:{enabled:t,totalPagesVisible:r.components.paginator.totalPagesVisible}})},setHighlightTimeout:function(e,t){let{commit:n,state:r}=e;n(Pn.SET_HIGHLIGHT_TIMEOUT,t)},setMini:function(e,t){let{commit:n,state:r,dispatch:o}=e;r.mini!==t&&(n(Pn.SET_MINI,t),r.mini&&(o("sidebar/closeSidebar",{},{root:!0}),o("popup/closePopup",null,{root:!0})))},setZoomPanel:function(e,t){let{commit:n,state:r}=e;n(Pn.SET_ZOOM_PANEL,t)},setFlashMessage:function(e,t){let{commit:n,state:r}=e;n(Pn.SET_FLASH_MESSAGE,t)},setCopyright:function(e,t){let{commit:n,state:r}=e,{param:o,value:a}=t;n(Pn.SET_COPYRIGHT,{param:o,value:a})},setSlideshow:function(e,t){let{commit:n,state:r}=e,{param:o,value:a,target:i}=t;n(Pn.SET_SLIDESHOW,{param:o,value:a,target:i})},setSlideshowActive:function(e,t){let{commit:n,state:r}=e,{value:o,target:a,messageText:i=null}=t;r.components.slideshow?.active!==o&&(i&&n(Pn.SET_FLASH_MESSAGE,{text:i}),n(Pn.SET_SLIDESHOW_ACTIVE,{value:o,target:a}))},setWheelScroll:function(e,t){let{commit:n,state:r}=e;n(Pn.SET_WHEEL_SCROLL,t)},setAnimationProgress:function(e,t){let{commit:n}=e;n(Pn.SET_ANIMATION_PROGRESS),n(Pn.SET_ANIMATION_TYPE,t?t.animationType:null)},unsetAnimationProgress:function(e){let{commit:t}=e;t(Pn.UNSET_ANIMATION_PROGRESS),t(Pn.UNSET_ANIMATION_TYPE)},increaseSelectTextTipShowsCount:function(e){let{commit:t,getters:n}=e;const r=n.getSelectTextTipShowsCount;t(Pn.SET_SHOW_SELECT_TEXT_TIP_COUNT,r+1)},setContextMenuState:function(e,t){let{commit:n}=e;n(Pn.SET_CONTEXT_MENU_VISIBLE,t)},setCallToNavigation:function(e,t){let{commit:n}=e;n(Pn.SET_CALL_TO_NAVIGATION,t)},setAttractToControlsSet:function(e,t){let{commit:n}=e;n(Pn.SET_ATTRACT_ON_CONTROLS_SET,t)},setKeepZoomOnPagerMove:function(e,t){let{commit:n}=e;n(Pn.SET_KEEP_ZOOM_ON_PAGER_MOVE,t)},setLightboxNeighborsNavEnabled:function(e,t){let{commit:n}=e;n(Pn.SET_LIGHTBOX_NEIGHBORS_NAV_ENABLED,t)},changePolicyUpdated:function(e){let{commit:t}=e;t(Pn.CHANGE_POLICY_UPDATED)},setAndroidKeyboardOpened:function(e,t){let{commit:n}=e;n(Pn.SET_ANDROID_KEYBOARD_OPENED,t)},resetKeyboardTimings:function(e){let{commit:t}=e;t(Pn.RESET_ANDROID_KEYBOARD_TIMINGS)},clearInitialZoom:function(e){let{commit:t}=e;t(Pn.CLEAR_INITIAL_ZOOM)},setActiveInteractiveElement:function(e,t){let{commit:n}=e;n(Pn.SET_ACTIVE_INTERACTIVE_ELEMENT,t)}},_n={fullScreenMode:e=>e.fullScreenMode,isInited:e=>e.isInited,size:e=>e.size,orientation:e=>e.size.width&&e.size.height?e.size.width>=e.size.height?"landscape":"portrait":null,containerSize:e=>e.containerSize,holderSize:e=>e.holderSize,flashMessage:e=>e.flashMessage,animationInProgress:e=>e.animationInProgress,canShowSelectTextTip:(e,t)=>t.getSelectTextTipShowsCount<e.maxSelectTextTipShowsCount,getSelectTextTipShowsCount:e=>{let t=e.selectTextTipShowsCount;if(null===t){const e=(0,De.Z)().getSessionStorage().getItem("selectTextTipShowsCount");t=e?parseInt(e,10):0}return t},callToNavigation:e=>e.callToNavigation,soundVisible:(e,t,n)=>n.sound.enabled&&("flip-book"===e.bookComponent||n.content.hasVideoContent||!!n.sound.background.url),accessibilityButtonVisible:(e,t,n,r)=>n.downloads.accessibilityPDF.enabled&&!!r["downloads/getAccessiblePdf"],desktopTopBarVisible:e=>e.components&&e.components.topBar&&!e.mini,desktopBottomBarVisible:(e,t,n)=>e.components&&e.components.bottomBar&&!e.mini&&(e.components.thumbnails||e.components.notes||e.components.share||e.components.print||e.components.fullscreen||e.components.zoom||t.soundVisible||e.components.slideshow&&e.components.slideshow.enabled||n.toc&&n.toc.enabled||n.downloads&&n.downloads.enabled),isOffline:e=>e.offline,isMobile:e=>"mobile"===e.layout,isTablet:(e,t)=>t.isMobile&&!t.isPhone,isSmallWorkspace:e=>e.size.width&&e.size.height?Math.min(e.size.width,e.size.height)<=480:null,isPhone:(e,t)=>t.isMobile&&t.isSmallWorkspace,isPortrait:(e,t)=>"portrait"===t.orientation,deviceType:(e,t)=>t.isMobile?t.isTablet?"tablet":"mobile":"desktop",shouldActivateSearchKeyboard:(e,t,n)=>{if(n.search.query)return!1;const r=Date.now()-e.lastOrientationChanged,o=Date.now()-e.lastAndroidKeyboardClosed;return!(r<1e3&&o>2e3)},isFrozen:e=>e.freezed},wn={[Sn]:(e,t)=>{e.bannerHeight=t},[cn]:(e,t)=>{e.inspectorMode=t},[yn]:(e,t)=>{e.showConfig=t},[un]:e=>{e.isPrintedInSafari15=!0},[on]:e=>{e.accessibilityMode=!e.accessibilityMode},[xt]:function(e,t){let{key:n,value:r}=t;e[n]=r},[Tt]:e=>{e.fullScreenMode=!0},[_t]:e=>{e.fullScreenMode=!1},[vt]:e=>{e.isInited=!0},[wt]:(e,t)=>{e.components[t]=!0},[Ct]:(e,t)=>{e.components[t]=!1},[Lt]:e=>{e.freezed=!0},[Ot]:e=>{e.freezed=!1},[At]:(e,t)=>{let{target:n,apiTarget:r}=t;e.frozenBy=n,e.apiFreezeTarget=r},[Nt]:(e,t)=>{e.layout=t},[Rt]:(e,t)=>{e.bookComponent=t},[kt]:(e,t)=>{e.isResizing=t},[Dt]:(e,t)=>{e.modalOpened=t},[Mt]:(e,t)=>{e.preloader=t},[Ut]:(e,t)=>{let{width:n,height:r,changedBy:o}=t;const a=e.size.width<e.size.height!=n<r;e.size={width:n,height:r,changedBy:o},a&&(e.lastOrientationChanged=Date.now())},[zt]:(e,t)=>{e.containerSize=t},[Bt]:(e,t)=>{e.holderSize=t},[Ft]:(e,t)=>{e.visible=t},[Gt]:(e,t)=>{e.isEmbed=t},[Ht]:(e,t)=>{e.status=t},[Zt]:(e,t)=>{let{component:n,value:r}=t;e.components[n]=r},[Vt]:(e,t)=>{e.highlightTimeout=t},[Yt]:(e,t)=>{e.mini=t},[jt]:(e,t)=>{e.zoomPanel=t},[$t]:(e,t)=>{e.flashMessage=t},[Wt]:(e,t)=>{let{param:n,value:r}=t;h().set(e.components,"copyright",{...e.components.copyright,[n]:r})},[Xt]:(e,t)=>{let{param:n,value:r,target:o}=t;h().set(e.components,"slideshow",{...e.components.slideshow,[n]:r,target:o})},[Kt]:(e,t)=>{let{value:n,target:r}=t;h().set(e.components,"slideshow",{...e.components.slideshow,active:n,target:r})},[qt]:(e,t)=>{e.wheelScroll=t},[Jt]:e=>{e.animationInProgress=!0},[Qt]:e=>{e.animationInProgress=!1},[en]:(e,t)=>{e.animationType=t},[tn]:e=>{e.animationType=null},[nn]:(e,t)=>{const n=(0,De.Z)().getSessionStorage();e.selectTextTipShowsCount=t;try{n.setItem("selectTextTipShowsCount",t)}catch(r){}},[rn]:(e,t)=>{e.contextMenuVisible=t},[an]:(e,t)=>{e.callToNavigation=t},[sn]:e=>{e.policiesUpdated=Date.now()},[dn]:(e,t)=>{e.keepZoomOnPagerMove=t},[gn]:(e,t)=>{e.lightboxNeighborsNavEnabled=t},[ln]:(e,t)=>{e.attractOnControlsSet=!!t},[pn]:(e,t)=>{e.isAndroidKeyboardOpened=t,t?e.lastAndroidKeyboardOpened=Date.now():e.lastAndroidKeyboardClosed=Date.now()},[hn]:e=>{e.lastAndroidKeyboardOpened=null,e.lastAndroidKeyboardClosed=null},[fn]:e=>{e.initialZoom=!1},[mn]:(e,t)=>{let{itemId:n,value:r}=t;e.pausedByReader[n]=r},[En]:(e,t)=>{e.activeInteractiveElement=t},[In]:(e,t)=>{e.showConfig&&(e.apiEventsLog.push(t),e.apiEventsLog.length>25&&e.apiEventsLog.shift())},[bn]:(e,t)=>{let{param:n,value:r,target:o}=t;e.showConfig&&(e.apiUsageLog.push({param:n,value:r,target:o}),e.apiUsageLog.length>25&&e.apiUsageLog.shift())}},vn={namespaced:!0,actions:Tn,getters:_n,mutations:wn,state:{bannerHeight:0,keepZoomOnPagerMove:!1,lightboxNeighborsNavEnabled:!0,bookSize:97,lowercaseRomans:!0,isPrintedInSafari15:null,defaultToolWindow:null,accessibilityPDF:null,components:{bottomBar:!0,zoom:!0,navigation:!1,topBar:!0,embed:!1,fullscreen:!0,print:!0,thumbnails:!0,notes:!0,share:!0,textSelection:!1,help:{enabled:!0,toolbarIcon:!0},slideshow:{loop:!1,auto:!1,interval:6e3,enabled:!1,active:!1,target:null},paginator:{enabled:!0,totalPagesVisible:!0},book:{flip:!0,flipbookType:null,isTranslucentReverseSide:!0},copyright:{enabled:!1}},locales:[],fullScreenMode:!1,userAgentInfo:{browser:{}},cookieNotice:{enabled:!1},customTotalPages:null,maxZoom:5,offline:!1,layout:null,bookComponent:null,isInited:!1,freezed:!1,frozenBy:null,apiFreezeTarget:null,isResizing:!1,isEmbed:!1,isProtected:!1,usePostMsg:!1,embedScript:!1,embedLightbox:!1,modalOpened:!1,preloader:!1,size:{width:null,height:null,changedBy:null},containerSize:{width:null,height:null},holderSize:{width:null,height:null,left:null,top:null},status:"ready",visible:!0,highlightTimeout:0,mini:!1,zoomPanel:!1,urlBlackList:[],flashMessage:null,wheelScroll:!0,webPSupported:!1,animationInProgress:!1,animationType:null,selectTextTipShowsCount:null,maxSelectTextTipShowsCount:3,contextMenuVisible:!1,accessibilityMode:!1,callToNavigation:{type:null,side:null},defaultZoomFactor:2,minZoomFactor:1.2,attractOnControlsSet:!1,doubletapInterval:325,policiesUpdated:0,alteredSVGColors:!1,inspectorMode:!1,showConfig:!1,apiEventsLog:[],apiUsageLog:[],isAndroidKeyboardOpened:!1,lastAndroidKeyboardOpened:null,lastAndroidKeyboardClosed:null,lastOrientationChanged:null,initialZoom:!1,pausedByReader:{},activeInteractiveElement:null}},Cn="MUTE_SOUND",Ln="UNMUTE_SOUND",On="SET_SOUND",An="ENABLE_SOUND",xn="PLAY_FLIP_SOUND",Nn="SET_MUTE_TEMPORARY",Rn={MUTE_SOUND:Cn,UNMUTE_SOUND:Ln,SET_SOUND:On,ENABLE_SOUND:An,PLAY_FLIP_SOUND:xn,SET_MUTE_TEMPORARY:Nn},kn={toggleMuteSound:function(e){let{commit:t,state:n,dispatch:r}=e;r("setMute",{mute:!n.muteSound})},setMute:function(e,t){let{commit:n,state:r}=e,{mute:o}=t;n(o?Rn.MUTE_SOUND:Rn.UNMUTE_SOUND)},setSound:function(e,t){let{commit:n,state:r}=e;n(Rn.SET_SOUND,t)},enableSound:function(e,t){let{commit:n,state:r}=e;n(Rn.ENABLE_SOUND,t)},playFlipSound:function(e,t){let{commit:n,state:r}=e,{hardcover:o}=t;r.muteSound||n(Rn.PLAY_FLIP_SOUND,{hardcover:o})}},Dn={[Cn]:e=>{e.muteSound=!0},[Ln]:e=>{e.muteSound=!1},[On]:(e,t)=>{void 0!==t.enabled&&(e.enabled=t.enabled),t.background&&Object.assign(e.background,t.background),t.flip&&(void 0!==t.flip.enabled&&(e.flip.enabled=t.flip.enabled),void 0!==t.flip.volume&&(e.flip.volume=t.flip.volume),t.flip.hard&&(e.flip.hard.splice(0,e.flip.hard.length),e.flip.hard.push(...t.flip.hard)),t.flip.soft&&(e.flip.soft.splice(0,e.flip.soft.length),e.flip.soft.push(...t.flip.soft)))},[An]:(e,t)=>{e.enabled=t},[xn]:(e,t)=>{let{hardcover:n}=t;const r=e.notification;r.notify=Date.now(),r.hardcover=n},[Nn]:(e,t)=>{e.muteTemporary=t}},Mn={namespaced:!0,actions:kn,getters:{},mutations:Dn,state:{background:{url:null,loop:!0,volume:30},flip:{enabled:!0,volume:25,hard:["blow.mp3"],soft:["flip2.mp3","flip3.mp3","flip4.mp3"]},notification:{notify:null,hardcover:null},enabled:!0,muteSound:!1,muteTemporary:null}};var Un=n(1378);const zn={setCurrentLocale:function(e,t){let{commit:n,state:r}=e,{locale:o}=t;r.currentLocale!==o&&n(Un.rV,{locale:o})},setCurrentFont:function(e,t){let{commit:n,state:r}=e,{font:o}=t;r.currentFont!==o&&n(Un.d7,{font:o})},setStrings:function(e,t){let{commit:n}=e,{strings:r}=t;n(Un.fc,{strings:r})},setLocale:function(e,t){let{dispatch:n,commit:r,state:o}=e,{locale:a,strings:i}=t;if(void 0!==o.strings[a])r(Un.lX,{locale:a,strings:i});else{n("setStrings",{locale:a,strings:(0,Ne.Z)(o.strings,{[a]:i})})}},setLocaleString:function(e,t){let{dispatch:n,commit:r,state:o}=e,{locale:a,name:i,value:s}=t;a=a||o.currentLocale;const l=i.split(".");if(void 0===o.strings[a][l[0]]||void 0===o.strings[a][l[0]][l[1]]){let e=(0,Ne.Z)(o.strings[a],{[l[0]]:{[l[1]]:s}});n("setLocale",{locale:a,strings:e}),e=null}else r(Un.yA,{locale:a,name:i,value:s})}},Bn={getLocaleStrings:(e,t)=>t=>e.strings[t],getFontConfig:e=>{const t=e.config.fonts.filter((t=>-1!==t.locales.indexOf(e.currentLocale)));if(t.length>0)return t[0]},isLocaleRtl:e=>-1!==e.config.rtl.indexOf(e.currentLocale),getCurrent:e=>e.currentLocale},Fn={[Un.qg]:function(e){e.initialized=!0},[Un.rs]:function(e,t){let{value:n}=t;e.localeLoaded=n},[Un.n0]:function(e,t){let{value:n}=t;e.fontLoaded=n},[Un.rV]:function(e,t){let{locale:n}=t;e.currentLocale=n},[Un.d7]:function(e,t){let{font:n}=t;e.currentFont=n},[Un.fc]:function(e,t){let{strings:n}=t;e.strings=n},[Un.lX]:function(e,t){let{locale:n,strings:r}=t;e.strings[n]=r},[Un.yA]:function(e,t){let{locale:n,name:r,value:o}=t;const a=r.split(".");let i=e.strings[n];for(let s=0;s<a.length-1;s++)i=i[a[s]];i[a[a.length-1]]=o}},Gn={namespaced:!0,actions:zn,getters:Bn,mutations:Fn,state:{strings:{},config:{locales:["en"],substitutes:{},rtl:[],fonts:[]},initialized:!1,fontLoaded:!1,localeLoaded:!1,currentLocale:null,currentFont:null}},Hn={namespaced:!0,actions:{},getters:{},mutations:{},state:{}},Zn="MIN_RANGE",Vn="MAX_RANGE",Yn="CHANGE_RANGE",jn="ADD_QUEUE",$n="CLEAR_QUEUE",Wn="SET_THUMBNAILS",Xn={CHANGE_RANGE:Yn,MIN_RANGE:Zn,MAX_RANGE:Vn,ADD_QUEUE:jn,CLEAR_QUEUE:$n,SET_THUMBNAILS:Wn},Kn={maxRange(e,t){let{commit:n}=e;n(Xn.MAX_RANGE,{page:t})},minRange(e,t){let{commit:n}=e;n(Xn.MIN_RANGE,{page:t})},changeRange(e,t){let{commit:n}=e,{minPage:r,maxPage:o}=t;n(Xn.CHANGE_RANGE,{minPage:r,maxPage:o})},addQueue(e,t){let{commit:n}=e,{queue:r}=t;n(Xn.ADD_QUEUE,{queue:r})},clearQueue(e){let{commit:t}=e;t(Xn.CLEAR_QUEUE)},setThumbnails(e,t){let{commit:n}=e;n(Xn.SET_THUMBNAILS,t)}},qn={windowIsOpen:(e,t,n)=>"thumbnails"===n.sidebar.opened,pagesRange:(e,t,n)=>{if(e.minRange<0||e.maxRange<0)return null;const r=n.pages.structure;let o=new Array(e.maxRange-e.minRange+1).fill().map(((t,n)=>r[n+e.minRange]||null));return o=o.filter((function(e){return null!==e})),o}},Jn={[Zn]:(e,t)=>{let{page:n}=t;e.minRange=n},[Vn]:(e,t)=>{let{page:n}=t;e.maxRange=n},[Yn]:(e,t)=>{let{minPage:n,maxPage:r}=t;e.minRange=n,e.maxRange=r},[jn]:(e,t)=>{let{queue:n}=t;e.queue=e.queue.concat(n)},[$n]:e=>{e.queue=[]},[Wn]:(e,t)=>{e.thumbnails=t}},Qn={namespaced:!0,actions:Kn,getters:qn,mutations:Jn,state:{minRange:-1,maxRange:-1,queue:[],thumbnails:null}},er="OPEN_POPUP",tr="CLOSE_POPUP",nr={OPEN_POPUP:er,CLOSE_POPUP:tr},rr={openPopup:function(e,t){let{commit:n,state:r,rootState:o,rootGetters:a}=e,{component:i,params:s}=t;o.workspace.mini||o.workspace.modalOpened||a["workspace/isFrozen"]||a["lightbox/isShown"]||(r.opened!==i?n(nr.OPEN_POPUP,{component:i,params:s}):n(nr.CLOSE_POPUP))},closePopup:function(e){let{commit:t,state:n}=e;null!==n.opened&&t(nr.CLOSE_POPUP)}},or={isOpened:e=>!!e.opened},ar={[er]:(e,t)=>{let{component:n,params:r}=t;e.opened=n,e.params=r||{}},[tr]:e=>{e.opened=null,e.params=null}},ir={namespaced:!0,actions:rr,getters:or,mutations:ar,state:{opened:null,params:null}};var sr=n(5688);const lr={toc:"nav",notes:"nav",thumbnails:"nav",search:"search"},cr={openSidebar:function(e,t){let{commit:n,state:r,rootState:o,rootGetters:a}=e,{component:i,params:s,target:l=null}=t;if(!(o.workspace.mini||o.workspace.modalOpened||a["workspace/isFrozen"]||a["lightbox/isShown"])){if(r.opened){let e=lr[i]!==lr[r.opened];"api"===l&&(e=!1,n(sr.ZP.CLEAR_PREVIOUS)),n(sr.ZP.CLOSE_SIDEBAR,e)}n(sr.ZP.OPEN_SIDEBAR,{component:i,params:s})}},closeSidebar:function(e){let{commit:t,state:n,rootState:r,dispatch:o}=e,{target:a=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=r.workspace.userAgentInfo.os.android,s=r.workspace.isAndroidKeyboardOpened;i&&"search"===n.opened&&s&&o("workspace/setResizing",!0,{root:!0}),i&&o("workspace/resetKeyboardTimings",null,{root:!0}),null!==n.opened&&t(sr.ZP.CLOSE_SIDEBAR),"api"===a?t(sr.ZP.CLEAR_PREVIOUS):n.previous&&t(sr.ZP.OPEN_PREVIOUS)}},dr={},gr={[sr.Op]:(e,t)=>{let{component:n,params:r}=t;e.opened=n,e.params=r||{}},[sr.bH]:(e,t)=>{t&&(e.previous=e.opened),e.opened=null,e.params=null},[sr.GS]:e=>{e.opened=e.previous,e.previous=null,e.params={}},[sr.CU]:e=>{e.previous=null}},ur={namespaced:!0,actions:cr,getters:dr,mutations:gr,state:{width:264,opened:null,previous:null,params:null}},pr="SELECT",hr="DESELECT",fr="ADD",mr="REMOVE",Er="UPDATE",Sr="REPLACE",yr="CHANGE_PAGES_ARRAY",Ir="START_VIDEO_PLAYING_WITH_AUDIO",br="STOP_VIDEO_PLAYING_WITH_AUDIO",Pr="SET_RAND",Tr={SELECT:pr,DESELECT:hr,ADD:fr,REMOVE:mr,UPDATE:Er,REPLACE:Sr,CHANGE_PAGES_ARRAY:yr,START_VIDEO_PLAYING_WITH_AUDIO:Ir,STOP_VIDEO_PLAYING_WITH_AUDIO:br,SET_RAND:Pr},_r={select(e,t){let{commit:n}=e;n(Tr.SELECT,t)},deselect(e){let{commit:t}=e;t(Tr.DESELECT)},add(e,t){let{state:n,commit:r}=e,{contentType:o,contentData:a,freeze:i=!1}=t;const s=Object.assign(a,{type:o});r(Tr.ADD,{contentData:i&&n.shouldFreeze?Object.freeze(s):s})},remove(e,t){let{commit:n}=e;n(Tr.REMOVE,t)},update(e,t){let{state:n,commit:r}=e,{itemId:o,updateData:a,freeze:i=!1}=t;const s=Object.assign({},n.items[o],a);r(Tr.UPDATE,{itemId:o,updateData:i&&n.shouldFreeze?Object.freeze(s):s,freeze:i})},replace(e,t){let{state:n,commit:r,dispatch:o}=e,{contentData:a,pagesArray:i=null,freeze:s=!1}=t;s&&n.shouldFreeze&&Object.getOwnPropertyNames(a).forEach((function(e){a.hasOwnProperty(e)&&null!==a[e]&&"object"==typeof a[e]&&!Object.isFrozen(a[e])&&Object.freeze(a[e])})),r(Tr.REPLACE,{contentData:a}),i&&r(Tr.CHANGE_PAGES_ARRAY,{pagesArray:i})},setVideoPlayingWithSound(e,t){let{state:n,commit:r}=e,{playing:o,itemId:a}=t;const i=-1!==n.videosPlayingWithSound.indexOf(a);!1===o&&i?r(Tr.STOP_VIDEO_PLAYING_WITH_AUDIO,{itemId:a}):!0!==o||i||r(Tr.START_VIDEO_PLAYING_WITH_AUDIO,{itemId:a})},newRand(e,t){let{state:n,commit:r}=e,{itemId:o}=t;const a=(1e6*Math.random()).toFixed();r(Tr.SET_RAND,{itemId:o,rand:a})}};function wr(e){let{content:t,isRtl:n,yLimits:r}=e;function o(e,t){const[n,o,a,i]=e.rect,[s,l,c,d]=t.rect,g=a+n,u=c+s;return i+o<d||d+l<i?i-d:i===d||Math.abs(i-d)<r&&(g<c||u<a)?a-c:i-d}function a(e,t){const[n,o,a,i]=e.rect,[s,l,c,d]=t.rect,g=a+n,u=c+s;return i+o<d||d+l<i?i-d:i===d||Math.abs(i-d)<r&&(g<c||u<a)?u-g:i-d}n?t.sort(a):t.sort(o)}function vr(e){let{allItems:t,ids:n,widePageSides:r}=e;return n.map((e=>t[e])).filter((e=>!(!e||("image"!==e.type||!1===e.popup)&&"gallery"!==e.type)&&(!r||-1!==r.indexOf(e.side))))}function Cr(e){let{allItems:t,ids:n,widePageSides:r}=e;return Array.from(new Set(n.map((e=>t[e])).filter((e=>!(!e||"form"!==e.type)&&(!r||-1!==r.indexOf(e.side))))))}const Lr={currentContent:(e,t,n,r)=>{let o;const a=n.book.rightToLeft,i=e.items;if(n.pager.spreadMode){const e=n.pager.spread_leftPage,t=n.pager.spread_rightPage,s=e===t;let l=[],c=[];if(e){const t=.1*r["pages/pageProp"](e,"height");l=vr({allItems:i,ids:n.pages[e].content,widePageSides:s?[a?"right":"left","both"]:null}),wr({content:l,isRtl:a,yLimits:t})}if(t){const e=.1*r["pages/pageProp"](t,"height");c=vr({allItems:i,ids:n.pages[t].content,widePageSides:s?[a?"left":"right"]:null}),wr({content:c,isRtl:a,yLimits:e})}o=[...l,...c]}else if(n.pager.singleMode){const e=n.pager.single_currentPage,t=.1*r["pages/pageProp"](e,"height"),s=n.pager.single_wide;o=vr({allItems:i,ids:n.pages[e].content,widePageSides:s?[n.pager.single_currentSide,"both"]:null}),wr({content:o,isRtl:a,yLimits:t})}else if(n.pager.slideMode){const e=n.pager.slide_currentPage,t=.1*r["pages/pageProp"](e,"height");o=vr({allItems:i,ids:n.pages[e].content}),wr({content:o,isRtl:a,yLimits:t})}return o},currentForms:(e,t,n)=>{const r=n.pager.single_wide,o={spread:function(){const e=n.pager.spread_leftPage,t=n.pager.spread_rightPage;return[...n.pages[e]?.content||[],...n.pages[t]?.content||[]]},single:function(){const e=n.pager.single_currentPage;return n.pages[e].content},slide:function(){const e=n.pager.slide_currentPage;return n.pages[e].content}}[n.pager.mode](),a=n.pager.singleMode&&r?[n.pager.single_currentSide,"both"]:null;return Cr({allItems:e.items,ids:o,widePageSides:a})},pageIdByContentId:e=>t=>e.items[t].pageId,pageSideByContentId:(e,t,n,r)=>t=>{const n=e.items[t],o=n.pageId;if(!r["pages/pageProp"](o,"wide"))return null;const a=r["pages/pageProp"](o,"width")/2,[i,,s]=n.rect,l=s>=a;return!l&&s+i>a?"both":l?"right":"left"},isSelected:e=>t=>{let{contentId:n}=t;return e.selectedContentId===n},hasSelected:e=>()=>null!=e.selectedContentId,selectedItemRect:e=>null!=e.selectedContentId?e.items[e.selectedContentId].rect:[],selectedContentId:e=>e.selectedContentId,pagesArray:e=>e.pagesArray},Or={[pr]:(e,t)=>{e.selectedContentId=t},[hr]:e=>{e.selectedContentId=null},[fr]:(e,t)=>{let{contentData:n}=t;e.items[n.itemId]=n},[mr]:(e,t)=>{let{itemId:n}=t;const r=Object.assign({},e.items);delete r[n],h().set(e,"items",r)},[Er]:(e,t)=>{let{itemId:n,updateData:r,freeze:o=!1}=t;const a=Object.assign({},e.items);a[n]=o?r:Object.assign({},a[n],r)},[Sr]:(e,t)=>{let{contentData:n}=t;const r=Object.assign({},n);h().set(e,"items",r)},[yr]:(e,t)=>{let{pagesArray:n}=t;h().set(e,"pagesArray",n)},[Ir]:(e,t)=>{let{itemId:n}=t;e.videosPlayingWithSound.push(n)},[br]:(e,t)=>{let{itemId:n}=t;e.videosPlayingWithSound.splice(e.videosPlayingWithSound.indexOf(n),1)},[Pr]:(e,t)=>{let{itemId:n,rand:r}=t;h().set(e.rands,n,r)}},Ar={namespaced:!0,actions:_r,getters:Lr,mutations:Or,state:{selectedContentId:null,outsideStorage:!1,shouldFreeze:!0,items:{},hasVideoContent:!1,rands:{},pagesArray:{},videosPlayingWithSound:[]}};var xr=n(8968);function Nr(){const e=(0,De.Z)().getShareUrl(!1),t=(0,De.Z)().getLocalStorage().getItem(e+"~page~index"),n=t?JSON.parse(t):{};let r=0;return Object.keys(n).forEach((t=>{const n=JSON.parse((0,De.Z)().getLocalStorage().getItem(e+"~page"+t));if(n)for(let e=0,o=n.length;e<o;e++)r<n[e].id&&(r=n[e].id)})),r}function Rr(e,t){for(let n=0,r=e.length;n<r;n++)if(e[n].id===t)return n;return null}const kr={addNote(e,t){let{commit:n,getters:r,dispatch:o,rootState:a,rootGetters:i,state:s}=e,{pageId:l,pX:c=null,pY:d=null,wide:g=!1,wideRight:u=!1,wideOpposite:p,target:h=null}=t;const f=Nr(),m=i["pages/pageProp"](l,"wide");f>s.lastId&&n(xr.ZP.SET_LASTID,{id:f});const E=s.lastId+1;if(null===c||null===d){const e=r.notesPointsByPageId(l),t=a.book.bookSize.width*(g?2:1),o=a.book.bookSize.height;if(u)for(let n=0,r=e.length;n<r;n++)e[n].left=e[n].left-parseInt(a.book.bookSize.width);const i=(0,ht.sO)(t,o,40,e);a.pager.singleMode&&a.book.rightToLeft?n(xr.ZP.ADD_NOTE,{page:l,pX:i.left+(p?parseInt(a.book.bookSize.width):0),pY:i.top,side:m?p?"right":"left":null,target:h,id:E}):n(xr.ZP.ADD_NOTE,{page:l,pX:i.left+(u?parseInt(a.book.bookSize.width):0),pY:i.top,side:m?u?"right":"left":null,target:h,id:E})}else n(xr.ZP.ADD_NOTE,{page:l,pX:c,pY:d,side:m?c>=parseInt(a.book.bookSize.width)?"right":"left":null,target:h,id:E});const S="true"!==(0,De.Z)().getLocalStorage().getItem("notes-seen-onboarding");s.items.length<=1&&S&&o("sidebar/openSidebar",{component:"notes",params:{firstNote:!0}},{root:!0}),s.items.length>1&&(0,De.Z)().getLocalStorage().setItem("notes-had-two","true"),n(xr.ZP.SORT_NOTES,a.book.rightToLeft?"left":"right");const y=Rr(s.items,E);n(xr.ZP.SET_ACTIVE_INDEX,{itemIndex:y})},moveNote(e,t){let{commit:n,getters:r,state:o,rootState:a,rootGetters:i}=e,{id:s,page:l,pX:c,pY:d}=t;const g=Rr(o.items,s);if(null!==g){const e=r.noteByID(s),t=i["pages/pageProp"](l,"wide")?c>=parseInt(a.book.bookSize.width)?"right":"left":null,o=e.page!==l||a.pager.singleMode&&e.side!==t,u={id:e.id,page:e.page};n(xr.ZP.MOVE_NOTE,{index:g,page:l,pX:c,pY:d,side:t,oldValue:u}),o&&n(xr.ZP.SORT_NOTES,a.book.rightToLeft?"left":"right")}},changeText(e,t){let{commit:n,state:r}=e,{id:o,text:a}=t;const i=Rr(r.items,o);null!==i&&n(xr.ZP.CHANGE_TEXT,{index:i,text:a})},changeColor(e,t){let{commit:n,state:r}=e,{id:o,color:a}=t;const i=Rr(r.items,o);null!==i&&(n(xr.ZP.CHANGE_COLOR,{index:i,color:a}),a!==r.color&&n(xr.ZP.SET_COLOR,{color:a}))},deleteNote(e,t){let{commit:n,state:r}=e,{id:o,target:a=null}=t;const i=Rr(r.items,o);null!==i&&((i<r.activeItemIndex||i===r.items.length-1)&&n(Ye.n_,{itemIndex:r.activeItemIndex-1}),n(xr.ZP.DELETE_NOTE,{index:i,deletedId:o,notePage:r.items[i].page,target:a}))},clearNotes(e){let{commit:t}=e;t("SET_NOTES",{items:[],lastId:0,color:"green"})},importNotes(e,t){let{commit:n}=e,{items:r}=t;const o=r.reduce(((e,t)=>Math.max(e,t.id)),0);n("SET_NOTES",{items:r,lastId:o})},setOpenedId(e,t){let{commit:n,state:r}=e,{id:o,target:a=null}=t;if(r.opened===o)return;const i=Rr(r.items,o);n(xr.ZP.SET_OPENED,{id:o,index:i,target:a})},setMoving(e,t){let{commit:n}=e;n(xr.ZP.SET_MOVING,t)},setActiveItemByIndex:function(e,t){let{state:n,commit:r}=e;0===n.items.length||t>=n.items.length||r(Ye.n_,{itemIndex:t})},setActiveItemById:function(e,t){let{state:n,commit:r}=e;const o=Rr(n.items,t);null!==o&&r(Ye.n_,{itemIndex:o})},setActiveItemToFirst:function(e){let{state:t,commit:n}=e;0!==t.items.length&&n(Ye.n_,{itemIndex:0})},setActiveItemToLast:function(e){let{state:t,commit:n}=e;0!==t.items.length&&n(Ye.n_,{itemIndex:t.items.length-1})},setActiveNextItem:function(e){let{state:t,commit:n}=e;if(0===t.items.length)return;const r=t.items.length-1,o=t.activeItemIndex;return null!==o?o<r&&void n(Ye.n_,{itemIndex:o+1}):void 0},setActivePreviousItem:function(e){let{state:t,commit:n}=e;if(0===t.items.length)return;const r=t.activeItemIndex;return null!==r?r>0&&void n(Ye.n_,{itemIndex:r-1}):void 0}},Dr={red:[235/255,90/255,90/255],gray:[89/255,97/255,104/255],orange:[243/255,141/255,42/255],violet:[121/255,87/255,191/255],blue:[45/255,177/255,227/255],green:[.2,.8,52/255]},Mr={hasNotes:e=>e.items.length>0,notesPointsByPageId:e=>t=>{const n=[];for(let r=0;r<e.items.length;r++)e.items[r].page===t&&n.push({left:parseInt(e.items[r].pX),top:parseInt(e.items[r].pY)});return n},currentNotes:(e,t,n,r)=>()=>{const t=r["pager/currentPages"];let o="both";n.pager.singleMode&&(o=n.pager.single_currentSide);const a=[];for(let n=0;n<e.items.length;n++)t.indexOf(e.items[n].page)>-1&&(o===e.items[n].side||"both"===o)&&a.push({id:e.items[n].id,index:n});return a},noteByID:e=>t=>{for(let n=0;n<e.items.length;n++)if(e.items[n].id===t)return e.items[n];return null},noteObjForPdf:(e,t,n,r)=>e=>{const t=r["pages/currentSize"](e.page),o=r["pages/pageProp"](e.page,"wide"),a=r["pages/contentSize"]({pageID:e.page,pageSize:t,pageSide:"both"}),i=r["pages/pageProp"](e.page,"height"),s={w:t.width/n.book.bookSize.width/(o?2:1),h:t.height/n.book.bookSize.height},l=e.pX*s.w,c=e.pY*s.h;return{text:e.text,x:(l-a.offsetX)/a.scaleRatio.w,y:i-(c-a.offsetY)/a.scaleRatio.h,date:new Date(e.date),color:Dr[e.color],isMovedFromStub:e.isMovedFromStub}},notesForPdfByPageId:(e,t,n,r)=>o=>{const a={},i=n.pages.structure.indexOf(o),s=n.pages.structure[i+1],l=r["pages/pageProp"](s,"stub");let c=e.items.filter((e=>e.page===o));s&&l&&(c=[...c,...e.items.filter((e=>e.page===s))]);for(let e=0;e<c.length;e++){const o=c[e];let i=r["pages/getPdfPageIndexById"](o.page);if((0,_.o8)(i)){const e=n.pages.structure.indexOf(o.page),t=n.pages.structure[e-1];i=r["pages/getPdfPageIndexById"](t),o.isMovedFromStub=!0}a[0]||(a[0]=[]);const s=t.noteObjForPdf(o);a[0].push(s)}return a},notesSortedByPdfPage:(e,t,n,r)=>{const o={};for(let a=0;a<e.items.length;a++){const i=e.items[a];let s=r["pages/getPdfPageIndexById"](i.page);if((0,_.o8)(s)){const e=n.pages.structure.indexOf(i.page),t=n.pages.structure[e-1];s=r["pages/getPdfPageIndexById"](t),i.isMovedFromStub=!0}o[s]||(o[s]=[]);const l=t.noteObjForPdf(i);o[s].push(l)}return o},notesListByPage:(e,t,n,r)=>{const o={};for(let a=0;a<e.items.length;a++){const t=e.items[a];let i=r["pages/pageCaptionById"]({id:t.page,divider:" - ",widePageSecondHalf:t.side===(n.book.rightToLeft?"left":"right")});if(n.pager.spreadMode){const e=i.split(" - ");i=e[0],"right"===t.side&&e.length>1&&(i=e[1])}o[i]||(o[i]=[]);const s={text:t.text,date:new Date(t.date),colorName:t.color};o[i].push(s)}return o}},Ur={[xr.f3]:(e,t)=>{let{items:n,lastId:r,color:o}=t;e.items=[],n.forEach((t=>e.items.push(t))),e.lastId=r,e.color=o||e.color},[xr.wd]:(e,t)=>{let{color:n}=t;e.color=n},[xr.IZ]:(e,t)=>{let{page:n,pX:r,pY:o,id:a,side:i,target:s}=t;e.items.push({id:a,page:n,pX:r,pY:o,side:i,color:e.color,date:Date.now(),text:"",new:!0}),e.opened=a,e.lastId=a},[xr.CO]:(e,t)=>{let{index:n,text:r}=t;e.items[n].text=r,e.items[n].date=Date.now()},[xr.Tx]:(e,t)=>{let{index:n,color:r}=t;e.items[n].color=r},[xr.oD]:(e,t)=>{let{index:n,page:r,pX:o,pY:a,side:i}=t;e.items[n].pX=o,e.items[n].pY=a,e.items[n].page=r,e.items[n].side=i},[xr.fP]:(e,t)=>{let{index:n}=t;e.items.splice(n,1)},[xr.sZ]:(e,t)=>{let{id:n,index:r,target:o}=t;null!==r&&(e.items[r].new=!1),e.opened=n,e.target=o},[xr.WT]:(e,t)=>{let{id:n}=t;e.lastId=n},[xr.YR]:(e,t)=>{e.isMoving=t},[Ye.n_]:function(e,t){let{itemIndex:n}=t;e.activeItemIndex=n},[xr.ZE]:function(e,t){const n=e.items[e.activeItemIndex]?.id;if(e.items.sort(((e,n)=>e.page===n.page&&e.side&&n.side&&e.side!==n.side?e.side===t?1:-1:e.page-n.page)),n)for(let r=0;r<e.items.length;r++)if(e.items[r].id===n){e.activeItemIndex=r;break}}},zr={namespaced:!0,actions:kr,getters:Mr,mutations:Ur,state:{opened:null,target:null,lastId:0,color:"green",isMoving:!1,items:[],activeItemIndex:null}},Br="SET_SELECTION_ATTRIBUTES",Fr="RESET_SELECTION",Gr="SET_SELECTED_TEXT",Hr="SET_SELECTION_RECT",Zr="SET_INPROGRESS_SELECTION",Vr="SET_EFFECT",Yr="SET_SELECT_ALL",jr="SET_CORNER_SYMBOLS",$r="SET_HOLDER_SCROLL",Wr={SET_SELECTION_ATTRIBUTES:Br,SET_SELECTION_RECT:Hr,RESET_SELECTION:Fr,SET_SELECTED_TEXT:Gr,SET_INPROGRESS_SELECTION:Zr,SET_EFFECT:Vr,SET_SELECT_ALL:Yr,SET_CORNER_SYMBOLS:jr,SET_HOLDER_SCROLL:$r},Xr={holderScroll:e=>({x:e.holderScrollX,y:e.holderScrollY})},Kr={[Br]:(e,t)=>{let{pageID:n,pageSide:r,selectionRect:o,selectAll:a=!1,preliminary:i=!1}=t;e.pageID=n,e.pageSide=r,e.selectionRect=o,e.selectAll=a,e.preliminarySelection=i},[Hr]:(e,t)=>{let{selectionRect:n}=t;e.selectionRect=n},[Fr]:e=>{e.pageID=null,e.pageSide=null,e.selectionRect=null,e.selectedText=null,e.selectAll=!1,e.inProgress=!1},[Gr]:(e,t)=>{let{selectedText:n}=t;e.selectedText=n},[Zr]:(e,t)=>{e.inProgress=t},[Vr]:(e,t)=>{e.effect=t},[Yr]:e=>{e.selectAll=!0},[jr]:(e,t)=>{e.cornerSymbols=t},[$r]:(e,t)=>{let{x:n,y:r}=t;e.holderScrollX=n,e.holderScrollY=r}},qr={namespaced:!0,actions:{setSelectionAttributes(e,t){let{commit:n}=e,{pageID:r,pageSide:o,selectionRect:a,selectAll:i=!1,preliminary:s=!1}=t;n(Wr.SET_SELECTION_ATTRIBUTES,{pageID:r,pageSide:o,selectionRect:a,selectAll:i,preliminary:s})},setSelectionRect(e,t){let{commit:n}=e;n(Wr.SET_SELECTION_RECT,{selectionRect:t})},reset(e){let{commit:t}=e;t(Wr.RESET_SELECTION)},setSelectedText(e,t){let{commit:n}=e;n(Wr.SET_SELECTED_TEXT,{selectedText:t})},setInProgressSelection(e,t){let{commit:n}=e;n(Wr.SET_INPROGRESS_SELECTION,t)},setEffect(e,t){let{commit:n}=e;n(Wr.SET_EFFECT,t)},setSelectAll(e){let{commit:t}=e;t(Wr.SET_SELECT_ALL)},setCornerSymbols(e,t){let{commit:n}=e;n(Wr.SET_CORNER_SYMBOLS,t)},setHolderScroll(e,t){let{commit:n}=e,{x:r,y:o}=t;n(Wr.SET_HOLDER_SCROLL,{x:r,y:o})}},getters:Xr,mutations:Kr,state:{pageID:null,selectionRect:null,selectedText:null,pageSide:null,preliminarySelection:!1,inProgress:!1,effect:!1,selectAll:!1,cornerSymbols:{},holderScrollX:0,holderScrollY:0}},Jr=new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"}),Qr=new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"});function eo(e,t){let{mute:n,inline:r}=e,{elementType:o,source:a}=t;const i=document.createElement(o);return i.muted=n,n&&i.setAttribute("muted","muted"),r&&i.setAttribute("playsinline","playsinline"),i.src=a,new Promise((e=>{const t=i?.play?.(),n=setTimeout((()=>{r(!1,new Error("Timeout 1500 ms has been reached"))}),1500),r=function(t){clearTimeout(n),e(t)};void 0!==t?t.then((()=>r(!0))).catch((e=>r(!1,e))):r(!0)}))}async function to(){const e={};return e.inlineAutoplay=await eo({mute:!1,inline:!0},{elementType:"video",source:URL.createObjectURL(Qr)}),e.inlineMuteAutoplay=await eo({mute:!0,inline:!0},{elementType:"video",source:URL.createObjectURL(Qr)}),e}async function no(){const e={};return e.autoplay=await eo({mute:!1,inline:!0},{elementType:"audio",source:URL.createObjectURL(Jr)}),e.muteAutoplay=await eo({mute:!0,inline:!0},{elementType:"audio",source:URL.createObjectURL(Jr)}),e}const ro="SET_INLINE_AUTOPLAY",oo="SET_INLINE_MUTE_AUTOPLAY",ao="SET_SOUND_MUTED_AUTOPLAY",io="SET_SOUND_AUTOPLAY",so="SET_FIRST_CLICK",lo="SET_FIRST_FLIP",co={SET_VIDEO_INLINE_AUTOPLAY:ro,SET_VIDEO_INLINE_MUTED_AUTOPLAY:oo,SET_SOUND_MUTED_AUTOPLAY:ao,SET_SOUND_AUTOPLAY:io,SET_FIRST_CLICK:so,SET_FIRST_FLIP:lo},go={[ro]:(e,t)=>{e.video.inlineAutoplay=t},[oo]:(e,t)=>{e.video.inlineMutedAutoplay=t},[io]:(e,t)=>{e.audio.autoplay=t},[ao]:(e,t)=>{e.audio.mutedAutoplay=t},[so]:e=>{e.userInteractions.firstClick=!0},[lo]:e=>{e.userInteractions.firstFlip=!0}},uo="SET_CURRENT_ITEM",po="CLOSE_LIGHTBOX",ho="SET_LIGHTBOX_ACTIVE",fo="SET_THUMBNAILS_READY",mo={SET_CURRENT_ITEM:uo,CLOSE_LIGHTBOX:po,SET_LIGHTBOX_ACTIVE:ho,SET_THUMBNAILS_READY:fo};let Eo;const So={openLightbox(e,t){let{dispatch:n,rootGetters:r,commit:o}=e,{type:a,itemId:i,galleryItemIndex:s=0,target:l}=t;switch(a){case"image":case"gallery":n("openImageLightbox",{itemId:i,galleryItemIndex:s,target:l});break;case"form":n("openFormLightbox",{itemId:i,target:l})}},openImageLightbox(e,t){let n,{rootGetters:r,commit:o}=e,{itemId:a,galleryItemIndex:i=0,target:s}=t;if(o(mo.SET_THUMBNAILS_READY,!1),r["content/currentContent"].some((e=>{if(e.itemId===a)return n=e,!0})),!n)return;const l="gallery"===n.type;l&&!n.items[i]||(clearTimeout(Eo),o(mo.SET_CURRENT_ITEM,{itemId:a,galleryItemIndex:l?i:null,target:s,type:n.type}))},openFormLightbox(e,t){let n,{rootGetters:r,commit:o}=e,{itemId:a,target:i}=t;r["content/currentForms"].some((e=>{if(e.itemId===a)return n=e,!0})),n&&(clearTimeout(Eo),o(mo.SET_CURRENT_ITEM,{itemId:a,target:i,type:"form"}))},closeLightbox(e){let{commit:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t(mo.SET_LIGHTBOX_ACTIVE,!1),Eo=setTimeout((()=>{t(mo.CLOSE_LIGHTBOX,n)}),110)},lightboxGoTo(e,t){let{state:n,commit:r}=e,{itemId:o,galleryItemIndex:a=null,type:i,target:s}=t;r(mo.SET_CURRENT_ITEM,{itemId:o,galleryItemIndex:a,target:s,type:i})},lightboxGoNext(e,t){let{state:n,getters:r,commit:o}=e;const a=t+"-next",i=r.currentItem;if("gallery"===i.type){const e=n.currentGalleryItemIndex;if(e!==i.items.length-1)return void o(mo.SET_CURRENT_ITEM,{galleryItemIndex:e+1,target:a,type:i.type})}const s=r.currentItemIndex,l=s===r.currentContent.length-1?0:s+1,c=r.currentContent[l],d=c.itemId;o(mo.SET_CURRENT_ITEM,{itemId:d,galleryItemIndex:"gallery"===c.type?0:null,target:a,type:c.type})},lightboxGoPrev(e,t){let{state:n,getters:r,commit:o}=e;const a=t+"-prev",i=r.currentItem;if("gallery"===i.type){const e=n.currentGalleryItemIndex;if(0!==e)return void o(mo.SET_CURRENT_ITEM,{galleryItemIndex:e-1,target:a,type:i.type})}const s=r.currentItemIndex,l=0===s?r.currentContent.length-1:s-1,c=r.currentContent[l],d=c.itemId;o(mo.SET_CURRENT_ITEM,{itemId:d,galleryItemIndex:"gallery"===c.type?c.items.length-1:null,target:a,type:c.type})}},yo={isShown:(e,t)=>!!t.currentItem,currentContent:(e,t,n,r)=>n.workspace.lightboxNeighborsNavEnabled?r["content/currentContent"]:r["content/currentContent"].filter((t=>t.itemId===e.currentItemId)),thumbnailMargin:(e,t)=>t.currentContent.some((e=>"gallery"===e.type))?e.thumbnailMargin:e.thumbnailBaseMargin,currentItemIndex:(e,t,n)=>{if(null===e.currentItemId)return null;let r=null;return t.currentContent.some(((t,n)=>{if(t.itemId===e.currentItemId)return r=n,!0})),r},currentItem:(e,t,n,r)=>null!==t.currentItemId&&"form"===e.currentItemType?r["content/currentForms"].filter((t=>t.itemId===e.currentItemId))[0]:null!==t.currentItemIndex?t.currentContent[t.currentItemIndex]:null,currentGalleryItem:(e,t)=>{if(null===e.currentGalleryItemIndex)return null;const n=t.currentItem;return"gallery"===n?.type?n.items[e.currentGalleryItemIndex]:void 0},thumbnailsSizes:(e,t)=>{const n={thumbnailSizeLimits:e.thumbnailSizeLimits,thumbnailBorderWidth:e.thumbnailBorderWidth},r={};return t.currentContent.forEach((e=>{switch(e.type){case"gallery":r[e.itemId]=[],e.items.forEach(((t,o)=>{"image"===t.type&&(r[e.itemId][o]=Io(t,n))}));break;case"image":r[e.itemId]=Io(e,n)}})),r},thumbnailsOffsetsLeft:(e,t)=>{if(null===e.currentItemId)return{};const n={};let r=0;return t.currentContent.forEach((e=>{const o=e.itemId;n[o]=r,r+="gallery"===e.type?t.galleriesThumbnailsWidth[o]:t.thumbnailsSizes[o].width+2*t.thumbnailMargin})),n},galleriesThumbnailsWidth:(e,t)=>{const n={};return t.currentContent.forEach((r=>{"gallery"===r.type&&(n[r.itemId]=2*t.thumbnailMargin-2*e.thumbnailBaseMargin+t.thumbnailsSizes[r.itemId].reduce(((t,n)=>t+n.width+2*e.thumbnailBaseMargin),0))})),n},currentGalleryItemThumbnailOffsetLeft:(e,t)=>{if(null===e.currentItemId)return null;if("gallery"!==t.currentItem.type)return 0;let n=t.thumbnailMargin-e.thumbnailBaseMargin;for(let r=0;r<e.currentGalleryItemIndex;r++)n+=t.thumbnailsSizes[e.currentItemId][r].width+2*e.thumbnailBaseMargin;return n},currentThumbnailWidth:(e,t)=>null===e.currentItemId?null:"gallery"===t.currentItem.type?t.thumbnailsSizes[e.currentItemId][e.currentGalleryItemIndex].width+2*e.thumbnailBaseMargin:t.thumbnailsSizes[e.currentItemId].width+2*t.thumbnailMargin,isNavEnabled:(e,t)=>"form"!==e.currentItemType&&(t.currentContent.length>1||"gallery"===t.currentItem?.type&&t.currentItem?.items?.length>1),currentItemNumber(e,t){let n=0;for(let r=0;r<t.currentItemIndex;r++){const e=t.currentContent[r];n+="gallery"===e.type?e.items.length:1}return n+("gallery"===t.currentItem.type?e.currentGalleryItemIndex+1:1)},itemsCount:(e,t)=>t.currentContent.reduce(((e,t)=>e+("gallery"===t.type?t.items.length:1)),0),thumbnailsHeight:e=>e.thumbnailSizeLimits.height+2*e.thumbnailBorderWidth+2*e.thumbnailBaseMargin,navHeight:(e,t,n,r)=>t.isNavEnabled?r["workspace/isSmallWorkspace"]?e.smallWorkspaceButtonSize:t.thumbnailsHeight+e.thumbnailsPaddingTop+e.thumbnailsPaddingBottom:0};function Io(e,t){let{thumbnailSizeLimits:n,thumbnailBorderWidth:r}=t;const[o,a]=e.originalSize;let i=n.height,s=Math.ceil(i/a*o);if(s>n.width){const e=(0,ke.Tj)({width:o,height:a},n,!0);s=Math.ceil(e.width),i=Math.ceil(e.height)}return s=s%2==0?s:s-1,s=s||1,i=i||1,{width:s+2*r,height:i+2*r}}const bo={[uo]:(e,t)=>{let{itemId:n,galleryItemIndex:r,target:o,type:a}=t;e.currentItemId=n||e.currentItemId,e.currentGalleryItemIndex=r,e.target=o,e.currentItemType=a},[ho]:(e,t)=>{e.isLightboxActive=t},[po]:(e,t)=>{e.currentItemId=null,e.currentItemType=null,e.currentGalleryItemIndex=null,e.target=t},[fo]:(e,t)=>{e.areThumbnailsReady=t}},Po={caniuse:{module:{namespaced:!0,actions:{async updateAudioPermissions(e){let t,{commit:n,rootState:r}=e;t=r.workspace.userAgentInfo.device.desktop?await no():{autoplay:!1,muteAutoplay:!1},n(co.SET_SOUND_AUTOPLAY,t.autoplay),n(co.SET_SOUND_MUTED_AUTOPLAY,t.muteAutoplay)},async updateVideoPermissions(e){let t,{commit:n,rootState:r}=e;t=r.workspace.userAgentInfo.device.desktop?await to():{inlineAutoplay:!1,inlineMuteAutoplay:!1},n(co.SET_VIDEO_INLINE_AUTOPLAY,t.inlineAutoplay),n(co.SET_VIDEO_INLINE_MUTED_AUTOPLAY,t.inlineMuteAutoplay)},setFirstClick(e){let{commit:t}=e;t(co.SET_FIRST_CLICK)},setFirstFlip(e){let{commit:t}=e;t(co.SET_FIRST_FLIP)}},getters:{},mutations:go,state:{video:{inlineAutoplay:null,inlineMutedAutoplay:null},audio:{autoplay:null,mutedAutoplay:null},userInteractions:{firstClick:!1,firstFlip:!1}}}},book:{module:m},downloads:{module:L},info:{module:A},logo:{module:z},pager:{module:ge},pages:{module:Fe},print:{module:Ve},search:{module:Qe},skin:{module:ot},toc:{module:Pt},workspace:{module:vn},sound:{module:Mn},i18n:{module:Gn},popup:{module:ir},sidebar:{module:ur},social:{module:Hn},content:{module:Ar},thumbnails:{module:Qn},notes:{module:zr},text:{module:qr},lightbox:{module:{namespaced:!0,actions:So,getters:yo,mutations:bo,state:{currentItemId:null,currentGalleryItemIndex:null,currentItemType:null,target:null,isLightboxActive:null,areThumbnailsReady:null,thumbnailSizeLimits:{width:164,height:70},thumbnailMargin:28,thumbnailBaseMargin:6,thumbnailBorderWidth:2,thumbnailsPaddingTop:20,thumbnailsPaddingBottom:12,buttonSize:60,smallWorkspaceButtonSize:48,navAreaPadding:12}}}}},1378:(e,t,n)=>{n.d(t,{d7:()=>s,fc:()=>l,lX:()=>c,n0:()=>a,qg:()=>r,rV:()=>i,rs:()=>o,yA:()=>d});const r="INIT",o="LOCALE_LOADED",a="FONT_LOADED",i="SET_CURRENT_LOCALE",s="SET_CURRENT_FONT",l="SET_STRINGS",c="SET_LOCALE",d="SET_LOCALE_STRING"},8968:(e,t,n)=>{n.d(t,{CO:()=>a,IZ:()=>o,Tx:()=>i,WT:()=>d,YR:()=>g,ZE:()=>u,ZP:()=>h,f3:()=>p,fP:()=>l,oD:()=>s,sZ:()=>c,wd:()=>r});const r="SET_COLOR",o="ADD_NOTE",a="CHANGE_TEXT",i="CHANGE_COLOR",s="MOVE_NOTE",l="DELETE_NOTE",c="SET_OPENED",d="SET_LASTID",g="SET_MOVING",u="SORT_NOTES",p="SET_NOTES",h={SET_ACTIVE_INDEX:"SET_ACTIVE_INDEX",SET_COLOR:r,ADD_NOTE:o,CHANGE_TEXT:a,CHANGE_COLOR:i,MOVE_NOTE:s,DELETE_NOTE:l,SET_OPENED:c,SET_LASTID:d,SET_MOVING:g,SORT_NOTES:u,SET_NOTES:p}},7003:(e,t,n)=>{n.d(t,{Bm:()=>l,In:()=>i,Kq:()=>g,MC:()=>r,OC:()=>a,RA:()=>u,SX:()=>h,ZP:()=>f,Zs:()=>c,gG:()=>o,hp:()=>d,n_:()=>p,zC:()=>s});const r="SET_PROPERTY",o="CHANGE_PAGE",a="SET_CURRENT_MODE",i="FREEZE",s="UNFREEZE",l="CHANGE_LAST_TARGET",c="CHANGE_FLIP_STATE",d="CHANGE_FORCE_FLIP",g="CHANGE_FORCE_RERENDER",u="CHANGE_ZOOM_MODE",p="SET_MOVE_WATCHER",h="SET_PAGE_CHANGING",f={SET_MOVE_WATCHER:p,SET_PROPERTY:r,CHANGE_PAGE:o,SET_CURRENT_MODE:a,FREEZE:i,UNFREEZE:s,CHANGE_LAST_TARGET:l,CHANGE_FLIP_STATE:c,CHANGE_FORCE_FLIP:d,CHANGE_FORCE_RERENDER:g,CHANGE_ZOOM_MODE:u,SET_PAGE_CHANGING:h}},1071:(e,t,n)=>{n.d(t,{A9:()=>g,B9:()=>f,BQ:()=>I,Eg:()=>P,Hc:()=>d,IC:()=>o,If:()=>E,J$:()=>i,Kk:()=>h,Ql:()=>s,Sb:()=>y,Tt:()=>p,V8:()=>l,_m:()=>S,lJ:()=>r,lY:()=>u,n5:()=>c,n_:()=>T,o6:()=>b,po:()=>m,pz:()=>a});const r="INITIALIZATION_STARTED",o="INITIALIZATION_COMPLETED",a="START_NORMALIZE_INITIALIZATION",i="NORMALIZE_INITIALIZED",s="LIBRARY_INITIALIZED",l="ALGORITHM_INITIALIZED",c="INDEX_LOADING",d="INDEX_LOADED",g="CHANGE_QUERY",u="CHANGE_PROPERTY",p="CHANGE_EXACT_MATCH",h="CHANGE_STATUS",f="ADD_CHUNK",m="ADD_RESULTS",E="CLEAR_RESULTS",S="ADD_HIGHLIGHTS",y="CLEAR_HIGHLIGHTS",I="UPDATE_SCROLL",b="SAVE_SELECT_TEXT_INFO",P="LIMIT_SAVED_SELECT_TEXT_INFO",T="SET_ACTIVE_INDEX"},5688:(e,t,n)=>{n.d(t,{CU:()=>i,GS:()=>a,Op:()=>r,ZP:()=>s,bH:()=>o});const r="OPEN_SIDEBAR",o="CLOSE_SIDEBAR",a="OPEN_PREVIOUS",i="CLEAR_PREVIOUS",s={OPEN_SIDEBAR:r,CLOSE_SIDEBAR:o,OPEN_PREVIOUS:a,CLEAR_PREVIOUS:i}},6142:(e,t,n)=>{n.d(t,{kd:()=>a,qg:()=>r,vG:()=>o});const r="INIT",o="TEMPLATES_LOADED",a="CHANGE_PARAM"},2574:(e,t,n)=>{n.d(t,{Z:()=>y,q:()=>S});var r=n(3074),o=n(1378),a=n(776),i=n(710),s=n(9364),l=n(7347),c=n.n(l);const d="fontCss",g="buttonCaptionFontCss",u=function(e,t){const n=p(e);t.dispatch("i18n/setCurrentLocale",{locale:n}),E()},p=function(e){const t=e.workspace.userAgentInfo?e.workspace.userAgentInfo.locales:[],n=e.workspace.locales.length>0?e.workspace.locales:e.i18n.config.locales,r=e.i18n.config.substitutes;let o="en";if(n&&n.length>0&&(o=n[0]),t){for(const e in r)if(r.hasOwnProperty(e)){const n=t.indexOf(e);n>=0&&(t[n]=r[e])}for(let e=0;e<t.length;e++)if(n.indexOf(t[e])>=0){o=t[e];break}}return o},h=function(e,t,n){t.commit("i18n/"+o.rs,{value:!1}),(0,i.Z)({url:(0,a.Z)().translatePath("static/locales/"+n+".json"),responseType:"json",callback:function(r){const a=/%\{(\w+)\}/g;let i=JSON.stringify(r).replace(a,"{$1}");r=JSON.parse(i),i=null,t.dispatch("i18n/setLocale",{locale:n,strings:r}),t.commit("i18n/"+o.rs,{value:!0}),f(e,t,n),r=null}})},f=function(e,t,n){e.i18n.strings[n]?(r.Z.setLocaleMessage(n,t.getters["i18n/getLocaleStrings"](n)),r.Z.locale=n,document.documentElement.setAttribute("lang",n),m(e,t)):h(e,t,n)},m=function(e,t){const n=t.getters["i18n/getFontConfig"],r=document.getElementsByClassName("publication-container")[0];if(void 0===n)return r.style.fontFamily='"Helvetica Neue", Helvetica, Arial, sans-serif',t.dispatch("i18n/setCurrentFont",{font:"Helvetica Neue"}),void t.commit("i18n/"+o.n0,{value:!0});const i=n["font-family"]+" ("+n.subset+")";if(i===e.i18n.currentFont)return;t.commit("i18n/"+o.n0,{value:!1}),r.style.fontFamily=n["font-family"]+", Helvetica, Arial, sans-serif";const l=(0,a.Z)().translatePath("static/fonts/css/"+n.css);(0,s.Z)(l,(function(){t.state.skin&&(t.dispatch("skin/setParam",{param:"font-weight-normal",value:n["font-weight-normal"]}),t.dispatch("skin/setParam",{param:"font-weight-bold",value:n["font-weight-bold"]})),t.dispatch("i18n/setCurrentFont",{font:i});const e=new(c())(n["font-family"],{weight:n["font-weight-normal"]}),r=new(c())(n["font-family"],{weight:n["font-weight-bold"]});Promise.all([e.load(n.checkString,n.timeout),r.load(n.checkString,n.timeout)]).then((()=>{t.commit("i18n/"+o.n0,{value:!0})}),(e=>{console.error('Error loading font "'+i+'": '+e.message),t.commit("i18n/"+o.n0,{value:!0})}))}),d)},E=function(){const e=(0,a.Z)().translatePath("static/content-button-font/roboto-custom-set.css");(0,s.Z)(e,(function(){}),g)};function S(){const e=document.getElementById(d);e&&e.parentElement&&e.parentElement.removeChild(e);const t=document.getElementById(g);t&&t.parentElement&&t.parentElement.removeChild(t)}const y=e=>{e.subscribe(((t,n)=>{switch(t.type){case"i18n/"+o.qg:u(n,e);break;case"i18n/"+o.rV:f(n,e,t.payload.locale)}}))}},8941:(e,t,n)=>{n.d(t,{XO:()=>x,Ix:()=>B,tq:()=>z});var r=n(776),o=n(924);function a(){this.states={},this.pageInfo={}}a.prototype.constructor=a,a.prototype.on=function(e,t){this._setState(e,o.Z.READY),t(this.getInfo(e))},a.prototype.off=function(){},a.prototype._setState=function(e,t){this.states[e]=t},a.prototype._getState=function(e){return this.states.hasOwnProperty(e)?this.states[e]:o.Z.UNREADY},a.prototype._getPageInfo=function(e){return this.pageInfo.hasOwnProperty(e)?this.pageInfo[e]:{}},a.prototype.getInfo=function(e){return{id:e,state:this._getState(e),pageInfo:this._getPageInfo(e)}};var i=n(5392),s=n(320),l=n(4618),c=n(2834),d=n.n(c),g=n(8531),u=n(5475);function p(){}p.fillNormalizationMap=function(e,t){const n=u.Z.normalize(e,!0);if(n!==e.toLowerCase()){t[e]=n;for(let n=0,r=e.length;n<r;n++){const r=e[n],o=u.Z.normalize(r,!0);r!==o.toLowerCase()&&(t[r]=o)}}},p.normalizeFromMap=function(e,t){return t[e]||e.toLowerCase()};const h=p;var f=n(3624),m=n(477),E=n.n(m);function S(){return E()('(()=>{var t={666:t=>{!function(e){"use strict";var r,n=Object.prototype,o=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag",c=!0,h=e.regeneratorRuntime;if(h)c&&(t.exports=h);else{(h=e.regeneratorRuntime=c?t.exports:{}).wrap=g;var f="suspendedStart",l="suspendedYield",p="executing",d="completed",y={},m={};m[a]=function(){return this};var b=Object.getPrototypeOf,v=b&&b(b(F([])));v&&v!==n&&o.call(v,a)&&(m=v);var w=T.prototype=E.prototype=Object.create(m);_.prototype=w.constructor=T,T.constructor=_,T[u]=_.displayName="GeneratorFunction",h.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},h.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,T):(t.__proto__=T,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(w),t},h.awrap=function(t){return{__await:t}},A(L.prototype),L.prototype[s]=function(){return this},h.AsyncIterator=L,h.async=function(t,e,r,n){var o=new L(g(t,e,r,n));return h.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},A(w),w[u]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},h.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},h.values=F,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return s.type="throw",s.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:F(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),y}}}function g(t,e,r,n){var o=e&&e.prototype instanceof E?e:E,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=B(t,r,a),i}function x(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}function E(){}function _(){}function T(){}function A(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function L(t){function e(r,n,i,a){var s=x(t[r],t,n);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&o.call(c,"__await")?Promise.resolve(c.__await).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):Promise.resolve(c).then((function(t){u.value=t,i(u)}),a)}a(s.arg)}var r;function n(t,n){function o(){return new Promise((function(r,o){e(t,n,r,o)}))}return r=r?r.then(o,o):o()}this._invoke=n}function B(t,e,r){var n=f;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===o)throw i;return U()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=O(a,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var u=x(t,e,r);if("normal"===u.type){if(n=r.done?d:l,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}function O(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,O(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a \'throw\' method")}return y}var o=x(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function F(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:U}}function U(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},147:function(){!function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=function(t){return t&&DataView.prototype.isPrototypeOf(t)},o=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};h.prototype.append=function(t,e){t=s(t),e=u(e);var r=this.map[t];this.map[t]=r?r+","+e:e},h.prototype.delete=function(t){delete this.map[s(t)]},h.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},h.prototype.set=function(t,e){this.map[s(t)]=u(e)},h.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},h.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),c(t)},h.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),c(t)},h.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),c(t)},e.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);var i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var a=[301,302,303,307,308];E.redirect=function(t,e){if(-1===a.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},t.Headers=h,t.Request=w,t.Response=E,t.fetch=function(t,r){return new Promise((function(n,o){var i=new w(t,r),a=new XMLHttpRequest;a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:x(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var e="response"in a?a.response:a.responseText;n(new E(e,t))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&e.blob&&(a.responseType="blob"),i.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),a.send(void 0===i._bodyInit?null:i._bodyInit)}))},t.fetch.polyfill=!0}function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\\-#$%&\'*+.\\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(r[Symbol.iterator]=function(){return r}),r}function h(t){this.map={},t instanceof h?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function f(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function l(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function p(t){var e=new FileReader,r=l(e);return e.readAsArrayBuffer(t),r}function d(t){var e=new FileReader,r=l(e);return e.readAsText(t),r}function y(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&n(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!o(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return d(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function v(t){var e=t.toUpperCase();return i.indexOf(e)>-1?e:t}function w(t,e){var r=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=v(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function g(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\\+/g," "),o=r.join("=").replace(/\\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}})),e}function x(t){var e=new h;return t.replace(/\\r?\\n[\\t ]+/g," ").split(/\\r?\\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}})),e}function E(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();(()=>{"use strict";r(666),r(147);function t(t,e,r){const n=t[r];for(;r>0;){const o=r-1,i=t[o];if(!(e(n,i)<0))break;t[r]=i,r=o}return t[r]=n,r}const e=Symbol("data"),n=Symbol("compareFunction"),o=Symbol("checkUniqueFunction");class i{static newNaturalMin(t){return new i(((t,e)=>t<e?-1:t>e?1:0),t)}static newNaturalMax(t){return new i(((t,e)=>t<e?1:t>e?-1:0),t)}constructor(t,r){if("function"!=typeof t)throw new Error("PriorityQueue: no compareFunction defined");this[n]=t,"function"==typeof r&&(this[o]=r),this[e]=[]}add(r){let i,a,s;this[o]&&(i=this[e].filter((t=>this[o](t,r)))[0],a=this[e].indexOf(i),s=i&&0===this[n](r,i));return(!this[o]||!i||!s)&&(i&&!s&&this[e].splice(a,1),this[e].push(r),t(this[e],this[n],this.size-1)),this}peek(){return this[e][0]}remove(){return this[e].shift()}delete(t){const r=this[e].indexOf(t);return-1!==r&&(this[e].splice(r,1),!0)}clear(){this[e]=[]}get size(){return this[e].length}forEach(t,e){for(const r of this)t.call(e,r,this)}*[Symbol.iterator](){for(let t=0;t<this.size;t++)yield this[e][t]}}const a=new i(((t,e)=>t.priority-e.priority),((t,e)=>t.url===e.url)),s=[];let u,c,h=0;const f=6;onmessage=async function(t){if(t.data.action)switch(t.data.action){case"crossOrigin":u=t.data.data;break;case"setOrigin":c=t.data.data;break;case"load":l(t.data.data);break;case"clear":p(t.data.clearMode)}};const l=async t=>{a.add(t),h<f&&d()},p=function(t){"onlyTh"===t?a.forEach((t=>{"thumbnail"===t.res&&a.delete(t)})):"exceptTh"===t?a.forEach((t=>{"thumbnail"!==t.res&&a.delete(t)})):a.clear()},d=function(){if(a.size<1)return;let t=a.remove();if(!y(t.url))return;h++;const e={};function n(e){m(t.url),postMessage({action:"load",data:{resType:t.res,url:t.url,pageID:t.id,thOnly:t.thOnly}}),t=null,h--,h<f&&d()}function o(){m(t.url),postMessage({action:"error",data:{resType:t?t.res:null,url:-1,pageID:t?t.id:null}}),t=null,h--,h<f&&d()}u&&(e["Access-Control-Allow-Origin"]=u),r.g.fetch(t.url,{headers:e,referrer:c}).then((t=>{if(t.ok)return t.blob();o(t.status)})).then((t=>n(t))).catch((t=>o(t)))},y=function(t){let e=!1;return s.some((e=>e===t))||(s.push(t),e=!0),e},m=function(t){const e=s.findIndex((e=>e===t));e>=0&&s.splice(e,1)}})()})();',"Worker",void 0,void 0)}function y(){return E()('(()=>{var t={666:t=>{!function(e){"use strict";var r,n=Object.prototype,o=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag",h=!0,c=e.regeneratorRuntime;if(c)h&&(t.exports=c);else{(c=e.regeneratorRuntime=h?t.exports:{}).wrap=v;var f="suspendedStart",u="suspendedYield",p="executing",d="completed",y={},g={};g[a]=function(){return this};var m=Object.getPrototypeOf,b=m&&m(m(P([])));b&&b!==n&&o.call(b,a)&&(g=b);var w=S.prototype=T.prototype=Object.create(g);E.prototype=w.constructor=S,S.constructor=E,S[l]=E.displayName="GeneratorFunction",c.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(w),t},c.awrap=function(t){return{__await:t}},L(_.prototype),_.prototype[s]=function(){return this},c.AsyncIterator=_,c.async=function(t,e,r,n){var o=new _(v(t,e,r,n));return c.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},L(w),w[l]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},c.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},c.values=P,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return s.type="throw",s.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),h=o.call(a,"finallyLoc");if(l&&h){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),y}}}function v(t,e,r,n){var o=e&&e.prototype instanceof T?e:T,i=Object.create(o.prototype),a=new B(n||[]);return i._invoke=A(t,r,a),i}function x(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}function T(){}function E(){}function S(){}function L(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function _(t){function e(r,n,i,a){var s=x(t[r],t,n);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==typeof h&&o.call(h,"__await")?Promise.resolve(h.__await).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):Promise.resolve(h).then((function(t){l.value=t,i(l)}),a)}a(s.arg)}var r;function n(t,n){function o(){return new Promise((function(r,o){e(t,n,r,o)}))}return r=r?r.then(o,o):o()}this._invoke=n}function A(t,e,r){var n=f;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=I(a,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var l=x(t,e,r);if("normal"===l.type){if(n=r.done?d:u,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=d,r.method="throw",r.arg=l.arg)}}}function I(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,I(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a \'throw\' method")}return y}var o=x(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function P(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},147:function(){!function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=function(t){return t&&DataView.prototype.isPrototypeOf(t)},o=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};c.prototype.append=function(t,e){t=s(t),e=l(e);var r=this.map[t];this.map[t]=r?r+","+e:e},c.prototype.delete=function(t){delete this.map[s(t)]},c.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},c.prototype.set=function(t,e){this.map[s(t)]=l(e)},c.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},c.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),h(t)},c.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),h(t)},c.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),h(t)},e.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},m.call(w.prototype),m.call(T.prototype),T.prototype.clone=function(){return new T(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},T.error=function(){var t=new T(null,{status:0,statusText:""});return t.type="error",t};var a=[301,302,303,307,308];T.redirect=function(t,e){if(-1===a.indexOf(e))throw new RangeError("Invalid status code");return new T(null,{status:e,headers:{location:t}})},t.Headers=c,t.Request=w,t.Response=T,t.fetch=function(t,r){return new Promise((function(n,o){var i=new w(t,r),a=new XMLHttpRequest;a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:x(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var e="response"in a?a.response:a.responseText;n(new T(e,t))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&e.blob&&(a.responseType="blob"),i.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),a.send(void 0===i._bodyInit?null:i._bodyInit)}))},t.fetch.polyfill=!0}function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\\-#$%&\'*+.\\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function h(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(r[Symbol.iterator]=function(){return r}),r}function c(t){this.map={},t instanceof c?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function f(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function u(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function p(t){var e=new FileReader,r=u(e);return e.readAsArrayBuffer(t),r}function d(t){var e=new FileReader,r=u(e);return e.readAsText(t),r}function y(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&n(t))this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!o(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=g(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return d(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function b(t){var e=t.toUpperCase();return i.indexOf(e)>-1?e:t}function w(t,e){var r=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=b(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function v(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\\+/g," "),o=r.join("=").replace(/\\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}})),e}function x(t){var e=new c;return t.replace(/\\r?\\n[\\t ]+/g," ").split(/\\r?\\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}})),e}function T(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();(()=>{"use strict";r(666),r(147);function t(){}const e=/[\\u0300-\\u036f]/g,n={"ı":"i","ё":"е"},o="№℻ⓩ⻳⼀⿕㆖㆟㉇㉐㉠㊊㊰㋀㏿﷼",i=new RegExp(Object.keys(n).join("|"),"gi");t.normalize=function(e,r,n){let o;String.prototype.normalize||console.error("String does\'nt have normalize function");try{o=this.encodeExceptions(e).normalize("NFKD")}catch(i){o=3===arguments.length?n:e}return r&&(o=t.toLowerCase(o)),o},t.toLowerCase=function(t){return t.toLowerCase().replace(e,"").replace(i,(t=>n[t]))},t.encodeExceptions=function(t){return t.replace(this.getUnicodeExceptions(),(t=>"&#"+t.charCodeAt(0)+";"))},t.decodeExceptions=function(t){return t.replace(/&#(\\d+);/g,((t,e)=>`${String.fromCharCode(e)}`))},t.getUnicodeExceptions=function(){return new RegExp("["+o+"]","g")},t.getHtmlExceptions=function(){return new RegExp("("+o.replace(this.getUnicodeExceptions(),(t=>"|(&#"+t.charCodeAt(0)+";)")).slice(1)+")*","g")};const a=t;function s(){}s.fillNormalizationMap=function(t,e){const r=a.normalize(t,!0);if(r!==t.toLowerCase()){e[t]=r;for(let r=0,n=t.length;r<n;r++){const n=t[r],o=a.normalize(n,!0);n!==o.toLowerCase()&&(e[n]=o)}}},s.normalizeFromMap=function(t,e){return e[t]||t.toLowerCase()};const l=s;function h(t){const e=[],r=t.split("\\n");for(let n=1,o=r.length;n<o;n++)if(-1!==r[n].indexOf(String.fromCharCode(4))){const t=r[n].split(String.fromCharCode(4)),o=t[0].split(String.fromCharCode(2))[0];let i=0;for(let r=0,n=t.length;r<n;r++){const n=t[r].split(String.fromCharCode(2)),a=0===r?1:0,s="R"===n[a];s&&n.splice(a,1);const l=n[n.length-1].split(String.fromCharCode(3)).length;0===r?n[0]=o.substring(0,l):n.unshift(o.substring(i,i+l)),i+=l;const h={data:n,rtl:s};e.push(h)}}else{const t=r[n].split(String.fromCharCode(2)),o="R"===t[1];o&&t.splice(1,1);const i={data:t,rtl:o};e.push(i)}return e}Array.isArray;const c=Object.prototype.toString;function f(t){return function(e){return null==e?void 0:e[t]}}Math.pow(2,53),f("length");function u(t,e){return null!=t&&hasOwnProperty.call(t,e)}let p=function(t){return"[object Arguments]"===c.call(t)};function d(t){return"[object Number]"===c.call(t)}!function(){p(arguments)||(p=function(t){return u(t,"callee")})}();const y=new Set;let g;onmessage=function(t){if(t.data.action)if("setOrigin"===t.data.action)g=t.data.data;else if("getXML"===t.data.action){const e={pageId:t.data.pageId,isRight:t.data.isRight,isWide:t.data.isWide,pageWidth:1*t.data.pageWidth,searchTextURL:t.data.url,searchTextContent:t.data.searchTextContent,textBlocksURL:t.data.textBlocksURL,searchPageText:t.data.searchPageText||"",normalizationMap:t.data.normalizationMap};if(y.has(e.pageId))return;y.add(e.pageId),m(e)}else"stopPagesExcept"===t.data.action&&y.forEach((e=>{t.data.pageIds.indexOf(e)<0&&y.delete(e)}))};const m=function(t){t.textBlocksURL?r.g.fetch(t.textBlocksURL,{referrer:g}).then((e=>{if(e.ok)return e.text();w(t,{})})).then((e=>{b(e,t)})).catch((e=>{w(t,{})})):w(t,{})},b=function(t,e){if(!y.has(e.pageId))return;const r=t.split("\\n").filter((t=>""!==t)),n={isCrossWide:!1},o=r.map((t=>(t=t.split(String.fromCharCode(3)),n.isCrossWide=n.isCrossWide||e.pageWidth>Math.floor(t[0])&&e.pageWidth<Math.floor(t[0])+Math.ceil(t[2]),{width:Math.ceil(t[2]),height:Math.ceil(t[3]),left:Math.floor(t[0]),top:Math.floor(t[1]),right:Math.floor(t[0])+Math.ceil(t[2]),bottom:Math.floor(t[1])+Math.ceil(t[3]),isRight:e.isWide&&Math.floor(t[0])>e.pageWidth})));n.finalTree=I(o),w(e,n)},w=function(t,e){function n(e){postMessage({action:"error",data:e,url:t.searchTextURL}),y.delete(t.pageId)}r.g.fetch(t.searchTextURL,{referrer:g}).then((function(t){if(t.ok)return t.text();n(t.status)})).then((r=>{x(r,t,e)})).catch((function(t){n(t)}))},v=function(t){t.finalTree=t.finalTree||[],t.finalTree.push({onlyForSearch:!0,lines:[]}),t.finalTreeLineIndexes=0},x=function(t,e,r){if(!y.has(e.pageId))return;v(r);const n=e.searchPageText;let o=0;const i=h(t),a=[0,0];for(let s=0,l=i.length;s<l;s++){const t=i[s],l=t.data;if(6===l.length){const i=C(e,l[0]);o=n.indexOf(i,o),T(l,t.rtl,e,r,o),o+=i.length,a[t.rtl?1:0]+=i.length}}r.isRtl=a[1]>a[0],E(r),S(r),n.length>0&&_(r),L(r),postMessage({action:"textData",data:{pageId:e.pageId,isRtl:r.isRtl,isCrossWide:r.isCrossWide,finalTree:r.finalTree,searchTextMap:r.searchTextMap}}),y.delete(e.pageId),r=null},T=function(t,e,r,n,o){const i=A(t,e,o,r);for(let a=0,s=i.length;a<s;a++){const t=i[a];for(let e=0,r=n.finalTree.length;e<r;e++){const r=n.finalTree[e];if(r.lines||(r.lines=[]),M(t,r)){if(0===r.lines.length)n.finalTreeLineIndexes++,r.lines.push({width:0,height:t.height,top:t.top,left:r.left||t.left,symbols:[],lineIndex:n.finalTreeLineIndexes}),r.lines[0].symbols.push(t),r.lines[0].width=r.width,r.left||(r.left=r.lines[0].left);else for(let e=0,o=r.lines.length;e<o;e++){if(r.lines[e].top===t.top||r.onlyForSearch){r.lines[e].symbols.push(t),r.lines[e].width=r.width;break}e===o-1&&(r.lines.push({width:0,lineIndex:n.finalTreeLineIndexes,height:t.height,top:t.top,left:r.left,symbols:[]}),r.lines[o].symbols.push(t),r.lines[o].width=r.width)}break}}}},E=function(t){for(let e=0,r=t.finalTree.length;e<r;e++){const r=t.finalTree[e].lines;if(r)for(let t=0;t<r.length;t++){const e=r[t],n=e.height/2;if(r[t+1]){const o=r[t+1];o.top<e.top+n&&o.top>e.top-n&&o.top+o.height<e.top+n+e.height&&o.top+o.height>e.top-n+e.height&&(r[t].symbols=r[t].symbols.concat(r[t+1].symbols),r.splice(t+1,1))}}}},S=function(t){for(let e=0,r=t.finalTree.length;e<r;e++){const r=t.finalTree[e].lines;if(!t.finalTree[e].onlyForSearch&&r){r.sort((function(t,e){return t.top-e.top}));for(let t=0,e=r.length;t<e;t++){const e=r[t],n=[];r[t].symbols.sort((function(t,e){return t.left-e.left}));for(let t=0,r=e.symbols.length;t<r;t++){const r=e.symbols[t],o=!e.symbols[t+1];n.push(r);const i=r.left+r.width,a=e.symbols[t+1];o||i>=a.left-.5&&i<=a.left+.5||n.push({left:i,top:r.top,height:r.height,angle:r.angle,width:Math.ceil(100*(a.left-i))/100,word:" "})}r[t].symbols=n.filter((t=>t.width>=0))}}}},L=function(t){for(let e=0,r=t.finalTree.length;e<r;e++){const r=t.finalTree[e];r.onlyForSearch||(r.bottom=r.top+r.height,r.right=r.left+r.width);for(let t=0,e=r.lines.length;t<e;t++){const e=r.lines[t];e.bottom=e.top+e.height,e.right=e.left+e.width;for(let t=0,r=e.symbols.length;t<r;t++){const r=e.symbols[t];r.right=r.left+r.width,delete r.srcIndex}}}},_=function(t){const e=[];for(let r=0,n=t.finalTree.length;r<n;r++){const n=t.finalTree[r].lines;if(n)for(let t=0,o=n.length;t<o;t++){const o=n[t];if(!o.symbols)continue;let i,a,s;const l=function(t,r,n){i&&(i.endSrc=Math.max(i.startSrc,t),i.startSym=Math.min(i.startSym,r),i.startSrc=Math.min(i.startSrc,t),i.reversed=n,e[i.startSrc]=i,i=null,a=null,s=null)};for(let e=0,n=o.symbols.length;e<n;e++){const n=o.symbols[e];if(!d(n.srcIndex)&&a){l(a.startSrc,a.startSym,-1===s);continue}const h={block:r,line:t,startSym:e,startSrc:n.srcIndex};if(!a){i=a=h;continue}const c=a&&a.block===h.block&&a.line===h.line&&a.startSym===h.startSym-1;let f,u;c&&(f=n.srcIndex-o.symbols[a.startSym].srcIndex,u=1!==Math.abs(f)||s&&f!==s),c&&!u?(a=h,s=f):(l(a.startSrc,a.startSym,-1===s),i=a=h)}a&&l(a.startSrc,a.startSym,-1===s)}}t.searchTextMap=e},A=function(t,e,r,n){const o=[],i=t[0],a=C(n,i),s=t[1]/10,l=t[2]/10,h=t[3]/1e3,c=t[4]/10,f=t[5].split(String.fromCharCode(3)).map((t=>t/10)),u=f.map(((t,e,r)=>t-(e>=1?r[e-1]:0)));let p=-1;for(let d=0,y=i.length;d<y;d++){let t,g=(d>=1?f[d-1]:0)*Math.sin(h);if(e){g=d===y-1?0:f[y-d-2]*Math.sin(h);const e=f[d]*Math.cos(h);t=Math.ceil(100*(s-e))/100}else{const e=(d>=1?f[d-1]:0)*Math.cos(h);t=Math.ceil(100*(s+e))/100}const m=Math.ceil(100*u[d])/100,b=C(n,i[d],a[p+1]),w=a.indexOf(b,p+1);o.push({word:i[d],left:t,top:Math.ceil(100*(l+g))/100,angle:h,height:Math.ceil(100*c)/100,width:m,rtl:e,srcIndex:r>=0&&w>=0?r+w:-1}),w>=0&&(p=w)}return o},I=function(t){return t.sort((function(t,e){return t.left-e.left})),t.sort((function(t,e){return t.top+t.height-(e.top+t.height)})),t};function M(t,e){return!!e.onlyForSearch||0===t.angle&&(!(t.left<e.left||t.left+Math.floor(t.width)>e.left+e.width)&&!(t.top<e.top||t.top+Math.floor(t.height)>e.top+e.height))}function C(t,e,r){if(t.normalizationMap)return l.normalizeFromMap(e,t.normalizationMap);{const t=3===arguments.length?r:e;return a.normalize(e,!0,t)}}})()})();',"Worker",void 0,void 0)}var I=n(1071),b=n(710);const P={blocks:{name:"block",preconvert:!0},links:{name:"link",preconvert:!0},images:{name:"image",preconvert:!1},gifs:{name:"gif",preconvert:!1},galleries:{name:"gallery",preconvert:!1},videos:{name:"video",preconvert:!1}},T=new S,_=new y;let w,v=new a,C=l.X;const L=(e,t,n,r,o)=>{const a=t.pages[n],i=e.getters["pages/thumbnailUrl"](n);if(null!==a.thumbnailUrl&&a.thumbnailUrl===i||null!==i&&T.postMessage({action:"load",data:{id:n,res:"thumbnail",url:i,priority:o?1:3,thOnly:r}}),r)return;const s=e.getters["pages/substrateUrl"](n);null!==a.substrateUrl&&s===a.substrateUrl||null!==s&&(null===a.substrateUrl?e.dispatch("pages/changeLoadPending",{value:!0,pageID:n}):s!==a.substrateUrl&&e.dispatch("pages/setNextUrl",{url:s,pageID:n,resType:"substrate"}),T.postMessage({action:"load",data:{id:n,res:"substrate",url:s,priority:o?2:4,thOnly:r}}));const l=e.getters["pages/isSVGSupported"](n);let c;c=l?e.getters["pages/vectorUrl"](n):e.getters["pages/textImageUrl"](n),null!==a.textUrl&&a.textUrl===c||null!==c&&(null===a.textUrl?e.dispatch("pages/changeLoadPending",{value:!0,pageID:n}):l||a.textUrl===c||e.dispatch("pages/setNextUrl",{url:c,pageID:n,resType:"text"}),T.postMessage({action:"load",data:{id:n,res:l?"vector":"text",url:c,priority:o?2:4,thOnly:r}}))},O=function(e,t,n){let r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];function i(n,r,o){if(a||e.dispatch("pages/setStatus",{value:r.state,pageID:n}),!(0,s.xb)(r.pageInfo)&&!a){const t=A(e,n,r.pageInfo);e.dispatch("pages/setPageInfo",{value:t,pageID:n})}const i="slide-book"===t.workspace.bookComponent,l=e.getters["pages/pageProp"](n,"currentSize");(a||i&&l||!i)&&L(e,t,n,a,o)}for(r="thumbnails"===t.sidebar.opened||"notes"===t.sidebar.opened?a?"onlyTh":"exceptTh":"all",T.postMessage({action:"clear",clearMode:r});n.length>0;){const t=n.shift();let r=null;a||(r=H(e).includes(t));const l=v.getInfo(t);if(e.getters["pages/pageProp"](t,"stub"))e.dispatch("pages/setStatus",{value:o.Z.READY,pageID:t}),e.dispatch("pages/changeLoadPending",{value:!1,pageID:t});else switch(a||e.dispatch("pages/setStatus",{value:l.state,pageID:t}),l.state){case o.Z.READY:(0,s.o8)(l.pageInfo)?v.on(t,(e=>{i(t,e,r)})):i(t,l,r);break;case o.Z.UNREADY:v.on(t,(e=>{i(t,e,r)}));case o.Z.ERROR:}}},A=function(e,t,n){const r=Object.assign({},n),o=[...e.state.pages[t].content],a=e.getters["pages/pageContentGrouppedByType"](t);for(const l in n)if(n.hasOwnProperty(l)){const c=n[l];(0,i.k)(c)&&(0,s.e$)(P,l)&&((a[P[l].name]&&a[P[l].name].length!==c.length||!P[l].preconvert)&&(a[P[l].name]&&a[P[l].name].forEach((e=>{o.splice(o.indexOf(e.itemId),1)})),c.forEach((n=>{Object.isFrozen(n)&&(n=d()(n));const r=C.nextId();n.pageId=t,n.itemId=r,o.push(r),e.dispatch("content/add",{contentType:P[l].name,contentData:n,freeze:!0})}))),delete r[l])}return r.content=o,r},x=function(e){e&&e.resourceProvider&&(v=e.resourceProvider),e&&e.contentIdProvider&&(0,i.m)(e.contentIdProvider.nextId)&&(C=e.contentIdProvider),N(),R()},N=function(){T.postMessage({action:"crossOrigin",data:(0,r.Z)().getCrossOrigin()}),T.postMessage({action:"setOrigin",data:window.location.href}),T.onmessage=function(e){if(e.data.action&&e.data.data)switch(e.data.action){case"load":w.dispatch("pages/resourceLoad",{resType:e.data.data.resType,url:e.data.data.url,pageID:e.data.data.pageID,thOnly:e.data.data.thOnly});break;case"error":w.dispatch("pages/resourceLoad",{resType:e.data.data.resType,url:e.data.data.url,pageID:e.data.data.pageID})}}},R=function(){_.postMessage({action:"setOrigin",data:window.location.href}),_.onmessage=e=>{if(e.data.action&&e.data.data&&"textData"===e.data.action){const t=e.data.data.pageId,n=e.data.data.isRtl,r=e.data.data.finalTree,o=e.data.data.isCrossWide,a=e.data.data.searchTextMap;w.commit("search/"+I.o6,{pageId:t,isCrossWide:o,isRtlSelection:n,finalTree:r,searchTextMap:a})}}},k=function(e){let t=e.getters["pager/resourcesForLoading"].slice(0),n={},r=[];for(const o in e.state.content.items)e.state.content.items.hasOwnProperty(o)&&(e.contentData[o]=e.state.content.items[o]);t.forEach((t=>{r=r.concat(e.state.pages[t].content)})),r.forEach((t=>{n[t]=e.contentData[t]})),e.dispatch("content/replace",{contentData:n,pagesArray:t,freeze:!0}),n=null,t=null,r=null},D=function(e){let{pagesPriorityArray:t,reloadAll:n,dontLimitTextInfo:a,textInfoLimitArray:i}=e;function s(e){w.commit("search/"+I.Eg,{pageIds:e}),_.postMessage({action:"stopPagesExcept",pageIds:e})}w.getters["search/isNormalizationInitialized"]&&(n&&s([]),a||s(i||t),t.forEach((e=>{if(v.getInfo(e).state!==o.Z.READY||w.getters["search/isSelectTextInfoLoaded"](e)||w.getters["pages/pageProp"](e,"stub"))return;if(w.getters["pages/pageProp"](e,"hasNoText"))return void w.commit("search/"+I.o6,{pageId:e});const t=(0,r.Z)().translatePath("assets/search/search"+(0,g.qQ)(e)+".xml");w.getters["search/isNormalizePolyfillUsed"]?(0,b.Z)({url:t,responseType:"text",callback:n=>{const r=M(n);U(e,t,r)},errorback:e=>{}}):U(e,t)})))},M=function(e){const t={},n=(0,f.E)(e);for(let r=0,o=n.length;r<o;r++){const e=n[r].data;6===e.length&&h.fillNormalizationMap(e[0],t)}return t},U=function(e,t,n){const o=w.getters["pages/pageProp"](e,"textBlocks")?(0,r.Z)().translatePath("assets/textblocks/page"+(0,g.qQ)(e)+".xml"):null,a=w.getters["pages/pageProp"](e,"wide"),i=w.getters["search/getSearchText"](e),s=u.Z.normalize(i,!0),l={action:"getXML",pageId:e,isWide:a,pageWidth:w.getters["pages/pageProp"](e,"width")/(a?2:1),url:t,textBlocksURL:o,searchPageText:s};n&&(l.normalizationMap=n),_.postMessage(l)},z=e=>{w=e;const t=function(t,n){const r=G(e,n).filter((t=>e.getters["pages/isDownloaded"](t))),o=G(e,!1).filter((t=>e.getters["pages/isDownloaded"](t)));O(e,t,r.slice(0)),e.state.content.outsideStorage&&k(e),D({pagesPriorityArray:r.slice(0),textInfoLimitArray:o.slice(0)})},n=function(t){let n=e.getters["thumbnails/pagesRange"];n&&(n=n.filter((t=>e.getters["pages/isDownloaded"](t))),O(e,t,n.slice(0),!0))};e.subscribe(((r,o)=>{if("pager/CHANGE_PAGE"!==r.type&&"pages/CHANGE_PAGE_SIZE"!==r.type||setTimeout((()=>{if(!o.workspace.animationInProgress){if(!e.state.pages||0===e.state.pages.size.width||null===e.state.pages.size.width)return;const n="pages/CHANGE_PAGE_SIZE"===r.type&&e.state.pages.size.zoomFactor>1;t(o,n)}}),100),"workspace/UNSET_ANIMATION_PROGRESS"===r.type||"pages/SET_CURRENT_SIZE"===r.type||"pages/SET_DOWNLOAD_PROGRESS"===r.type){if(0===e.state.pages.size.width||null===e.state.pages.size.width)return;if("pages/SET_CURRENT_SIZE"===r.type&&o.workspace.animationInProgress)return;const a=e.state.pages.size.zoomFactor>1;t(o,a),"thumbnails"===e.state.sidebar.opened&&n(o)}if("thumbnails/MAX_RANGE"!==r.type&&"thumbnails/MIN_RANGE"!==r.type&&"thumbnails/CHANGE_RANGE"!==r.type||n(o),"thumbnails/ADD_QUEUE"===r.type&&(O(e,o,e.state.thumbnails.queue.slice(0),!0),e.dispatch("thumbnails/clearQueue")),"search/NORMALIZE_INITIALIZED"===r.type||"search/INDEX_LOADED"===r.type){const t=G(e,e.state.pages.size.zoomFactor>1),n="search/INDEX_LOADED"===r.type;D({pagesPriorityArray:t.slice(0),reloadAll:n})}if("pages/SET_PAGE_INFO"===r.type){G(e).some((e=>e===r.payload.pageID))&&D({pagesPriorityArray:[r.payload.pageID],reloadAll:!1,dontLimitTextInfo:!0})}}));const o=setInterval((()=>{e.loadingError?clearInterval(o):e.state?.pages&&(!1!==e.getters["pages/isFullyDownloaded"]?clearInterval(o):(0,b.Z)({url:(0,r.Z)().translatePath("assets/progress.json?rand="+(1e6*Math.random()).toFixed()),responseType:"json",callback:t=>{e.dispatch("pages/setDownloadProgress",t)}}))}),2e3);document.addEventListener("visibilitychange",F)},B=function(){document.removeEventListener("visibilitychange",F)},F=function(){"visible"===document.visibilityState&&setTimeout((()=>{if("visible"!==document.visibilityState||!w.state.pages)return;const e=G(w,w.state.pages.size.zoomFactor>1);O(w,w.state,e.slice(0)),w.dispatch("workspace/changePolicyUpdated")}),3e3)},G=function(e,t){return t?[...e.getters["pager/currentResourcesForLoading"].slice(0)]:[...e.getters["pager/resourcesForLoading"].slice(0)]},H=function(e){return e.getters["pager/currentResourcesForLoading"].slice()}},154:(e,t,n)=>{n.d(t,{W:()=>T,Z:()=>_});var r=n(6142),o=n(1042),a=n(9364),i=n(90),s=n(9937),l=n(776),c=n(7476),d=n(4070);let g,u,p=null;const h={};function f(e){const t=parseInt(e[0]),n=parseInt(e[1]),r=parseInt(e[2]);return Math.round(299*t+587*n+114*r)/1e3>128?[0,0,0]:[255,255,255]}async function m(e){const t=(0,i.l)(e["second-text-color"]).join(","),n=e["mobile-app-icon-color"]||e["second-text-color"],r=e["mobile-app-header-color"]||e["second-color"],o=e["mobile-app-header-text-color"]||e["second-text-color"],a=(0,i.l)(e["second-color"]).join(","),s=(0,i.l)(e["second-button-color"]).join(","),l=f((0,i.l)(e["second-button-color"])).join(","),c="rgba("+(0,i.l)(e["second-button-color"]).join(",")+",0.5)";let g=e["background-image"];const h=(0,d.Z)(g);g=h?await b("background-image",h):"none","auto"===e["background-size"]?e["background-repeat"]="repeat":e["background-repeat"]="no-repeat",p=`   \n#publication,\n.publication-container.mobile\n{\n    background-color: ${e["second-color"]};\n}\n\n.publication-container.mobile .main-frame\n{\n    background-color: ${e["second-color"]};\n    \n    background-image: ${g};\n    background-position: ${e["background-position"]};\n    background-size: ${e["background-size"]};\n    background-repeat: ${e["background-repeat"]};\n}\n\n.publication-container.mobile .banner-notice.inside,\n.publication-container.mobile .top-bar-mobile,\n.publication-container.mobile .bottom-bar-mobile {\n    color: rgba(${t}, .9);\n    background-color: rgba(${a}, .9);\n    fill: rgba(${t}, .9);\n    border-color: ${c} !important;\n}\n.publication-container.mobile .banner-notice .in-app-warn-icon{\n    color: rgba(${t}, .6);\n    fill: rgba(${t}, .6);\n}\n.publication-container.mobile .banner-notice.inside{\n    border-bottom: 1px solid rgba(${t}, .5) !important;\n}\n\n.publication-container.mobile .banner-notice.inside .notice-text {\n    color: rgba(${t}, .9);\n}\n\n.publication-container.mobile .banner-notice .notice-text .link{\n    color: rgb(${t}) !important;\n}\n\n.publication-container.mobile .banner-notice .notice-text\n{\n    /*font-family: 'Open Sans', Helvetica, Arial, sans-serif;*/\n    /*font-weight: 600;*/\n}\n.publication-container.mobile .tool-window\n{\n    color: ${e["second-text-color"]};\n    background-color: ${e["second-color"]};\n}\n\n.publication-container.mobile .tool-window .tool-title-frame .close-button svg\n{\n    fill: ${n};\n}\n\n.publication-container.mobile .tool-title-frame\n{\n    background-color: ${r};\n    border-color: ${c} !important;\n}\n\n.publication-container.mobile .tool-title\n{\n    color: ${o};\n}\n\n.publication-container.mobile .bscroll-indicator\n{\n    border-color: rgba(${t}, .9)!important;\n    background-color: rgba(255, 255, 255, .5) !important;\n}\n\n/* Search */\n\n.publication-container.mobile .search-input-block input\n{\n    color: #596168;\n    border: 1px solid rgba(${t}, .2);\n    background-color: #fff;\n}\n\n.search-input-block .filters-icon svg {\n    fill: rgba(${t}, .6);\n}\n\n.search-input-block .filters-icon.active {\n    background: rgba(${t}, .15);\n}\n\n.search-input-block .filters-icon.active svg {\n    fill: ${e["second-text-color"]};\n}\n\n.publication-container.mobile .search-input-block input::placeholder\n{\n    color: #bababa;\n}\n\n.publication-container.mobile .search-input-block .search-icon,\n.publication-container.mobile .search-input-block .clear-icon\n{\n    fill: #596168;\n}\n\n.publication-container.mobile li.search-item\n{\n    border-top: 1px solid rgba(${t}, .4);\n}\n\n.publication-container.mobile li.search-item:last-child\n{\n    border-bottom: 1px solid rgba(${t}, .4);\n}\n\n.publication-container.mobile .search-item-title\n{\n    text-transform: none;\n\n    color: ${e["second-text-color"]};\n}\n\n.publication-container.mobile .search-item-p\n{\n    color: ${e["second-text-color"]};\n}\n\n.publication-container.mobile .search-item-more \n{\n    color: rgba(${t}, 0.7);\n}\n\n.publication-container.mobile .search-item-result b\n{\n    font-weight: bold;\n}\n\n/* TOC */\n\n.publication-container.mobile li.toc-item\n{\n    border-top: 1px solid rgba(${t}, .2);\n}\n\n.publication-container.mobile .toc-items > li.toc-item:first-child\n{\n    border-top: none;\n}\n\n.publication-container.mobile li.toc-item:last-child\n{\n    border-top: 1px solid rgba(${t}, .2);\n}\n\n.publication-container.mobile .list-item.toc-item-button svg.icon\n{\n    fill: ${e["second-text-color"]};\n}\n\n.publication-container.mobile .toc-item .page-label\n{\n    color: rgba(${t}, .6);\n}\n\n\n/* Thumbnails */\n\n.publication-container.mobile .th-spread-wrapper.double,\n.publication-container.mobile .th-spread-wrapper .th-item-wrapper:only-child,\n.publication-container.mobile .th-wrapper > .th-item-wrapper\n{\n    outline: 1px solid rgba(${t}, .20);\n}\n\n.publication-container.mobile .slide .th-spread-wrapper\n{\n    outline: none;\n}\n\n.publication-container.mobile .th-spread-wrapper.double.active,\n.publication-container.mobile .th-spread-wrapper.active .th-item-wrapper:only-child .th-img-element,\n.th-item-wrapper.active .th-img-element\n{\n    outline: #4A90E2 4px solid;\n}\n\n.publication-container.mobile .th-item-title\n{\n    font-weight: 600;\n}\n\n/* Downloads */\n\n.publication-container.mobile .download-header\n{\n    color: ${e["second-text-color"]};\n    border-color: ${c} !important;\n}\n.publication-container.mobile .downloads {\n    background-color: ${e["second-color"]};\n}\n\n.publication-container.mobile .download-item .download-icon svg,\n.publication-container.mobile .download-header .arrow svg\n{\n    fill: ${e["second-text-color"]};\n}\n\n.publication-container.mobile li.download-item\n{\n    border-top: 1px solid rgba(${t}, .4);\n}\n\n.publication-container.mobile li.download-item a\n{\n    text-decoration: none;\n    color: ${e["second-text-color"]};\n}\n\n.publication-container.mobile .download-size {\n    color: rgba(${t}, .6);\n}\n\n.publication-container.mobile .svg-logo\n{\n    fill: ${e["second-text-color"]};\n}\n\n.publication-container.mobile .page-progress-filler\n{\n    background-color: ${e["mobile-progress-color"]};\n}\n\n.publication-container .modal-notice {\n    background-color: rgba(${a}, .7);\n    border: 3px solid rgba(${t}, .2);\n    color: ${e["second-text-color"]};\n    fill: rgba(${t}, .8);\n}\n\n.publication-container .inapp-notice-button {\n    background-color: rgba(${s}, .8);\n    border: 1px solid ${c};\n    color: rgba(${l}, .6);\n}\n\n.checkbox-body {\n    border: 1px solid rgba(${t}, .2) !important;\n    background-color: #fff;\n}\n\n.checkbox-container .checkbox-body:after {\n    border-color: #596168;\n}\n`,u.textContent=p}const E=async function(e,t){e.skin.initialized&&("html"===e.info.version?(0,a.Z)((0,l.Z)().translatePath("skins/current/css/build.css"),(function(e){u=e,(0,o.Z)((0,l.Z)().translatePath("skins/current/templates.js"),(function(e){g=e,t.commit("skin/"+r.vG)}))})):(u=document.createElement("style"),u.setAttribute("id","skin-style"),(0,c.V)()&&u.setAttribute("nonce",(0,c.V)()),document.getElementsByTagName("head")[0].appendChild(u),await m(e.skin.styles)))},S=async function(e){if(e.skin.initialized)for(const t in e.skin.styles)e.skin.styles.hasOwnProperty(t)&&await y({param:t,value:e.skin.styles[t]},e)},y=async function(e,t){let{param:n,value:r}=e;if(!t.skin.templateLoaded)return;if("classes"===n)return;const o=function(e,t){const n=document.getElementsByTagName("head")[0],r=e+"-style";let o=document.getElementById(r);o||(o=document.createElement("style"),o.id=r,(0,c.V)()&&o.setAttribute("nonce",(0,c.V)())),window.FBPublication.SKIN_TEMPLATES[e]&&(o.innerHTML=window.FBPublication.SKIN_TEMPLATES[e](t),n.appendChild(o))};"background-size"===n&&o("background-repeat","auto"===r?"repeat":"no-repeat");const a=(0,d.Z)(r);if(a){r=await b(n,a)}o(n,r)},I=async function(e,t){let{param:n,value:r}=e;t.skin.initialized&&("html"===t.info.version?await y({param:n,value:r},t):await m(t.skin.styles))},b=async function(e,t){const n=await P(t);h[e]&&URL.revokeObjectURL(h[e]),h[e]=n;return'url("'+n+'")'},P=function(e){return new Promise(((t,n)=>{(0,s.Z)({url:e,callback:e=>{t(e)},errorback:e=>{n(e)}})}))};function T(e){g&&g.parentElement&&g.parentElement.removeChild(g),u&&u.parentElement&&u.parentElement.removeChild(u);for(const t in e.state.skin.styles){const e=t+"-style",n=document.getElementById(e);n&&n.parentElement&&n.parentElement.removeChild(n)}}const _=e=>{e.subscribe((async(t,n)=>{switch(t.type){case"skin/"+r.qg:await E(n,e);break;case"skin/"+r.vG:await S(n);break;case"skin/"+r.kd:await I(t.payload,n)}}))}},90:(e,t,n)=>{function r(e){let t;return t=e.match(/^#([0-9a-fA-F]{3})$/i),t?(t=t[1],[17*parseInt(t.charAt(0),16),17*parseInt(t.charAt(1),16),17*parseInt(t.charAt(2),16)]):(t=e.match(/^#([0-9a-fA-F]{6})$/i),t?(t=t[1],[parseInt(t.substr(0,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(4,2),16)]):-1!==e.indexOf("rgb")&&(t=e.match(/\d+(\.\d+)?%?/g),t)?t.map((e=>1*e)):[0,0,0])}function o(e){const t=299,n=667,r=114;return(e[0]*t+e[1]*n+e[2]*r)/(t+n+r)/255}n.d(t,{R:()=>o,l:()=>r})},9937:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(776),o=n(710);function a(e){let{url:t,crossOrigin:n,translateUrl:a=!0,autofillCrossOrigin:i=!0,callback:s,errorback:l}=e;const c={};i&&(n=(0,r.Z)().getCrossOrigin()),n&&(c["Access-Control-Allow-Origin"]=n),a&&(t=(0,r.Z)().translatePath(t)),(0,o.Z)({url:t,responseType:"blob",callback:e=>{const t=e.response,n=window.URL.createObjectURL(t);s(n)},errorback:l})}},4070:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(5392);function o(e){const t=/url\(['"]?([^'"]+)['"]?\)/g.exec(e);return(0,r.k)(t)&&2===t.length?t[1]:null}},2918:(e,t,n)=>{n.d(t,{Tj:()=>r,hl:()=>o,lx:()=>a});const r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={};return e.width/e.height>t.width/t.height?(r.width=t.width,r.height=e.height*(t.width/e.width)):(r.width=e.width*(t.height/e.height),r.height=t.height),n&&(r.width>e.width||r.height>e.height)?{width:e.width,height:e.height,top:(t.height-e.height)/2,left:(t.width-e.width)/2}:(r.top=(t.height-r.height)/2,r.left=(t.width-r.width)/2,r)},o=function(e,t){const n={};return e.width/e.height>t.width/t.height?(n.height=t.height,n.width=e.width*(t.height/e.height)):(n.height=e.height*(t.width/e.width),n.width=t.width),n},a=e=>{let{rect:t,bounds:n}=e;const o=r(t,n);return o.width/n.width<.99||o.height/n.height<.99}},4618:(e,t,n)=>{n.d(t,{X:()=>o});class r{constructor(){this.lastId=0}nextId(){return this.lastId+=1,this.lastId}reset(){this.lastId=0}}const o=new r},9364:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(320),o=n(7476);function a(e,t,a){let i,s=n.g.document.styleSheets.length;const l=function(e){const t=n.g.document.getElementsByTagName("head")[0];i=n.g.document.createElement("link"),i.href=e,i.type="text/css",i.rel="stylesheet",(0,o.V)()&&i.setAttribute("nonce",(0,o.V)()),(0,r.HD)(a)&&(i.id=a),a&&document.getElementById(a)?(t.replaceChild(i,document.getElementById(a)),s--):t.appendChild(i)},c=function(e){for(let t=0,o=n.g.document.styleSheets.length;t<o;t++)if((0,r.HD)(n.g.document.styleSheets[t].href)&&n.g.document.styleSheets[t].href.indexOf(e)>=0)return!0;return!1};(0,r.mf)(t)&&function(){const r=setInterval((function(){s<n.g.document.styleSheets.length&&c(e)&&(t(i),clearInterval(r))}),20)}(),l(e)}},1042:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(7476);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},a=arguments.length>3?arguments[3]:void 0;const i=n.g.document.getElementsByTagName("head")[0],s=n.g.document.createElement("script");s.type="text/javascript",s.src=e,(0,r.V)()&&s.setAttribute("nonce",(0,r.V)()),a&&s.setAttribute("crossOrigin",a),s.onload=function(){t(s)},s.onerror=function(e){o(e)},i.appendChild(s)}},5475:(e,t,n)=>{function r(){}n.d(t,{Z:()=>l});const o=/[\u0300-\u036f]/g,a={"ı":"i","ё":"е"},i="№℻ⓩ⻳⼀⿕㆖㆟㉇㉐㉠㊊㊰㋀㏿﷼",s=new RegExp(Object.keys(a).join("|"),"gi");r.normalize=function(e,t,n){let o;String.prototype.normalize||console.error("String does'nt have normalize function");try{o=this.encodeExceptions(e).normalize("NFKD")}catch(a){o=3===arguments.length?n:e}return t&&(o=r.toLowerCase(o)),o},r.toLowerCase=function(e){return e.toLowerCase().replace(o,"").replace(s,(e=>a[e]))},r.encodeExceptions=function(e){return e.replace(this.getUnicodeExceptions(),(e=>"&#"+e.charCodeAt(0)+";"))},r.decodeExceptions=function(e){return e.replace(/&#(\d+);/g,((e,t)=>`${String.fromCharCode(t)}`))},r.getUnicodeExceptions=function(){return new RegExp("["+i+"]","g")},r.getHtmlExceptions=function(){return new RegExp("("+i.replace(this.getUnicodeExceptions(),(e=>"|(&#"+e.charCodeAt(0)+";)")).slice(1)+")*","g")};const l=r},3624:(e,t,n)=>{n.d(t,{E:()=>a,r:()=>o});var r=n(5475);function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0;o=o||t.length;const a=10,i=t.substr(n,o),s=e.length/t.length,l=Math.floor(s*n-5*t.length/100);let c=Math.max(l-a,0),d=e.substr(c,o+2*a),g=r.Z.normalize(d,!0),u=g.indexOf(i);for(;u<0;)if(c+=a,d=e.substr(c,o+2*a),g=r.Z.normalize(d,!0),u=g.indexOf(i),c>=e.length&&(c=0,d=e,g=r.Z.normalize(d,!0),u=g.indexOf(i),u<0))return;const p={};let h=c,f=0;for(let m=0,E=g.length;m<E;m++){const e=r.Z.normalize(d.substr(m,1),!0).length;for(let t=0;t<e;t++){p[n-u+f+t]=h}f+=e,h++}return p[n-u+f]=h,p}function a(e){const t=[],n=e.split("\n");for(let r=1,o=n.length;r<o;r++)if(-1!==n[r].indexOf(String.fromCharCode(4))){const e=n[r].split(String.fromCharCode(4)),o=e[0].split(String.fromCharCode(2))[0];let a=0;for(let n=0,r=e.length;n<r;n++){const r=e[n].split(String.fromCharCode(2)),i=0===n?1:0,s="R"===r[i];s&&r.splice(i,1);const l=r[r.length-1].split(String.fromCharCode(3)).length;0===n?r[0]=o.substring(0,l):r.unshift(o.substring(a,a+l)),a+=l;const c={data:r,rtl:s};t.push(c)}}else{const e=n[r].split(String.fromCharCode(2)),o="R"===e[1];o&&e.splice(1,1);const a={data:e,rtl:o};t.push(a)}return t}}}]);